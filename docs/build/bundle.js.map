{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/stores.ts","../../src/components/InputGroup.svelte","../../node_modules/process-es6/browser.js","../../node_modules/rollup-plugin-node-globals/src/global.js","../../node_modules/nanoid/index.browser.js","../../src/components/InputInteger.svelte","../../src/components/InputBool.svelte","../../src/components/InputFloat.svelte","../../src/components/InputRadio.svelte","../../src/components/ColorDropdown.svelte","../../src/components/ColorInteger.svelte","../../src/components/InputSelect.svelte","../../src/ts/defs.ts","../../src/components/InputColor.svelte","../../src/components/InputCRUD.svelte","../../src/components/InputFile.svelte","../../node_modules/acorn/dist/acorn.es.js","../../node_modules/paper/dist/paper-full.js","../../src/ts/tiles/interpolation.ts","../../src/ts/tiles/peak.ts","../../src/ts/tiles/wave.ts","../../node_modules/random-weighted-choice/lib/random-weighted-choice.js","../../node_modules/pandemonium/random.js","../../node_modules/pandemonium/random-index.js","../../node_modules/pandemonium/choice.js","../../node_modules/pandemonium/dangerously-mutating-sample.js","../../node_modules/pandemonium/fisher-yates-sample.js","../../node_modules/pandemonium/geometric-reservoir-sample.js","../../node_modules/pandemonium/naive-sample.js","../../node_modules/pandemonium/random-string.js","../../node_modules/pandemonium/reservoir-sample.js","../../node_modules/pandemonium/sample-with-replacements.js","../../node_modules/pandemonium/shuffle-in-place.js","../../node_modules/pandemonium/shuffle.js","../../node_modules/pandemonium/weighted-random-index.js","../../node_modules/pandemonium/weighted-choice.js","../../node_modules/pandemonium/index.js","../../node_modules/@bbtgnn/canvasgrid/dist/index.modern.js","../../src/ts/drawOps.ts","../../src/ts/crudCanvas.ts","../../src/ts/tiles/line.ts","../../src/ts/draw.ts","../../src/components/InputThickness.svelte","../../node_modules/gifshot/dist/gifshot.js","../../src/ts/download.ts","../../src/App.svelte","../../src/main.ts"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.37.0' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from \"svelte/store\";\nexport const PatternStore = writable({\n    //\n    canvas: {\n        width: 600,\n        height: 450,\n    },\n    //\n    grid: {\n        rows: 10,\n        columns: 10,\n        cell_ratio: 0.75,\n        spacing: {\n            row: 0,\n            column: 0,\n        },\n        fill: false,\n    },\n    //\n    tiles: {\n        line: { density: 1 },\n        wave: { density: 1, squaring: 0.5 },\n        peak: { density: 1, squaring: 0.65 },\n    },\n    //\n    color: {\n        //\n        tiles: {\n            mode: \"tile\",\n            tile: {\n                line: \"#3366ff\",\n                wave: \"#66ff99\",\n                peak: \"#ff6666\",\n            },\n            distribution: {\n                \"#3366ff\": 1,\n                \"#66ff99\": 1,\n                \"#ff6666\": 1,\n                \"#ffffff\": 0,\n                \"#000000\": 0,\n            },\n        },\n        //\n        background: {\n            mode: \"distribution\",\n            tile: {\n                line: \"#3366ff\",\n                wave: \"#66ff99\",\n                peak: \"#ff6666\",\n            },\n            distribution: {\n                \"#3366ff\": 0,\n                \"#66ff99\": 0,\n                \"#ff6666\": 0,\n                \"#ffffff\": 1,\n                \"#000000\": 0,\n            },\n            gradient: {\n                first: {\n                    color: \"#66ff99\",\n                    position: \"topLeft\",\n                },\n                second: {\n                    color: \"#3366ff\",\n                    position: \"bottomRight\",\n                },\n            },\n        },\n    },\n    //\n    thickness: {\n        mode: \"values\",\n        values: [0.1, 0.15, 0.2, 0.25, 0.3, 0.35],\n        image: {\n            url: undefined,\n            steps: 3,\n            min: 0.1,\n            max: 0.4,\n        },\n    },\n    //\n    gif: {\n        duration: 4,\n        frameRate: 1,\n    },\n});\nexport const DefaultColorsStore = writable([\n    \"#3366ff\",\n    \"#66ff99\",\n    \"#ff6666\",\n    \"#ffffff\",\n    \"#000000\",\n]);\nexport const TextStore = writable({\n    tiles: {\n        line: \"Forma\",\n        wave: \"Materia\",\n        peak: \"Suono\",\n    },\n    color_modes: {\n        tile: \"Un colore per forma\",\n        distribution: \"Distribuzione di colore indipendente dalla forma\",\n        gradient: \"Sfumatura\",\n    },\n    thickness_modes: {\n        image: \"Immagine (ASCII)\",\n        values: \"Valori\",\n    },\n    gradient_positions: {\n        topLeft: \"⬉\",\n        topRight: \"⬈\",\n        bottomLeft: \"⬋\",\n        bottomRight: \"⬊\",\n        leftCenter: \"←\",\n        topCenter: \"↑\",\n        rightCenter: \"→\",\n        bottomCenter: \"↓\",\n        center: \"•\",\n    },\n});\n","<script lang=\"ts\">\n  export let label: string;\n</script>\n\n<div class=\"box\">\n  <h3>{label}</h3>\n  <slot />\n</div>\n\n<style>\n  div {\n    background-color: var(--cds-ui-01);\n    border-radius: var(--round);\n    margin-bottom: var(--aria);\n    padding: var(--aria);\n  }\n  h3 {\n    margin: 0;\n    font-weight: 500;\n    margin-bottom: var(--aria);\n  }\n</style>\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// This file replaces `index.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nimport { urlAlphabet } from './url-alphabet/index.js'\n\nif (process.env.NODE_ENV !== 'production') {\n  // All bundlers will remove this block in the production bundle.\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.product === 'ReactNative' &&\n    typeof crypto === 'undefined'\n  ) {\n    throw new Error(\n      'React Native does not have a built-in secure random generator. ' +\n        'If you don’t need unpredictable IDs use `nanoid/non-secure`. ' +\n        'For secure IDs, import `react-native-get-random-values` ' +\n        'before Nano ID.'\n    )\n  }\n  if (typeof msCrypto !== 'undefined' && typeof crypto === 'undefined') {\n    throw new Error(\n      'Import file with `if (!window.crypto) window.crypto = window.msCrypto`' +\n        ' before importing Nano ID to fix IE 11 support'\n    )\n  }\n  if (typeof crypto === 'undefined') {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n        'If you don’t need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\n\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\n\nlet customRandom = (alphabet, size, getRandom) => {\n  // First, a bitmask is necessary to generate the ID. The bitmask makes bytes\n  // values closer to the alphabet size. The bitmask calculates the closest\n  // `2^31 - 1` number, which exceeds the alphabet size.\n  // For example, the bitmask for the alphabet size 30 is 31 (00011111).\n  // `Math.clz32` is not used, because it is not available in browsers.\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  // Though, the bitmask solution is not perfect since the bytes exceeding\n  // the alphabet size are refused. Therefore, to reliably generate the ID,\n  // the random bytes redundancy has to be satisfied.\n\n  // Note: every hardware random generator call is performance expensive,\n  // because the system call for entropy collection takes a lot of time.\n  // So, to avoid additional system calls, extra bytes are requested in advance.\n\n  // Next, a step determines how many random bytes to generate.\n  // The number of random bytes gets decided upon the ID size, mask,\n  // alphabet size, and magic number 1.6 (using 1.6 peaks at performance\n  // according to benchmarks).\n\n  // `-~f => Math.ceil(f)` if f is a float\n  // `-~i => i + 1` if i is an integer\n  let step = -~((1.6 * mask * size) / alphabet.length)\n\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      // A compact alternative for `for (var i = 0; i < step; i++)`.\n      let j = step\n      while (j--) {\n        // Adding `|| ''` refuses a random byte that exceeds the alphabet size.\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\n\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  while (size--) {\n    // It is incorrect to use bytes exceeding the alphabet size.\n    // The following mask reduces the random byte in the 0-255 value\n    // range to the 0-63 value range. Therefore, adding hacks, such\n    // as empty string fallback or magic numbers, is unneccessary because\n    // the bitmask trims bytes down to the alphabet size.\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      // `0-9a-z`\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      // `A-Z`\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","<script lang=\"ts\">\n  /**\n   * Imports\n   */\n\n  import { nanoid } from \"nanoid\";\n  import { createEventDispatcher } from \"svelte\";\n\n  /**\n   * Parameters\n   */\n\n  export let label: string;\n  export let value: number;\n\n  /**\n   * Logic\n   */\n\n  // Dispatch function\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n\n  // Generating random id\n  const id: string = nanoid(5);\n</script>\n\n<div>\n  <label for={id}>{label}</label>\n  <input\n    {id}\n    class=\"input__number\"\n    type=\"number\"\n    on:change={dispatchUpdate}\n    bind:value\n    min=\"0\"\n    step=\"1\"\n  />\n</div>\n\n<style>\n  div {\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n    align-items: baseline;\n  }\n</style>\n","<script lang=\"ts\">\n  /**\n   * Imports\n   */\n\n  import { nanoid } from \"nanoid\";\n  import { createEventDispatcher } from \"svelte\";\n\n  /**\n   * Parameters\n   */\n\n  export let label: string;\n  export let value: boolean;\n\n  /**\n   * Logic\n   */\n\n  // Dispatch function\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n\n  // Generating random id\n  const id: string = nanoid(5);\n</script>\n\n<div>\n  <label for={id}>{label}</label>\n  <input\n    {id}\n    class=\"input__checkbox\"\n    type=\"checkbox\"\n    on:change={dispatchUpdate}\n    bind:checked={value}\n  />\n</div>\n\n<style>\n  div {\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n    align-items: center;\n  }\n</style>\n","<script lang=\"ts\">\n  /**\n   * Imports\n   */\n\n  import { nanoid } from \"nanoid\";\n  import { createEventDispatcher } from \"svelte\";\n\n  /**\n   * Parameters\n   */\n\n  export let label: string;\n  export let value: number;\n\n  /**\n   * Logic\n   */\n\n  // Dispatch function\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n\n  // Generating random id\n  const id: string = nanoid(5);\n</script>\n\n<div class=\"flex-between\">\n  <label for={id}>{label}</label>\n  <input\n    {id}\n    class=\"input__number\"\n    type=\"number\"\n    on:change={dispatchUpdate}\n    bind:value\n    min=\"0\"\n    step=\"0.01\"\n  />\n</div>\n","<script lang=\"ts\">\n  export let items: Array<any>;\n  export let labels: Record<any, string>;\n  export let value;\n\n  import { createEventDispatcher } from \"svelte\";\n  // Dispatch function\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n</script>\n\n{#each items as item}\n  <label class=\"radio__label\">\n    <input\n      type=\"radio\"\n      on:change={dispatchUpdate}\n      bind:group={value}\n      value={item}\n    />\n    {labels[item]}\n  </label>\n{/each}\n\n<style>\n  .radio__label {\n    margin-bottom: calc(var(--aria) / 2);\n    display: flex;\n    flex-flow: row-reverse nowrap;\n    justify-content: space-between;\n    align-items: center;\n    min-height: var(--input-h);\n    background-color: var(--cds-ui-02);\n    border-radius: var(--round-s);\n    padding: 10px;\n  }\n\n  input[type=\"radio\"] {\n    flex-shrink: 0;\n  }\n\n  .radio__label:hover {\n    background-color: var(--cds-ui-03);\n  }\n\n  label:last-child {\n    margin-bottom: 0;\n  }\n</style>\n","<script lang=\"ts\">\n  /**\n   * Imports\n   */\n\n  import { DefaultColorsStore } from \"../stores\";\n  import { createEventDispatcher } from \"svelte\";\n\n  /**\n   * Props\n   */\n\n  export let color: string;\n  export let label: string;\n\n  /**\n   * Logic\n   */\n\n  // Variables that keep track of the state\n  let isOpen = false;\n  const colors = $DefaultColorsStore;\n\n  // Dispatch function\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n</script>\n\n<div class=\"container\">\n  <!-- Label -->\n  <p>{label}</p>\n\n  <!-- Buttons -->\n  <div class=\"buttons\">\n    <button\n      on:click={() => {\n        isOpen = !isOpen;\n      }}\n      class=\"color color-current\"\n      style=\"background-color:{color}\"\n    />\n    {#if isOpen}\n      <div class=\"options\">\n        {#each colors as c}\n          {#if c != color}\n            <div\n              class=\"color color-option\"\n              on:click={() => {\n                color = c;\n                dispatchUpdate();\n                isOpen = !isOpen;\n              }}\n              style=\"background-color:{c};\"\n            />\n          {/if}\n        {/each}\n      </div>\n    {/if}\n  </div>\n</div>\n\n<style>\n  .container {\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n  }\n\n  .options {\n    background-color: var(--cds-ui-03);\n    padding: calc(var(--aria) / 2);\n    padding-bottom: 0;\n    display: flex;\n    flex-flow: row wrap;\n    border-radius: 0 0 var(--round-s) var(--round-s);\n  }\n\n  .color {\n    border-radius: var(--round-s);\n    height: var(--input-h);\n  }\n\n  .color:hover {\n    border: 2px solid var(--cds-text-01);\n  }\n\n  p {\n    margin: 0;\n    margin-top: 0.3em;\n  }\n\n  .color-option {\n    width: var(--input-h);\n    margin-right: calc(var(--aria) / 2);\n    border: 1px solid var(--cds-ui-01);\n    margin-bottom: calc(var(--aria) / 2);\n  }\n\n  .color-current {\n    display: block;\n    width: 100%;\n    border: none;\n  }\n\n  .container {\n    display: flex;\n    flex-flow: row nowrap;\n    margin-bottom: calc(var(--aria) / 2);\n  }\n\n  .container:last-child {\n    margin-bottom: 0;\n  }\n\n  .buttons {\n    flex-basis: 60%;\n    max-width: 180px;\n    margin-left: var(--aria);\n  }\n</style>\n","<script lang=\"ts\">\n  /**\n   * Imports\n   */\n\n  import { nanoid } from \"nanoid\";\n  import { createEventDispatcher } from \"svelte\";\n\n  /**\n   * Parameters\n   */\n\n  export let color: string;\n  export let value: number;\n\n  /**\n   * Logic\n   */\n\n  // Dispatch function\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n\n  // Generating random id\n  const id: string = nanoid(5);\n</script>\n\n<div class=\"\">\n  <label for={id} style=\"background-color:{color}; color:{color}\">{color}</label\n  >\n  <input\n    {id}\n    type=\"number\"\n    class=\"input__number\"\n    on:change={dispatchUpdate}\n    bind:value\n    min=\"0\"\n    step=\"1\"\n  />\n</div>\n\n<style>\n  div {\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  label {\n    flex-grow: 1;\n    height: var(--input-h);\n    border-radius: var(--round-s);\n    margin-right: calc(var(--aria) / 2);\n  }\n</style>\n","<script lang=\"ts\">\n  export let values: Array<{ value: string | number; text: string }>;\n  export let value: string | number;\n  export let label: string;\n\n  import { nanoid } from \"nanoid\";\n  import { createEventDispatcher } from \"svelte\";\n\n  // Dispatch function\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n\n  const id = nanoid(5);\n</script>\n\n<div>\n  <label for={id}>{label}</label>\n  <select {id} bind:value on:input={dispatchUpdate}>\n    {#each values as v}\n      <option value={v.value}>\n        {v.text}\n      </option>\n    {/each}\n  </select>\n</div>\n\n<style>\n  div {\n    display: flex;\n    flex-flow: row nowrap;\n    width: 100%;\n    justify-content: space-between;\n    height: var(--input-h);\n    align-items: center;\n  }\n\n  select {\n    color: black;\n    height: var(--input-h);\n  }\n</style>\n","/**\n * Types\n */\n/**\n * Reference for this:\n * https://www.typescriptlang.org/docs/handbook/2/indexed-access-types.html\n * https://thoughtbot.com/blog/the-trouble-with-typescript-enums\n * https://stackoverflow.com/questions/55020193/is-it-possible-to-create-a-typescript-type-from-an-array\n */\nexport const Tiles = [\"line\", \"wave\", \"peak\"];\nexport const ColorModes = [\"tile\", \"distribution\", \"gradient\"];\nexport const ThicknessModes = [\"image\", \"values\"];\nexport const GradientPositions = [\n    \"topLeft\",\n    \"topRight\",\n    \"bottomLeft\",\n    \"bottomRight\",\n    \"leftCenter\",\n    \"topCenter\",\n    \"rightCenter\",\n    \"bottomCenter\",\n    \"center\",\n];\n","<script lang=\"ts\">\n  /**\n   * Imports\n   */\n\n  import { DefaultColorsStore, PatternStore, TextStore } from \"../stores\";\n  import { createEventDispatcher } from \"svelte\";\n\n  // Modules\n  import { nanoid } from \"nanoid\";\n\n  // Svelte\n  import InputItem from \"./InputItem.svelte\";\n  import InputRadio from \"./InputRadio.svelte\";\n  import ColorDropdown from \"./ColorDropdown.svelte\";\n  import ColorInteger from \"./ColorInteger.svelte\";\n  import InputSelect from \"./InputSelect.svelte\";\n\n  // TS / Logic\n  import { Tiles, ColorModes, GradientPositions } from \"../ts/defs\";\n  import InputSeparator from \"./InputSeparator.svelte\";\n\n  /**\n   * Parameters\n   */\n\n  export let scope: string;\n  export let gradient: boolean = false;\n\n  /**\n   * Logic\n   */\n\n  // Dispatch function\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n\n  // Removing gradient if asked\n  const modes = [...ColorModes];\n  if (!gradient) {\n    modes.splice(modes.indexOf(\"gradient\"), 1);\n  }\n\n  // Creating array for select\n  const gradientpos: Array<{ value: string | number; text: string }> = [];\n  for (let gp of GradientPositions) {\n    gradientpos.push({\n      value: gp,\n      text: $TextStore.gradient_positions[gp],\n    });\n  }\n\n  // IDs for select\n  const ids = {\n    line: nanoid(5),\n    wave: nanoid(5),\n    peak: nanoid(5),\n  };\n</script>\n\n<!-- Radio buttons to select the color mode -->\n<InputItem>\n  <InputRadio\n    on:update={dispatchUpdate}\n    bind:value={$PatternStore.color[scope].mode}\n    items={modes}\n    labels={$TextStore.color_modes}\n  />\n</InputItem>\n\n<InputSeparator />\n\n<!-- If colormode is tile, we set color for each tile -->\n<div class=\"mt-2\">\n  {#if $PatternStore.color[scope].mode == \"tile\"}\n    {#each Tiles as t}\n      <ColorDropdown\n        label={$TextStore.tiles[t]}\n        bind:color={$PatternStore.color[scope].tile[t]}\n        on:update={dispatchUpdate}\n      />\n    {/each}\n    <!-- If colormode is distribution, for each color we specify its distribution -->\n  {:else if $PatternStore.color[scope].mode == \"distribution\"}\n    {#each $DefaultColorsStore as color}\n      <InputItem>\n        <ColorInteger\n          {color}\n          on:update={dispatchUpdate}\n          bind:value={$PatternStore.color[scope].distribution[color]}\n        />\n      </InputItem>\n    {/each}\n  {:else if $PatternStore.color[scope].mode == \"gradient\"}\n    <ColorDropdown\n      label=\"Colore 1\"\n      bind:color={$PatternStore.color[scope].gradient.first.color}\n      on:update={dispatchUpdate}\n    />\n    <!--  -->\n    <InputItem>\n      <InputSelect\n        values={gradientpos}\n        bind:value={$PatternStore.color.background.gradient.first.position}\n        on:update={dispatchUpdate}\n        label=\"Posizione\"\n      />\n    </InputItem>\n    <!--  -->\n    <ColorDropdown\n      label=\"Colore 2\"\n      bind:color={$PatternStore.color[scope].gradient.second.color}\n      on:update={dispatchUpdate}\n    />\n    <!--  -->\n    <InputItem>\n      <InputSelect\n        values={gradientpos}\n        bind:value={$PatternStore.color.background.gradient.second.position}\n        on:update={dispatchUpdate}\n        label=\"Posizione\"\n      />\n    </InputItem>\n  {/if}\n</div>\n\n<style>\n  .mt-2 {\n    margin-top: var(--aria);\n  }\n</style>\n","<script lang=\"ts\">\n  export let array: Array<number>;\n\n  import { createEventDispatcher } from \"svelte\";\n  const dispatch = createEventDispatcher();\n  function dispatchUpdate() {\n    dispatch(\"update\");\n  }\n\n  let add: number;\n</script>\n\n<div>\n  <div class=\"columns\">\n    {#each array as item}\n      <div class=\"row\">\n        <p>{item}</p>\n        <button\n          class=\"button-main\"\n          on:click={() => {\n            array = array.filter((i) => i !== item);\n            dispatchUpdate();\n          }}>-</button\n        >\n      </div>\n    {/each}\n  </div>\n  <div class=\"row row-input\">\n    <input class=\"input__number\" type=\"number\" bind:value={add} />\n    <button\n      class=\"button-main\"\n      on:click={() => {\n        array = [...array, add];\n        dispatchUpdate();\n      }}>+</button\n    >\n  </div>\n</div>\n\n<style>\n  p {\n    margin: 0;\n  }\n\n  button {\n    width: var(--input-h);\n  }\n\n  .columns {\n    columns: 2;\n    column-gap: calc(var(--aria) * 2);\n  }\n\n  .row {\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n    align-items: center;\n    break-inside: avoid;\n\n    padding: 5px 0;\n  }\n\n  .row-input {\n    margin-top: var(--aria);\n  }\n\n  input {\n    flex-grow: 1;\n    margin-right: var(--aria);\n  }\n</style>\n","<script lang=\"ts\">\n  import { createEventDispatcher } from \"svelte\";\n  import { nanoid } from \"nanoid\";\n\n  let fileinput;\n\n  const dispatch = createEventDispatcher();\n\n  const onFileSelected = (e) => {\n    let file = e.target.files[0];\n    let reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = (e) => {\n      dispatch(\"upload\", {\n        file: e.target.result,\n      });\n    };\n  };\n\n  const id = nanoid(5);\n</script>\n\n<!-- <label for={id}>Seleziona un file</label> -->\n<div class=\"container\">\n  <input\n    {id}\n    type=\"file\"\n    accept=\".jpg, .jpeg, .png\"\n    on:change={(e) => onFileSelected(e)}\n    bind:this={fileinput}\n  />\n</div>\n\n<style>\n  .container {\n    overflow: hidden;\n    height: var(--input-h);\n  }\n</style>\n","// Reserved word lists for various dialects of the language\n\nvar reservedWords = {\n  3: \"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\",\n  5: \"class enum extends super const export import\",\n  6: \"enum\",\n  strict: \"implements interface let package private protected public static yield\",\n  strictBind: \"eval arguments\"\n};\n\n// And the keywords\n\nvar ecma5AndLessKeywords = \"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\";\n\nvar keywords = {\n  5: ecma5AndLessKeywords,\n  6: ecma5AndLessKeywords + \" const class extends export import super\"\n};\n\nvar keywordRelationalOperator = /^in(stanceof)?$/;\n\n// ## Character categories\n\n// Big ugly regular expressions that match characters in the\n// whitespace, identifier, and identifier-start categories. These\n// are only applied when a character is found to actually have a\n// code point above 128.\n// Generated by `bin/generate-identifier-regex.js`.\n\nvar nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u037f\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u052f\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05d0-\\u05ea\\u05ef-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086a\\u08a0-\\u08b4\\u08b6-\\u08bd\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u09fc\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0af9\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c39\\u0c3d\\u0c58-\\u0c5a\\u0c60\\u0c61\\u0c80\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d54-\\u0d56\\u0d5f-\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f5\\u13f8-\\u13fd\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f8\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1878\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191e\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19b0-\\u19c9\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1c80-\\u1c88\\u1c90-\\u1cba\\u1cbd-\\u1cbf\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2118-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309b-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312f\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fef\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua69d\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua7b9\\ua7f7-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua8fd\\ua8fe\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\ua9e0-\\ua9e4\\ua9e6-\\ua9ef\\ua9fa-\\ua9fe\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa7e-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uab30-\\uab5a\\uab5c-\\uab65\\uab70-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\nvar nonASCIIidentifierChars = \"\\u200c\\u200d\\xb7\\u0300-\\u036f\\u0387\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u0669\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u06f0-\\u06f9\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07c0-\\u07c9\\u07eb-\\u07f3\\u07fd\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08d3-\\u08e1\\u08e3-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09cd\\u09d7\\u09e2\\u09e3\\u09e6-\\u09ef\\u09fe\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2\\u0ae3\\u0ae6-\\u0aef\\u0afa-\\u0aff\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c00-\\u0c04\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0c66-\\u0c6f\\u0c81-\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0ce6-\\u0cef\\u0d00-\\u0d03\\u0d3b\\u0d3c\\u0d3e-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57\\u0d62\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0de6-\\u0def\\u0df2\\u0df3\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0e50-\\u0e59\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f3e\\u0f3f\\u0f71-\\u0f84\\u0f86\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102b-\\u103e\\u1040-\\u1049\\u1056-\\u1059\\u105e-\\u1060\\u1062-\\u1064\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u1369-\\u1371\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b4-\\u17d3\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u18a9\\u1920-\\u192b\\u1930-\\u193b\\u1946-\\u194f\\u19d0-\\u19da\\u1a17-\\u1a1b\\u1a55-\\u1a5e\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1ab0-\\u1abd\\u1b00-\\u1b04\\u1b34-\\u1b44\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1b80-\\u1b82\\u1ba1-\\u1bad\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c24-\\u1c37\\u1c40-\\u1c49\\u1c50-\\u1c59\\u1cd0-\\u1cd2\\u1cd4-\\u1ce8\\u1ced\\u1cf2-\\u1cf4\\u1cf7-\\u1cf9\\u1dc0-\\u1df9\\u1dfb-\\u1dff\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2cef-\\u2cf1\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua620-\\ua629\\ua66f\\ua674-\\ua67d\\ua69e\\ua69f\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua823-\\ua827\\ua880\\ua881\\ua8b4-\\ua8c5\\ua8d0-\\ua8d9\\ua8e0-\\ua8f1\\ua8ff-\\ua909\\ua926-\\ua92d\\ua947-\\ua953\\ua980-\\ua983\\ua9b3-\\ua9c0\\ua9d0-\\ua9d9\\ua9e5\\ua9f0-\\ua9f9\\uaa29-\\uaa36\\uaa43\\uaa4c\\uaa4d\\uaa50-\\uaa59\\uaa7b-\\uaa7d\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uaaeb-\\uaaef\\uaaf5\\uaaf6\\uabe3-\\uabea\\uabec\\uabed\\uabf0-\\uabf9\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n\nvar nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\nvar nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\nnonASCIIidentifierStartChars = nonASCIIidentifierChars = null;\n\n// These are a run-length and offset encoded representation of the\n// >0xffff code points that are a valid part of identifiers. The\n// offset starts at 0x10000, and each pair of numbers represents an\n// offset to the next range, and then a size of the range. They were\n// generated by bin/generate-identifier-regex.js\n\n// eslint-disable-next-line comma-spacing\nvar astralIdentifierStartCodes = [0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541];\n\n// eslint-disable-next-line comma-spacing\nvar astralIdentifierCodes = [509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];\n\n// This has a complexity linear to the value of the code. The\n// assumption is that looking up astral identifier characters is\n// rare.\nfunction isInAstralSet(code, set) {\n  var pos = 0x10000;\n  for (var i = 0; i < set.length; i += 2) {\n    pos += set[i];\n    if (pos > code) { return false }\n    pos += set[i + 1];\n    if (pos >= code) { return true }\n  }\n}\n\n// Test whether a given character code starts an identifier.\n\nfunction isIdentifierStart(code, astral) {\n  if (code < 65) { return code === 36 }\n  if (code < 91) { return true }\n  if (code < 97) { return code === 95 }\n  if (code < 123) { return true }\n  if (code <= 0xffff) { return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code)) }\n  if (astral === false) { return false }\n  return isInAstralSet(code, astralIdentifierStartCodes)\n}\n\n// Test whether a given character is part of an identifier.\n\nfunction isIdentifierChar(code, astral) {\n  if (code < 48) { return code === 36 }\n  if (code < 58) { return true }\n  if (code < 65) { return false }\n  if (code < 91) { return true }\n  if (code < 97) { return code === 95 }\n  if (code < 123) { return true }\n  if (code <= 0xffff) { return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code)) }\n  if (astral === false) { return false }\n  return isInAstralSet(code, astralIdentifierStartCodes) || isInAstralSet(code, astralIdentifierCodes)\n}\n\n// ## Token types\n\n// The assignment of fine-grained, information-carrying type objects\n// allows the tokenizer to store the information it has about a\n// token in a way that is very cheap for the parser to look up.\n\n// All token type variables start with an underscore, to make them\n// easy to recognize.\n\n// The `beforeExpr` property is used to disambiguate between regular\n// expressions and divisions. It is set on all token types that can\n// be followed by an expression (thus, a slash after them would be a\n// regular expression).\n//\n// The `startsExpr` property is used to check if the token ends a\n// `yield` expression. It is set on all token types that either can\n// directly start an expression (like a quotation mark) or can\n// continue an expression (like the body of a string).\n//\n// `isLoop` marks a keyword as starting a loop, which is important\n// to know when parsing a label, in order to allow or disallow\n// continue jumps to that label.\n\nvar TokenType = function TokenType(label, conf) {\n  if ( conf === void 0 ) conf = {};\n\n  this.label = label;\n  this.keyword = conf.keyword;\n  this.beforeExpr = !!conf.beforeExpr;\n  this.startsExpr = !!conf.startsExpr;\n  this.isLoop = !!conf.isLoop;\n  this.isAssign = !!conf.isAssign;\n  this.prefix = !!conf.prefix;\n  this.postfix = !!conf.postfix;\n  this.binop = conf.binop || null;\n  this.updateContext = null;\n};\n\nfunction binop(name, prec) {\n  return new TokenType(name, {beforeExpr: true, binop: prec})\n}\nvar beforeExpr = {beforeExpr: true};\nvar startsExpr = {startsExpr: true};\n\n// Map keyword names to token types.\n\nvar keywords$1 = {};\n\n// Succinct definitions of keyword token types\nfunction kw(name, options) {\n  if ( options === void 0 ) options = {};\n\n  options.keyword = name;\n  return keywords$1[name] = new TokenType(name, options)\n}\n\nvar types = {\n  num: new TokenType(\"num\", startsExpr),\n  regexp: new TokenType(\"regexp\", startsExpr),\n  string: new TokenType(\"string\", startsExpr),\n  name: new TokenType(\"name\", startsExpr),\n  eof: new TokenType(\"eof\"),\n\n  // Punctuation token types.\n  bracketL: new TokenType(\"[\", {beforeExpr: true, startsExpr: true}),\n  bracketR: new TokenType(\"]\"),\n  braceL: new TokenType(\"{\", {beforeExpr: true, startsExpr: true}),\n  braceR: new TokenType(\"}\"),\n  parenL: new TokenType(\"(\", {beforeExpr: true, startsExpr: true}),\n  parenR: new TokenType(\")\"),\n  comma: new TokenType(\",\", beforeExpr),\n  semi: new TokenType(\";\", beforeExpr),\n  colon: new TokenType(\":\", beforeExpr),\n  dot: new TokenType(\".\"),\n  question: new TokenType(\"?\", beforeExpr),\n  arrow: new TokenType(\"=>\", beforeExpr),\n  template: new TokenType(\"template\"),\n  invalidTemplate: new TokenType(\"invalidTemplate\"),\n  ellipsis: new TokenType(\"...\", beforeExpr),\n  backQuote: new TokenType(\"`\", startsExpr),\n  dollarBraceL: new TokenType(\"${\", {beforeExpr: true, startsExpr: true}),\n\n  // Operators. These carry several kinds of properties to help the\n  // parser use them properly (the presence of these properties is\n  // what categorizes them as operators).\n  //\n  // `binop`, when present, specifies that this operator is a binary\n  // operator, and will refer to its precedence.\n  //\n  // `prefix` and `postfix` mark the operator as a prefix or postfix\n  // unary operator.\n  //\n  // `isAssign` marks all of `=`, `+=`, `-=` etcetera, which act as\n  // binary operators with a very low precedence, that should result\n  // in AssignmentExpression nodes.\n\n  eq: new TokenType(\"=\", {beforeExpr: true, isAssign: true}),\n  assign: new TokenType(\"_=\", {beforeExpr: true, isAssign: true}),\n  incDec: new TokenType(\"++/--\", {prefix: true, postfix: true, startsExpr: true}),\n  prefix: new TokenType(\"!/~\", {beforeExpr: true, prefix: true, startsExpr: true}),\n  logicalOR: binop(\"||\", 1),\n  logicalAND: binop(\"&&\", 2),\n  bitwiseOR: binop(\"|\", 3),\n  bitwiseXOR: binop(\"^\", 4),\n  bitwiseAND: binop(\"&\", 5),\n  equality: binop(\"==/!=/===/!==\", 6),\n  relational: binop(\"</>/<=/>=\", 7),\n  bitShift: binop(\"<</>>/>>>\", 8),\n  plusMin: new TokenType(\"+/-\", {beforeExpr: true, binop: 9, prefix: true, startsExpr: true}),\n  modulo: binop(\"%\", 10),\n  star: binop(\"*\", 10),\n  slash: binop(\"/\", 10),\n  starstar: new TokenType(\"**\", {beforeExpr: true}),\n\n  // Keyword token types.\n  _break: kw(\"break\"),\n  _case: kw(\"case\", beforeExpr),\n  _catch: kw(\"catch\"),\n  _continue: kw(\"continue\"),\n  _debugger: kw(\"debugger\"),\n  _default: kw(\"default\", beforeExpr),\n  _do: kw(\"do\", {isLoop: true, beforeExpr: true}),\n  _else: kw(\"else\", beforeExpr),\n  _finally: kw(\"finally\"),\n  _for: kw(\"for\", {isLoop: true}),\n  _function: kw(\"function\", startsExpr),\n  _if: kw(\"if\"),\n  _return: kw(\"return\", beforeExpr),\n  _switch: kw(\"switch\"),\n  _throw: kw(\"throw\", beforeExpr),\n  _try: kw(\"try\"),\n  _var: kw(\"var\"),\n  _const: kw(\"const\"),\n  _while: kw(\"while\", {isLoop: true}),\n  _with: kw(\"with\"),\n  _new: kw(\"new\", {beforeExpr: true, startsExpr: true}),\n  _this: kw(\"this\", startsExpr),\n  _super: kw(\"super\", startsExpr),\n  _class: kw(\"class\", startsExpr),\n  _extends: kw(\"extends\", beforeExpr),\n  _export: kw(\"export\"),\n  _import: kw(\"import\"),\n  _null: kw(\"null\", startsExpr),\n  _true: kw(\"true\", startsExpr),\n  _false: kw(\"false\", startsExpr),\n  _in: kw(\"in\", {beforeExpr: true, binop: 7}),\n  _instanceof: kw(\"instanceof\", {beforeExpr: true, binop: 7}),\n  _typeof: kw(\"typeof\", {beforeExpr: true, prefix: true, startsExpr: true}),\n  _void: kw(\"void\", {beforeExpr: true, prefix: true, startsExpr: true}),\n  _delete: kw(\"delete\", {beforeExpr: true, prefix: true, startsExpr: true})\n};\n\n// Matches a whole line break (where CRLF is considered a single\n// line break). Used to count lines.\n\nvar lineBreak = /\\r\\n?|\\n|\\u2028|\\u2029/;\nvar lineBreakG = new RegExp(lineBreak.source, \"g\");\n\nfunction isNewLine(code, ecma2019String) {\n  return code === 10 || code === 13 || (!ecma2019String && (code === 0x2028 || code === 0x2029))\n}\n\nvar nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n\nvar skipWhiteSpace = /(?:\\s|\\/\\/.*|\\/\\*[^]*?\\*\\/)*/g;\n\nvar ref = Object.prototype;\nvar hasOwnProperty = ref.hasOwnProperty;\nvar toString = ref.toString;\n\n// Checks if an object has a property.\n\nfunction has(obj, propName) {\n  return hasOwnProperty.call(obj, propName)\n}\n\nvar isArray = Array.isArray || (function (obj) { return (\n  toString.call(obj) === \"[object Array]\"\n); });\n\n// These are used when `options.locations` is on, for the\n// `startLoc` and `endLoc` properties.\n\nvar Position = function Position(line, col) {\n  this.line = line;\n  this.column = col;\n};\n\nPosition.prototype.offset = function offset (n) {\n  return new Position(this.line, this.column + n)\n};\n\nvar SourceLocation = function SourceLocation(p, start, end) {\n  this.start = start;\n  this.end = end;\n  if (p.sourceFile !== null) { this.source = p.sourceFile; }\n};\n\n// The `getLineInfo` function is mostly useful when the\n// `locations` option is off (for performance reasons) and you\n// want to find the line/column position for a given character\n// offset. `input` should be the code string that the offset refers\n// into.\n\nfunction getLineInfo(input, offset) {\n  for (var line = 1, cur = 0;;) {\n    lineBreakG.lastIndex = cur;\n    var match = lineBreakG.exec(input);\n    if (match && match.index < offset) {\n      ++line;\n      cur = match.index + match[0].length;\n    } else {\n      return new Position(line, offset - cur)\n    }\n  }\n}\n\n// A second optional argument can be given to further configure\n// the parser process. These options are recognized:\n\nvar defaultOptions = {\n  // `ecmaVersion` indicates the ECMAScript version to parse. Must\n  // be either 3, 5, 6 (2015), 7 (2016), or 8 (2017). This influences support\n  // for strict mode, the set of reserved words, and support for\n  // new syntax features. The default is 7.\n  ecmaVersion: 7,\n  // `sourceType` indicates the mode the code should be parsed in.\n  // Can be either `\"script\"` or `\"module\"`. This influences global\n  // strict mode and parsing of `import` and `export` declarations.\n  sourceType: \"script\",\n  // `onInsertedSemicolon` can be a callback that will be called\n  // when a semicolon is automatically inserted. It will be passed\n  // th position of the comma as an offset, and if `locations` is\n  // enabled, it is given the location as a `{line, column}` object\n  // as second argument.\n  onInsertedSemicolon: null,\n  // `onTrailingComma` is similar to `onInsertedSemicolon`, but for\n  // trailing commas.\n  onTrailingComma: null,\n  // By default, reserved words are only enforced if ecmaVersion >= 5.\n  // Set `allowReserved` to a boolean value to explicitly turn this on\n  // an off. When this option has the value \"never\", reserved words\n  // and keywords can also not be used as property names.\n  allowReserved: null,\n  // When enabled, a return at the top level is not considered an\n  // error.\n  allowReturnOutsideFunction: false,\n  // When enabled, import/export statements are not constrained to\n  // appearing at the top of the program.\n  allowImportExportEverywhere: false,\n  // When enabled, await identifiers are allowed to appear at the top-level scope,\n  // but they are still not allowed in non-async functions.\n  allowAwaitOutsideFunction: false,\n  // When enabled, hashbang directive in the beginning of file\n  // is allowed and treated as a line comment.\n  allowHashBang: false,\n  // When `locations` is on, `loc` properties holding objects with\n  // `start` and `end` properties in `{line, column}` form (with\n  // line being 1-based and column 0-based) will be attached to the\n  // nodes.\n  locations: false,\n  // A function can be passed as `onToken` option, which will\n  // cause Acorn to call that function with object in the same\n  // format as tokens returned from `tokenizer().getToken()`. Note\n  // that you are not allowed to call the parser from the\n  // callback—that will corrupt its internal state.\n  onToken: null,\n  // A function can be passed as `onComment` option, which will\n  // cause Acorn to call that function with `(block, text, start,\n  // end)` parameters whenever a comment is skipped. `block` is a\n  // boolean indicating whether this is a block (`/* */`) comment,\n  // `text` is the content of the comment, and `start` and `end` are\n  // character offsets that denote the start and end of the comment.\n  // When the `locations` option is on, two more parameters are\n  // passed, the full `{line, column}` locations of the start and\n  // end of the comments. Note that you are not allowed to call the\n  // parser from the callback—that will corrupt its internal state.\n  onComment: null,\n  // Nodes have their start and end characters offsets recorded in\n  // `start` and `end` properties (directly on the node, rather than\n  // the `loc` object, which holds line/column data. To also add a\n  // [semi-standardized][range] `range` property holding a `[start,\n  // end]` array with the same numbers, set the `ranges` option to\n  // `true`.\n  //\n  // [range]: https://bugzilla.mozilla.org/show_bug.cgi?id=745678\n  ranges: false,\n  // It is possible to parse multiple files into a single AST by\n  // passing the tree produced by parsing the first file as\n  // `program` option in subsequent parses. This will add the\n  // toplevel forms of the parsed file to the `Program` (top) node\n  // of an existing parse tree.\n  program: null,\n  // When `locations` is on, you can pass this to record the source\n  // file in every node's `loc` object.\n  sourceFile: null,\n  // This value, if given, is stored in every node, whether\n  // `locations` is on or off.\n  directSourceFile: null,\n  // When enabled, parenthesized expressions are represented by\n  // (non-standard) ParenthesizedExpression nodes\n  preserveParens: false,\n  plugins: {}\n};\n\n// Interpret and default an options object\n\nfunction getOptions(opts) {\n  var options = {};\n\n  for (var opt in defaultOptions)\n    { options[opt] = opts && has(opts, opt) ? opts[opt] : defaultOptions[opt]; }\n\n  if (options.ecmaVersion >= 2015)\n    { options.ecmaVersion -= 2009; }\n\n  if (options.allowReserved == null)\n    { options.allowReserved = options.ecmaVersion < 5; }\n\n  if (isArray(options.onToken)) {\n    var tokens = options.onToken;\n    options.onToken = function (token) { return tokens.push(token); };\n  }\n  if (isArray(options.onComment))\n    { options.onComment = pushComment(options, options.onComment); }\n\n  return options\n}\n\nfunction pushComment(options, array) {\n  return function(block, text, start, end, startLoc, endLoc) {\n    var comment = {\n      type: block ? \"Block\" : \"Line\",\n      value: text,\n      start: start,\n      end: end\n    };\n    if (options.locations)\n      { comment.loc = new SourceLocation(this, startLoc, endLoc); }\n    if (options.ranges)\n      { comment.range = [start, end]; }\n    array.push(comment);\n  }\n}\n\n// Registered plugins\nvar plugins = {};\n\nfunction keywordRegexp(words) {\n  return new RegExp(\"^(?:\" + words.replace(/ /g, \"|\") + \")$\")\n}\n\nvar Parser = function Parser(options, input, startPos) {\n  this.options = options = getOptions(options);\n  this.sourceFile = options.sourceFile;\n  this.keywords = keywordRegexp(keywords[options.ecmaVersion >= 6 ? 6 : 5]);\n  var reserved = \"\";\n  if (!options.allowReserved) {\n    for (var v = options.ecmaVersion;; v--)\n      { if (reserved = reservedWords[v]) { break } }\n    if (options.sourceType === \"module\") { reserved += \" await\"; }\n  }\n  this.reservedWords = keywordRegexp(reserved);\n  var reservedStrict = (reserved ? reserved + \" \" : \"\") + reservedWords.strict;\n  this.reservedWordsStrict = keywordRegexp(reservedStrict);\n  this.reservedWordsStrictBind = keywordRegexp(reservedStrict + \" \" + reservedWords.strictBind);\n  this.input = String(input);\n\n  // Used to signal to callers of `readWord1` whether the word\n  // contained any escape sequences. This is needed because words with\n  // escape sequences must not be interpreted as keywords.\n  this.containsEsc = false;\n\n  // Load plugins\n  this.loadPlugins(options.plugins);\n\n  // Set up token state\n\n  // The current position of the tokenizer in the input.\n  if (startPos) {\n    this.pos = startPos;\n    this.lineStart = this.input.lastIndexOf(\"\\n\", startPos - 1) + 1;\n    this.curLine = this.input.slice(0, this.lineStart).split(lineBreak).length;\n  } else {\n    this.pos = this.lineStart = 0;\n    this.curLine = 1;\n  }\n\n  // Properties of the current token:\n  // Its type\n  this.type = types.eof;\n  // For tokens that include more information than their type, the value\n  this.value = null;\n  // Its start and end offset\n  this.start = this.end = this.pos;\n  // And, if locations are used, the {line, column} object\n  // corresponding to those offsets\n  this.startLoc = this.endLoc = this.curPosition();\n\n  // Position information for the previous token\n  this.lastTokEndLoc = this.lastTokStartLoc = null;\n  this.lastTokStart = this.lastTokEnd = this.pos;\n\n  // The context stack is used to superficially track syntactic\n  // context to predict whether a regular expression is allowed in a\n  // given position.\n  this.context = this.initialContext();\n  this.exprAllowed = true;\n\n  // Figure out if it's a module code.\n  this.inModule = options.sourceType === \"module\";\n  this.strict = this.inModule || this.strictDirective(this.pos);\n\n  // Used to signify the start of a potential arrow function\n  this.potentialArrowAt = -1;\n\n  // Flags to track whether we are in a function, a generator, an async function.\n  this.inFunction = this.inGenerator = this.inAsync = false;\n  // Positions to delayed-check that yield/await does not exist in default parameters.\n  this.yieldPos = this.awaitPos = 0;\n  // Labels in scope.\n  this.labels = [];\n\n  // If enabled, skip leading hashbang line.\n  if (this.pos === 0 && options.allowHashBang && this.input.slice(0, 2) === \"#!\")\n    { this.skipLineComment(2); }\n\n  // Scope tracking for duplicate variable names (see scope.js)\n  this.scopeStack = [];\n  this.enterFunctionScope();\n\n  // For RegExp validation\n  this.regexpState = null;\n};\n\n// DEPRECATED Kept for backwards compatibility until 3.0 in case a plugin uses them\nParser.prototype.isKeyword = function isKeyword (word) { return this.keywords.test(word) };\nParser.prototype.isReservedWord = function isReservedWord (word) { return this.reservedWords.test(word) };\n\nParser.prototype.extend = function extend (name, f) {\n  this[name] = f(this[name]);\n};\n\nParser.prototype.loadPlugins = function loadPlugins (pluginConfigs) {\n    var this$1 = this;\n\n  for (var name in pluginConfigs) {\n    var plugin = plugins[name];\n    if (!plugin) { throw new Error(\"Plugin '\" + name + \"' not found\") }\n    plugin(this$1, pluginConfigs[name]);\n  }\n};\n\nParser.prototype.parse = function parse () {\n  var node = this.options.program || this.startNode();\n  this.nextToken();\n  return this.parseTopLevel(node)\n};\n\nvar pp = Parser.prototype;\n\n// ## Parser utilities\n\nvar literal = /^(?:'((?:\\\\.|[^'])*?)'|\"((?:\\\\.|[^\"])*?)\"|;)/;\npp.strictDirective = function(start) {\n  var this$1 = this;\n\n  for (;;) {\n    skipWhiteSpace.lastIndex = start;\n    start += skipWhiteSpace.exec(this$1.input)[0].length;\n    var match = literal.exec(this$1.input.slice(start));\n    if (!match) { return false }\n    if ((match[1] || match[2]) === \"use strict\") { return true }\n    start += match[0].length;\n  }\n};\n\n// Predicate that tests whether the next token is of the given\n// type, and if yes, consumes it as a side effect.\n\npp.eat = function(type) {\n  if (this.type === type) {\n    this.next();\n    return true\n  } else {\n    return false\n  }\n};\n\n// Tests whether parsed token is a contextual keyword.\n\npp.isContextual = function(name) {\n  return this.type === types.name && this.value === name && !this.containsEsc\n};\n\n// Consumes contextual keyword if possible.\n\npp.eatContextual = function(name) {\n  if (!this.isContextual(name)) { return false }\n  this.next();\n  return true\n};\n\n// Asserts that following token is given contextual keyword.\n\npp.expectContextual = function(name) {\n  if (!this.eatContextual(name)) { this.unexpected(); }\n};\n\n// Test whether a semicolon can be inserted at the current position.\n\npp.canInsertSemicolon = function() {\n  return this.type === types.eof ||\n    this.type === types.braceR ||\n    lineBreak.test(this.input.slice(this.lastTokEnd, this.start))\n};\n\npp.insertSemicolon = function() {\n  if (this.canInsertSemicolon()) {\n    if (this.options.onInsertedSemicolon)\n      { this.options.onInsertedSemicolon(this.lastTokEnd, this.lastTokEndLoc); }\n    return true\n  }\n};\n\n// Consume a semicolon, or, failing that, see if we are allowed to\n// pretend that there is a semicolon at this position.\n\npp.semicolon = function() {\n  if (!this.eat(types.semi) && !this.insertSemicolon()) { this.unexpected(); }\n};\n\npp.afterTrailingComma = function(tokType, notNext) {\n  if (this.type === tokType) {\n    if (this.options.onTrailingComma)\n      { this.options.onTrailingComma(this.lastTokStart, this.lastTokStartLoc); }\n    if (!notNext)\n      { this.next(); }\n    return true\n  }\n};\n\n// Expect a token of a given type. If found, consume it, otherwise,\n// raise an unexpected token error.\n\npp.expect = function(type) {\n  this.eat(type) || this.unexpected();\n};\n\n// Raise an unexpected token error.\n\npp.unexpected = function(pos) {\n  this.raise(pos != null ? pos : this.start, \"Unexpected token\");\n};\n\nfunction DestructuringErrors() {\n  this.shorthandAssign =\n  this.trailingComma =\n  this.parenthesizedAssign =\n  this.parenthesizedBind =\n  this.doubleProto =\n    -1;\n}\n\npp.checkPatternErrors = function(refDestructuringErrors, isAssign) {\n  if (!refDestructuringErrors) { return }\n  if (refDestructuringErrors.trailingComma > -1)\n    { this.raiseRecoverable(refDestructuringErrors.trailingComma, \"Comma is not permitted after the rest element\"); }\n  var parens = isAssign ? refDestructuringErrors.parenthesizedAssign : refDestructuringErrors.parenthesizedBind;\n  if (parens > -1) { this.raiseRecoverable(parens, \"Parenthesized pattern\"); }\n};\n\npp.checkExpressionErrors = function(refDestructuringErrors, andThrow) {\n  if (!refDestructuringErrors) { return false }\n  var shorthandAssign = refDestructuringErrors.shorthandAssign;\n  var doubleProto = refDestructuringErrors.doubleProto;\n  if (!andThrow) { return shorthandAssign >= 0 || doubleProto >= 0 }\n  if (shorthandAssign >= 0)\n    { this.raise(shorthandAssign, \"Shorthand property assignments are valid only in destructuring patterns\"); }\n  if (doubleProto >= 0)\n    { this.raiseRecoverable(doubleProto, \"Redefinition of __proto__ property\"); }\n};\n\npp.checkYieldAwaitInDefaultParams = function() {\n  if (this.yieldPos && (!this.awaitPos || this.yieldPos < this.awaitPos))\n    { this.raise(this.yieldPos, \"Yield expression cannot be a default value\"); }\n  if (this.awaitPos)\n    { this.raise(this.awaitPos, \"Await expression cannot be a default value\"); }\n};\n\npp.isSimpleAssignTarget = function(expr) {\n  if (expr.type === \"ParenthesizedExpression\")\n    { return this.isSimpleAssignTarget(expr.expression) }\n  return expr.type === \"Identifier\" || expr.type === \"MemberExpression\"\n};\n\nvar pp$1 = Parser.prototype;\n\n// ### Statement parsing\n\n// Parse a program. Initializes the parser, reads any number of\n// statements, and wraps them in a Program node.  Optionally takes a\n// `program` argument.  If present, the statements will be appended\n// to its body instead of creating a new node.\n\npp$1.parseTopLevel = function(node) {\n  var this$1 = this;\n\n  var exports = {};\n  if (!node.body) { node.body = []; }\n  while (this.type !== types.eof) {\n    var stmt = this$1.parseStatement(true, true, exports);\n    node.body.push(stmt);\n  }\n  this.adaptDirectivePrologue(node.body);\n  this.next();\n  if (this.options.ecmaVersion >= 6) {\n    node.sourceType = this.options.sourceType;\n  }\n  return this.finishNode(node, \"Program\")\n};\n\nvar loopLabel = {kind: \"loop\"};\nvar switchLabel = {kind: \"switch\"};\n\npp$1.isLet = function() {\n  if (this.options.ecmaVersion < 6 || !this.isContextual(\"let\")) { return false }\n  skipWhiteSpace.lastIndex = this.pos;\n  var skip = skipWhiteSpace.exec(this.input);\n  var next = this.pos + skip[0].length, nextCh = this.input.charCodeAt(next);\n  if (nextCh === 91 || nextCh === 123) { return true } // '{' and '['\n  if (isIdentifierStart(nextCh, true)) {\n    var pos = next + 1;\n    while (isIdentifierChar(this.input.charCodeAt(pos), true)) { ++pos; }\n    var ident = this.input.slice(next, pos);\n    if (!keywordRelationalOperator.test(ident)) { return true }\n  }\n  return false\n};\n\n// check 'async [no LineTerminator here] function'\n// - 'async /*foo*/ function' is OK.\n// - 'async /*\\n*/ function' is invalid.\npp$1.isAsyncFunction = function() {\n  if (this.options.ecmaVersion < 8 || !this.isContextual(\"async\"))\n    { return false }\n\n  skipWhiteSpace.lastIndex = this.pos;\n  var skip = skipWhiteSpace.exec(this.input);\n  var next = this.pos + skip[0].length;\n  return !lineBreak.test(this.input.slice(this.pos, next)) &&\n    this.input.slice(next, next + 8) === \"function\" &&\n    (next + 8 === this.input.length || !isIdentifierChar(this.input.charAt(next + 8)))\n};\n\n// Parse a single statement.\n//\n// If expecting a statement and finding a slash operator, parse a\n// regular expression literal. This is to handle cases like\n// `if (foo) /blah/.exec(foo)`, where looking at the previous token\n// does not help.\n\npp$1.parseStatement = function(declaration, topLevel, exports) {\n  var starttype = this.type, node = this.startNode(), kind;\n\n  if (this.isLet()) {\n    starttype = types._var;\n    kind = \"let\";\n  }\n\n  // Most types of statements are recognized by the keyword they\n  // start with. Many are trivial to parse, some require a bit of\n  // complexity.\n\n  switch (starttype) {\n  case types._break: case types._continue: return this.parseBreakContinueStatement(node, starttype.keyword)\n  case types._debugger: return this.parseDebuggerStatement(node)\n  case types._do: return this.parseDoStatement(node)\n  case types._for: return this.parseForStatement(node)\n  case types._function:\n    if (!declaration && this.options.ecmaVersion >= 6) { this.unexpected(); }\n    return this.parseFunctionStatement(node, false)\n  case types._class:\n    if (!declaration) { this.unexpected(); }\n    return this.parseClass(node, true)\n  case types._if: return this.parseIfStatement(node)\n  case types._return: return this.parseReturnStatement(node)\n  case types._switch: return this.parseSwitchStatement(node)\n  case types._throw: return this.parseThrowStatement(node)\n  case types._try: return this.parseTryStatement(node)\n  case types._const: case types._var:\n    kind = kind || this.value;\n    if (!declaration && kind !== \"var\") { this.unexpected(); }\n    return this.parseVarStatement(node, kind)\n  case types._while: return this.parseWhileStatement(node)\n  case types._with: return this.parseWithStatement(node)\n  case types.braceL: return this.parseBlock()\n  case types.semi: return this.parseEmptyStatement(node)\n  case types._export:\n  case types._import:\n    if (!this.options.allowImportExportEverywhere) {\n      if (!topLevel)\n        { this.raise(this.start, \"'import' and 'export' may only appear at the top level\"); }\n      if (!this.inModule)\n        { this.raise(this.start, \"'import' and 'export' may appear only with 'sourceType: module'\"); }\n    }\n    return starttype === types._import ? this.parseImport(node) : this.parseExport(node, exports)\n\n    // If the statement does not start with a statement keyword or a\n    // brace, it's an ExpressionStatement or LabeledStatement. We\n    // simply start parsing an expression, and afterwards, if the\n    // next token is a colon and the expression was a simple\n    // Identifier node, we switch to interpreting it as a label.\n  default:\n    if (this.isAsyncFunction()) {\n      if (!declaration) { this.unexpected(); }\n      this.next();\n      return this.parseFunctionStatement(node, true)\n    }\n\n    var maybeName = this.value, expr = this.parseExpression();\n    if (starttype === types.name && expr.type === \"Identifier\" && this.eat(types.colon))\n      { return this.parseLabeledStatement(node, maybeName, expr) }\n    else { return this.parseExpressionStatement(node, expr) }\n  }\n};\n\npp$1.parseBreakContinueStatement = function(node, keyword) {\n  var this$1 = this;\n\n  var isBreak = keyword === \"break\";\n  this.next();\n  if (this.eat(types.semi) || this.insertSemicolon()) { node.label = null; }\n  else if (this.type !== types.name) { this.unexpected(); }\n  else {\n    node.label = this.parseIdent();\n    this.semicolon();\n  }\n\n  // Verify that there is an actual destination to break or\n  // continue to.\n  var i = 0;\n  for (; i < this.labels.length; ++i) {\n    var lab = this$1.labels[i];\n    if (node.label == null || lab.name === node.label.name) {\n      if (lab.kind != null && (isBreak || lab.kind === \"loop\")) { break }\n      if (node.label && isBreak) { break }\n    }\n  }\n  if (i === this.labels.length) { this.raise(node.start, \"Unsyntactic \" + keyword); }\n  return this.finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\")\n};\n\npp$1.parseDebuggerStatement = function(node) {\n  this.next();\n  this.semicolon();\n  return this.finishNode(node, \"DebuggerStatement\")\n};\n\npp$1.parseDoStatement = function(node) {\n  this.next();\n  this.labels.push(loopLabel);\n  node.body = this.parseStatement(false);\n  this.labels.pop();\n  this.expect(types._while);\n  node.test = this.parseParenExpression();\n  if (this.options.ecmaVersion >= 6)\n    { this.eat(types.semi); }\n  else\n    { this.semicolon(); }\n  return this.finishNode(node, \"DoWhileStatement\")\n};\n\n// Disambiguating between a `for` and a `for`/`in` or `for`/`of`\n// loop is non-trivial. Basically, we have to parse the init `var`\n// statement or expression, disallowing the `in` operator (see\n// the second parameter to `parseExpression`), and then check\n// whether the next token is `in` or `of`. When there is no init\n// part (semicolon immediately after the opening parenthesis), it\n// is a regular `for` loop.\n\npp$1.parseForStatement = function(node) {\n  this.next();\n  var awaitAt = (this.options.ecmaVersion >= 9 && (this.inAsync || (!this.inFunction && this.options.allowAwaitOutsideFunction)) && this.eatContextual(\"await\")) ? this.lastTokStart : -1;\n  this.labels.push(loopLabel);\n  this.enterLexicalScope();\n  this.expect(types.parenL);\n  if (this.type === types.semi) {\n    if (awaitAt > -1) { this.unexpected(awaitAt); }\n    return this.parseFor(node, null)\n  }\n  var isLet = this.isLet();\n  if (this.type === types._var || this.type === types._const || isLet) {\n    var init$1 = this.startNode(), kind = isLet ? \"let\" : this.value;\n    this.next();\n    this.parseVar(init$1, true, kind);\n    this.finishNode(init$1, \"VariableDeclaration\");\n    if ((this.type === types._in || (this.options.ecmaVersion >= 6 && this.isContextual(\"of\"))) && init$1.declarations.length === 1 &&\n        !(kind !== \"var\" && init$1.declarations[0].init)) {\n      if (this.options.ecmaVersion >= 9) {\n        if (this.type === types._in) {\n          if (awaitAt > -1) { this.unexpected(awaitAt); }\n        } else { node.await = awaitAt > -1; }\n      }\n      return this.parseForIn(node, init$1)\n    }\n    if (awaitAt > -1) { this.unexpected(awaitAt); }\n    return this.parseFor(node, init$1)\n  }\n  var refDestructuringErrors = new DestructuringErrors;\n  var init = this.parseExpression(true, refDestructuringErrors);\n  if (this.type === types._in || (this.options.ecmaVersion >= 6 && this.isContextual(\"of\"))) {\n    if (this.options.ecmaVersion >= 9) {\n      if (this.type === types._in) {\n        if (awaitAt > -1) { this.unexpected(awaitAt); }\n      } else { node.await = awaitAt > -1; }\n    }\n    this.toAssignable(init, false, refDestructuringErrors);\n    this.checkLVal(init);\n    return this.parseForIn(node, init)\n  } else {\n    this.checkExpressionErrors(refDestructuringErrors, true);\n  }\n  if (awaitAt > -1) { this.unexpected(awaitAt); }\n  return this.parseFor(node, init)\n};\n\npp$1.parseFunctionStatement = function(node, isAsync) {\n  this.next();\n  return this.parseFunction(node, true, false, isAsync)\n};\n\npp$1.parseIfStatement = function(node) {\n  this.next();\n  node.test = this.parseParenExpression();\n  // allow function declarations in branches, but only in non-strict mode\n  node.consequent = this.parseStatement(!this.strict && this.type === types._function);\n  node.alternate = this.eat(types._else) ? this.parseStatement(!this.strict && this.type === types._function) : null;\n  return this.finishNode(node, \"IfStatement\")\n};\n\npp$1.parseReturnStatement = function(node) {\n  if (!this.inFunction && !this.options.allowReturnOutsideFunction)\n    { this.raise(this.start, \"'return' outside of function\"); }\n  this.next();\n\n  // In `return` (and `break`/`continue`), the keywords with\n  // optional arguments, we eagerly look for a semicolon or the\n  // possibility to insert one.\n\n  if (this.eat(types.semi) || this.insertSemicolon()) { node.argument = null; }\n  else { node.argument = this.parseExpression(); this.semicolon(); }\n  return this.finishNode(node, \"ReturnStatement\")\n};\n\npp$1.parseSwitchStatement = function(node) {\n  var this$1 = this;\n\n  this.next();\n  node.discriminant = this.parseParenExpression();\n  node.cases = [];\n  this.expect(types.braceL);\n  this.labels.push(switchLabel);\n  this.enterLexicalScope();\n\n  // Statements under must be grouped (by label) in SwitchCase\n  // nodes. `cur` is used to keep the node that we are currently\n  // adding statements to.\n\n  var cur;\n  for (var sawDefault = false; this.type !== types.braceR;) {\n    if (this$1.type === types._case || this$1.type === types._default) {\n      var isCase = this$1.type === types._case;\n      if (cur) { this$1.finishNode(cur, \"SwitchCase\"); }\n      node.cases.push(cur = this$1.startNode());\n      cur.consequent = [];\n      this$1.next();\n      if (isCase) {\n        cur.test = this$1.parseExpression();\n      } else {\n        if (sawDefault) { this$1.raiseRecoverable(this$1.lastTokStart, \"Multiple default clauses\"); }\n        sawDefault = true;\n        cur.test = null;\n      }\n      this$1.expect(types.colon);\n    } else {\n      if (!cur) { this$1.unexpected(); }\n      cur.consequent.push(this$1.parseStatement(true));\n    }\n  }\n  this.exitLexicalScope();\n  if (cur) { this.finishNode(cur, \"SwitchCase\"); }\n  this.next(); // Closing brace\n  this.labels.pop();\n  return this.finishNode(node, \"SwitchStatement\")\n};\n\npp$1.parseThrowStatement = function(node) {\n  this.next();\n  if (lineBreak.test(this.input.slice(this.lastTokEnd, this.start)))\n    { this.raise(this.lastTokEnd, \"Illegal newline after throw\"); }\n  node.argument = this.parseExpression();\n  this.semicolon();\n  return this.finishNode(node, \"ThrowStatement\")\n};\n\n// Reused empty array added for node fields that are always empty.\n\nvar empty = [];\n\npp$1.parseTryStatement = function(node) {\n  this.next();\n  node.block = this.parseBlock();\n  node.handler = null;\n  if (this.type === types._catch) {\n    var clause = this.startNode();\n    this.next();\n    if (this.eat(types.parenL)) {\n      clause.param = this.parseBindingAtom();\n      this.enterLexicalScope();\n      this.checkLVal(clause.param, \"let\");\n      this.expect(types.parenR);\n    } else {\n      if (this.options.ecmaVersion < 10) { this.unexpected(); }\n      clause.param = null;\n      this.enterLexicalScope();\n    }\n    clause.body = this.parseBlock(false);\n    this.exitLexicalScope();\n    node.handler = this.finishNode(clause, \"CatchClause\");\n  }\n  node.finalizer = this.eat(types._finally) ? this.parseBlock() : null;\n  if (!node.handler && !node.finalizer)\n    { this.raise(node.start, \"Missing catch or finally clause\"); }\n  return this.finishNode(node, \"TryStatement\")\n};\n\npp$1.parseVarStatement = function(node, kind) {\n  this.next();\n  this.parseVar(node, false, kind);\n  this.semicolon();\n  return this.finishNode(node, \"VariableDeclaration\")\n};\n\npp$1.parseWhileStatement = function(node) {\n  this.next();\n  node.test = this.parseParenExpression();\n  this.labels.push(loopLabel);\n  node.body = this.parseStatement(false);\n  this.labels.pop();\n  return this.finishNode(node, \"WhileStatement\")\n};\n\npp$1.parseWithStatement = function(node) {\n  if (this.strict) { this.raise(this.start, \"'with' in strict mode\"); }\n  this.next();\n  node.object = this.parseParenExpression();\n  node.body = this.parseStatement(false);\n  return this.finishNode(node, \"WithStatement\")\n};\n\npp$1.parseEmptyStatement = function(node) {\n  this.next();\n  return this.finishNode(node, \"EmptyStatement\")\n};\n\npp$1.parseLabeledStatement = function(node, maybeName, expr) {\n  var this$1 = this;\n\n  for (var i$1 = 0, list = this$1.labels; i$1 < list.length; i$1 += 1)\n    {\n    var label = list[i$1];\n\n    if (label.name === maybeName)\n      { this$1.raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n  } }\n  var kind = this.type.isLoop ? \"loop\" : this.type === types._switch ? \"switch\" : null;\n  for (var i = this.labels.length - 1; i >= 0; i--) {\n    var label$1 = this$1.labels[i];\n    if (label$1.statementStart === node.start) {\n      // Update information about previous labels on this node\n      label$1.statementStart = this$1.start;\n      label$1.kind = kind;\n    } else { break }\n  }\n  this.labels.push({name: maybeName, kind: kind, statementStart: this.start});\n  node.body = this.parseStatement(true);\n  if (node.body.type === \"ClassDeclaration\" ||\n      node.body.type === \"VariableDeclaration\" && node.body.kind !== \"var\" ||\n      node.body.type === \"FunctionDeclaration\" && (this.strict || node.body.generator || node.body.async))\n    { this.raiseRecoverable(node.body.start, \"Invalid labeled declaration\"); }\n  this.labels.pop();\n  node.label = expr;\n  return this.finishNode(node, \"LabeledStatement\")\n};\n\npp$1.parseExpressionStatement = function(node, expr) {\n  node.expression = expr;\n  this.semicolon();\n  return this.finishNode(node, \"ExpressionStatement\")\n};\n\n// Parse a semicolon-enclosed block of statements, handling `\"use\n// strict\"` declarations when `allowStrict` is true (used for\n// function bodies).\n\npp$1.parseBlock = function(createNewLexicalScope) {\n  var this$1 = this;\n  if ( createNewLexicalScope === void 0 ) createNewLexicalScope = true;\n\n  var node = this.startNode();\n  node.body = [];\n  this.expect(types.braceL);\n  if (createNewLexicalScope) {\n    this.enterLexicalScope();\n  }\n  while (!this.eat(types.braceR)) {\n    var stmt = this$1.parseStatement(true);\n    node.body.push(stmt);\n  }\n  if (createNewLexicalScope) {\n    this.exitLexicalScope();\n  }\n  return this.finishNode(node, \"BlockStatement\")\n};\n\n// Parse a regular `for` loop. The disambiguation code in\n// `parseStatement` will already have parsed the init statement or\n// expression.\n\npp$1.parseFor = function(node, init) {\n  node.init = init;\n  this.expect(types.semi);\n  node.test = this.type === types.semi ? null : this.parseExpression();\n  this.expect(types.semi);\n  node.update = this.type === types.parenR ? null : this.parseExpression();\n  this.expect(types.parenR);\n  this.exitLexicalScope();\n  node.body = this.parseStatement(false);\n  this.labels.pop();\n  return this.finishNode(node, \"ForStatement\")\n};\n\n// Parse a `for`/`in` and `for`/`of` loop, which are almost\n// same from parser's perspective.\n\npp$1.parseForIn = function(node, init) {\n  var type = this.type === types._in ? \"ForInStatement\" : \"ForOfStatement\";\n  this.next();\n  if (type === \"ForInStatement\") {\n    if (init.type === \"AssignmentPattern\" ||\n      (init.type === \"VariableDeclaration\" && init.declarations[0].init != null &&\n       (this.strict || init.declarations[0].id.type !== \"Identifier\")))\n      { this.raise(init.start, \"Invalid assignment in for-in loop head\"); }\n  }\n  node.left = init;\n  node.right = type === \"ForInStatement\" ? this.parseExpression() : this.parseMaybeAssign();\n  this.expect(types.parenR);\n  this.exitLexicalScope();\n  node.body = this.parseStatement(false);\n  this.labels.pop();\n  return this.finishNode(node, type)\n};\n\n// Parse a list of variable declarations.\n\npp$1.parseVar = function(node, isFor, kind) {\n  var this$1 = this;\n\n  node.declarations = [];\n  node.kind = kind;\n  for (;;) {\n    var decl = this$1.startNode();\n    this$1.parseVarId(decl, kind);\n    if (this$1.eat(types.eq)) {\n      decl.init = this$1.parseMaybeAssign(isFor);\n    } else if (kind === \"const\" && !(this$1.type === types._in || (this$1.options.ecmaVersion >= 6 && this$1.isContextual(\"of\")))) {\n      this$1.unexpected();\n    } else if (decl.id.type !== \"Identifier\" && !(isFor && (this$1.type === types._in || this$1.isContextual(\"of\")))) {\n      this$1.raise(this$1.lastTokEnd, \"Complex binding patterns require an initialization value\");\n    } else {\n      decl.init = null;\n    }\n    node.declarations.push(this$1.finishNode(decl, \"VariableDeclarator\"));\n    if (!this$1.eat(types.comma)) { break }\n  }\n  return node\n};\n\npp$1.parseVarId = function(decl, kind) {\n  decl.id = this.parseBindingAtom(kind);\n  this.checkLVal(decl.id, kind, false);\n};\n\n// Parse a function declaration or literal (depending on the\n// `isStatement` parameter).\n\npp$1.parseFunction = function(node, isStatement, allowExpressionBody, isAsync) {\n  this.initFunction(node);\n  if (this.options.ecmaVersion >= 9 || this.options.ecmaVersion >= 6 && !isAsync)\n    { node.generator = this.eat(types.star); }\n  if (this.options.ecmaVersion >= 8)\n    { node.async = !!isAsync; }\n\n  if (isStatement) {\n    node.id = isStatement === \"nullableID\" && this.type !== types.name ? null : this.parseIdent();\n    if (node.id) {\n      this.checkLVal(node.id, this.inModule && !this.inFunction ? \"let\" : \"var\");\n    }\n  }\n\n  var oldInGen = this.inGenerator, oldInAsync = this.inAsync,\n      oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldInFunc = this.inFunction;\n  this.inGenerator = node.generator;\n  this.inAsync = node.async;\n  this.yieldPos = 0;\n  this.awaitPos = 0;\n  this.inFunction = true;\n  this.enterFunctionScope();\n\n  if (!isStatement)\n    { node.id = this.type === types.name ? this.parseIdent() : null; }\n\n  this.parseFunctionParams(node);\n  this.parseFunctionBody(node, allowExpressionBody);\n\n  this.inGenerator = oldInGen;\n  this.inAsync = oldInAsync;\n  this.yieldPos = oldYieldPos;\n  this.awaitPos = oldAwaitPos;\n  this.inFunction = oldInFunc;\n  return this.finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\")\n};\n\npp$1.parseFunctionParams = function(node) {\n  this.expect(types.parenL);\n  node.params = this.parseBindingList(types.parenR, false, this.options.ecmaVersion >= 8);\n  this.checkYieldAwaitInDefaultParams();\n};\n\n// Parse a class declaration or literal (depending on the\n// `isStatement` parameter).\n\npp$1.parseClass = function(node, isStatement) {\n  var this$1 = this;\n\n  this.next();\n\n  this.parseClassId(node, isStatement);\n  this.parseClassSuper(node);\n  var classBody = this.startNode();\n  var hadConstructor = false;\n  classBody.body = [];\n  this.expect(types.braceL);\n  while (!this.eat(types.braceR)) {\n    var member = this$1.parseClassMember(classBody);\n    if (member && member.type === \"MethodDefinition\" && member.kind === \"constructor\") {\n      if (hadConstructor) { this$1.raise(member.start, \"Duplicate constructor in the same class\"); }\n      hadConstructor = true;\n    }\n  }\n  node.body = this.finishNode(classBody, \"ClassBody\");\n  return this.finishNode(node, isStatement ? \"ClassDeclaration\" : \"ClassExpression\")\n};\n\npp$1.parseClassMember = function(classBody) {\n  var this$1 = this;\n\n  if (this.eat(types.semi)) { return null }\n\n  var method = this.startNode();\n  var tryContextual = function (k, noLineBreak) {\n    if ( noLineBreak === void 0 ) noLineBreak = false;\n\n    var start = this$1.start, startLoc = this$1.startLoc;\n    if (!this$1.eatContextual(k)) { return false }\n    if (this$1.type !== types.parenL && (!noLineBreak || !this$1.canInsertSemicolon())) { return true }\n    if (method.key) { this$1.unexpected(); }\n    method.computed = false;\n    method.key = this$1.startNodeAt(start, startLoc);\n    method.key.name = k;\n    this$1.finishNode(method.key, \"Identifier\");\n    return false\n  };\n\n  method.kind = \"method\";\n  method.static = tryContextual(\"static\");\n  var isGenerator = this.eat(types.star);\n  var isAsync = false;\n  if (!isGenerator) {\n    if (this.options.ecmaVersion >= 8 && tryContextual(\"async\", true)) {\n      isAsync = true;\n      isGenerator = this.options.ecmaVersion >= 9 && this.eat(types.star);\n    } else if (tryContextual(\"get\")) {\n      method.kind = \"get\";\n    } else if (tryContextual(\"set\")) {\n      method.kind = \"set\";\n    }\n  }\n  if (!method.key) { this.parsePropertyName(method); }\n  var key = method.key;\n  if (!method.computed && !method.static && (key.type === \"Identifier\" && key.name === \"constructor\" ||\n      key.type === \"Literal\" && key.value === \"constructor\")) {\n    if (method.kind !== \"method\") { this.raise(key.start, \"Constructor can't have get/set modifier\"); }\n    if (isGenerator) { this.raise(key.start, \"Constructor can't be a generator\"); }\n    if (isAsync) { this.raise(key.start, \"Constructor can't be an async method\"); }\n    method.kind = \"constructor\";\n  } else if (method.static && key.type === \"Identifier\" && key.name === \"prototype\") {\n    this.raise(key.start, \"Classes may not have a static property named prototype\");\n  }\n  this.parseClassMethod(classBody, method, isGenerator, isAsync);\n  if (method.kind === \"get\" && method.value.params.length !== 0)\n    { this.raiseRecoverable(method.value.start, \"getter should have no params\"); }\n  if (method.kind === \"set\" && method.value.params.length !== 1)\n    { this.raiseRecoverable(method.value.start, \"setter should have exactly one param\"); }\n  if (method.kind === \"set\" && method.value.params[0].type === \"RestElement\")\n    { this.raiseRecoverable(method.value.params[0].start, \"Setter cannot use rest params\"); }\n  return method\n};\n\npp$1.parseClassMethod = function(classBody, method, isGenerator, isAsync) {\n  method.value = this.parseMethod(isGenerator, isAsync);\n  classBody.body.push(this.finishNode(method, \"MethodDefinition\"));\n};\n\npp$1.parseClassId = function(node, isStatement) {\n  node.id = this.type === types.name ? this.parseIdent() : isStatement === true ? this.unexpected() : null;\n};\n\npp$1.parseClassSuper = function(node) {\n  node.superClass = this.eat(types._extends) ? this.parseExprSubscripts() : null;\n};\n\n// Parses module export declaration.\n\npp$1.parseExport = function(node, exports) {\n  var this$1 = this;\n\n  this.next();\n  // export * from '...'\n  if (this.eat(types.star)) {\n    this.expectContextual(\"from\");\n    if (this.type !== types.string) { this.unexpected(); }\n    node.source = this.parseExprAtom();\n    this.semicolon();\n    return this.finishNode(node, \"ExportAllDeclaration\")\n  }\n  if (this.eat(types._default)) { // export default ...\n    this.checkExport(exports, \"default\", this.lastTokStart);\n    var isAsync;\n    if (this.type === types._function || (isAsync = this.isAsyncFunction())) {\n      var fNode = this.startNode();\n      this.next();\n      if (isAsync) { this.next(); }\n      node.declaration = this.parseFunction(fNode, \"nullableID\", false, isAsync);\n    } else if (this.type === types._class) {\n      var cNode = this.startNode();\n      node.declaration = this.parseClass(cNode, \"nullableID\");\n    } else {\n      node.declaration = this.parseMaybeAssign();\n      this.semicolon();\n    }\n    return this.finishNode(node, \"ExportDefaultDeclaration\")\n  }\n  // export var|const|let|function|class ...\n  if (this.shouldParseExportStatement()) {\n    node.declaration = this.parseStatement(true);\n    if (node.declaration.type === \"VariableDeclaration\")\n      { this.checkVariableExport(exports, node.declaration.declarations); }\n    else\n      { this.checkExport(exports, node.declaration.id.name, node.declaration.id.start); }\n    node.specifiers = [];\n    node.source = null;\n  } else { // export { x, y as z } [from '...']\n    node.declaration = null;\n    node.specifiers = this.parseExportSpecifiers(exports);\n    if (this.eatContextual(\"from\")) {\n      if (this.type !== types.string) { this.unexpected(); }\n      node.source = this.parseExprAtom();\n    } else {\n      // check for keywords used as local names\n      for (var i = 0, list = node.specifiers; i < list.length; i += 1) {\n        var spec = list[i];\n\n        this$1.checkUnreserved(spec.local);\n      }\n\n      node.source = null;\n    }\n    this.semicolon();\n  }\n  return this.finishNode(node, \"ExportNamedDeclaration\")\n};\n\npp$1.checkExport = function(exports, name, pos) {\n  if (!exports) { return }\n  if (has(exports, name))\n    { this.raiseRecoverable(pos, \"Duplicate export '\" + name + \"'\"); }\n  exports[name] = true;\n};\n\npp$1.checkPatternExport = function(exports, pat) {\n  var this$1 = this;\n\n  var type = pat.type;\n  if (type === \"Identifier\")\n    { this.checkExport(exports, pat.name, pat.start); }\n  else if (type === \"ObjectPattern\")\n    { for (var i = 0, list = pat.properties; i < list.length; i += 1)\n      {\n        var prop = list[i];\n\n        this$1.checkPatternExport(exports, prop);\n      } }\n  else if (type === \"ArrayPattern\")\n    { for (var i$1 = 0, list$1 = pat.elements; i$1 < list$1.length; i$1 += 1) {\n      var elt = list$1[i$1];\n\n        if (elt) { this$1.checkPatternExport(exports, elt); }\n    } }\n  else if (type === \"Property\")\n    { this.checkPatternExport(exports, pat.value); }\n  else if (type === \"AssignmentPattern\")\n    { this.checkPatternExport(exports, pat.left); }\n  else if (type === \"RestElement\")\n    { this.checkPatternExport(exports, pat.argument); }\n  else if (type === \"ParenthesizedExpression\")\n    { this.checkPatternExport(exports, pat.expression); }\n};\n\npp$1.checkVariableExport = function(exports, decls) {\n  var this$1 = this;\n\n  if (!exports) { return }\n  for (var i = 0, list = decls; i < list.length; i += 1)\n    {\n    var decl = list[i];\n\n    this$1.checkPatternExport(exports, decl.id);\n  }\n};\n\npp$1.shouldParseExportStatement = function() {\n  return this.type.keyword === \"var\" ||\n    this.type.keyword === \"const\" ||\n    this.type.keyword === \"class\" ||\n    this.type.keyword === \"function\" ||\n    this.isLet() ||\n    this.isAsyncFunction()\n};\n\n// Parses a comma-separated list of module exports.\n\npp$1.parseExportSpecifiers = function(exports) {\n  var this$1 = this;\n\n  var nodes = [], first = true;\n  // export { x, y as z } [from '...']\n  this.expect(types.braceL);\n  while (!this.eat(types.braceR)) {\n    if (!first) {\n      this$1.expect(types.comma);\n      if (this$1.afterTrailingComma(types.braceR)) { break }\n    } else { first = false; }\n\n    var node = this$1.startNode();\n    node.local = this$1.parseIdent(true);\n    node.exported = this$1.eatContextual(\"as\") ? this$1.parseIdent(true) : node.local;\n    this$1.checkExport(exports, node.exported.name, node.exported.start);\n    nodes.push(this$1.finishNode(node, \"ExportSpecifier\"));\n  }\n  return nodes\n};\n\n// Parses import declaration.\n\npp$1.parseImport = function(node) {\n  this.next();\n  // import '...'\n  if (this.type === types.string) {\n    node.specifiers = empty;\n    node.source = this.parseExprAtom();\n  } else {\n    node.specifiers = this.parseImportSpecifiers();\n    this.expectContextual(\"from\");\n    node.source = this.type === types.string ? this.parseExprAtom() : this.unexpected();\n  }\n  this.semicolon();\n  return this.finishNode(node, \"ImportDeclaration\")\n};\n\n// Parses a comma-separated list of module imports.\n\npp$1.parseImportSpecifiers = function() {\n  var this$1 = this;\n\n  var nodes = [], first = true;\n  if (this.type === types.name) {\n    // import defaultObj, { x, y as z } from '...'\n    var node = this.startNode();\n    node.local = this.parseIdent();\n    this.checkLVal(node.local, \"let\");\n    nodes.push(this.finishNode(node, \"ImportDefaultSpecifier\"));\n    if (!this.eat(types.comma)) { return nodes }\n  }\n  if (this.type === types.star) {\n    var node$1 = this.startNode();\n    this.next();\n    this.expectContextual(\"as\");\n    node$1.local = this.parseIdent();\n    this.checkLVal(node$1.local, \"let\");\n    nodes.push(this.finishNode(node$1, \"ImportNamespaceSpecifier\"));\n    return nodes\n  }\n  this.expect(types.braceL);\n  while (!this.eat(types.braceR)) {\n    if (!first) {\n      this$1.expect(types.comma);\n      if (this$1.afterTrailingComma(types.braceR)) { break }\n    } else { first = false; }\n\n    var node$2 = this$1.startNode();\n    node$2.imported = this$1.parseIdent(true);\n    if (this$1.eatContextual(\"as\")) {\n      node$2.local = this$1.parseIdent();\n    } else {\n      this$1.checkUnreserved(node$2.imported);\n      node$2.local = node$2.imported;\n    }\n    this$1.checkLVal(node$2.local, \"let\");\n    nodes.push(this$1.finishNode(node$2, \"ImportSpecifier\"));\n  }\n  return nodes\n};\n\n// Set `ExpressionStatement#directive` property for directive prologues.\npp$1.adaptDirectivePrologue = function(statements) {\n  for (var i = 0; i < statements.length && this.isDirectiveCandidate(statements[i]); ++i) {\n    statements[i].directive = statements[i].expression.raw.slice(1, -1);\n  }\n};\npp$1.isDirectiveCandidate = function(statement) {\n  return (\n    statement.type === \"ExpressionStatement\" &&\n    statement.expression.type === \"Literal\" &&\n    typeof statement.expression.value === \"string\" &&\n    // Reject parenthesized strings.\n    (this.input[statement.start] === \"\\\"\" || this.input[statement.start] === \"'\")\n  )\n};\n\nvar pp$2 = Parser.prototype;\n\n// Convert existing expression atom to assignable pattern\n// if possible.\n\npp$2.toAssignable = function(node, isBinding, refDestructuringErrors) {\n  var this$1 = this;\n\n  if (this.options.ecmaVersion >= 6 && node) {\n    switch (node.type) {\n    case \"Identifier\":\n      if (this.inAsync && node.name === \"await\")\n        { this.raise(node.start, \"Can not use 'await' as identifier inside an async function\"); }\n      break\n\n    case \"ObjectPattern\":\n    case \"ArrayPattern\":\n    case \"RestElement\":\n      break\n\n    case \"ObjectExpression\":\n      node.type = \"ObjectPattern\";\n      if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n      for (var i = 0, list = node.properties; i < list.length; i += 1) {\n        var prop = list[i];\n\n      this$1.toAssignable(prop, isBinding);\n        // Early error:\n        //   AssignmentRestProperty[Yield, Await] :\n        //     `...` DestructuringAssignmentTarget[Yield, Await]\n        //\n        //   It is a Syntax Error if |DestructuringAssignmentTarget| is an |ArrayLiteral| or an |ObjectLiteral|.\n        if (\n          prop.type === \"RestElement\" &&\n          (prop.argument.type === \"ArrayPattern\" || prop.argument.type === \"ObjectPattern\")\n        ) {\n          this$1.raise(prop.argument.start, \"Unexpected token\");\n        }\n      }\n      break\n\n    case \"Property\":\n      // AssignmentProperty has type === \"Property\"\n      if (node.kind !== \"init\") { this.raise(node.key.start, \"Object pattern can't contain getter or setter\"); }\n      this.toAssignable(node.value, isBinding);\n      break\n\n    case \"ArrayExpression\":\n      node.type = \"ArrayPattern\";\n      if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n      this.toAssignableList(node.elements, isBinding);\n      break\n\n    case \"SpreadElement\":\n      node.type = \"RestElement\";\n      this.toAssignable(node.argument, isBinding);\n      if (node.argument.type === \"AssignmentPattern\")\n        { this.raise(node.argument.start, \"Rest elements cannot have a default value\"); }\n      break\n\n    case \"AssignmentExpression\":\n      if (node.operator !== \"=\") { this.raise(node.left.end, \"Only '=' operator can be used for specifying default value.\"); }\n      node.type = \"AssignmentPattern\";\n      delete node.operator;\n      this.toAssignable(node.left, isBinding);\n      // falls through to AssignmentPattern\n\n    case \"AssignmentPattern\":\n      break\n\n    case \"ParenthesizedExpression\":\n      this.toAssignable(node.expression, isBinding);\n      break\n\n    case \"MemberExpression\":\n      if (!isBinding) { break }\n\n    default:\n      this.raise(node.start, \"Assigning to rvalue\");\n    }\n  } else if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n  return node\n};\n\n// Convert list of expression atoms to binding list.\n\npp$2.toAssignableList = function(exprList, isBinding) {\n  var this$1 = this;\n\n  var end = exprList.length;\n  for (var i = 0; i < end; i++) {\n    var elt = exprList[i];\n    if (elt) { this$1.toAssignable(elt, isBinding); }\n  }\n  if (end) {\n    var last = exprList[end - 1];\n    if (this.options.ecmaVersion === 6 && isBinding && last && last.type === \"RestElement\" && last.argument.type !== \"Identifier\")\n      { this.unexpected(last.argument.start); }\n  }\n  return exprList\n};\n\n// Parses spread element.\n\npp$2.parseSpread = function(refDestructuringErrors) {\n  var node = this.startNode();\n  this.next();\n  node.argument = this.parseMaybeAssign(false, refDestructuringErrors);\n  return this.finishNode(node, \"SpreadElement\")\n};\n\npp$2.parseRestBinding = function() {\n  var node = this.startNode();\n  this.next();\n\n  // RestElement inside of a function parameter must be an identifier\n  if (this.options.ecmaVersion === 6 && this.type !== types.name)\n    { this.unexpected(); }\n\n  node.argument = this.parseBindingAtom();\n\n  return this.finishNode(node, \"RestElement\")\n};\n\n// Parses lvalue (assignable) atom.\n\npp$2.parseBindingAtom = function() {\n  if (this.options.ecmaVersion >= 6) {\n    switch (this.type) {\n    case types.bracketL:\n      var node = this.startNode();\n      this.next();\n      node.elements = this.parseBindingList(types.bracketR, true, true);\n      return this.finishNode(node, \"ArrayPattern\")\n\n    case types.braceL:\n      return this.parseObj(true)\n    }\n  }\n  return this.parseIdent()\n};\n\npp$2.parseBindingList = function(close, allowEmpty, allowTrailingComma) {\n  var this$1 = this;\n\n  var elts = [], first = true;\n  while (!this.eat(close)) {\n    if (first) { first = false; }\n    else { this$1.expect(types.comma); }\n    if (allowEmpty && this$1.type === types.comma) {\n      elts.push(null);\n    } else if (allowTrailingComma && this$1.afterTrailingComma(close)) {\n      break\n    } else if (this$1.type === types.ellipsis) {\n      var rest = this$1.parseRestBinding();\n      this$1.parseBindingListItem(rest);\n      elts.push(rest);\n      if (this$1.type === types.comma) { this$1.raise(this$1.start, \"Comma is not permitted after the rest element\"); }\n      this$1.expect(close);\n      break\n    } else {\n      var elem = this$1.parseMaybeDefault(this$1.start, this$1.startLoc);\n      this$1.parseBindingListItem(elem);\n      elts.push(elem);\n    }\n  }\n  return elts\n};\n\npp$2.parseBindingListItem = function(param) {\n  return param\n};\n\n// Parses assignment pattern around given atom if possible.\n\npp$2.parseMaybeDefault = function(startPos, startLoc, left) {\n  left = left || this.parseBindingAtom();\n  if (this.options.ecmaVersion < 6 || !this.eat(types.eq)) { return left }\n  var node = this.startNodeAt(startPos, startLoc);\n  node.left = left;\n  node.right = this.parseMaybeAssign();\n  return this.finishNode(node, \"AssignmentPattern\")\n};\n\n// Verify that a node is an lval — something that can be assigned\n// to.\n// bindingType can be either:\n// 'var' indicating that the lval creates a 'var' binding\n// 'let' indicating that the lval creates a lexical ('let' or 'const') binding\n// 'none' indicating that the binding should be checked for illegal identifiers, but not for duplicate references\n\npp$2.checkLVal = function(expr, bindingType, checkClashes) {\n  var this$1 = this;\n\n  switch (expr.type) {\n  case \"Identifier\":\n    if (this.strict && this.reservedWordsStrictBind.test(expr.name))\n      { this.raiseRecoverable(expr.start, (bindingType ? \"Binding \" : \"Assigning to \") + expr.name + \" in strict mode\"); }\n    if (checkClashes) {\n      if (has(checkClashes, expr.name))\n        { this.raiseRecoverable(expr.start, \"Argument name clash\"); }\n      checkClashes[expr.name] = true;\n    }\n    if (bindingType && bindingType !== \"none\") {\n      if (\n        bindingType === \"var\" && !this.canDeclareVarName(expr.name) ||\n        bindingType !== \"var\" && !this.canDeclareLexicalName(expr.name)\n      ) {\n        this.raiseRecoverable(expr.start, (\"Identifier '\" + (expr.name) + \"' has already been declared\"));\n      }\n      if (bindingType === \"var\") {\n        this.declareVarName(expr.name);\n      } else {\n        this.declareLexicalName(expr.name);\n      }\n    }\n    break\n\n  case \"MemberExpression\":\n    if (bindingType) { this.raiseRecoverable(expr.start, \"Binding member expression\"); }\n    break\n\n  case \"ObjectPattern\":\n    for (var i = 0, list = expr.properties; i < list.length; i += 1)\n      {\n    var prop = list[i];\n\n    this$1.checkLVal(prop, bindingType, checkClashes);\n  }\n    break\n\n  case \"Property\":\n    // AssignmentProperty has type === \"Property\"\n    this.checkLVal(expr.value, bindingType, checkClashes);\n    break\n\n  case \"ArrayPattern\":\n    for (var i$1 = 0, list$1 = expr.elements; i$1 < list$1.length; i$1 += 1) {\n      var elem = list$1[i$1];\n\n    if (elem) { this$1.checkLVal(elem, bindingType, checkClashes); }\n    }\n    break\n\n  case \"AssignmentPattern\":\n    this.checkLVal(expr.left, bindingType, checkClashes);\n    break\n\n  case \"RestElement\":\n    this.checkLVal(expr.argument, bindingType, checkClashes);\n    break\n\n  case \"ParenthesizedExpression\":\n    this.checkLVal(expr.expression, bindingType, checkClashes);\n    break\n\n  default:\n    this.raise(expr.start, (bindingType ? \"Binding\" : \"Assigning to\") + \" rvalue\");\n  }\n};\n\n// A recursive descent parser operates by defining functions for all\n// syntactic elements, and recursively calling those, each function\n// advancing the input stream and returning an AST node. Precedence\n// of constructs (for example, the fact that `!x[1]` means `!(x[1])`\n// instead of `(!x)[1]` is handled by the fact that the parser\n// function that parses unary prefix operators is called first, and\n// in turn calls the function that parses `[]` subscripts — that\n// way, it'll receive the node for `x[1]` already parsed, and wraps\n// *that* in the unary operator node.\n//\n// Acorn uses an [operator precedence parser][opp] to handle binary\n// operator precedence, because it is much more compact than using\n// the technique outlined above, which uses different, nesting\n// functions to specify precedence, for all of the ten binary\n// precedence levels that JavaScript defines.\n//\n// [opp]: http://en.wikipedia.org/wiki/Operator-precedence_parser\n\nvar pp$3 = Parser.prototype;\n\n// Check if property name clashes with already added.\n// Object/class getters and setters are not allowed to clash —\n// either with each other or with an init property — and in\n// strict mode, init properties are also not allowed to be repeated.\n\npp$3.checkPropClash = function(prop, propHash, refDestructuringErrors) {\n  if (this.options.ecmaVersion >= 9 && prop.type === \"SpreadElement\")\n    { return }\n  if (this.options.ecmaVersion >= 6 && (prop.computed || prop.method || prop.shorthand))\n    { return }\n  var key = prop.key;\n  var name;\n  switch (key.type) {\n  case \"Identifier\": name = key.name; break\n  case \"Literal\": name = String(key.value); break\n  default: return\n  }\n  var kind = prop.kind;\n  if (this.options.ecmaVersion >= 6) {\n    if (name === \"__proto__\" && kind === \"init\") {\n      if (propHash.proto) {\n        if (refDestructuringErrors && refDestructuringErrors.doubleProto < 0) { refDestructuringErrors.doubleProto = key.start; }\n        // Backwards-compat kludge. Can be removed in version 6.0\n        else { this.raiseRecoverable(key.start, \"Redefinition of __proto__ property\"); }\n      }\n      propHash.proto = true;\n    }\n    return\n  }\n  name = \"$\" + name;\n  var other = propHash[name];\n  if (other) {\n    var redefinition;\n    if (kind === \"init\") {\n      redefinition = this.strict && other.init || other.get || other.set;\n    } else {\n      redefinition = other.init || other[kind];\n    }\n    if (redefinition)\n      { this.raiseRecoverable(key.start, \"Redefinition of property\"); }\n  } else {\n    other = propHash[name] = {\n      init: false,\n      get: false,\n      set: false\n    };\n  }\n  other[kind] = true;\n};\n\n// ### Expression parsing\n\n// These nest, from the most general expression type at the top to\n// 'atomic', nondivisible expression types at the bottom. Most of\n// the functions will simply let the function(s) below them parse,\n// and, *if* the syntactic construct they handle is present, wrap\n// the AST node that the inner parser gave them in another node.\n\n// Parse a full expression. The optional arguments are used to\n// forbid the `in` operator (in for loops initalization expressions)\n// and provide reference for storing '=' operator inside shorthand\n// property assignment in contexts where both object expression\n// and object pattern might appear (so it's possible to raise\n// delayed syntax error at correct position).\n\npp$3.parseExpression = function(noIn, refDestructuringErrors) {\n  var this$1 = this;\n\n  var startPos = this.start, startLoc = this.startLoc;\n  var expr = this.parseMaybeAssign(noIn, refDestructuringErrors);\n  if (this.type === types.comma) {\n    var node = this.startNodeAt(startPos, startLoc);\n    node.expressions = [expr];\n    while (this.eat(types.comma)) { node.expressions.push(this$1.parseMaybeAssign(noIn, refDestructuringErrors)); }\n    return this.finishNode(node, \"SequenceExpression\")\n  }\n  return expr\n};\n\n// Parse an assignment expression. This includes applications of\n// operators like `+=`.\n\npp$3.parseMaybeAssign = function(noIn, refDestructuringErrors, afterLeftParse) {\n  if (this.inGenerator && this.isContextual(\"yield\")) { return this.parseYield() }\n\n  var ownDestructuringErrors = false, oldParenAssign = -1, oldTrailingComma = -1;\n  if (refDestructuringErrors) {\n    oldParenAssign = refDestructuringErrors.parenthesizedAssign;\n    oldTrailingComma = refDestructuringErrors.trailingComma;\n    refDestructuringErrors.parenthesizedAssign = refDestructuringErrors.trailingComma = -1;\n  } else {\n    refDestructuringErrors = new DestructuringErrors;\n    ownDestructuringErrors = true;\n  }\n\n  var startPos = this.start, startLoc = this.startLoc;\n  if (this.type === types.parenL || this.type === types.name)\n    { this.potentialArrowAt = this.start; }\n  var left = this.parseMaybeConditional(noIn, refDestructuringErrors);\n  if (afterLeftParse) { left = afterLeftParse.call(this, left, startPos, startLoc); }\n  if (this.type.isAssign) {\n    var node = this.startNodeAt(startPos, startLoc);\n    node.operator = this.value;\n    node.left = this.type === types.eq ? this.toAssignable(left, false, refDestructuringErrors) : left;\n    if (!ownDestructuringErrors) { DestructuringErrors.call(refDestructuringErrors); }\n    refDestructuringErrors.shorthandAssign = -1; // reset because shorthand default was used correctly\n    this.checkLVal(left);\n    this.next();\n    node.right = this.parseMaybeAssign(noIn);\n    return this.finishNode(node, \"AssignmentExpression\")\n  } else {\n    if (ownDestructuringErrors) { this.checkExpressionErrors(refDestructuringErrors, true); }\n  }\n  if (oldParenAssign > -1) { refDestructuringErrors.parenthesizedAssign = oldParenAssign; }\n  if (oldTrailingComma > -1) { refDestructuringErrors.trailingComma = oldTrailingComma; }\n  return left\n};\n\n// Parse a ternary conditional (`?:`) operator.\n\npp$3.parseMaybeConditional = function(noIn, refDestructuringErrors) {\n  var startPos = this.start, startLoc = this.startLoc;\n  var expr = this.parseExprOps(noIn, refDestructuringErrors);\n  if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n  if (this.eat(types.question)) {\n    var node = this.startNodeAt(startPos, startLoc);\n    node.test = expr;\n    node.consequent = this.parseMaybeAssign();\n    this.expect(types.colon);\n    node.alternate = this.parseMaybeAssign(noIn);\n    return this.finishNode(node, \"ConditionalExpression\")\n  }\n  return expr\n};\n\n// Start the precedence parser.\n\npp$3.parseExprOps = function(noIn, refDestructuringErrors) {\n  var startPos = this.start, startLoc = this.startLoc;\n  var expr = this.parseMaybeUnary(refDestructuringErrors, false);\n  if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n  return expr.start === startPos && expr.type === \"ArrowFunctionExpression\" ? expr : this.parseExprOp(expr, startPos, startLoc, -1, noIn)\n};\n\n// Parse binary operators with the operator precedence parsing\n// algorithm. `left` is the left-hand side of the operator.\n// `minPrec` provides context that allows the function to stop and\n// defer further parser to one of its callers when it encounters an\n// operator that has a lower precedence than the set it is parsing.\n\npp$3.parseExprOp = function(left, leftStartPos, leftStartLoc, minPrec, noIn) {\n  var prec = this.type.binop;\n  if (prec != null && (!noIn || this.type !== types._in)) {\n    if (prec > minPrec) {\n      var logical = this.type === types.logicalOR || this.type === types.logicalAND;\n      var op = this.value;\n      this.next();\n      var startPos = this.start, startLoc = this.startLoc;\n      var right = this.parseExprOp(this.parseMaybeUnary(null, false), startPos, startLoc, prec, noIn);\n      var node = this.buildBinary(leftStartPos, leftStartLoc, left, right, op, logical);\n      return this.parseExprOp(node, leftStartPos, leftStartLoc, minPrec, noIn)\n    }\n  }\n  return left\n};\n\npp$3.buildBinary = function(startPos, startLoc, left, right, op, logical) {\n  var node = this.startNodeAt(startPos, startLoc);\n  node.left = left;\n  node.operator = op;\n  node.right = right;\n  return this.finishNode(node, logical ? \"LogicalExpression\" : \"BinaryExpression\")\n};\n\n// Parse unary operators, both prefix and postfix.\n\npp$3.parseMaybeUnary = function(refDestructuringErrors, sawUnary) {\n  var this$1 = this;\n\n  var startPos = this.start, startLoc = this.startLoc, expr;\n  if (this.isContextual(\"await\") && (this.inAsync || (!this.inFunction && this.options.allowAwaitOutsideFunction))) {\n    expr = this.parseAwait();\n    sawUnary = true;\n  } else if (this.type.prefix) {\n    var node = this.startNode(), update = this.type === types.incDec;\n    node.operator = this.value;\n    node.prefix = true;\n    this.next();\n    node.argument = this.parseMaybeUnary(null, true);\n    this.checkExpressionErrors(refDestructuringErrors, true);\n    if (update) { this.checkLVal(node.argument); }\n    else if (this.strict && node.operator === \"delete\" &&\n             node.argument.type === \"Identifier\")\n      { this.raiseRecoverable(node.start, \"Deleting local variable in strict mode\"); }\n    else { sawUnary = true; }\n    expr = this.finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n  } else {\n    expr = this.parseExprSubscripts(refDestructuringErrors);\n    if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n    while (this.type.postfix && !this.canInsertSemicolon()) {\n      var node$1 = this$1.startNodeAt(startPos, startLoc);\n      node$1.operator = this$1.value;\n      node$1.prefix = false;\n      node$1.argument = expr;\n      this$1.checkLVal(expr);\n      this$1.next();\n      expr = this$1.finishNode(node$1, \"UpdateExpression\");\n    }\n  }\n\n  if (!sawUnary && this.eat(types.starstar))\n    { return this.buildBinary(startPos, startLoc, expr, this.parseMaybeUnary(null, false), \"**\", false) }\n  else\n    { return expr }\n};\n\n// Parse call, dot, and `[]`-subscript expressions.\n\npp$3.parseExprSubscripts = function(refDestructuringErrors) {\n  var startPos = this.start, startLoc = this.startLoc;\n  var expr = this.parseExprAtom(refDestructuringErrors);\n  var skipArrowSubscripts = expr.type === \"ArrowFunctionExpression\" && this.input.slice(this.lastTokStart, this.lastTokEnd) !== \")\";\n  if (this.checkExpressionErrors(refDestructuringErrors) || skipArrowSubscripts) { return expr }\n  var result = this.parseSubscripts(expr, startPos, startLoc);\n  if (refDestructuringErrors && result.type === \"MemberExpression\") {\n    if (refDestructuringErrors.parenthesizedAssign >= result.start) { refDestructuringErrors.parenthesizedAssign = -1; }\n    if (refDestructuringErrors.parenthesizedBind >= result.start) { refDestructuringErrors.parenthesizedBind = -1; }\n  }\n  return result\n};\n\npp$3.parseSubscripts = function(base, startPos, startLoc, noCalls) {\n  var this$1 = this;\n\n  var maybeAsyncArrow = this.options.ecmaVersion >= 8 && base.type === \"Identifier\" && base.name === \"async\" &&\n      this.lastTokEnd === base.end && !this.canInsertSemicolon() && this.input.slice(base.start, base.end) === \"async\";\n  for (var computed = (void 0);;) {\n    if ((computed = this$1.eat(types.bracketL)) || this$1.eat(types.dot)) {\n      var node = this$1.startNodeAt(startPos, startLoc);\n      node.object = base;\n      node.property = computed ? this$1.parseExpression() : this$1.parseIdent(true);\n      node.computed = !!computed;\n      if (computed) { this$1.expect(types.bracketR); }\n      base = this$1.finishNode(node, \"MemberExpression\");\n    } else if (!noCalls && this$1.eat(types.parenL)) {\n      var refDestructuringErrors = new DestructuringErrors, oldYieldPos = this$1.yieldPos, oldAwaitPos = this$1.awaitPos;\n      this$1.yieldPos = 0;\n      this$1.awaitPos = 0;\n      var exprList = this$1.parseExprList(types.parenR, this$1.options.ecmaVersion >= 8, false, refDestructuringErrors);\n      if (maybeAsyncArrow && !this$1.canInsertSemicolon() && this$1.eat(types.arrow)) {\n        this$1.checkPatternErrors(refDestructuringErrors, false);\n        this$1.checkYieldAwaitInDefaultParams();\n        this$1.yieldPos = oldYieldPos;\n        this$1.awaitPos = oldAwaitPos;\n        return this$1.parseArrowExpression(this$1.startNodeAt(startPos, startLoc), exprList, true)\n      }\n      this$1.checkExpressionErrors(refDestructuringErrors, true);\n      this$1.yieldPos = oldYieldPos || this$1.yieldPos;\n      this$1.awaitPos = oldAwaitPos || this$1.awaitPos;\n      var node$1 = this$1.startNodeAt(startPos, startLoc);\n      node$1.callee = base;\n      node$1.arguments = exprList;\n      base = this$1.finishNode(node$1, \"CallExpression\");\n    } else if (this$1.type === types.backQuote) {\n      var node$2 = this$1.startNodeAt(startPos, startLoc);\n      node$2.tag = base;\n      node$2.quasi = this$1.parseTemplate({isTagged: true});\n      base = this$1.finishNode(node$2, \"TaggedTemplateExpression\");\n    } else {\n      return base\n    }\n  }\n};\n\n// Parse an atomic expression — either a single token that is an\n// expression, an expression started by a keyword like `function` or\n// `new`, or an expression wrapped in punctuation like `()`, `[]`,\n// or `{}`.\n\npp$3.parseExprAtom = function(refDestructuringErrors) {\n  var node, canBeArrow = this.potentialArrowAt === this.start;\n  switch (this.type) {\n  case types._super:\n    if (!this.inFunction)\n      { this.raise(this.start, \"'super' outside of function or class\"); }\n    node = this.startNode();\n    this.next();\n    // The `super` keyword can appear at below:\n    // SuperProperty:\n    //     super [ Expression ]\n    //     super . IdentifierName\n    // SuperCall:\n    //     super Arguments\n    if (this.type !== types.dot && this.type !== types.bracketL && this.type !== types.parenL)\n      { this.unexpected(); }\n    return this.finishNode(node, \"Super\")\n\n  case types._this:\n    node = this.startNode();\n    this.next();\n    return this.finishNode(node, \"ThisExpression\")\n\n  case types.name:\n    var startPos = this.start, startLoc = this.startLoc, containsEsc = this.containsEsc;\n    var id = this.parseIdent(this.type !== types.name);\n    if (this.options.ecmaVersion >= 8 && !containsEsc && id.name === \"async\" && !this.canInsertSemicolon() && this.eat(types._function))\n      { return this.parseFunction(this.startNodeAt(startPos, startLoc), false, false, true) }\n    if (canBeArrow && !this.canInsertSemicolon()) {\n      if (this.eat(types.arrow))\n        { return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), [id], false) }\n      if (this.options.ecmaVersion >= 8 && id.name === \"async\" && this.type === types.name && !containsEsc) {\n        id = this.parseIdent();\n        if (this.canInsertSemicolon() || !this.eat(types.arrow))\n          { this.unexpected(); }\n        return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), [id], true)\n      }\n    }\n    return id\n\n  case types.regexp:\n    var value = this.value;\n    node = this.parseLiteral(value.value);\n    node.regex = {pattern: value.pattern, flags: value.flags};\n    return node\n\n  case types.num: case types.string:\n    return this.parseLiteral(this.value)\n\n  case types._null: case types._true: case types._false:\n    node = this.startNode();\n    node.value = this.type === types._null ? null : this.type === types._true;\n    node.raw = this.type.keyword;\n    this.next();\n    return this.finishNode(node, \"Literal\")\n\n  case types.parenL:\n    var start = this.start, expr = this.parseParenAndDistinguishExpression(canBeArrow);\n    if (refDestructuringErrors) {\n      if (refDestructuringErrors.parenthesizedAssign < 0 && !this.isSimpleAssignTarget(expr))\n        { refDestructuringErrors.parenthesizedAssign = start; }\n      if (refDestructuringErrors.parenthesizedBind < 0)\n        { refDestructuringErrors.parenthesizedBind = start; }\n    }\n    return expr\n\n  case types.bracketL:\n    node = this.startNode();\n    this.next();\n    node.elements = this.parseExprList(types.bracketR, true, true, refDestructuringErrors);\n    return this.finishNode(node, \"ArrayExpression\")\n\n  case types.braceL:\n    return this.parseObj(false, refDestructuringErrors)\n\n  case types._function:\n    node = this.startNode();\n    this.next();\n    return this.parseFunction(node, false)\n\n  case types._class:\n    return this.parseClass(this.startNode(), false)\n\n  case types._new:\n    return this.parseNew()\n\n  case types.backQuote:\n    return this.parseTemplate()\n\n  default:\n    this.unexpected();\n  }\n};\n\npp$3.parseLiteral = function(value) {\n  var node = this.startNode();\n  node.value = value;\n  node.raw = this.input.slice(this.start, this.end);\n  this.next();\n  return this.finishNode(node, \"Literal\")\n};\n\npp$3.parseParenExpression = function() {\n  this.expect(types.parenL);\n  var val = this.parseExpression();\n  this.expect(types.parenR);\n  return val\n};\n\npp$3.parseParenAndDistinguishExpression = function(canBeArrow) {\n  var this$1 = this;\n\n  var startPos = this.start, startLoc = this.startLoc, val, allowTrailingComma = this.options.ecmaVersion >= 8;\n  if (this.options.ecmaVersion >= 6) {\n    this.next();\n\n    var innerStartPos = this.start, innerStartLoc = this.startLoc;\n    var exprList = [], first = true, lastIsComma = false;\n    var refDestructuringErrors = new DestructuringErrors, oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, spreadStart;\n    this.yieldPos = 0;\n    this.awaitPos = 0;\n    while (this.type !== types.parenR) {\n      first ? first = false : this$1.expect(types.comma);\n      if (allowTrailingComma && this$1.afterTrailingComma(types.parenR, true)) {\n        lastIsComma = true;\n        break\n      } else if (this$1.type === types.ellipsis) {\n        spreadStart = this$1.start;\n        exprList.push(this$1.parseParenItem(this$1.parseRestBinding()));\n        if (this$1.type === types.comma) { this$1.raise(this$1.start, \"Comma is not permitted after the rest element\"); }\n        break\n      } else {\n        exprList.push(this$1.parseMaybeAssign(false, refDestructuringErrors, this$1.parseParenItem));\n      }\n    }\n    var innerEndPos = this.start, innerEndLoc = this.startLoc;\n    this.expect(types.parenR);\n\n    if (canBeArrow && !this.canInsertSemicolon() && this.eat(types.arrow)) {\n      this.checkPatternErrors(refDestructuringErrors, false);\n      this.checkYieldAwaitInDefaultParams();\n      this.yieldPos = oldYieldPos;\n      this.awaitPos = oldAwaitPos;\n      return this.parseParenArrowList(startPos, startLoc, exprList)\n    }\n\n    if (!exprList.length || lastIsComma) { this.unexpected(this.lastTokStart); }\n    if (spreadStart) { this.unexpected(spreadStart); }\n    this.checkExpressionErrors(refDestructuringErrors, true);\n    this.yieldPos = oldYieldPos || this.yieldPos;\n    this.awaitPos = oldAwaitPos || this.awaitPos;\n\n    if (exprList.length > 1) {\n      val = this.startNodeAt(innerStartPos, innerStartLoc);\n      val.expressions = exprList;\n      this.finishNodeAt(val, \"SequenceExpression\", innerEndPos, innerEndLoc);\n    } else {\n      val = exprList[0];\n    }\n  } else {\n    val = this.parseParenExpression();\n  }\n\n  if (this.options.preserveParens) {\n    var par = this.startNodeAt(startPos, startLoc);\n    par.expression = val;\n    return this.finishNode(par, \"ParenthesizedExpression\")\n  } else {\n    return val\n  }\n};\n\npp$3.parseParenItem = function(item) {\n  return item\n};\n\npp$3.parseParenArrowList = function(startPos, startLoc, exprList) {\n  return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), exprList)\n};\n\n// New's precedence is slightly tricky. It must allow its argument to\n// be a `[]` or dot subscript expression, but not a call — at least,\n// not without wrapping it in parentheses. Thus, it uses the noCalls\n// argument to parseSubscripts to prevent it from consuming the\n// argument list.\n\nvar empty$1 = [];\n\npp$3.parseNew = function() {\n  var node = this.startNode();\n  var meta = this.parseIdent(true);\n  if (this.options.ecmaVersion >= 6 && this.eat(types.dot)) {\n    node.meta = meta;\n    var containsEsc = this.containsEsc;\n    node.property = this.parseIdent(true);\n    if (node.property.name !== \"target\" || containsEsc)\n      { this.raiseRecoverable(node.property.start, \"The only valid meta property for new is new.target\"); }\n    if (!this.inFunction)\n      { this.raiseRecoverable(node.start, \"new.target can only be used in functions\"); }\n    return this.finishNode(node, \"MetaProperty\")\n  }\n  var startPos = this.start, startLoc = this.startLoc;\n  node.callee = this.parseSubscripts(this.parseExprAtom(), startPos, startLoc, true);\n  if (this.eat(types.parenL)) { node.arguments = this.parseExprList(types.parenR, this.options.ecmaVersion >= 8, false); }\n  else { node.arguments = empty$1; }\n  return this.finishNode(node, \"NewExpression\")\n};\n\n// Parse template expression.\n\npp$3.parseTemplateElement = function(ref) {\n  var isTagged = ref.isTagged;\n\n  var elem = this.startNode();\n  if (this.type === types.invalidTemplate) {\n    if (!isTagged) {\n      this.raiseRecoverable(this.start, \"Bad escape sequence in untagged template literal\");\n    }\n    elem.value = {\n      raw: this.value,\n      cooked: null\n    };\n  } else {\n    elem.value = {\n      raw: this.input.slice(this.start, this.end).replace(/\\r\\n?/g, \"\\n\"),\n      cooked: this.value\n    };\n  }\n  this.next();\n  elem.tail = this.type === types.backQuote;\n  return this.finishNode(elem, \"TemplateElement\")\n};\n\npp$3.parseTemplate = function(ref) {\n  var this$1 = this;\n  if ( ref === void 0 ) ref = {};\n  var isTagged = ref.isTagged; if ( isTagged === void 0 ) isTagged = false;\n\n  var node = this.startNode();\n  this.next();\n  node.expressions = [];\n  var curElt = this.parseTemplateElement({isTagged: isTagged});\n  node.quasis = [curElt];\n  while (!curElt.tail) {\n    if (this$1.type === types.eof) { this$1.raise(this$1.pos, \"Unterminated template literal\"); }\n    this$1.expect(types.dollarBraceL);\n    node.expressions.push(this$1.parseExpression());\n    this$1.expect(types.braceR);\n    node.quasis.push(curElt = this$1.parseTemplateElement({isTagged: isTagged}));\n  }\n  this.next();\n  return this.finishNode(node, \"TemplateLiteral\")\n};\n\npp$3.isAsyncProp = function(prop) {\n  return !prop.computed && prop.key.type === \"Identifier\" && prop.key.name === \"async\" &&\n    (this.type === types.name || this.type === types.num || this.type === types.string || this.type === types.bracketL || this.type.keyword || (this.options.ecmaVersion >= 9 && this.type === types.star)) &&\n    !lineBreak.test(this.input.slice(this.lastTokEnd, this.start))\n};\n\n// Parse an object literal or binding pattern.\n\npp$3.parseObj = function(isPattern, refDestructuringErrors) {\n  var this$1 = this;\n\n  var node = this.startNode(), first = true, propHash = {};\n  node.properties = [];\n  this.next();\n  while (!this.eat(types.braceR)) {\n    if (!first) {\n      this$1.expect(types.comma);\n      if (this$1.afterTrailingComma(types.braceR)) { break }\n    } else { first = false; }\n\n    var prop = this$1.parseProperty(isPattern, refDestructuringErrors);\n    if (!isPattern) { this$1.checkPropClash(prop, propHash, refDestructuringErrors); }\n    node.properties.push(prop);\n  }\n  return this.finishNode(node, isPattern ? \"ObjectPattern\" : \"ObjectExpression\")\n};\n\npp$3.parseProperty = function(isPattern, refDestructuringErrors) {\n  var prop = this.startNode(), isGenerator, isAsync, startPos, startLoc;\n  if (this.options.ecmaVersion >= 9 && this.eat(types.ellipsis)) {\n    if (isPattern) {\n      prop.argument = this.parseIdent(false);\n      if (this.type === types.comma) {\n        this.raise(this.start, \"Comma is not permitted after the rest element\");\n      }\n      return this.finishNode(prop, \"RestElement\")\n    }\n    // To disallow parenthesized identifier via `this.toAssignable()`.\n    if (this.type === types.parenL && refDestructuringErrors) {\n      if (refDestructuringErrors.parenthesizedAssign < 0) {\n        refDestructuringErrors.parenthesizedAssign = this.start;\n      }\n      if (refDestructuringErrors.parenthesizedBind < 0) {\n        refDestructuringErrors.parenthesizedBind = this.start;\n      }\n    }\n    // Parse argument.\n    prop.argument = this.parseMaybeAssign(false, refDestructuringErrors);\n    // To disallow trailing comma via `this.toAssignable()`.\n    if (this.type === types.comma && refDestructuringErrors && refDestructuringErrors.trailingComma < 0) {\n      refDestructuringErrors.trailingComma = this.start;\n    }\n    // Finish\n    return this.finishNode(prop, \"SpreadElement\")\n  }\n  if (this.options.ecmaVersion >= 6) {\n    prop.method = false;\n    prop.shorthand = false;\n    if (isPattern || refDestructuringErrors) {\n      startPos = this.start;\n      startLoc = this.startLoc;\n    }\n    if (!isPattern)\n      { isGenerator = this.eat(types.star); }\n  }\n  var containsEsc = this.containsEsc;\n  this.parsePropertyName(prop);\n  if (!isPattern && !containsEsc && this.options.ecmaVersion >= 8 && !isGenerator && this.isAsyncProp(prop)) {\n    isAsync = true;\n    isGenerator = this.options.ecmaVersion >= 9 && this.eat(types.star);\n    this.parsePropertyName(prop, refDestructuringErrors);\n  } else {\n    isAsync = false;\n  }\n  this.parsePropertyValue(prop, isPattern, isGenerator, isAsync, startPos, startLoc, refDestructuringErrors, containsEsc);\n  return this.finishNode(prop, \"Property\")\n};\n\npp$3.parsePropertyValue = function(prop, isPattern, isGenerator, isAsync, startPos, startLoc, refDestructuringErrors, containsEsc) {\n  if ((isGenerator || isAsync) && this.type === types.colon)\n    { this.unexpected(); }\n\n  if (this.eat(types.colon)) {\n    prop.value = isPattern ? this.parseMaybeDefault(this.start, this.startLoc) : this.parseMaybeAssign(false, refDestructuringErrors);\n    prop.kind = \"init\";\n  } else if (this.options.ecmaVersion >= 6 && this.type === types.parenL) {\n    if (isPattern) { this.unexpected(); }\n    prop.kind = \"init\";\n    prop.method = true;\n    prop.value = this.parseMethod(isGenerator, isAsync);\n  } else if (!isPattern && !containsEsc &&\n             this.options.ecmaVersion >= 5 && !prop.computed && prop.key.type === \"Identifier\" &&\n             (prop.key.name === \"get\" || prop.key.name === \"set\") &&\n             (this.type !== types.comma && this.type !== types.braceR)) {\n    if (isGenerator || isAsync) { this.unexpected(); }\n    prop.kind = prop.key.name;\n    this.parsePropertyName(prop);\n    prop.value = this.parseMethod(false);\n    var paramCount = prop.kind === \"get\" ? 0 : 1;\n    if (prop.value.params.length !== paramCount) {\n      var start = prop.value.start;\n      if (prop.kind === \"get\")\n        { this.raiseRecoverable(start, \"getter should have no params\"); }\n      else\n        { this.raiseRecoverable(start, \"setter should have exactly one param\"); }\n    } else {\n      if (prop.kind === \"set\" && prop.value.params[0].type === \"RestElement\")\n        { this.raiseRecoverable(prop.value.params[0].start, \"Setter cannot use rest params\"); }\n    }\n  } else if (this.options.ecmaVersion >= 6 && !prop.computed && prop.key.type === \"Identifier\") {\n    this.checkUnreserved(prop.key);\n    prop.kind = \"init\";\n    if (isPattern) {\n      prop.value = this.parseMaybeDefault(startPos, startLoc, prop.key);\n    } else if (this.type === types.eq && refDestructuringErrors) {\n      if (refDestructuringErrors.shorthandAssign < 0)\n        { refDestructuringErrors.shorthandAssign = this.start; }\n      prop.value = this.parseMaybeDefault(startPos, startLoc, prop.key);\n    } else {\n      prop.value = prop.key;\n    }\n    prop.shorthand = true;\n  } else { this.unexpected(); }\n};\n\npp$3.parsePropertyName = function(prop) {\n  if (this.options.ecmaVersion >= 6) {\n    if (this.eat(types.bracketL)) {\n      prop.computed = true;\n      prop.key = this.parseMaybeAssign();\n      this.expect(types.bracketR);\n      return prop.key\n    } else {\n      prop.computed = false;\n    }\n  }\n  return prop.key = this.type === types.num || this.type === types.string ? this.parseExprAtom() : this.parseIdent(true)\n};\n\n// Initialize empty function node.\n\npp$3.initFunction = function(node) {\n  node.id = null;\n  if (this.options.ecmaVersion >= 6) {\n    node.generator = false;\n    node.expression = false;\n  }\n  if (this.options.ecmaVersion >= 8)\n    { node.async = false; }\n};\n\n// Parse object or class method.\n\npp$3.parseMethod = function(isGenerator, isAsync) {\n  var node = this.startNode(), oldInGen = this.inGenerator, oldInAsync = this.inAsync,\n      oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldInFunc = this.inFunction;\n\n  this.initFunction(node);\n  if (this.options.ecmaVersion >= 6)\n    { node.generator = isGenerator; }\n  if (this.options.ecmaVersion >= 8)\n    { node.async = !!isAsync; }\n\n  this.inGenerator = node.generator;\n  this.inAsync = node.async;\n  this.yieldPos = 0;\n  this.awaitPos = 0;\n  this.inFunction = true;\n  this.enterFunctionScope();\n\n  this.expect(types.parenL);\n  node.params = this.parseBindingList(types.parenR, false, this.options.ecmaVersion >= 8);\n  this.checkYieldAwaitInDefaultParams();\n  this.parseFunctionBody(node, false);\n\n  this.inGenerator = oldInGen;\n  this.inAsync = oldInAsync;\n  this.yieldPos = oldYieldPos;\n  this.awaitPos = oldAwaitPos;\n  this.inFunction = oldInFunc;\n  return this.finishNode(node, \"FunctionExpression\")\n};\n\n// Parse arrow function expression with given parameters.\n\npp$3.parseArrowExpression = function(node, params, isAsync) {\n  var oldInGen = this.inGenerator, oldInAsync = this.inAsync,\n      oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldInFunc = this.inFunction;\n\n  this.enterFunctionScope();\n  this.initFunction(node);\n  if (this.options.ecmaVersion >= 8)\n    { node.async = !!isAsync; }\n\n  this.inGenerator = false;\n  this.inAsync = node.async;\n  this.yieldPos = 0;\n  this.awaitPos = 0;\n  this.inFunction = true;\n\n  node.params = this.toAssignableList(params, true);\n  this.parseFunctionBody(node, true);\n\n  this.inGenerator = oldInGen;\n  this.inAsync = oldInAsync;\n  this.yieldPos = oldYieldPos;\n  this.awaitPos = oldAwaitPos;\n  this.inFunction = oldInFunc;\n  return this.finishNode(node, \"ArrowFunctionExpression\")\n};\n\n// Parse function body and check parameters.\n\npp$3.parseFunctionBody = function(node, isArrowFunction) {\n  var isExpression = isArrowFunction && this.type !== types.braceL;\n  var oldStrict = this.strict, useStrict = false;\n\n  if (isExpression) {\n    node.body = this.parseMaybeAssign();\n    node.expression = true;\n    this.checkParams(node, false);\n  } else {\n    var nonSimple = this.options.ecmaVersion >= 7 && !this.isSimpleParamList(node.params);\n    if (!oldStrict || nonSimple) {\n      useStrict = this.strictDirective(this.end);\n      // If this is a strict mode function, verify that argument names\n      // are not repeated, and it does not try to bind the words `eval`\n      // or `arguments`.\n      if (useStrict && nonSimple)\n        { this.raiseRecoverable(node.start, \"Illegal 'use strict' directive in function with non-simple parameter list\"); }\n    }\n    // Start a new scope with regard to labels and the `inFunction`\n    // flag (restore them to their old value afterwards).\n    var oldLabels = this.labels;\n    this.labels = [];\n    if (useStrict) { this.strict = true; }\n\n    // Add the params to varDeclaredNames to ensure that an error is thrown\n    // if a let/const declaration in the function clashes with one of the params.\n    this.checkParams(node, !oldStrict && !useStrict && !isArrowFunction && this.isSimpleParamList(node.params));\n    node.body = this.parseBlock(false);\n    node.expression = false;\n    this.adaptDirectivePrologue(node.body.body);\n    this.labels = oldLabels;\n  }\n  this.exitFunctionScope();\n\n  if (this.strict && node.id) {\n    // Ensure the function name isn't a forbidden identifier in strict mode, e.g. 'eval'\n    this.checkLVal(node.id, \"none\");\n  }\n  this.strict = oldStrict;\n};\n\npp$3.isSimpleParamList = function(params) {\n  for (var i = 0, list = params; i < list.length; i += 1)\n    {\n    var param = list[i];\n\n    if (param.type !== \"Identifier\") { return false\n  } }\n  return true\n};\n\n// Checks function params for various disallowed patterns such as using \"eval\"\n// or \"arguments\" and duplicate parameters.\n\npp$3.checkParams = function(node, allowDuplicates) {\n  var this$1 = this;\n\n  var nameHash = {};\n  for (var i = 0, list = node.params; i < list.length; i += 1)\n    {\n    var param = list[i];\n\n    this$1.checkLVal(param, \"var\", allowDuplicates ? null : nameHash);\n  }\n};\n\n// Parses a comma-separated list of expressions, and returns them as\n// an array. `close` is the token type that ends the list, and\n// `allowEmpty` can be turned on to allow subsequent commas with\n// nothing in between them to be parsed as `null` (which is needed\n// for array literals).\n\npp$3.parseExprList = function(close, allowTrailingComma, allowEmpty, refDestructuringErrors) {\n  var this$1 = this;\n\n  var elts = [], first = true;\n  while (!this.eat(close)) {\n    if (!first) {\n      this$1.expect(types.comma);\n      if (allowTrailingComma && this$1.afterTrailingComma(close)) { break }\n    } else { first = false; }\n\n    var elt = (void 0);\n    if (allowEmpty && this$1.type === types.comma)\n      { elt = null; }\n    else if (this$1.type === types.ellipsis) {\n      elt = this$1.parseSpread(refDestructuringErrors);\n      if (refDestructuringErrors && this$1.type === types.comma && refDestructuringErrors.trailingComma < 0)\n        { refDestructuringErrors.trailingComma = this$1.start; }\n    } else {\n      elt = this$1.parseMaybeAssign(false, refDestructuringErrors);\n    }\n    elts.push(elt);\n  }\n  return elts\n};\n\npp$3.checkUnreserved = function(ref) {\n  var start = ref.start;\n  var end = ref.end;\n  var name = ref.name;\n\n  if (this.inGenerator && name === \"yield\")\n    { this.raiseRecoverable(start, \"Can not use 'yield' as identifier inside a generator\"); }\n  if (this.inAsync && name === \"await\")\n    { this.raiseRecoverable(start, \"Can not use 'await' as identifier inside an async function\"); }\n  if (this.isKeyword(name))\n    { this.raise(start, (\"Unexpected keyword '\" + name + \"'\")); }\n  if (this.options.ecmaVersion < 6 &&\n    this.input.slice(start, end).indexOf(\"\\\\\") !== -1) { return }\n  var re = this.strict ? this.reservedWordsStrict : this.reservedWords;\n  if (re.test(name)) {\n    if (!this.inAsync && name === \"await\")\n      { this.raiseRecoverable(start, \"Can not use keyword 'await' outside an async function\"); }\n    this.raiseRecoverable(start, (\"The keyword '\" + name + \"' is reserved\"));\n  }\n};\n\n// Parse the next token as an identifier. If `liberal` is true (used\n// when parsing properties), it will also convert keywords into\n// identifiers.\n\npp$3.parseIdent = function(liberal, isBinding) {\n  var node = this.startNode();\n  if (liberal && this.options.allowReserved === \"never\") { liberal = false; }\n  if (this.type === types.name) {\n    node.name = this.value;\n  } else if (this.type.keyword) {\n    node.name = this.type.keyword;\n\n    // To fix https://github.com/acornjs/acorn/issues/575\n    // `class` and `function` keywords push new context into this.context.\n    // But there is no chance to pop the context if the keyword is consumed as an identifier such as a property name.\n    // If the previous token is a dot, this does not apply because the context-managing code already ignored the keyword\n    if ((node.name === \"class\" || node.name === \"function\") &&\n        (this.lastTokEnd !== this.lastTokStart + 1 || this.input.charCodeAt(this.lastTokStart) !== 46)) {\n      this.context.pop();\n    }\n  } else {\n    this.unexpected();\n  }\n  this.next();\n  this.finishNode(node, \"Identifier\");\n  if (!liberal) { this.checkUnreserved(node); }\n  return node\n};\n\n// Parses yield expression inside generator.\n\npp$3.parseYield = function() {\n  if (!this.yieldPos) { this.yieldPos = this.start; }\n\n  var node = this.startNode();\n  this.next();\n  if (this.type === types.semi || this.canInsertSemicolon() || (this.type !== types.star && !this.type.startsExpr)) {\n    node.delegate = false;\n    node.argument = null;\n  } else {\n    node.delegate = this.eat(types.star);\n    node.argument = this.parseMaybeAssign();\n  }\n  return this.finishNode(node, \"YieldExpression\")\n};\n\npp$3.parseAwait = function() {\n  if (!this.awaitPos) { this.awaitPos = this.start; }\n\n  var node = this.startNode();\n  this.next();\n  node.argument = this.parseMaybeUnary(null, true);\n  return this.finishNode(node, \"AwaitExpression\")\n};\n\nvar pp$4 = Parser.prototype;\n\n// This function is used to raise exceptions on parse errors. It\n// takes an offset integer (into the current `input`) to indicate\n// the location of the error, attaches the position to the end\n// of the error message, and then raises a `SyntaxError` with that\n// message.\n\npp$4.raise = function(pos, message) {\n  var loc = getLineInfo(this.input, pos);\n  message += \" (\" + loc.line + \":\" + loc.column + \")\";\n  var err = new SyntaxError(message);\n  err.pos = pos; err.loc = loc; err.raisedAt = this.pos;\n  throw err\n};\n\npp$4.raiseRecoverable = pp$4.raise;\n\npp$4.curPosition = function() {\n  if (this.options.locations) {\n    return new Position(this.curLine, this.pos - this.lineStart)\n  }\n};\n\nvar pp$5 = Parser.prototype;\n\n// Object.assign polyfill\nvar assign = Object.assign || function(target) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  for (var i = 0, list = sources; i < list.length; i += 1) {\n    var source = list[i];\n\n    for (var key in source) {\n      if (has(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target\n};\n\n// The functions in this module keep track of declared variables in the current scope in order to detect duplicate variable names.\n\npp$5.enterFunctionScope = function() {\n  // var: a hash of var-declared names in the current lexical scope\n  // lexical: a hash of lexically-declared names in the current lexical scope\n  // childVar: a hash of var-declared names in all child lexical scopes of the current lexical scope (within the current function scope)\n  // parentLexical: a hash of lexically-declared names in all parent lexical scopes of the current lexical scope (within the current function scope)\n  this.scopeStack.push({var: {}, lexical: {}, childVar: {}, parentLexical: {}});\n};\n\npp$5.exitFunctionScope = function() {\n  this.scopeStack.pop();\n};\n\npp$5.enterLexicalScope = function() {\n  var parentScope = this.scopeStack[this.scopeStack.length - 1];\n  var childScope = {var: {}, lexical: {}, childVar: {}, parentLexical: {}};\n\n  this.scopeStack.push(childScope);\n  assign(childScope.parentLexical, parentScope.lexical, parentScope.parentLexical);\n};\n\npp$5.exitLexicalScope = function() {\n  var childScope = this.scopeStack.pop();\n  var parentScope = this.scopeStack[this.scopeStack.length - 1];\n\n  assign(parentScope.childVar, childScope.var, childScope.childVar);\n};\n\n/**\n * A name can be declared with `var` if there are no variables with the same name declared with `let`/`const`\n * in the current lexical scope or any of the parent lexical scopes in this function.\n */\npp$5.canDeclareVarName = function(name) {\n  var currentScope = this.scopeStack[this.scopeStack.length - 1];\n\n  return !has(currentScope.lexical, name) && !has(currentScope.parentLexical, name)\n};\n\n/**\n * A name can be declared with `let`/`const` if there are no variables with the same name declared with `let`/`const`\n * in the current scope, and there are no variables with the same name declared with `var` in the current scope or in\n * any child lexical scopes in this function.\n */\npp$5.canDeclareLexicalName = function(name) {\n  var currentScope = this.scopeStack[this.scopeStack.length - 1];\n\n  return !has(currentScope.lexical, name) && !has(currentScope.var, name) && !has(currentScope.childVar, name)\n};\n\npp$5.declareVarName = function(name) {\n  this.scopeStack[this.scopeStack.length - 1].var[name] = true;\n};\n\npp$5.declareLexicalName = function(name) {\n  this.scopeStack[this.scopeStack.length - 1].lexical[name] = true;\n};\n\nvar Node = function Node(parser, pos, loc) {\n  this.type = \"\";\n  this.start = pos;\n  this.end = 0;\n  if (parser.options.locations)\n    { this.loc = new SourceLocation(parser, loc); }\n  if (parser.options.directSourceFile)\n    { this.sourceFile = parser.options.directSourceFile; }\n  if (parser.options.ranges)\n    { this.range = [pos, 0]; }\n};\n\n// Start an AST node, attaching a start offset.\n\nvar pp$6 = Parser.prototype;\n\npp$6.startNode = function() {\n  return new Node(this, this.start, this.startLoc)\n};\n\npp$6.startNodeAt = function(pos, loc) {\n  return new Node(this, pos, loc)\n};\n\n// Finish an AST node, adding `type` and `end` properties.\n\nfunction finishNodeAt(node, type, pos, loc) {\n  node.type = type;\n  node.end = pos;\n  if (this.options.locations)\n    { node.loc.end = loc; }\n  if (this.options.ranges)\n    { node.range[1] = pos; }\n  return node\n}\n\npp$6.finishNode = function(node, type) {\n  return finishNodeAt.call(this, node, type, this.lastTokEnd, this.lastTokEndLoc)\n};\n\n// Finish node at given position\n\npp$6.finishNodeAt = function(node, type, pos, loc) {\n  return finishNodeAt.call(this, node, type, pos, loc)\n};\n\n// The algorithm used to determine whether a regexp can appear at a\n// given point in the program is loosely based on sweet.js' approach.\n// See https://github.com/mozilla/sweet.js/wiki/design\n\nvar TokContext = function TokContext(token, isExpr, preserveSpace, override, generator) {\n  this.token = token;\n  this.isExpr = !!isExpr;\n  this.preserveSpace = !!preserveSpace;\n  this.override = override;\n  this.generator = !!generator;\n};\n\nvar types$1 = {\n  b_stat: new TokContext(\"{\", false),\n  b_expr: new TokContext(\"{\", true),\n  b_tmpl: new TokContext(\"${\", false),\n  p_stat: new TokContext(\"(\", false),\n  p_expr: new TokContext(\"(\", true),\n  q_tmpl: new TokContext(\"`\", true, true, function (p) { return p.tryReadTemplateToken(); }),\n  f_stat: new TokContext(\"function\", false),\n  f_expr: new TokContext(\"function\", true),\n  f_expr_gen: new TokContext(\"function\", true, false, null, true),\n  f_gen: new TokContext(\"function\", false, false, null, true)\n};\n\nvar pp$7 = Parser.prototype;\n\npp$7.initialContext = function() {\n  return [types$1.b_stat]\n};\n\npp$7.braceIsBlock = function(prevType) {\n  var parent = this.curContext();\n  if (parent === types$1.f_expr || parent === types$1.f_stat)\n    { return true }\n  if (prevType === types.colon && (parent === types$1.b_stat || parent === types$1.b_expr))\n    { return !parent.isExpr }\n\n  // The check for `tt.name && exprAllowed` detects whether we are\n  // after a `yield` or `of` construct. See the `updateContext` for\n  // `tt.name`.\n  if (prevType === types._return || prevType === types.name && this.exprAllowed)\n    { return lineBreak.test(this.input.slice(this.lastTokEnd, this.start)) }\n  if (prevType === types._else || prevType === types.semi || prevType === types.eof || prevType === types.parenR || prevType === types.arrow)\n    { return true }\n  if (prevType === types.braceL)\n    { return parent === types$1.b_stat }\n  if (prevType === types._var || prevType === types.name)\n    { return false }\n  return !this.exprAllowed\n};\n\npp$7.inGeneratorContext = function() {\n  var this$1 = this;\n\n  for (var i = this.context.length - 1; i >= 1; i--) {\n    var context = this$1.context[i];\n    if (context.token === \"function\")\n      { return context.generator }\n  }\n  return false\n};\n\npp$7.updateContext = function(prevType) {\n  var update, type = this.type;\n  if (type.keyword && prevType === types.dot)\n    { this.exprAllowed = false; }\n  else if (update = type.updateContext)\n    { update.call(this, prevType); }\n  else\n    { this.exprAllowed = type.beforeExpr; }\n};\n\n// Token-specific context update code\n\ntypes.parenR.updateContext = types.braceR.updateContext = function() {\n  if (this.context.length === 1) {\n    this.exprAllowed = true;\n    return\n  }\n  var out = this.context.pop();\n  if (out === types$1.b_stat && this.curContext().token === \"function\") {\n    out = this.context.pop();\n  }\n  this.exprAllowed = !out.isExpr;\n};\n\ntypes.braceL.updateContext = function(prevType) {\n  this.context.push(this.braceIsBlock(prevType) ? types$1.b_stat : types$1.b_expr);\n  this.exprAllowed = true;\n};\n\ntypes.dollarBraceL.updateContext = function() {\n  this.context.push(types$1.b_tmpl);\n  this.exprAllowed = true;\n};\n\ntypes.parenL.updateContext = function(prevType) {\n  var statementParens = prevType === types._if || prevType === types._for || prevType === types._with || prevType === types._while;\n  this.context.push(statementParens ? types$1.p_stat : types$1.p_expr);\n  this.exprAllowed = true;\n};\n\ntypes.incDec.updateContext = function() {\n  // tokExprAllowed stays unchanged\n};\n\ntypes._function.updateContext = types._class.updateContext = function(prevType) {\n  if (prevType.beforeExpr && prevType !== types.semi && prevType !== types._else &&\n      !((prevType === types.colon || prevType === types.braceL) && this.curContext() === types$1.b_stat))\n    { this.context.push(types$1.f_expr); }\n  else\n    { this.context.push(types$1.f_stat); }\n  this.exprAllowed = false;\n};\n\ntypes.backQuote.updateContext = function() {\n  if (this.curContext() === types$1.q_tmpl)\n    { this.context.pop(); }\n  else\n    { this.context.push(types$1.q_tmpl); }\n  this.exprAllowed = false;\n};\n\ntypes.star.updateContext = function(prevType) {\n  if (prevType === types._function) {\n    var index = this.context.length - 1;\n    if (this.context[index] === types$1.f_expr)\n      { this.context[index] = types$1.f_expr_gen; }\n    else\n      { this.context[index] = types$1.f_gen; }\n  }\n  this.exprAllowed = true;\n};\n\ntypes.name.updateContext = function(prevType) {\n  var allowed = false;\n  if (this.options.ecmaVersion >= 6 && prevType !== types.dot) {\n    if (this.value === \"of\" && !this.exprAllowed ||\n        this.value === \"yield\" && this.inGeneratorContext())\n      { allowed = true; }\n  }\n  this.exprAllowed = allowed;\n};\n\nvar data = {\n  \"$LONE\": [\n    \"ASCII\",\n    \"ASCII_Hex_Digit\",\n    \"AHex\",\n    \"Alphabetic\",\n    \"Alpha\",\n    \"Any\",\n    \"Assigned\",\n    \"Bidi_Control\",\n    \"Bidi_C\",\n    \"Bidi_Mirrored\",\n    \"Bidi_M\",\n    \"Case_Ignorable\",\n    \"CI\",\n    \"Cased\",\n    \"Changes_When_Casefolded\",\n    \"CWCF\",\n    \"Changes_When_Casemapped\",\n    \"CWCM\",\n    \"Changes_When_Lowercased\",\n    \"CWL\",\n    \"Changes_When_NFKC_Casefolded\",\n    \"CWKCF\",\n    \"Changes_When_Titlecased\",\n    \"CWT\",\n    \"Changes_When_Uppercased\",\n    \"CWU\",\n    \"Dash\",\n    \"Default_Ignorable_Code_Point\",\n    \"DI\",\n    \"Deprecated\",\n    \"Dep\",\n    \"Diacritic\",\n    \"Dia\",\n    \"Emoji\",\n    \"Emoji_Component\",\n    \"Emoji_Modifier\",\n    \"Emoji_Modifier_Base\",\n    \"Emoji_Presentation\",\n    \"Extender\",\n    \"Ext\",\n    \"Grapheme_Base\",\n    \"Gr_Base\",\n    \"Grapheme_Extend\",\n    \"Gr_Ext\",\n    \"Hex_Digit\",\n    \"Hex\",\n    \"IDS_Binary_Operator\",\n    \"IDSB\",\n    \"IDS_Trinary_Operator\",\n    \"IDST\",\n    \"ID_Continue\",\n    \"IDC\",\n    \"ID_Start\",\n    \"IDS\",\n    \"Ideographic\",\n    \"Ideo\",\n    \"Join_Control\",\n    \"Join_C\",\n    \"Logical_Order_Exception\",\n    \"LOE\",\n    \"Lowercase\",\n    \"Lower\",\n    \"Math\",\n    \"Noncharacter_Code_Point\",\n    \"NChar\",\n    \"Pattern_Syntax\",\n    \"Pat_Syn\",\n    \"Pattern_White_Space\",\n    \"Pat_WS\",\n    \"Quotation_Mark\",\n    \"QMark\",\n    \"Radical\",\n    \"Regional_Indicator\",\n    \"RI\",\n    \"Sentence_Terminal\",\n    \"STerm\",\n    \"Soft_Dotted\",\n    \"SD\",\n    \"Terminal_Punctuation\",\n    \"Term\",\n    \"Unified_Ideograph\",\n    \"UIdeo\",\n    \"Uppercase\",\n    \"Upper\",\n    \"Variation_Selector\",\n    \"VS\",\n    \"White_Space\",\n    \"space\",\n    \"XID_Continue\",\n    \"XIDC\",\n    \"XID_Start\",\n    \"XIDS\"\n  ],\n  \"General_Category\": [\n    \"Cased_Letter\",\n    \"LC\",\n    \"Close_Punctuation\",\n    \"Pe\",\n    \"Connector_Punctuation\",\n    \"Pc\",\n    \"Control\",\n    \"Cc\",\n    \"cntrl\",\n    \"Currency_Symbol\",\n    \"Sc\",\n    \"Dash_Punctuation\",\n    \"Pd\",\n    \"Decimal_Number\",\n    \"Nd\",\n    \"digit\",\n    \"Enclosing_Mark\",\n    \"Me\",\n    \"Final_Punctuation\",\n    \"Pf\",\n    \"Format\",\n    \"Cf\",\n    \"Initial_Punctuation\",\n    \"Pi\",\n    \"Letter\",\n    \"L\",\n    \"Letter_Number\",\n    \"Nl\",\n    \"Line_Separator\",\n    \"Zl\",\n    \"Lowercase_Letter\",\n    \"Ll\",\n    \"Mark\",\n    \"M\",\n    \"Combining_Mark\",\n    \"Math_Symbol\",\n    \"Sm\",\n    \"Modifier_Letter\",\n    \"Lm\",\n    \"Modifier_Symbol\",\n    \"Sk\",\n    \"Nonspacing_Mark\",\n    \"Mn\",\n    \"Number\",\n    \"N\",\n    \"Open_Punctuation\",\n    \"Ps\",\n    \"Other\",\n    \"C\",\n    \"Other_Letter\",\n    \"Lo\",\n    \"Other_Number\",\n    \"No\",\n    \"Other_Punctuation\",\n    \"Po\",\n    \"Other_Symbol\",\n    \"So\",\n    \"Paragraph_Separator\",\n    \"Zp\",\n    \"Private_Use\",\n    \"Co\",\n    \"Punctuation\",\n    \"P\",\n    \"punct\",\n    \"Separator\",\n    \"Z\",\n    \"Space_Separator\",\n    \"Zs\",\n    \"Spacing_Mark\",\n    \"Mc\",\n    \"Surrogate\",\n    \"Cs\",\n    \"Symbol\",\n    \"S\",\n    \"Titlecase_Letter\",\n    \"Lt\",\n    \"Unassigned\",\n    \"Cn\",\n    \"Uppercase_Letter\",\n    \"Lu\"\n  ],\n  \"Script\": [\n    \"Adlam\",\n    \"Adlm\",\n    \"Ahom\",\n    \"Anatolian_Hieroglyphs\",\n    \"Hluw\",\n    \"Arabic\",\n    \"Arab\",\n    \"Armenian\",\n    \"Armn\",\n    \"Avestan\",\n    \"Avst\",\n    \"Balinese\",\n    \"Bali\",\n    \"Bamum\",\n    \"Bamu\",\n    \"Bassa_Vah\",\n    \"Bass\",\n    \"Batak\",\n    \"Batk\",\n    \"Bengali\",\n    \"Beng\",\n    \"Bhaiksuki\",\n    \"Bhks\",\n    \"Bopomofo\",\n    \"Bopo\",\n    \"Brahmi\",\n    \"Brah\",\n    \"Braille\",\n    \"Brai\",\n    \"Buginese\",\n    \"Bugi\",\n    \"Buhid\",\n    \"Buhd\",\n    \"Canadian_Aboriginal\",\n    \"Cans\",\n    \"Carian\",\n    \"Cari\",\n    \"Caucasian_Albanian\",\n    \"Aghb\",\n    \"Chakma\",\n    \"Cakm\",\n    \"Cham\",\n    \"Cherokee\",\n    \"Cher\",\n    \"Common\",\n    \"Zyyy\",\n    \"Coptic\",\n    \"Copt\",\n    \"Qaac\",\n    \"Cuneiform\",\n    \"Xsux\",\n    \"Cypriot\",\n    \"Cprt\",\n    \"Cyrillic\",\n    \"Cyrl\",\n    \"Deseret\",\n    \"Dsrt\",\n    \"Devanagari\",\n    \"Deva\",\n    \"Duployan\",\n    \"Dupl\",\n    \"Egyptian_Hieroglyphs\",\n    \"Egyp\",\n    \"Elbasan\",\n    \"Elba\",\n    \"Ethiopic\",\n    \"Ethi\",\n    \"Georgian\",\n    \"Geor\",\n    \"Glagolitic\",\n    \"Glag\",\n    \"Gothic\",\n    \"Goth\",\n    \"Grantha\",\n    \"Gran\",\n    \"Greek\",\n    \"Grek\",\n    \"Gujarati\",\n    \"Gujr\",\n    \"Gurmukhi\",\n    \"Guru\",\n    \"Han\",\n    \"Hani\",\n    \"Hangul\",\n    \"Hang\",\n    \"Hanunoo\",\n    \"Hano\",\n    \"Hatran\",\n    \"Hatr\",\n    \"Hebrew\",\n    \"Hebr\",\n    \"Hiragana\",\n    \"Hira\",\n    \"Imperial_Aramaic\",\n    \"Armi\",\n    \"Inherited\",\n    \"Zinh\",\n    \"Qaai\",\n    \"Inscriptional_Pahlavi\",\n    \"Phli\",\n    \"Inscriptional_Parthian\",\n    \"Prti\",\n    \"Javanese\",\n    \"Java\",\n    \"Kaithi\",\n    \"Kthi\",\n    \"Kannada\",\n    \"Knda\",\n    \"Katakana\",\n    \"Kana\",\n    \"Kayah_Li\",\n    \"Kali\",\n    \"Kharoshthi\",\n    \"Khar\",\n    \"Khmer\",\n    \"Khmr\",\n    \"Khojki\",\n    \"Khoj\",\n    \"Khudawadi\",\n    \"Sind\",\n    \"Lao\",\n    \"Laoo\",\n    \"Latin\",\n    \"Latn\",\n    \"Lepcha\",\n    \"Lepc\",\n    \"Limbu\",\n    \"Limb\",\n    \"Linear_A\",\n    \"Lina\",\n    \"Linear_B\",\n    \"Linb\",\n    \"Lisu\",\n    \"Lycian\",\n    \"Lyci\",\n    \"Lydian\",\n    \"Lydi\",\n    \"Mahajani\",\n    \"Mahj\",\n    \"Malayalam\",\n    \"Mlym\",\n    \"Mandaic\",\n    \"Mand\",\n    \"Manichaean\",\n    \"Mani\",\n    \"Marchen\",\n    \"Marc\",\n    \"Masaram_Gondi\",\n    \"Gonm\",\n    \"Meetei_Mayek\",\n    \"Mtei\",\n    \"Mende_Kikakui\",\n    \"Mend\",\n    \"Meroitic_Cursive\",\n    \"Merc\",\n    \"Meroitic_Hieroglyphs\",\n    \"Mero\",\n    \"Miao\",\n    \"Plrd\",\n    \"Modi\",\n    \"Mongolian\",\n    \"Mong\",\n    \"Mro\",\n    \"Mroo\",\n    \"Multani\",\n    \"Mult\",\n    \"Myanmar\",\n    \"Mymr\",\n    \"Nabataean\",\n    \"Nbat\",\n    \"New_Tai_Lue\",\n    \"Talu\",\n    \"Newa\",\n    \"Nko\",\n    \"Nkoo\",\n    \"Nushu\",\n    \"Nshu\",\n    \"Ogham\",\n    \"Ogam\",\n    \"Ol_Chiki\",\n    \"Olck\",\n    \"Old_Hungarian\",\n    \"Hung\",\n    \"Old_Italic\",\n    \"Ital\",\n    \"Old_North_Arabian\",\n    \"Narb\",\n    \"Old_Permic\",\n    \"Perm\",\n    \"Old_Persian\",\n    \"Xpeo\",\n    \"Old_South_Arabian\",\n    \"Sarb\",\n    \"Old_Turkic\",\n    \"Orkh\",\n    \"Oriya\",\n    \"Orya\",\n    \"Osage\",\n    \"Osge\",\n    \"Osmanya\",\n    \"Osma\",\n    \"Pahawh_Hmong\",\n    \"Hmng\",\n    \"Palmyrene\",\n    \"Palm\",\n    \"Pau_Cin_Hau\",\n    \"Pauc\",\n    \"Phags_Pa\",\n    \"Phag\",\n    \"Phoenician\",\n    \"Phnx\",\n    \"Psalter_Pahlavi\",\n    \"Phlp\",\n    \"Rejang\",\n    \"Rjng\",\n    \"Runic\",\n    \"Runr\",\n    \"Samaritan\",\n    \"Samr\",\n    \"Saurashtra\",\n    \"Saur\",\n    \"Sharada\",\n    \"Shrd\",\n    \"Shavian\",\n    \"Shaw\",\n    \"Siddham\",\n    \"Sidd\",\n    \"SignWriting\",\n    \"Sgnw\",\n    \"Sinhala\",\n    \"Sinh\",\n    \"Sora_Sompeng\",\n    \"Sora\",\n    \"Soyombo\",\n    \"Soyo\",\n    \"Sundanese\",\n    \"Sund\",\n    \"Syloti_Nagri\",\n    \"Sylo\",\n    \"Syriac\",\n    \"Syrc\",\n    \"Tagalog\",\n    \"Tglg\",\n    \"Tagbanwa\",\n    \"Tagb\",\n    \"Tai_Le\",\n    \"Tale\",\n    \"Tai_Tham\",\n    \"Lana\",\n    \"Tai_Viet\",\n    \"Tavt\",\n    \"Takri\",\n    \"Takr\",\n    \"Tamil\",\n    \"Taml\",\n    \"Tangut\",\n    \"Tang\",\n    \"Telugu\",\n    \"Telu\",\n    \"Thaana\",\n    \"Thaa\",\n    \"Thai\",\n    \"Tibetan\",\n    \"Tibt\",\n    \"Tifinagh\",\n    \"Tfng\",\n    \"Tirhuta\",\n    \"Tirh\",\n    \"Ugaritic\",\n    \"Ugar\",\n    \"Vai\",\n    \"Vaii\",\n    \"Warang_Citi\",\n    \"Wara\",\n    \"Yi\",\n    \"Yiii\",\n    \"Zanabazar_Square\",\n    \"Zanb\"\n  ]\n};\nArray.prototype.push.apply(data.$LONE, data.General_Category);\ndata.gc = data.General_Category;\ndata.sc = data.Script_Extensions = data.scx = data.Script;\n\nvar pp$9 = Parser.prototype;\n\nvar RegExpValidationState = function RegExpValidationState(parser) {\n  this.parser = parser;\n  this.validFlags = \"gim\" + (parser.options.ecmaVersion >= 6 ? \"uy\" : \"\") + (parser.options.ecmaVersion >= 9 ? \"s\" : \"\");\n  this.source = \"\";\n  this.flags = \"\";\n  this.start = 0;\n  this.switchU = false;\n  this.switchN = false;\n  this.pos = 0;\n  this.lastIntValue = 0;\n  this.lastStringValue = \"\";\n  this.lastAssertionIsQuantifiable = false;\n  this.numCapturingParens = 0;\n  this.maxBackReference = 0;\n  this.groupNames = [];\n  this.backReferenceNames = [];\n};\n\nRegExpValidationState.prototype.reset = function reset (start, pattern, flags) {\n  var unicode = flags.indexOf(\"u\") !== -1;\n  this.start = start | 0;\n  this.source = pattern + \"\";\n  this.flags = flags;\n  this.switchU = unicode && this.parser.options.ecmaVersion >= 6;\n  this.switchN = unicode && this.parser.options.ecmaVersion >= 9;\n};\n\nRegExpValidationState.prototype.raise = function raise (message) {\n  this.parser.raiseRecoverable(this.start, (\"Invalid regular expression: /\" + (this.source) + \"/: \" + message));\n};\n\n// If u flag is given, this returns the code point at the index (it combines a surrogate pair).\n// Otherwise, this returns the code unit of the index (can be a part of a surrogate pair).\nRegExpValidationState.prototype.at = function at (i) {\n  var s = this.source;\n  var l = s.length;\n  if (i >= l) {\n    return -1\n  }\n  var c = s.charCodeAt(i);\n  if (!this.switchU || c <= 0xD7FF || c >= 0xE000 || i + 1 >= l) {\n    return c\n  }\n  var next = s.charCodeAt(i + 1);\n  return next >= 0xDC00 && next <= 0xDFFF ? (c << 10) + next - 0x35FDC00 : c\n};\n\nRegExpValidationState.prototype.nextIndex = function nextIndex (i) {\n  var s = this.source;\n  var l = s.length;\n  if (i >= l) {\n    return l\n  }\n  var c = s.charCodeAt(i), next;\n  if (!this.switchU || c <= 0xD7FF || c >= 0xE000 || i + 1 >= l ||\n      (next = s.charCodeAt(i + 1)) < 0xDC00 || next > 0xDFFF) {\n    return i + 1\n  }\n  return i + 2\n};\n\nRegExpValidationState.prototype.current = function current () {\n  return this.at(this.pos)\n};\n\nRegExpValidationState.prototype.lookahead = function lookahead () {\n  return this.at(this.nextIndex(this.pos))\n};\n\nRegExpValidationState.prototype.advance = function advance () {\n  this.pos = this.nextIndex(this.pos);\n};\n\nRegExpValidationState.prototype.eat = function eat (ch) {\n  if (this.current() === ch) {\n    this.advance();\n    return true\n  }\n  return false\n};\n\nfunction codePointToString$1(ch) {\n  if (ch <= 0xFFFF) { return String.fromCharCode(ch) }\n  ch -= 0x10000;\n  return String.fromCharCode((ch >> 10) + 0xD800, (ch & 0x03FF) + 0xDC00)\n}\n\n/**\n * Validate the flags part of a given RegExpLiteral.\n *\n * @param {RegExpValidationState} state The state to validate RegExp.\n * @returns {void}\n */\npp$9.validateRegExpFlags = function(state) {\n  var this$1 = this;\n\n  var validFlags = state.validFlags;\n  var flags = state.flags;\n\n  for (var i = 0; i < flags.length; i++) {\n    var flag = flags.charAt(i);\n    if (validFlags.indexOf(flag) === -1) {\n      this$1.raise(state.start, \"Invalid regular expression flag\");\n    }\n    if (flags.indexOf(flag, i + 1) > -1) {\n      this$1.raise(state.start, \"Duplicate regular expression flag\");\n    }\n  }\n};\n\n/**\n * Validate the pattern part of a given RegExpLiteral.\n *\n * @param {RegExpValidationState} state The state to validate RegExp.\n * @returns {void}\n */\npp$9.validateRegExpPattern = function(state) {\n  this.regexp_pattern(state);\n\n  // The goal symbol for the parse is |Pattern[~U, ~N]|. If the result of\n  // parsing contains a |GroupName|, reparse with the goal symbol\n  // |Pattern[~U, +N]| and use this result instead. Throw a *SyntaxError*\n  // exception if _P_ did not conform to the grammar, if any elements of _P_\n  // were not matched by the parse, or if any Early Error conditions exist.\n  if (!state.switchN && this.options.ecmaVersion >= 9 && state.groupNames.length > 0) {\n    state.switchN = true;\n    this.regexp_pattern(state);\n  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Pattern\npp$9.regexp_pattern = function(state) {\n  state.pos = 0;\n  state.lastIntValue = 0;\n  state.lastStringValue = \"\";\n  state.lastAssertionIsQuantifiable = false;\n  state.numCapturingParens = 0;\n  state.maxBackReference = 0;\n  state.groupNames.length = 0;\n  state.backReferenceNames.length = 0;\n\n  this.regexp_disjunction(state);\n\n  if (state.pos !== state.source.length) {\n    // Make the same messages as V8.\n    if (state.eat(0x29 /* ) */)) {\n      state.raise(\"Unmatched ')'\");\n    }\n    if (state.eat(0x5D /* [ */) || state.eat(0x7D /* } */)) {\n      state.raise(\"Lone quantifier brackets\");\n    }\n  }\n  if (state.maxBackReference > state.numCapturingParens) {\n    state.raise(\"Invalid escape\");\n  }\n  for (var i = 0, list = state.backReferenceNames; i < list.length; i += 1) {\n    var name = list[i];\n\n    if (state.groupNames.indexOf(name) === -1) {\n      state.raise(\"Invalid named capture referenced\");\n    }\n  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Disjunction\npp$9.regexp_disjunction = function(state) {\n  var this$1 = this;\n\n  this.regexp_alternative(state);\n  while (state.eat(0x7C /* | */)) {\n    this$1.regexp_alternative(state);\n  }\n\n  // Make the same message as V8.\n  if (this.regexp_eatQuantifier(state, true)) {\n    state.raise(\"Nothing to repeat\");\n  }\n  if (state.eat(0x7B /* { */)) {\n    state.raise(\"Lone quantifier brackets\");\n  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Alternative\npp$9.regexp_alternative = function(state) {\n  while (state.pos < state.source.length && this.regexp_eatTerm(state))\n    {  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-Term\npp$9.regexp_eatTerm = function(state) {\n  if (this.regexp_eatAssertion(state)) {\n    // Handle `QuantifiableAssertion Quantifier` alternative.\n    // `state.lastAssertionIsQuantifiable` is true if the last eaten Assertion\n    // is a QuantifiableAssertion.\n    if (state.lastAssertionIsQuantifiable && this.regexp_eatQuantifier(state)) {\n      // Make the same message as V8.\n      if (state.switchU) {\n        state.raise(\"Invalid quantifier\");\n      }\n    }\n    return true\n  }\n\n  if (state.switchU ? this.regexp_eatAtom(state) : this.regexp_eatExtendedAtom(state)) {\n    this.regexp_eatQuantifier(state);\n    return true\n  }\n\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-Assertion\npp$9.regexp_eatAssertion = function(state) {\n  var start = state.pos;\n  state.lastAssertionIsQuantifiable = false;\n\n  // ^, $\n  if (state.eat(0x5E /* ^ */) || state.eat(0x24 /* $ */)) {\n    return true\n  }\n\n  // \\b \\B\n  if (state.eat(0x5C /* \\ */)) {\n    if (state.eat(0x42 /* B */) || state.eat(0x62 /* b */)) {\n      return true\n    }\n    state.pos = start;\n  }\n\n  // Lookahead / Lookbehind\n  if (state.eat(0x28 /* ( */) && state.eat(0x3F /* ? */)) {\n    var lookbehind = false;\n    if (this.options.ecmaVersion >= 9) {\n      lookbehind = state.eat(0x3C /* < */);\n    }\n    if (state.eat(0x3D /* = */) || state.eat(0x21 /* ! */)) {\n      this.regexp_disjunction(state);\n      if (!state.eat(0x29 /* ) */)) {\n        state.raise(\"Unterminated group\");\n      }\n      state.lastAssertionIsQuantifiable = !lookbehind;\n      return true\n    }\n  }\n\n  state.pos = start;\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Quantifier\npp$9.regexp_eatQuantifier = function(state, noError) {\n  if ( noError === void 0 ) noError = false;\n\n  if (this.regexp_eatQuantifierPrefix(state, noError)) {\n    state.eat(0x3F /* ? */);\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-QuantifierPrefix\npp$9.regexp_eatQuantifierPrefix = function(state, noError) {\n  return (\n    state.eat(0x2A /* * */) ||\n    state.eat(0x2B /* + */) ||\n    state.eat(0x3F /* ? */) ||\n    this.regexp_eatBracedQuantifier(state, noError)\n  )\n};\npp$9.regexp_eatBracedQuantifier = function(state, noError) {\n  var start = state.pos;\n  if (state.eat(0x7B /* { */)) {\n    var min = 0, max = -1;\n    if (this.regexp_eatDecimalDigits(state)) {\n      min = state.lastIntValue;\n      if (state.eat(0x2C /* , */) && this.regexp_eatDecimalDigits(state)) {\n        max = state.lastIntValue;\n      }\n      if (state.eat(0x7D /* } */)) {\n        // SyntaxError in https://www.ecma-international.org/ecma-262/8.0/#sec-term\n        if (max !== -1 && max < min && !noError) {\n          state.raise(\"numbers out of order in {} quantifier\");\n        }\n        return true\n      }\n    }\n    if (state.switchU && !noError) {\n      state.raise(\"Incomplete quantifier\");\n    }\n    state.pos = start;\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Atom\npp$9.regexp_eatAtom = function(state) {\n  return (\n    this.regexp_eatPatternCharacters(state) ||\n    state.eat(0x2E /* . */) ||\n    this.regexp_eatReverseSolidusAtomEscape(state) ||\n    this.regexp_eatCharacterClass(state) ||\n    this.regexp_eatUncapturingGroup(state) ||\n    this.regexp_eatCapturingGroup(state)\n  )\n};\npp$9.regexp_eatReverseSolidusAtomEscape = function(state) {\n  var start = state.pos;\n  if (state.eat(0x5C /* \\ */)) {\n    if (this.regexp_eatAtomEscape(state)) {\n      return true\n    }\n    state.pos = start;\n  }\n  return false\n};\npp$9.regexp_eatUncapturingGroup = function(state) {\n  var start = state.pos;\n  if (state.eat(0x28 /* ( */)) {\n    if (state.eat(0x3F /* ? */) && state.eat(0x3A /* : */)) {\n      this.regexp_disjunction(state);\n      if (state.eat(0x29 /* ) */)) {\n        return true\n      }\n      state.raise(\"Unterminated group\");\n    }\n    state.pos = start;\n  }\n  return false\n};\npp$9.regexp_eatCapturingGroup = function(state) {\n  if (state.eat(0x28 /* ( */)) {\n    if (this.options.ecmaVersion >= 9) {\n      this.regexp_groupSpecifier(state);\n    } else if (state.current() === 0x3F /* ? */) {\n      state.raise(\"Invalid group\");\n    }\n    this.regexp_disjunction(state);\n    if (state.eat(0x29 /* ) */)) {\n      state.numCapturingParens += 1;\n      return true\n    }\n    state.raise(\"Unterminated group\");\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-ExtendedAtom\npp$9.regexp_eatExtendedAtom = function(state) {\n  return (\n    state.eat(0x2E /* . */) ||\n    this.regexp_eatReverseSolidusAtomEscape(state) ||\n    this.regexp_eatCharacterClass(state) ||\n    this.regexp_eatUncapturingGroup(state) ||\n    this.regexp_eatCapturingGroup(state) ||\n    this.regexp_eatInvalidBracedQuantifier(state) ||\n    this.regexp_eatExtendedPatternCharacter(state)\n  )\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-InvalidBracedQuantifier\npp$9.regexp_eatInvalidBracedQuantifier = function(state) {\n  if (this.regexp_eatBracedQuantifier(state, true)) {\n    state.raise(\"Nothing to repeat\");\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-SyntaxCharacter\npp$9.regexp_eatSyntaxCharacter = function(state) {\n  var ch = state.current();\n  if (isSyntaxCharacter(ch)) {\n    state.lastIntValue = ch;\n    state.advance();\n    return true\n  }\n  return false\n};\nfunction isSyntaxCharacter(ch) {\n  return (\n    ch === 0x24 /* $ */ ||\n    ch >= 0x28 /* ( */ && ch <= 0x2B /* + */ ||\n    ch === 0x2E /* . */ ||\n    ch === 0x3F /* ? */ ||\n    ch >= 0x5B /* [ */ && ch <= 0x5E /* ^ */ ||\n    ch >= 0x7B /* { */ && ch <= 0x7D /* } */\n  )\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-PatternCharacter\n// But eat eager.\npp$9.regexp_eatPatternCharacters = function(state) {\n  var start = state.pos;\n  var ch = 0;\n  while ((ch = state.current()) !== -1 && !isSyntaxCharacter(ch)) {\n    state.advance();\n  }\n  return state.pos !== start\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-ExtendedPatternCharacter\npp$9.regexp_eatExtendedPatternCharacter = function(state) {\n  var ch = state.current();\n  if (\n    ch !== -1 &&\n    ch !== 0x24 /* $ */ &&\n    !(ch >= 0x28 /* ( */ && ch <= 0x2B /* + */) &&\n    ch !== 0x2E /* . */ &&\n    ch !== 0x3F /* ? */ &&\n    ch !== 0x5B /* [ */ &&\n    ch !== 0x5E /* ^ */ &&\n    ch !== 0x7C /* | */\n  ) {\n    state.advance();\n    return true\n  }\n  return false\n};\n\n// GroupSpecifier[U] ::\n//   [empty]\n//   `?` GroupName[?U]\npp$9.regexp_groupSpecifier = function(state) {\n  if (state.eat(0x3F /* ? */)) {\n    if (this.regexp_eatGroupName(state)) {\n      if (state.groupNames.indexOf(state.lastStringValue) !== -1) {\n        state.raise(\"Duplicate capture group name\");\n      }\n      state.groupNames.push(state.lastStringValue);\n      return\n    }\n    state.raise(\"Invalid group\");\n  }\n};\n\n// GroupName[U] ::\n//   `<` RegExpIdentifierName[?U] `>`\n// Note: this updates `state.lastStringValue` property with the eaten name.\npp$9.regexp_eatGroupName = function(state) {\n  state.lastStringValue = \"\";\n  if (state.eat(0x3C /* < */)) {\n    if (this.regexp_eatRegExpIdentifierName(state) && state.eat(0x3E /* > */)) {\n      return true\n    }\n    state.raise(\"Invalid capture group name\");\n  }\n  return false\n};\n\n// RegExpIdentifierName[U] ::\n//   RegExpIdentifierStart[?U]\n//   RegExpIdentifierName[?U] RegExpIdentifierPart[?U]\n// Note: this updates `state.lastStringValue` property with the eaten name.\npp$9.regexp_eatRegExpIdentifierName = function(state) {\n  state.lastStringValue = \"\";\n  if (this.regexp_eatRegExpIdentifierStart(state)) {\n    state.lastStringValue += codePointToString$1(state.lastIntValue);\n    while (this.regexp_eatRegExpIdentifierPart(state)) {\n      state.lastStringValue += codePointToString$1(state.lastIntValue);\n    }\n    return true\n  }\n  return false\n};\n\n// RegExpIdentifierStart[U] ::\n//   UnicodeIDStart\n//   `$`\n//   `_`\n//   `\\` RegExpUnicodeEscapeSequence[?U]\npp$9.regexp_eatRegExpIdentifierStart = function(state) {\n  var start = state.pos;\n  var ch = state.current();\n  state.advance();\n\n  if (ch === 0x5C /* \\ */ && this.regexp_eatRegExpUnicodeEscapeSequence(state)) {\n    ch = state.lastIntValue;\n  }\n  if (isRegExpIdentifierStart(ch)) {\n    state.lastIntValue = ch;\n    return true\n  }\n\n  state.pos = start;\n  return false\n};\nfunction isRegExpIdentifierStart(ch) {\n  return isIdentifierStart(ch, true) || ch === 0x24 /* $ */ || ch === 0x5F /* _ */\n}\n\n// RegExpIdentifierPart[U] ::\n//   UnicodeIDContinue\n//   `$`\n//   `_`\n//   `\\` RegExpUnicodeEscapeSequence[?U]\n//   <ZWNJ>\n//   <ZWJ>\npp$9.regexp_eatRegExpIdentifierPart = function(state) {\n  var start = state.pos;\n  var ch = state.current();\n  state.advance();\n\n  if (ch === 0x5C /* \\ */ && this.regexp_eatRegExpUnicodeEscapeSequence(state)) {\n    ch = state.lastIntValue;\n  }\n  if (isRegExpIdentifierPart(ch)) {\n    state.lastIntValue = ch;\n    return true\n  }\n\n  state.pos = start;\n  return false\n};\nfunction isRegExpIdentifierPart(ch) {\n  return isIdentifierChar(ch, true) || ch === 0x24 /* $ */ || ch === 0x5F /* _ */ || ch === 0x200C /* <ZWNJ> */ || ch === 0x200D /* <ZWJ> */\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-AtomEscape\npp$9.regexp_eatAtomEscape = function(state) {\n  if (\n    this.regexp_eatBackReference(state) ||\n    this.regexp_eatCharacterClassEscape(state) ||\n    this.regexp_eatCharacterEscape(state) ||\n    (state.switchN && this.regexp_eatKGroupName(state))\n  ) {\n    return true\n  }\n  if (state.switchU) {\n    // Make the same message as V8.\n    if (state.current() === 0x63 /* c */) {\n      state.raise(\"Invalid unicode escape\");\n    }\n    state.raise(\"Invalid escape\");\n  }\n  return false\n};\npp$9.regexp_eatBackReference = function(state) {\n  var start = state.pos;\n  if (this.regexp_eatDecimalEscape(state)) {\n    var n = state.lastIntValue;\n    if (state.switchU) {\n      // For SyntaxError in https://www.ecma-international.org/ecma-262/8.0/#sec-atomescape\n      if (n > state.maxBackReference) {\n        state.maxBackReference = n;\n      }\n      return true\n    }\n    if (n <= state.numCapturingParens) {\n      return true\n    }\n    state.pos = start;\n  }\n  return false\n};\npp$9.regexp_eatKGroupName = function(state) {\n  if (state.eat(0x6B /* k */)) {\n    if (this.regexp_eatGroupName(state)) {\n      state.backReferenceNames.push(state.lastStringValue);\n      return true\n    }\n    state.raise(\"Invalid named reference\");\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-CharacterEscape\npp$9.regexp_eatCharacterEscape = function(state) {\n  return (\n    this.regexp_eatControlEscape(state) ||\n    this.regexp_eatCControlLetter(state) ||\n    this.regexp_eatZero(state) ||\n    this.regexp_eatHexEscapeSequence(state) ||\n    this.regexp_eatRegExpUnicodeEscapeSequence(state) ||\n    (!state.switchU && this.regexp_eatLegacyOctalEscapeSequence(state)) ||\n    this.regexp_eatIdentityEscape(state)\n  )\n};\npp$9.regexp_eatCControlLetter = function(state) {\n  var start = state.pos;\n  if (state.eat(0x63 /* c */)) {\n    if (this.regexp_eatControlLetter(state)) {\n      return true\n    }\n    state.pos = start;\n  }\n  return false\n};\npp$9.regexp_eatZero = function(state) {\n  if (state.current() === 0x30 /* 0 */ && !isDecimalDigit(state.lookahead())) {\n    state.lastIntValue = 0;\n    state.advance();\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ControlEscape\npp$9.regexp_eatControlEscape = function(state) {\n  var ch = state.current();\n  if (ch === 0x74 /* t */) {\n    state.lastIntValue = 0x09; /* \\t */\n    state.advance();\n    return true\n  }\n  if (ch === 0x6E /* n */) {\n    state.lastIntValue = 0x0A; /* \\n */\n    state.advance();\n    return true\n  }\n  if (ch === 0x76 /* v */) {\n    state.lastIntValue = 0x0B; /* \\v */\n    state.advance();\n    return true\n  }\n  if (ch === 0x66 /* f */) {\n    state.lastIntValue = 0x0C; /* \\f */\n    state.advance();\n    return true\n  }\n  if (ch === 0x72 /* r */) {\n    state.lastIntValue = 0x0D; /* \\r */\n    state.advance();\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ControlLetter\npp$9.regexp_eatControlLetter = function(state) {\n  var ch = state.current();\n  if (isControlLetter(ch)) {\n    state.lastIntValue = ch % 0x20;\n    state.advance();\n    return true\n  }\n  return false\n};\nfunction isControlLetter(ch) {\n  return (\n    (ch >= 0x41 /* A */ && ch <= 0x5A /* Z */) ||\n    (ch >= 0x61 /* a */ && ch <= 0x7A /* z */)\n  )\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-RegExpUnicodeEscapeSequence\npp$9.regexp_eatRegExpUnicodeEscapeSequence = function(state) {\n  var start = state.pos;\n\n  if (state.eat(0x75 /* u */)) {\n    if (this.regexp_eatFixedHexDigits(state, 4)) {\n      var lead = state.lastIntValue;\n      if (state.switchU && lead >= 0xD800 && lead <= 0xDBFF) {\n        var leadSurrogateEnd = state.pos;\n        if (state.eat(0x5C /* \\ */) && state.eat(0x75 /* u */) && this.regexp_eatFixedHexDigits(state, 4)) {\n          var trail = state.lastIntValue;\n          if (trail >= 0xDC00 && trail <= 0xDFFF) {\n            state.lastIntValue = (lead - 0xD800) * 0x400 + (trail - 0xDC00) + 0x10000;\n            return true\n          }\n        }\n        state.pos = leadSurrogateEnd;\n        state.lastIntValue = lead;\n      }\n      return true\n    }\n    if (\n      state.switchU &&\n      state.eat(0x7B /* { */) &&\n      this.regexp_eatHexDigits(state) &&\n      state.eat(0x7D /* } */) &&\n      isValidUnicode(state.lastIntValue)\n    ) {\n      return true\n    }\n    if (state.switchU) {\n      state.raise(\"Invalid unicode escape\");\n    }\n    state.pos = start;\n  }\n\n  return false\n};\nfunction isValidUnicode(ch) {\n  return ch >= 0 && ch <= 0x10FFFF\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-IdentityEscape\npp$9.regexp_eatIdentityEscape = function(state) {\n  if (state.switchU) {\n    if (this.regexp_eatSyntaxCharacter(state)) {\n      return true\n    }\n    if (state.eat(0x2F /* / */)) {\n      state.lastIntValue = 0x2F; /* / */\n      return true\n    }\n    return false\n  }\n\n  var ch = state.current();\n  if (ch !== 0x63 /* c */ && (!state.switchN || ch !== 0x6B /* k */)) {\n    state.lastIntValue = ch;\n    state.advance();\n    return true\n  }\n\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-DecimalEscape\npp$9.regexp_eatDecimalEscape = function(state) {\n  state.lastIntValue = 0;\n  var ch = state.current();\n  if (ch >= 0x31 /* 1 */ && ch <= 0x39 /* 9 */) {\n    do {\n      state.lastIntValue = 10 * state.lastIntValue + (ch - 0x30 /* 0 */);\n      state.advance();\n    } while ((ch = state.current()) >= 0x30 /* 0 */ && ch <= 0x39 /* 9 */)\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-CharacterClassEscape\npp$9.regexp_eatCharacterClassEscape = function(state) {\n  var ch = state.current();\n\n  if (isCharacterClassEscape(ch)) {\n    state.lastIntValue = -1;\n    state.advance();\n    return true\n  }\n\n  if (\n    state.switchU &&\n    this.options.ecmaVersion >= 9 &&\n    (ch === 0x50 /* P */ || ch === 0x70 /* p */)\n  ) {\n    state.lastIntValue = -1;\n    state.advance();\n    if (\n      state.eat(0x7B /* { */) &&\n      this.regexp_eatUnicodePropertyValueExpression(state) &&\n      state.eat(0x7D /* } */)\n    ) {\n      return true\n    }\n    state.raise(\"Invalid property name\");\n  }\n\n  return false\n};\nfunction isCharacterClassEscape(ch) {\n  return (\n    ch === 0x64 /* d */ ||\n    ch === 0x44 /* D */ ||\n    ch === 0x73 /* s */ ||\n    ch === 0x53 /* S */ ||\n    ch === 0x77 /* w */ ||\n    ch === 0x57 /* W */\n  )\n}\n\n// UnicodePropertyValueExpression ::\n//   UnicodePropertyName `=` UnicodePropertyValue\n//   LoneUnicodePropertyNameOrValue\npp$9.regexp_eatUnicodePropertyValueExpression = function(state) {\n  var start = state.pos;\n\n  // UnicodePropertyName `=` UnicodePropertyValue\n  if (this.regexp_eatUnicodePropertyName(state) && state.eat(0x3D /* = */)) {\n    var name = state.lastStringValue;\n    if (this.regexp_eatUnicodePropertyValue(state)) {\n      var value = state.lastStringValue;\n      this.regexp_validateUnicodePropertyNameAndValue(state, name, value);\n      return true\n    }\n  }\n  state.pos = start;\n\n  // LoneUnicodePropertyNameOrValue\n  if (this.regexp_eatLoneUnicodePropertyNameOrValue(state)) {\n    var nameOrValue = state.lastStringValue;\n    this.regexp_validateUnicodePropertyNameOrValue(state, nameOrValue);\n    return true\n  }\n  return false\n};\npp$9.regexp_validateUnicodePropertyNameAndValue = function(state, name, value) {\n  if (!data.hasOwnProperty(name) || data[name].indexOf(value) === -1) {\n    state.raise(\"Invalid property name\");\n  }\n};\npp$9.regexp_validateUnicodePropertyNameOrValue = function(state, nameOrValue) {\n  if (data.$LONE.indexOf(nameOrValue) === -1) {\n    state.raise(\"Invalid property name\");\n  }\n};\n\n// UnicodePropertyName ::\n//   UnicodePropertyNameCharacters\npp$9.regexp_eatUnicodePropertyName = function(state) {\n  var ch = 0;\n  state.lastStringValue = \"\";\n  while (isUnicodePropertyNameCharacter(ch = state.current())) {\n    state.lastStringValue += codePointToString$1(ch);\n    state.advance();\n  }\n  return state.lastStringValue !== \"\"\n};\nfunction isUnicodePropertyNameCharacter(ch) {\n  return isControlLetter(ch) || ch === 0x5F /* _ */\n}\n\n// UnicodePropertyValue ::\n//   UnicodePropertyValueCharacters\npp$9.regexp_eatUnicodePropertyValue = function(state) {\n  var ch = 0;\n  state.lastStringValue = \"\";\n  while (isUnicodePropertyValueCharacter(ch = state.current())) {\n    state.lastStringValue += codePointToString$1(ch);\n    state.advance();\n  }\n  return state.lastStringValue !== \"\"\n};\nfunction isUnicodePropertyValueCharacter(ch) {\n  return isUnicodePropertyNameCharacter(ch) || isDecimalDigit(ch)\n}\n\n// LoneUnicodePropertyNameOrValue ::\n//   UnicodePropertyValueCharacters\npp$9.regexp_eatLoneUnicodePropertyNameOrValue = function(state) {\n  return this.regexp_eatUnicodePropertyValue(state)\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-CharacterClass\npp$9.regexp_eatCharacterClass = function(state) {\n  if (state.eat(0x5B /* [ */)) {\n    state.eat(0x5E /* ^ */);\n    this.regexp_classRanges(state);\n    if (state.eat(0x5D /* [ */)) {\n      return true\n    }\n    // Unreachable since it threw \"unterminated regular expression\" error before.\n    state.raise(\"Unterminated character class\");\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ClassRanges\n// https://www.ecma-international.org/ecma-262/8.0/#prod-NonemptyClassRanges\n// https://www.ecma-international.org/ecma-262/8.0/#prod-NonemptyClassRangesNoDash\npp$9.regexp_classRanges = function(state) {\n  var this$1 = this;\n\n  while (this.regexp_eatClassAtom(state)) {\n    var left = state.lastIntValue;\n    if (state.eat(0x2D /* - */) && this$1.regexp_eatClassAtom(state)) {\n      var right = state.lastIntValue;\n      if (state.switchU && (left === -1 || right === -1)) {\n        state.raise(\"Invalid character class\");\n      }\n      if (left !== -1 && right !== -1 && left > right) {\n        state.raise(\"Range out of order in character class\");\n      }\n    }\n  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ClassAtom\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ClassAtomNoDash\npp$9.regexp_eatClassAtom = function(state) {\n  var start = state.pos;\n\n  if (state.eat(0x5C /* \\ */)) {\n    if (this.regexp_eatClassEscape(state)) {\n      return true\n    }\n    if (state.switchU) {\n      // Make the same message as V8.\n      var ch$1 = state.current();\n      if (ch$1 === 0x63 /* c */ || isOctalDigit(ch$1)) {\n        state.raise(\"Invalid class escape\");\n      }\n      state.raise(\"Invalid escape\");\n    }\n    state.pos = start;\n  }\n\n  var ch = state.current();\n  if (ch !== 0x5D /* [ */) {\n    state.lastIntValue = ch;\n    state.advance();\n    return true\n  }\n\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-ClassEscape\npp$9.regexp_eatClassEscape = function(state) {\n  var start = state.pos;\n\n  if (state.eat(0x62 /* b */)) {\n    state.lastIntValue = 0x08; /* <BS> */\n    return true\n  }\n\n  if (state.switchU && state.eat(0x2D /* - */)) {\n    state.lastIntValue = 0x2D; /* - */\n    return true\n  }\n\n  if (!state.switchU && state.eat(0x63 /* c */)) {\n    if (this.regexp_eatClassControlLetter(state)) {\n      return true\n    }\n    state.pos = start;\n  }\n\n  return (\n    this.regexp_eatCharacterClassEscape(state) ||\n    this.regexp_eatCharacterEscape(state)\n  )\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-ClassControlLetter\npp$9.regexp_eatClassControlLetter = function(state) {\n  var ch = state.current();\n  if (isDecimalDigit(ch) || ch === 0x5F /* _ */) {\n    state.lastIntValue = ch % 0x20;\n    state.advance();\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-HexEscapeSequence\npp$9.regexp_eatHexEscapeSequence = function(state) {\n  var start = state.pos;\n  if (state.eat(0x78 /* x */)) {\n    if (this.regexp_eatFixedHexDigits(state, 2)) {\n      return true\n    }\n    if (state.switchU) {\n      state.raise(\"Invalid escape\");\n    }\n    state.pos = start;\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-DecimalDigits\npp$9.regexp_eatDecimalDigits = function(state) {\n  var start = state.pos;\n  var ch = 0;\n  state.lastIntValue = 0;\n  while (isDecimalDigit(ch = state.current())) {\n    state.lastIntValue = 10 * state.lastIntValue + (ch - 0x30 /* 0 */);\n    state.advance();\n  }\n  return state.pos !== start\n};\nfunction isDecimalDigit(ch) {\n  return ch >= 0x30 /* 0 */ && ch <= 0x39 /* 9 */\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-HexDigits\npp$9.regexp_eatHexDigits = function(state) {\n  var start = state.pos;\n  var ch = 0;\n  state.lastIntValue = 0;\n  while (isHexDigit(ch = state.current())) {\n    state.lastIntValue = 16 * state.lastIntValue + hexToInt(ch);\n    state.advance();\n  }\n  return state.pos !== start\n};\nfunction isHexDigit(ch) {\n  return (\n    (ch >= 0x30 /* 0 */ && ch <= 0x39 /* 9 */) ||\n    (ch >= 0x41 /* A */ && ch <= 0x46 /* F */) ||\n    (ch >= 0x61 /* a */ && ch <= 0x66 /* f */)\n  )\n}\nfunction hexToInt(ch) {\n  if (ch >= 0x41 /* A */ && ch <= 0x46 /* F */) {\n    return 10 + (ch - 0x41 /* A */)\n  }\n  if (ch >= 0x61 /* a */ && ch <= 0x66 /* f */) {\n    return 10 + (ch - 0x61 /* a */)\n  }\n  return ch - 0x30 /* 0 */\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-LegacyOctalEscapeSequence\n// Allows only 0-377(octal) i.e. 0-255(decimal).\npp$9.regexp_eatLegacyOctalEscapeSequence = function(state) {\n  if (this.regexp_eatOctalDigit(state)) {\n    var n1 = state.lastIntValue;\n    if (this.regexp_eatOctalDigit(state)) {\n      var n2 = state.lastIntValue;\n      if (n1 <= 3 && this.regexp_eatOctalDigit(state)) {\n        state.lastIntValue = n1 * 64 + n2 * 8 + state.lastIntValue;\n      } else {\n        state.lastIntValue = n1 * 8 + n2;\n      }\n    } else {\n      state.lastIntValue = n1;\n    }\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-OctalDigit\npp$9.regexp_eatOctalDigit = function(state) {\n  var ch = state.current();\n  if (isOctalDigit(ch)) {\n    state.lastIntValue = ch - 0x30; /* 0 */\n    state.advance();\n    return true\n  }\n  state.lastIntValue = 0;\n  return false\n};\nfunction isOctalDigit(ch) {\n  return ch >= 0x30 /* 0 */ && ch <= 0x37 /* 7 */\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Hex4Digits\n// https://www.ecma-international.org/ecma-262/8.0/#prod-HexDigit\n// And HexDigit HexDigit in https://www.ecma-international.org/ecma-262/8.0/#prod-HexEscapeSequence\npp$9.regexp_eatFixedHexDigits = function(state, length) {\n  var start = state.pos;\n  state.lastIntValue = 0;\n  for (var i = 0; i < length; ++i) {\n    var ch = state.current();\n    if (!isHexDigit(ch)) {\n      state.pos = start;\n      return false\n    }\n    state.lastIntValue = 16 * state.lastIntValue + hexToInt(ch);\n    state.advance();\n  }\n  return true\n};\n\n// Object type used to represent tokens. Note that normally, tokens\n// simply exist as properties on the parser object. This is only\n// used for the onToken callback and the external tokenizer.\n\nvar Token = function Token(p) {\n  this.type = p.type;\n  this.value = p.value;\n  this.start = p.start;\n  this.end = p.end;\n  if (p.options.locations)\n    { this.loc = new SourceLocation(p, p.startLoc, p.endLoc); }\n  if (p.options.ranges)\n    { this.range = [p.start, p.end]; }\n};\n\n// ## Tokenizer\n\nvar pp$8 = Parser.prototype;\n\n// Move to the next token\n\npp$8.next = function() {\n  if (this.options.onToken)\n    { this.options.onToken(new Token(this)); }\n\n  this.lastTokEnd = this.end;\n  this.lastTokStart = this.start;\n  this.lastTokEndLoc = this.endLoc;\n  this.lastTokStartLoc = this.startLoc;\n  this.nextToken();\n};\n\npp$8.getToken = function() {\n  this.next();\n  return new Token(this)\n};\n\n// If we're in an ES6 environment, make parsers iterable\nif (typeof Symbol !== \"undefined\")\n  { pp$8[Symbol.iterator] = function() {\n    var this$1 = this;\n\n    return {\n      next: function () {\n        var token = this$1.getToken();\n        return {\n          done: token.type === types.eof,\n          value: token\n        }\n      }\n    }\n  }; }\n\n// Toggle strict mode. Re-reads the next number or string to please\n// pedantic tests (`\"use strict\"; 010;` should fail).\n\npp$8.curContext = function() {\n  return this.context[this.context.length - 1]\n};\n\n// Read a single token, updating the parser object's token-related\n// properties.\n\npp$8.nextToken = function() {\n  var curContext = this.curContext();\n  if (!curContext || !curContext.preserveSpace) { this.skipSpace(); }\n\n  this.start = this.pos;\n  if (this.options.locations) { this.startLoc = this.curPosition(); }\n  if (this.pos >= this.input.length) { return this.finishToken(types.eof) }\n\n  if (curContext.override) { return curContext.override(this) }\n  else { this.readToken(this.fullCharCodeAtPos()); }\n};\n\npp$8.readToken = function(code) {\n  // Identifier or keyword. '\\uXXXX' sequences are allowed in\n  // identifiers, so '\\' also dispatches to that.\n  if (isIdentifierStart(code, this.options.ecmaVersion >= 6) || code === 92 /* '\\' */)\n    { return this.readWord() }\n\n  return this.getTokenFromCode(code)\n};\n\npp$8.fullCharCodeAtPos = function() {\n  var code = this.input.charCodeAt(this.pos);\n  if (code <= 0xd7ff || code >= 0xe000) { return code }\n  var next = this.input.charCodeAt(this.pos + 1);\n  return (code << 10) + next - 0x35fdc00\n};\n\npp$8.skipBlockComment = function() {\n  var this$1 = this;\n\n  var startLoc = this.options.onComment && this.curPosition();\n  var start = this.pos, end = this.input.indexOf(\"*/\", this.pos += 2);\n  if (end === -1) { this.raise(this.pos - 2, \"Unterminated comment\"); }\n  this.pos = end + 2;\n  if (this.options.locations) {\n    lineBreakG.lastIndex = start;\n    var match;\n    while ((match = lineBreakG.exec(this.input)) && match.index < this.pos) {\n      ++this$1.curLine;\n      this$1.lineStart = match.index + match[0].length;\n    }\n  }\n  if (this.options.onComment)\n    { this.options.onComment(true, this.input.slice(start + 2, end), start, this.pos,\n                           startLoc, this.curPosition()); }\n};\n\npp$8.skipLineComment = function(startSkip) {\n  var this$1 = this;\n\n  var start = this.pos;\n  var startLoc = this.options.onComment && this.curPosition();\n  var ch = this.input.charCodeAt(this.pos += startSkip);\n  while (this.pos < this.input.length && !isNewLine(ch)) {\n    ch = this$1.input.charCodeAt(++this$1.pos);\n  }\n  if (this.options.onComment)\n    { this.options.onComment(false, this.input.slice(start + startSkip, this.pos), start, this.pos,\n                           startLoc, this.curPosition()); }\n};\n\n// Called at the start of the parse and after every token. Skips\n// whitespace and comments, and.\n\npp$8.skipSpace = function() {\n  var this$1 = this;\n\n  loop: while (this.pos < this.input.length) {\n    var ch = this$1.input.charCodeAt(this$1.pos);\n    switch (ch) {\n    case 32: case 160: // ' '\n      ++this$1.pos;\n      break\n    case 13:\n      if (this$1.input.charCodeAt(this$1.pos + 1) === 10) {\n        ++this$1.pos;\n      }\n    case 10: case 8232: case 8233:\n      ++this$1.pos;\n      if (this$1.options.locations) {\n        ++this$1.curLine;\n        this$1.lineStart = this$1.pos;\n      }\n      break\n    case 47: // '/'\n      switch (this$1.input.charCodeAt(this$1.pos + 1)) {\n      case 42: // '*'\n        this$1.skipBlockComment();\n        break\n      case 47:\n        this$1.skipLineComment(2);\n        break\n      default:\n        break loop\n      }\n      break\n    default:\n      if (ch > 8 && ch < 14 || ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n        ++this$1.pos;\n      } else {\n        break loop\n      }\n    }\n  }\n};\n\n// Called at the end of every token. Sets `end`, `val`, and\n// maintains `context` and `exprAllowed`, and skips the space after\n// the token, so that the next one's `start` will point at the\n// right position.\n\npp$8.finishToken = function(type, val) {\n  this.end = this.pos;\n  if (this.options.locations) { this.endLoc = this.curPosition(); }\n  var prevType = this.type;\n  this.type = type;\n  this.value = val;\n\n  this.updateContext(prevType);\n};\n\n// ### Token reading\n\n// This is the function that is called to fetch the next token. It\n// is somewhat obscure, because it works in character codes rather\n// than characters, and because operator parsing has been inlined\n// into it.\n//\n// All in the name of speed.\n//\npp$8.readToken_dot = function() {\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next >= 48 && next <= 57) { return this.readNumber(true) }\n  var next2 = this.input.charCodeAt(this.pos + 2);\n  if (this.options.ecmaVersion >= 6 && next === 46 && next2 === 46) { // 46 = dot '.'\n    this.pos += 3;\n    return this.finishToken(types.ellipsis)\n  } else {\n    ++this.pos;\n    return this.finishToken(types.dot)\n  }\n};\n\npp$8.readToken_slash = function() { // '/'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (this.exprAllowed) { ++this.pos; return this.readRegexp() }\n  if (next === 61) { return this.finishOp(types.assign, 2) }\n  return this.finishOp(types.slash, 1)\n};\n\npp$8.readToken_mult_modulo_exp = function(code) { // '%*'\n  var next = this.input.charCodeAt(this.pos + 1);\n  var size = 1;\n  var tokentype = code === 42 ? types.star : types.modulo;\n\n  // exponentiation operator ** and **=\n  if (this.options.ecmaVersion >= 7 && code === 42 && next === 42) {\n    ++size;\n    tokentype = types.starstar;\n    next = this.input.charCodeAt(this.pos + 2);\n  }\n\n  if (next === 61) { return this.finishOp(types.assign, size + 1) }\n  return this.finishOp(tokentype, size)\n};\n\npp$8.readToken_pipe_amp = function(code) { // '|&'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next === code) { return this.finishOp(code === 124 ? types.logicalOR : types.logicalAND, 2) }\n  if (next === 61) { return this.finishOp(types.assign, 2) }\n  return this.finishOp(code === 124 ? types.bitwiseOR : types.bitwiseAND, 1)\n};\n\npp$8.readToken_caret = function() { // '^'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next === 61) { return this.finishOp(types.assign, 2) }\n  return this.finishOp(types.bitwiseXOR, 1)\n};\n\npp$8.readToken_plus_min = function(code) { // '+-'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next === code) {\n    if (next === 45 && !this.inModule && this.input.charCodeAt(this.pos + 2) === 62 &&\n        (this.lastTokEnd === 0 || lineBreak.test(this.input.slice(this.lastTokEnd, this.pos)))) {\n      // A `-->` line comment\n      this.skipLineComment(3);\n      this.skipSpace();\n      return this.nextToken()\n    }\n    return this.finishOp(types.incDec, 2)\n  }\n  if (next === 61) { return this.finishOp(types.assign, 2) }\n  return this.finishOp(types.plusMin, 1)\n};\n\npp$8.readToken_lt_gt = function(code) { // '<>'\n  var next = this.input.charCodeAt(this.pos + 1);\n  var size = 1;\n  if (next === code) {\n    size = code === 62 && this.input.charCodeAt(this.pos + 2) === 62 ? 3 : 2;\n    if (this.input.charCodeAt(this.pos + size) === 61) { return this.finishOp(types.assign, size + 1) }\n    return this.finishOp(types.bitShift, size)\n  }\n  if (next === 33 && code === 60 && !this.inModule && this.input.charCodeAt(this.pos + 2) === 45 &&\n      this.input.charCodeAt(this.pos + 3) === 45) {\n    // `<!--`, an XML-style comment that should be interpreted as a line comment\n    this.skipLineComment(4);\n    this.skipSpace();\n    return this.nextToken()\n  }\n  if (next === 61) { size = 2; }\n  return this.finishOp(types.relational, size)\n};\n\npp$8.readToken_eq_excl = function(code) { // '=!'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next === 61) { return this.finishOp(types.equality, this.input.charCodeAt(this.pos + 2) === 61 ? 3 : 2) }\n  if (code === 61 && next === 62 && this.options.ecmaVersion >= 6) { // '=>'\n    this.pos += 2;\n    return this.finishToken(types.arrow)\n  }\n  return this.finishOp(code === 61 ? types.eq : types.prefix, 1)\n};\n\npp$8.getTokenFromCode = function(code) {\n  switch (code) {\n  // The interpretation of a dot depends on whether it is followed\n  // by a digit or another two dots.\n  case 46: // '.'\n    return this.readToken_dot()\n\n  // Punctuation tokens.\n  case 40: ++this.pos; return this.finishToken(types.parenL)\n  case 41: ++this.pos; return this.finishToken(types.parenR)\n  case 59: ++this.pos; return this.finishToken(types.semi)\n  case 44: ++this.pos; return this.finishToken(types.comma)\n  case 91: ++this.pos; return this.finishToken(types.bracketL)\n  case 93: ++this.pos; return this.finishToken(types.bracketR)\n  case 123: ++this.pos; return this.finishToken(types.braceL)\n  case 125: ++this.pos; return this.finishToken(types.braceR)\n  case 58: ++this.pos; return this.finishToken(types.colon)\n  case 63: ++this.pos; return this.finishToken(types.question)\n\n  case 96: // '`'\n    if (this.options.ecmaVersion < 6) { break }\n    ++this.pos;\n    return this.finishToken(types.backQuote)\n\n  case 48: // '0'\n    var next = this.input.charCodeAt(this.pos + 1);\n    if (next === 120 || next === 88) { return this.readRadixNumber(16) } // '0x', '0X' - hex number\n    if (this.options.ecmaVersion >= 6) {\n      if (next === 111 || next === 79) { return this.readRadixNumber(8) } // '0o', '0O' - octal number\n      if (next === 98 || next === 66) { return this.readRadixNumber(2) } // '0b', '0B' - binary number\n    }\n\n  // Anything else beginning with a digit is an integer, octal\n  // number, or float.\n  case 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57: // 1-9\n    return this.readNumber(false)\n\n  // Quotes produce strings.\n  case 34: case 39: // '\"', \"'\"\n    return this.readString(code)\n\n  // Operators are parsed inline in tiny state machines. '=' (61) is\n  // often referred to. `finishOp` simply skips the amount of\n  // characters it is given as second argument, and returns a token\n  // of the type given by its first argument.\n\n  case 47: // '/'\n    return this.readToken_slash()\n\n  case 37: case 42: // '%*'\n    return this.readToken_mult_modulo_exp(code)\n\n  case 124: case 38: // '|&'\n    return this.readToken_pipe_amp(code)\n\n  case 94: // '^'\n    return this.readToken_caret()\n\n  case 43: case 45: // '+-'\n    return this.readToken_plus_min(code)\n\n  case 60: case 62: // '<>'\n    return this.readToken_lt_gt(code)\n\n  case 61: case 33: // '=!'\n    return this.readToken_eq_excl(code)\n\n  case 126: // '~'\n    return this.finishOp(types.prefix, 1)\n  }\n\n  this.raise(this.pos, \"Unexpected character '\" + codePointToString(code) + \"'\");\n};\n\npp$8.finishOp = function(type, size) {\n  var str = this.input.slice(this.pos, this.pos + size);\n  this.pos += size;\n  return this.finishToken(type, str)\n};\n\npp$8.readRegexp = function() {\n  var this$1 = this;\n\n  var escaped, inClass, start = this.pos;\n  for (;;) {\n    if (this$1.pos >= this$1.input.length) { this$1.raise(start, \"Unterminated regular expression\"); }\n    var ch = this$1.input.charAt(this$1.pos);\n    if (lineBreak.test(ch)) { this$1.raise(start, \"Unterminated regular expression\"); }\n    if (!escaped) {\n      if (ch === \"[\") { inClass = true; }\n      else if (ch === \"]\" && inClass) { inClass = false; }\n      else if (ch === \"/\" && !inClass) { break }\n      escaped = ch === \"\\\\\";\n    } else { escaped = false; }\n    ++this$1.pos;\n  }\n  var pattern = this.input.slice(start, this.pos);\n  ++this.pos;\n  var flagsStart = this.pos;\n  var flags = this.readWord1();\n  if (this.containsEsc) { this.unexpected(flagsStart); }\n\n  // Validate pattern\n  var state = this.regexpState || (this.regexpState = new RegExpValidationState(this));\n  state.reset(start, pattern, flags);\n  this.validateRegExpFlags(state);\n  this.validateRegExpPattern(state);\n\n  // Create Literal#value property value.\n  var value = null;\n  try {\n    value = new RegExp(pattern, flags);\n  } catch (e) {\n    // ESTree requires null if it failed to instantiate RegExp object.\n    // https://github.com/estree/estree/blob/a27003adf4fd7bfad44de9cef372a2eacd527b1c/es5.md#regexpliteral\n  }\n\n  return this.finishToken(types.regexp, {pattern: pattern, flags: flags, value: value})\n};\n\n// Read an integer in the given radix. Return null if zero digits\n// were read, the integer value otherwise. When `len` is given, this\n// will return `null` unless the integer has exactly `len` digits.\n\npp$8.readInt = function(radix, len) {\n  var this$1 = this;\n\n  var start = this.pos, total = 0;\n  for (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n    var code = this$1.input.charCodeAt(this$1.pos), val = (void 0);\n    if (code >= 97) { val = code - 97 + 10; } // a\n    else if (code >= 65) { val = code - 65 + 10; } // A\n    else if (code >= 48 && code <= 57) { val = code - 48; } // 0-9\n    else { val = Infinity; }\n    if (val >= radix) { break }\n    ++this$1.pos;\n    total = total * radix + val;\n  }\n  if (this.pos === start || len != null && this.pos - start !== len) { return null }\n\n  return total\n};\n\npp$8.readRadixNumber = function(radix) {\n  this.pos += 2; // 0x\n  var val = this.readInt(radix);\n  if (val == null) { this.raise(this.start + 2, \"Expected number in radix \" + radix); }\n  if (isIdentifierStart(this.fullCharCodeAtPos())) { this.raise(this.pos, \"Identifier directly after number\"); }\n  return this.finishToken(types.num, val)\n};\n\n// Read an integer, octal integer, or floating-point number.\n\npp$8.readNumber = function(startsWithDot) {\n  var start = this.pos;\n  if (!startsWithDot && this.readInt(10) === null) { this.raise(start, \"Invalid number\"); }\n  var octal = this.pos - start >= 2 && this.input.charCodeAt(start) === 48;\n  if (octal && this.strict) { this.raise(start, \"Invalid number\"); }\n  if (octal && /[89]/.test(this.input.slice(start, this.pos))) { octal = false; }\n  var next = this.input.charCodeAt(this.pos);\n  if (next === 46 && !octal) { // '.'\n    ++this.pos;\n    this.readInt(10);\n    next = this.input.charCodeAt(this.pos);\n  }\n  if ((next === 69 || next === 101) && !octal) { // 'eE'\n    next = this.input.charCodeAt(++this.pos);\n    if (next === 43 || next === 45) { ++this.pos; } // '+-'\n    if (this.readInt(10) === null) { this.raise(start, \"Invalid number\"); }\n  }\n  if (isIdentifierStart(this.fullCharCodeAtPos())) { this.raise(this.pos, \"Identifier directly after number\"); }\n\n  var str = this.input.slice(start, this.pos);\n  var val = octal ? parseInt(str, 8) : parseFloat(str);\n  return this.finishToken(types.num, val)\n};\n\n// Read a string value, interpreting backslash-escapes.\n\npp$8.readCodePoint = function() {\n  var ch = this.input.charCodeAt(this.pos), code;\n\n  if (ch === 123) { // '{'\n    if (this.options.ecmaVersion < 6) { this.unexpected(); }\n    var codePos = ++this.pos;\n    code = this.readHexChar(this.input.indexOf(\"}\", this.pos) - this.pos);\n    ++this.pos;\n    if (code > 0x10FFFF) { this.invalidStringToken(codePos, \"Code point out of bounds\"); }\n  } else {\n    code = this.readHexChar(4);\n  }\n  return code\n};\n\nfunction codePointToString(code) {\n  // UTF-16 Decoding\n  if (code <= 0xFFFF) { return String.fromCharCode(code) }\n  code -= 0x10000;\n  return String.fromCharCode((code >> 10) + 0xD800, (code & 1023) + 0xDC00)\n}\n\npp$8.readString = function(quote) {\n  var this$1 = this;\n\n  var out = \"\", chunkStart = ++this.pos;\n  for (;;) {\n    if (this$1.pos >= this$1.input.length) { this$1.raise(this$1.start, \"Unterminated string constant\"); }\n    var ch = this$1.input.charCodeAt(this$1.pos);\n    if (ch === quote) { break }\n    if (ch === 92) { // '\\'\n      out += this$1.input.slice(chunkStart, this$1.pos);\n      out += this$1.readEscapedChar(false);\n      chunkStart = this$1.pos;\n    } else {\n      if (isNewLine(ch, this$1.options.ecmaVersion >= 10)) { this$1.raise(this$1.start, \"Unterminated string constant\"); }\n      ++this$1.pos;\n    }\n  }\n  out += this.input.slice(chunkStart, this.pos++);\n  return this.finishToken(types.string, out)\n};\n\n// Reads template string tokens.\n\nvar INVALID_TEMPLATE_ESCAPE_ERROR = {};\n\npp$8.tryReadTemplateToken = function() {\n  this.inTemplateElement = true;\n  try {\n    this.readTmplToken();\n  } catch (err) {\n    if (err === INVALID_TEMPLATE_ESCAPE_ERROR) {\n      this.readInvalidTemplateToken();\n    } else {\n      throw err\n    }\n  }\n\n  this.inTemplateElement = false;\n};\n\npp$8.invalidStringToken = function(position, message) {\n  if (this.inTemplateElement && this.options.ecmaVersion >= 9) {\n    throw INVALID_TEMPLATE_ESCAPE_ERROR\n  } else {\n    this.raise(position, message);\n  }\n};\n\npp$8.readTmplToken = function() {\n  var this$1 = this;\n\n  var out = \"\", chunkStart = this.pos;\n  for (;;) {\n    if (this$1.pos >= this$1.input.length) { this$1.raise(this$1.start, \"Unterminated template\"); }\n    var ch = this$1.input.charCodeAt(this$1.pos);\n    if (ch === 96 || ch === 36 && this$1.input.charCodeAt(this$1.pos + 1) === 123) { // '`', '${'\n      if (this$1.pos === this$1.start && (this$1.type === types.template || this$1.type === types.invalidTemplate)) {\n        if (ch === 36) {\n          this$1.pos += 2;\n          return this$1.finishToken(types.dollarBraceL)\n        } else {\n          ++this$1.pos;\n          return this$1.finishToken(types.backQuote)\n        }\n      }\n      out += this$1.input.slice(chunkStart, this$1.pos);\n      return this$1.finishToken(types.template, out)\n    }\n    if (ch === 92) { // '\\'\n      out += this$1.input.slice(chunkStart, this$1.pos);\n      out += this$1.readEscapedChar(true);\n      chunkStart = this$1.pos;\n    } else if (isNewLine(ch)) {\n      out += this$1.input.slice(chunkStart, this$1.pos);\n      ++this$1.pos;\n      switch (ch) {\n      case 13:\n        if (this$1.input.charCodeAt(this$1.pos) === 10) { ++this$1.pos; }\n      case 10:\n        out += \"\\n\";\n        break\n      default:\n        out += String.fromCharCode(ch);\n        break\n      }\n      if (this$1.options.locations) {\n        ++this$1.curLine;\n        this$1.lineStart = this$1.pos;\n      }\n      chunkStart = this$1.pos;\n    } else {\n      ++this$1.pos;\n    }\n  }\n};\n\n// Reads a template token to search for the end, without validating any escape sequences\npp$8.readInvalidTemplateToken = function() {\n  var this$1 = this;\n\n  for (; this.pos < this.input.length; this.pos++) {\n    switch (this$1.input[this$1.pos]) {\n    case \"\\\\\":\n      ++this$1.pos;\n      break\n\n    case \"$\":\n      if (this$1.input[this$1.pos + 1] !== \"{\") {\n        break\n      }\n    // falls through\n\n    case \"`\":\n      return this$1.finishToken(types.invalidTemplate, this$1.input.slice(this$1.start, this$1.pos))\n\n    // no default\n    }\n  }\n  this.raise(this.start, \"Unterminated template\");\n};\n\n// Used to read escaped characters\n\npp$8.readEscapedChar = function(inTemplate) {\n  var ch = this.input.charCodeAt(++this.pos);\n  ++this.pos;\n  switch (ch) {\n  case 110: return \"\\n\" // 'n' -> '\\n'\n  case 114: return \"\\r\" // 'r' -> '\\r'\n  case 120: return String.fromCharCode(this.readHexChar(2)) // 'x'\n  case 117: return codePointToString(this.readCodePoint()) // 'u'\n  case 116: return \"\\t\" // 't' -> '\\t'\n  case 98: return \"\\b\" // 'b' -> '\\b'\n  case 118: return \"\\u000b\" // 'v' -> '\\u000b'\n  case 102: return \"\\f\" // 'f' -> '\\f'\n  case 13: if (this.input.charCodeAt(this.pos) === 10) { ++this.pos; } // '\\r\\n'\n  case 10: // ' \\n'\n    if (this.options.locations) { this.lineStart = this.pos; ++this.curLine; }\n    return \"\"\n  default:\n    if (ch >= 48 && ch <= 55) {\n      var octalStr = this.input.substr(this.pos - 1, 3).match(/^[0-7]+/)[0];\n      var octal = parseInt(octalStr, 8);\n      if (octal > 255) {\n        octalStr = octalStr.slice(0, -1);\n        octal = parseInt(octalStr, 8);\n      }\n      this.pos += octalStr.length - 1;\n      ch = this.input.charCodeAt(this.pos);\n      if ((octalStr !== \"0\" || ch === 56 || ch === 57) && (this.strict || inTemplate)) {\n        this.invalidStringToken(\n          this.pos - 1 - octalStr.length,\n          inTemplate\n            ? \"Octal literal in template string\"\n            : \"Octal literal in strict mode\"\n        );\n      }\n      return String.fromCharCode(octal)\n    }\n    return String.fromCharCode(ch)\n  }\n};\n\n// Used to read character escape sequences ('\\x', '\\u', '\\U').\n\npp$8.readHexChar = function(len) {\n  var codePos = this.pos;\n  var n = this.readInt(16, len);\n  if (n === null) { this.invalidStringToken(codePos, \"Bad character escape sequence\"); }\n  return n\n};\n\n// Read an identifier, and return it as a string. Sets `this.containsEsc`\n// to whether the word contained a '\\u' escape.\n//\n// Incrementally adds only escaped chars, adding other chunks as-is\n// as a micro-optimization.\n\npp$8.readWord1 = function() {\n  var this$1 = this;\n\n  this.containsEsc = false;\n  var word = \"\", first = true, chunkStart = this.pos;\n  var astral = this.options.ecmaVersion >= 6;\n  while (this.pos < this.input.length) {\n    var ch = this$1.fullCharCodeAtPos();\n    if (isIdentifierChar(ch, astral)) {\n      this$1.pos += ch <= 0xffff ? 1 : 2;\n    } else if (ch === 92) { // \"\\\"\n      this$1.containsEsc = true;\n      word += this$1.input.slice(chunkStart, this$1.pos);\n      var escStart = this$1.pos;\n      if (this$1.input.charCodeAt(++this$1.pos) !== 117) // \"u\"\n        { this$1.invalidStringToken(this$1.pos, \"Expecting Unicode escape sequence \\\\uXXXX\"); }\n      ++this$1.pos;\n      var esc = this$1.readCodePoint();\n      if (!(first ? isIdentifierStart : isIdentifierChar)(esc, astral))\n        { this$1.invalidStringToken(escStart, \"Invalid Unicode escape\"); }\n      word += codePointToString(esc);\n      chunkStart = this$1.pos;\n    } else {\n      break\n    }\n    first = false;\n  }\n  return word + this.input.slice(chunkStart, this.pos)\n};\n\n// Read an identifier or keyword token. Will check for reserved\n// words when necessary.\n\npp$8.readWord = function() {\n  var word = this.readWord1();\n  var type = types.name;\n  if (this.keywords.test(word)) {\n    if (this.containsEsc) { this.raiseRecoverable(this.start, \"Escape sequence in keyword \" + word); }\n    type = keywords$1[word];\n  }\n  return this.finishToken(type, word)\n};\n\n// Acorn is a tiny, fast JavaScript parser written in JavaScript.\n//\n// Acorn was written by Marijn Haverbeke, Ingvar Stepanyan, and\n// various contributors and released under an MIT license.\n//\n// Git repositories for Acorn are available at\n//\n//     http://marijnhaverbeke.nl/git/acorn\n//     https://github.com/acornjs/acorn.git\n//\n// Please use the [github bug tracker][ghbt] to report issues.\n//\n// [ghbt]: https://github.com/acornjs/acorn/issues\n//\n// This file defines the main parser interface. The library also comes\n// with a [error-tolerant parser][dammit] and an\n// [abstract syntax tree walker][walk], defined in other files.\n//\n// [dammit]: acorn_loose.js\n// [walk]: util/walk.js\n\nvar version = \"5.7.3\";\n\n// The main exported interface (under `self.acorn` when in the\n// browser) is a `parse` function that takes a code string and\n// returns an abstract syntax tree as specified by [Mozilla parser\n// API][api].\n//\n// [api]: https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API\n\nfunction parse(input, options) {\n  return new Parser(options, input).parse()\n}\n\n// This function tries to parse a single expression at a given\n// offset in a string. Useful for parsing mixed-language formats\n// that embed JavaScript expressions.\n\nfunction parseExpressionAt(input, pos, options) {\n  var p = new Parser(options, input, pos);\n  p.nextToken();\n  return p.parseExpression()\n}\n\n// Acorn is organized as a tokenizer and a recursive-descent parser.\n// The `tokenizer` export provides an interface to the tokenizer.\n\nfunction tokenizer(input, options) {\n  return new Parser(options, input)\n}\n\n// This is a terrible kludge to support the existing, pre-ES6\n// interface where the loose parser module retroactively adds exports\n// to this module.\nvar parse_dammit;\nvar LooseParser;\nvar pluginsLoose; // eslint-disable-line camelcase\nfunction addLooseExports(parse, Parser$$1, plugins$$1) {\n  parse_dammit = parse; // eslint-disable-line camelcase\n  LooseParser = Parser$$1;\n  pluginsLoose = plugins$$1;\n}\n\nexport { version, parse, parseExpressionAt, tokenizer, parse_dammit, LooseParser, pluginsLoose, addLooseExports, Parser, plugins, defaultOptions, Position, SourceLocation, getLineInfo, Node, TokenType, types as tokTypes, keywords$1 as keywordTypes, TokContext, types$1 as tokContexts, isIdentifierChar, isIdentifierStart, Token, isNewLine, lineBreak, lineBreakG, nonASCIIwhitespace };\n","/*!\n * Paper.js v0.12.15 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Wed Mar 17 10:49:48 2021 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2020 Jürg Lehni\n * http://juerglehni.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\n\nvar paper = function(self, undefined) {\n\nself = self || require('./node/self.js');\nvar window = self.window,\n\tdocument = self.document;\n\nvar Base = new function() {\n\tvar hidden = /^(statics|enumerable|beans|preserve)$/,\n\t\tarray = [],\n\t\tslice = array.slice,\n\t\tcreate = Object.create,\n\t\tdescribe = Object.getOwnPropertyDescriptor,\n\t\tdefine = Object.defineProperty,\n\n\t\tforEach = array.forEach || function(iter, bind) {\n\t\t\tfor (var i = 0, l = this.length; i < l; i++) {\n\t\t\t\titer.call(bind, this[i], i, this);\n\t\t\t}\n\t\t},\n\n\t\tforIn = function(iter, bind) {\n\t\t\tfor (var i in this) {\n\t\t\t\tif (this.hasOwnProperty(i))\n\t\t\t\t\titer.call(bind, this[i], i, this);\n\t\t\t}\n\t\t},\n\n\t\tset = Object.assign || function(dst) {\n\t\t\tfor (var i = 1, l = arguments.length; i < l; i++) {\n\t\t\t\tvar src = arguments[i];\n\t\t\t\tfor (var key in src) {\n\t\t\t\t\tif (src.hasOwnProperty(key))\n\t\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn dst;\n\t\t},\n\n\t\teach = function(obj, iter, bind) {\n\t\t\tif (obj) {\n\t\t\t\tvar desc = describe(obj, 'length');\n\t\t\t\t(desc && typeof desc.value === 'number' ? forEach : forIn)\n\t\t\t\t\t.call(obj, iter, bind = bind || obj);\n\t\t\t}\n\t\t\treturn bind;\n\t\t};\n\n\tfunction inject(dest, src, enumerable, beans, preserve) {\n\t\tvar beansNames = {};\n\n\t\tfunction field(name, val) {\n\t\t\tval = val || (val = describe(src, name))\n\t\t\t\t\t&& (val.get ? val : val.value);\n\t\t\tif (typeof val === 'string' && val[0] === '#')\n\t\t\t\tval = dest[val.substring(1)] || val;\n\t\t\tvar isFunc = typeof val === 'function',\n\t\t\t\tres = val,\n\t\t\t\tprev = preserve || isFunc && !val.base\n\t\t\t\t\t\t? (val && val.get ? name in dest : dest[name])\n\t\t\t\t\t\t: null,\n\t\t\t\tbean;\n\t\t\tif (!preserve || !prev) {\n\t\t\t\tif (isFunc && prev)\n\t\t\t\t\tval.base = prev;\n\t\t\t\tif (isFunc && beans !== false\n\t\t\t\t\t\t&& (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/)))\n\t\t\t\t\tbeansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n\t\t\t\tif (!res || isFunc || !res.get || typeof res.get !== 'function'\n\t\t\t\t\t\t|| !Base.isPlainObject(res)) {\n\t\t\t\t\tres = { value: res, writable: true };\n\t\t\t\t}\n\t\t\t\tif ((describe(dest, name)\n\t\t\t\t\t\t|| { configurable: true }).configurable) {\n\t\t\t\t\tres.configurable = true;\n\t\t\t\t\tres.enumerable = enumerable != null ? enumerable : !bean;\n\t\t\t\t}\n\t\t\t\tdefine(dest, name, res);\n\t\t\t}\n\t\t}\n\t\tif (src) {\n\t\t\tfor (var name in src) {\n\t\t\t\tif (src.hasOwnProperty(name) && !hidden.test(name))\n\t\t\t\t\tfield(name);\n\t\t\t}\n\t\t\tfor (var name in beansNames) {\n\t\t\t\tvar part = beansNames[name],\n\t\t\t\t\tset = dest['set' + part],\n\t\t\t\t\tget = dest['get' + part] || set && dest['is' + part];\n\t\t\t\tif (get && (beans === true || get.length === 0))\n\t\t\t\t\tfield(name, { get: get, set: set });\n\t\t\t}\n\t\t}\n\t\treturn dest;\n\t}\n\n\tfunction Base() {\n\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\n\t\t\tvar src = arguments[i];\n\t\t\tif (src)\n\t\t\t\tset(this, src);\n\t\t}\n\t\treturn this;\n\t}\n\n\treturn inject(Base, {\n\t\tinject: function(src) {\n\t\t\tif (src) {\n\t\t\t\tvar statics = src.statics === true ? src : src.statics,\n\t\t\t\t\tbeans = src.beans,\n\t\t\t\t\tpreserve = src.preserve;\n\t\t\t\tif (statics !== src)\n\t\t\t\t\tinject(this.prototype, src, src.enumerable, beans, preserve);\n\t\t\t\tinject(this, statics, null, beans, preserve);\n\t\t\t}\n\t\t\tfor (var i = 1, l = arguments.length; i < l; i++)\n\t\t\t\tthis.inject(arguments[i]);\n\t\t\treturn this;\n\t\t},\n\n\t\textend: function() {\n\t\t\tvar base = this,\n\t\t\t\tctor,\n\t\t\t\tproto;\n\t\t\tfor (var i = 0, obj, l = arguments.length;\n\t\t\t\t\ti < l && !(ctor && proto); i++) {\n\t\t\t\tobj = arguments[i];\n\t\t\t\tctor = ctor || obj.initialize;\n\t\t\t\tproto = proto || obj.prototype;\n\t\t\t}\n\t\t\tctor = ctor || function() {\n\t\t\t\tbase.apply(this, arguments);\n\t\t\t};\n\t\t\tproto = ctor.prototype = proto || create(this.prototype);\n\t\t\tdefine(proto, 'constructor',\n\t\t\t\t\t{ value: ctor, writable: true, configurable: true });\n\t\t\tinject(ctor, this);\n\t\t\tif (arguments.length)\n\t\t\t\tthis.inject.apply(ctor, arguments);\n\t\t\tctor.base = base;\n\t\t\treturn ctor;\n\t\t}\n\t}).inject({\n\t\tenumerable: false,\n\n\t\tinitialize: Base,\n\n\t\tset: Base,\n\n\t\tinject: function() {\n\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\n\t\t\t\tvar src = arguments[i];\n\t\t\t\tif (src) {\n\t\t\t\t\tinject(this, src, src.enumerable, src.beans, src.preserve);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\textend: function() {\n\t\t\tvar res = create(this);\n\t\t\treturn res.inject.apply(res, arguments);\n\t\t},\n\n\t\teach: function(iter, bind) {\n\t\t\treturn each(this, iter, bind);\n\t\t},\n\n\t\tclone: function() {\n\t\t\treturn new this.constructor(this);\n\t\t},\n\n\t\tstatics: {\n\t\t\tset: set,\n\t\t\teach: each,\n\t\t\tcreate: create,\n\t\t\tdefine: define,\n\t\t\tdescribe: describe,\n\n\t\t\tclone: function(obj) {\n\t\t\t\treturn set(new obj.constructor(), obj);\n\t\t\t},\n\n\t\t\tisPlainObject: function(obj) {\n\t\t\t\tvar ctor = obj != null && obj.constructor;\n\t\t\t\treturn ctor && (ctor === Object || ctor === Base\n\t\t\t\t\t\t|| ctor.name === 'Object');\n\t\t\t},\n\n\t\t\tpick: function(a, b) {\n\t\t\t\treturn a !== undefined ? a : b;\n\t\t\t},\n\n\t\t\tslice: function(list, begin, end) {\n\t\t\t\treturn slice.call(list, begin, end);\n\t\t\t}\n\t\t}\n\t});\n};\n\nif (typeof module !== 'undefined')\n\tmodule.exports = Base;\n\nBase.inject({\n\tenumerable: false,\n\n\ttoString: function() {\n\t\treturn this._id != null\n\t\t\t?  (this._class || 'Object') + (this._name\n\t\t\t\t? \" '\" + this._name + \"'\"\n\t\t\t\t: ' @' + this._id)\n\t\t\t: '{ ' + Base.each(this, function(value, key) {\n\t\t\t\tif (!/^_/.test(key)) {\n\t\t\t\t\tvar type = typeof value;\n\t\t\t\t\tthis.push(key + ': ' + (type === 'number'\n\t\t\t\t\t\t\t? Formatter.instance.number(value)\n\t\t\t\t\t\t\t: type === 'string' ? \"'\" + value + \"'\" : value));\n\t\t\t\t}\n\t\t\t}, []).join(', ') + ' }';\n\t},\n\n\tgetClassName: function() {\n\t\treturn this._class || '';\n\t},\n\n\timportJSON: function(json) {\n\t\treturn Base.importJSON(json, this);\n\t},\n\n\texportJSON: function(options) {\n\t\treturn Base.exportJSON(this, options);\n\t},\n\n\ttoJSON: function() {\n\t\treturn Base.serialize(this);\n\t},\n\n\tset: function(props, exclude) {\n\t\tif (props)\n\t\t\tBase.filter(this, props, exclude, this._prioritize);\n\t\treturn this;\n\t}\n}, {\n\nbeans: false,\nstatics: {\n\texports: {},\n\n\textend: function extend() {\n\t\tvar res = extend.base.apply(this, arguments),\n\t\t\tname = res.prototype._class;\n\t\tif (name && !Base.exports[name])\n\t\t\tBase.exports[name] = res;\n\t\treturn res;\n\t},\n\n\tequals: function(obj1, obj2) {\n\t\tif (obj1 === obj2)\n\t\t\treturn true;\n\t\tif (obj1 && obj1.equals)\n\t\t\treturn obj1.equals(obj2);\n\t\tif (obj2 && obj2.equals)\n\t\t\treturn obj2.equals(obj1);\n\t\tif (obj1 && obj2\n\t\t\t\t&& typeof obj1 === 'object' && typeof obj2 === 'object') {\n\t\t\tif (Array.isArray(obj1) && Array.isArray(obj2)) {\n\t\t\t\tvar length = obj1.length;\n\t\t\t\tif (length !== obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\twhile (length--) {\n\t\t\t\t\tif (!Base.equals(obj1[length], obj2[length]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar keys = Object.keys(obj1),\n\t\t\t\t\tlength = keys.length;\n\t\t\t\tif (length !== Object.keys(obj2).length)\n\t\t\t\t\treturn false;\n\t\t\t\twhile (length--) {\n\t\t\t\t\tvar key = keys[length];\n\t\t\t\t\tif (!(obj2.hasOwnProperty(key)\n\t\t\t\t\t\t\t&& Base.equals(obj1[key], obj2[key])))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tread: function(list, start, options, amount) {\n\t\tif (this === Base) {\n\t\t\tvar value = this.peek(list, start);\n\t\t\tlist.__index++;\n\t\t\treturn value;\n\t\t}\n\t\tvar proto = this.prototype,\n\t\t\treadIndex = proto._readIndex,\n\t\t\tbegin = start || readIndex && list.__index || 0,\n\t\t\tlength = list.length,\n\t\t\tobj = list[begin];\n\t\tamount = amount || length - begin;\n\t\tif (obj instanceof this\n\t\t\t|| options && options.readNull && obj == null && amount <= 1) {\n\t\t\tif (readIndex)\n\t\t\t\tlist.__index = begin + 1;\n\t\t\treturn obj && options && options.clone ? obj.clone() : obj;\n\t\t}\n\t\tobj = Base.create(proto);\n\t\tif (readIndex)\n\t\t\tobj.__read = true;\n\t\tobj = obj.initialize.apply(obj, begin > 0 || begin + amount < length\n\t\t\t\t? Base.slice(list, begin, begin + amount)\n\t\t\t\t: list) || obj;\n\t\tif (readIndex) {\n\t\t\tlist.__index = begin + obj.__read;\n\t\t\tvar filtered = obj.__filtered;\n\t\t\tif (filtered) {\n\t\t\t\tlist.__filtered = filtered;\n\t\t\t\tobj.__filtered = undefined;\n\t\t\t}\n\t\t\tobj.__read = undefined;\n\t\t}\n\t\treturn obj;\n\t},\n\n\tpeek: function(list, start) {\n\t\treturn list[list.__index = start || list.__index || 0];\n\t},\n\n\tremain: function(list) {\n\t\treturn list.length - (list.__index || 0);\n\t},\n\n\treadList: function(list, start, options, amount) {\n\t\tvar res = [],\n\t\t\tentry,\n\t\t\tbegin = start || 0,\n\t\t\tend = amount ? begin + amount : list.length;\n\t\tfor (var i = begin; i < end; i++) {\n\t\t\tres.push(Array.isArray(entry = list[i])\n\t\t\t\t\t? this.read(entry, 0, options)\n\t\t\t\t\t: this.read(list, i, options, 1));\n\t\t}\n\t\treturn res;\n\t},\n\n\treadNamed: function(list, name, start, options, amount) {\n\t\tvar value = this.getNamed(list, name),\n\t\t\thasValue = value !== undefined;\n\t\tif (hasValue) {\n\t\t\tvar filtered = list.__filtered;\n\t\t\tif (!filtered) {\n\t\t\t\tvar source = this.getSource(list);\n\t\t\t\tfiltered = list.__filtered = Base.create(source);\n\t\t\t\tfiltered.__unfiltered = source;\n\t\t\t}\n\t\t\tfiltered[name] = undefined;\n\t\t}\n\t\treturn this.read(hasValue ? [value] : list, start, options, amount);\n\t},\n\n\treadSupported: function(list, dest) {\n\t\tvar source = this.getSource(list),\n\t\t\tthat = this,\n\t\t\tread = false;\n\t\tif (source) {\n\t\t\tObject.keys(source).forEach(function(key) {\n\t\t\t\tif (key in dest) {\n\t\t\t\t\tvar value = that.readNamed(list, key);\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\tdest[key] = value;\n\t\t\t\t\t}\n\t\t\t\t\tread = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn read;\n\t},\n\n\tgetSource: function(list) {\n\t\tvar source = list.__source;\n\t\tif (source === undefined) {\n\t\t\tvar arg = list.length === 1 && list[0];\n\t\t\tsource = list.__source = arg && Base.isPlainObject(arg)\n\t\t\t\t? arg : null;\n\t\t}\n\t\treturn source;\n\t},\n\n\tgetNamed: function(list, name) {\n\t\tvar source = this.getSource(list);\n\t\tif (source) {\n\t\t\treturn name ? source[name] : list.__filtered || source;\n\t\t}\n\t},\n\n\thasNamed: function(list, name) {\n\t\treturn !!this.getNamed(list, name);\n\t},\n\n\tfilter: function(dest, source, exclude, prioritize) {\n\t\tvar processed;\n\n\t\tfunction handleKey(key) {\n\t\t\tif (!(exclude && key in exclude) &&\n\t\t\t\t!(processed && key in processed)) {\n\t\t\t\tvar value = source[key];\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tdest[key] = value;\n\t\t\t}\n\t\t}\n\n\t\tif (prioritize) {\n\t\t\tvar keys = {};\n\t\t\tfor (var i = 0, key, l = prioritize.length; i < l; i++) {\n\t\t\t\tif ((key = prioritize[i]) in source) {\n\t\t\t\t\thandleKey(key);\n\t\t\t\t\tkeys[key] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprocessed = keys;\n\t\t}\n\n\t\tObject.keys(source.__unfiltered || source).forEach(handleKey);\n\t\treturn dest;\n\t},\n\n\tisPlainValue: function(obj, asString) {\n\t\treturn Base.isPlainObject(obj) || Array.isArray(obj)\n\t\t\t\t|| asString && typeof obj === 'string';\n\t},\n\n\tserialize: function(obj, options, compact, dictionary) {\n\t\toptions = options || {};\n\n\t\tvar isRoot = !dictionary,\n\t\t\tres;\n\t\tif (isRoot) {\n\t\t\toptions.formatter = new Formatter(options.precision);\n\t\t\tdictionary = {\n\t\t\t\tlength: 0,\n\t\t\t\tdefinitions: {},\n\t\t\t\treferences: {},\n\t\t\t\tadd: function(item, create) {\n\t\t\t\t\tvar id = '#' + item._id,\n\t\t\t\t\t\tref = this.references[id];\n\t\t\t\t\tif (!ref) {\n\t\t\t\t\t\tthis.length++;\n\t\t\t\t\t\tvar res = create.call(item),\n\t\t\t\t\t\t\tname = item._class;\n\t\t\t\t\t\tif (name && res[0] !== name)\n\t\t\t\t\t\t\tres.unshift(name);\n\t\t\t\t\t\tthis.definitions[id] = res;\n\t\t\t\t\t\tref = this.references[id] = [id];\n\t\t\t\t\t}\n\t\t\t\t\treturn ref;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tif (obj && obj._serialize) {\n\t\t\tres = obj._serialize(options, dictionary);\n\t\t\tvar name = obj._class;\n\t\t\tif (name && !obj._compactSerialize && (isRoot || !compact)\n\t\t\t\t\t&& res[0] !== name) {\n\t\t\t\tres.unshift(name);\n\t\t\t}\n\t\t} else if (Array.isArray(obj)) {\n\t\t\tres = [];\n\t\t\tfor (var i = 0, l = obj.length; i < l; i++)\n\t\t\t\tres[i] = Base.serialize(obj[i], options, compact, dictionary);\n\t\t} else if (Base.isPlainObject(obj)) {\n\t\t\tres = {};\n\t\t\tvar keys = Object.keys(obj);\n\t\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\tres[key] = Base.serialize(obj[key], options, compact,\n\t\t\t\t\t\tdictionary);\n\t\t\t}\n\t\t} else if (typeof obj === 'number') {\n\t\t\tres = options.formatter.number(obj, options.precision);\n\t\t} else {\n\t\t\tres = obj;\n\t\t}\n\t\treturn isRoot && dictionary.length > 0\n\t\t\t\t? [['dictionary', dictionary.definitions], res]\n\t\t\t\t: res;\n\t},\n\n\tdeserialize: function(json, create, _data, _setDictionary, _isRoot) {\n\t\tvar res = json,\n\t\t\tisFirst = !_data,\n\t\t\thasDictionary = isFirst && json && json.length\n\t\t\t\t&& json[0][0] === 'dictionary';\n\t\t_data = _data || {};\n\t\tif (Array.isArray(json)) {\n\t\t\tvar type = json[0],\n\t\t\t\tisDictionary = type === 'dictionary';\n\t\t\tif (json.length == 1 && /^#/.test(type)) {\n\t\t\t\treturn _data.dictionary[type];\n\t\t\t}\n\t\t\ttype = Base.exports[type];\n\t\t\tres = [];\n\t\t\tfor (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n\t\t\t\tres.push(Base.deserialize(json[i], create, _data,\n\t\t\t\t\t\tisDictionary, hasDictionary));\n\t\t\t}\n\t\t\tif (type) {\n\t\t\t\tvar args = res;\n\t\t\t\tif (create) {\n\t\t\t\t\tres = create(type, args, isFirst || _isRoot);\n\t\t\t\t} else {\n\t\t\t\t\tres = new type(args);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (Base.isPlainObject(json)) {\n\t\t\tres = {};\n\t\t\tif (_setDictionary)\n\t\t\t\t_data.dictionary = res;\n\t\t\tfor (var key in json)\n\t\t\t\tres[key] = Base.deserialize(json[key], create, _data);\n\t\t}\n\t\treturn hasDictionary ? res[1] : res;\n\t},\n\n\texportJSON: function(obj, options) {\n\t\tvar json = Base.serialize(obj, options);\n\t\treturn options && options.asString == false\n\t\t\t\t? json\n\t\t\t\t: JSON.stringify(json);\n\t},\n\n\timportJSON: function(json, target) {\n\t\treturn Base.deserialize(\n\t\t\t\ttypeof json === 'string' ? JSON.parse(json) : json,\n\t\t\t\tfunction(ctor, args, isRoot) {\n\t\t\t\t\tvar useTarget = isRoot && target\n\t\t\t\t\t\t\t&& target.constructor === ctor,\n\t\t\t\t\t\tobj = useTarget ? target\n\t\t\t\t\t\t\t: Base.create(ctor.prototype);\n\t\t\t\t\tif (args.length === 1 && obj instanceof Item\n\t\t\t\t\t\t\t&& (useTarget || !(obj instanceof Layer))) {\n\t\t\t\t\t\tvar arg = args[0];\n\t\t\t\t\t\tif (Base.isPlainObject(arg)) {\n\t\t\t\t\t\t\targ.insert = false;\n\t\t\t\t\t\t\tif (useTarget) {\n\t\t\t\t\t\t\t\targs = args.concat([{ insert: true }]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t(useTarget ? obj.set : ctor).apply(obj, args);\n\t\t\t\t\tif (useTarget)\n\t\t\t\t\t\ttarget = null;\n\t\t\t\t\treturn obj;\n\t\t\t\t});\n\t},\n\n\tpush: function(list, items) {\n\t\tvar itemsLength = items.length;\n\t\tif (itemsLength < 4096) {\n\t\t\tlist.push.apply(list, items);\n\t\t} else {\n\t\t\tvar startLength = list.length;\n\t\t\tlist.length += itemsLength;\n\t\t\tfor (var i = 0; i < itemsLength; i++) {\n\t\t\t\tlist[startLength + i] = items[i];\n\t\t\t}\n\t\t}\n\t\treturn list;\n\t},\n\n\tsplice: function(list, items, index, remove) {\n\t\tvar amount = items && items.length,\n\t\t\tappend = index === undefined;\n\t\tindex = append ? list.length : index;\n\t\tif (index > list.length)\n\t\t\tindex = list.length;\n\t\tfor (var i = 0; i < amount; i++)\n\t\t\titems[i]._index = index + i;\n\t\tif (append) {\n\t\t\tBase.push(list, items);\n\t\t\treturn [];\n\t\t} else {\n\t\t\tvar args = [index, remove];\n\t\t\tif (items)\n\t\t\t\tBase.push(args, items);\n\t\t\tvar removed = list.splice.apply(list, args);\n\t\t\tfor (var i = 0, l = removed.length; i < l; i++)\n\t\t\t\tremoved[i]._index = undefined;\n\t\t\tfor (var i = index + amount, l = list.length; i < l; i++)\n\t\t\t\tlist[i]._index = i;\n\t\t\treturn removed;\n\t\t}\n\t},\n\n\tcapitalize: function(str) {\n\t\treturn str.replace(/\\b[a-z]/g, function(match) {\n\t\t\treturn match.toUpperCase();\n\t\t});\n\t},\n\n\tcamelize: function(str) {\n\t\treturn str.replace(/-(.)/g, function(match, chr) {\n\t\t\treturn chr.toUpperCase();\n\t\t});\n\t},\n\n\thyphenate: function(str) {\n\t\treturn str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\t}\n}});\n\nvar Emitter = {\n\ton: function(type, func) {\n\t\tif (typeof type !== 'string') {\n\t\t\tBase.each(type, function(value, key) {\n\t\t\t\tthis.on(key, value);\n\t\t\t}, this);\n\t\t} else {\n\t\t\tvar types = this._eventTypes,\n\t\t\t\tentry = types && types[type],\n\t\t\t\thandlers = this._callbacks = this._callbacks || {};\n\t\t\thandlers = handlers[type] = handlers[type] || [];\n\t\t\tif (handlers.indexOf(func) === -1) {\n\t\t\t\thandlers.push(func);\n\t\t\t\tif (entry && entry.install && handlers.length === 1)\n\t\t\t\t\tentry.install.call(this, type);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\toff: function(type, func) {\n\t\tif (typeof type !== 'string') {\n\t\t\tBase.each(type, function(value, key) {\n\t\t\t\tthis.off(key, value);\n\t\t\t}, this);\n\t\t\treturn;\n\t\t}\n\t\tvar types = this._eventTypes,\n\t\t\tentry = types && types[type],\n\t\t\thandlers = this._callbacks && this._callbacks[type],\n\t\t\tindex;\n\t\tif (handlers) {\n\t\t\tif (!func || (index = handlers.indexOf(func)) !== -1\n\t\t\t\t\t&& handlers.length === 1) {\n\t\t\t\tif (entry && entry.uninstall)\n\t\t\t\t\tentry.uninstall.call(this, type);\n\t\t\t\tdelete this._callbacks[type];\n\t\t\t} else if (index !== -1) {\n\t\t\t\thandlers.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\tonce: function(type, func) {\n\t\treturn this.on(type, function handler() {\n\t\t\tfunc.apply(this, arguments);\n\t\t\tthis.off(type, handler);\n\t\t});\n\t},\n\n\temit: function(type, event) {\n\t\tvar handlers = this._callbacks && this._callbacks[type];\n\t\tif (!handlers)\n\t\t\treturn false;\n\t\tvar args = Base.slice(arguments, 1),\n\t\t\tsetTarget = event && event.target && !event.currentTarget;\n\t\thandlers = handlers.slice();\n\t\tif (setTarget)\n\t\t\tevent.currentTarget = this;\n\t\tfor (var i = 0, l = handlers.length; i < l; i++) {\n\t\t\tif (handlers[i].apply(this, args) == false) {\n\t\t\t\tif (event && event.stop)\n\t\t\t\t\tevent.stop();\n\t\t\t\tbreak;\n\t\t   }\n\t\t}\n\t\tif (setTarget)\n\t\t\tdelete event.currentTarget;\n\t\treturn true;\n\t},\n\n\tresponds: function(type) {\n\t\treturn !!(this._callbacks && this._callbacks[type]);\n\t},\n\n\tattach: '#on',\n\tdetach: '#off',\n\tfire: '#emit',\n\n\t_installEvents: function(install) {\n\t\tvar types = this._eventTypes,\n\t\t\thandlers = this._callbacks,\n\t\t\tkey = install ? 'install' : 'uninstall';\n\t\tif (types) {\n\t\t\tfor (var type in handlers) {\n\t\t\t\tif (handlers[type].length > 0) {\n\t\t\t\t\tvar entry = types[type],\n\t\t\t\t\t\tfunc = entry && entry[key];\n\t\t\t\t\tif (func)\n\t\t\t\t\t\tfunc.call(this, type);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tstatics: {\n\t\tinject: function inject(src) {\n\t\t\tvar events = src._events;\n\t\t\tif (events) {\n\t\t\t\tvar types = {};\n\t\t\t\tBase.each(events, function(entry, key) {\n\t\t\t\t\tvar isString = typeof entry === 'string',\n\t\t\t\t\t\tname = isString ? entry : key,\n\t\t\t\t\t\tpart = Base.capitalize(name),\n\t\t\t\t\t\ttype = name.substring(2).toLowerCase();\n\t\t\t\t\ttypes[type] = isString ? {} : entry;\n\t\t\t\t\tname = '_' + name;\n\t\t\t\t\tsrc['get' + part] = function() {\n\t\t\t\t\t\treturn this[name];\n\t\t\t\t\t};\n\t\t\t\t\tsrc['set' + part] = function(func) {\n\t\t\t\t\t\tvar prev = this[name];\n\t\t\t\t\t\tif (prev)\n\t\t\t\t\t\t\tthis.off(type, prev);\n\t\t\t\t\t\tif (func)\n\t\t\t\t\t\t\tthis.on(type, func);\n\t\t\t\t\t\tthis[name] = func;\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tsrc._eventTypes = types;\n\t\t\t}\n\t\t\treturn inject.base.apply(this, arguments);\n\t\t}\n\t}\n};\n\nvar PaperScope = Base.extend({\n\t_class: 'PaperScope',\n\n\tinitialize: function PaperScope() {\n\t\tpaper = this;\n\t\tthis.settings = new Base({\n\t\t\tapplyMatrix: true,\n\t\t\tinsertItems: true,\n\t\t\thandleSize: 4,\n\t\t\thitTolerance: 0\n\t\t});\n\t\tthis.project = null;\n\t\tthis.projects = [];\n\t\tthis.tools = [];\n\t\tthis._id = PaperScope._id++;\n\t\tPaperScope._scopes[this._id] = this;\n\t\tvar proto = PaperScope.prototype;\n\t\tif (!this.support) {\n\t\t\tvar ctx = CanvasProvider.getContext(1, 1) || {};\n\t\t\tproto.support = {\n\t\t\t\tnativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n\t\t\t\tnativeBlendModes: BlendMode.nativeModes\n\t\t\t};\n\t\t\tCanvasProvider.release(ctx);\n\t\t}\n\t\tif (!this.agent) {\n\t\t\tvar user = self.navigator.userAgent.toLowerCase(),\n\t\t\t\tos = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user)||[])[0],\n\t\t\t\tplatform = os === 'darwin' ? 'mac' : os,\n\t\t\t\tagent = proto.agent = proto.browser = { platform: platform };\n\t\t\tif (platform)\n\t\t\t\tagent[platform] = true;\n\t\t\tuser.replace(\n\t\t\t\t/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g,\n\t\t\t\tfunction(match, n, v1, v2, rv) {\n\t\t\t\t\tif (!agent.chrome) {\n\t\t\t\t\t\tvar v = n === 'opera' ? v2 :\n\t\t\t\t\t\t\t\t/^(node|trident)$/.test(n) ? rv : v1;\n\t\t\t\t\t\tagent.version = v;\n\t\t\t\t\t\tagent.versionNumber = parseFloat(v);\n\t\t\t\t\t\tn = { trident: 'msie', jsdom: 'node' }[n] || n;\n\t\t\t\t\t\tagent.name = n;\n\t\t\t\t\t\tagent[n] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (agent.chrome)\n\t\t\t\tdelete agent.webkit;\n\t\t\tif (agent.atom)\n\t\t\t\tdelete agent.chrome;\n\t\t}\n\t},\n\n\tversion: \"0.12.15\",\n\n\tgetView: function() {\n\t\tvar project = this.project;\n\t\treturn project && project._view;\n\t},\n\n\tgetPaper: function() {\n\t\treturn this;\n\t},\n\n\texecute: function(code, options) {\n\t\t\tvar exports = paper.PaperScript.execute(code, this, options);\n\t\t\tView.updateFocus();\n\t\t\treturn exports;\n\t},\n\n\tinstall: function(scope) {\n\t\tvar that = this;\n\t\tBase.each(['project', 'view', 'tool'], function(key) {\n\t\t\tBase.define(scope, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tget: function() {\n\t\t\t\t\treturn that[key];\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tfor (var key in this)\n\t\t\tif (!/^_/.test(key) && this[key])\n\t\t\t\tscope[key] = this[key];\n\t},\n\n\tsetup: function(element) {\n\t\tpaper = this;\n\t\tthis.project = new Project(element);\n\t\treturn this;\n\t},\n\n\tcreateCanvas: function(width, height) {\n\t\treturn CanvasProvider.getCanvas(width, height);\n\t},\n\n\tactivate: function() {\n\t\tpaper = this;\n\t},\n\n\tclear: function() {\n\t\tvar projects = this.projects,\n\t\t\ttools = this.tools;\n\t\tfor (var i = projects.length - 1; i >= 0; i--)\n\t\t\tprojects[i].remove();\n\t\tfor (var i = tools.length - 1; i >= 0; i--)\n\t\t\ttools[i].remove();\n\t},\n\n\tremove: function() {\n\t\tthis.clear();\n\t\tdelete PaperScope._scopes[this._id];\n\t},\n\n\tstatics: new function() {\n\t\tfunction handleAttribute(name) {\n\t\t\tname += 'Attribute';\n\t\t\treturn function(el, attr) {\n\t\t\t\treturn el[name](attr) || el[name]('data-paper-' + attr);\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t_scopes: {},\n\t\t\t_id: 0,\n\n\t\t\tget: function(id) {\n\t\t\t\treturn this._scopes[id] || null;\n\t\t\t},\n\n\t\t\tgetAttribute: handleAttribute('get'),\n\t\t\thasAttribute: handleAttribute('has')\n\t\t};\n\t}\n});\n\nvar PaperScopeItem = Base.extend(Emitter, {\n\n\tinitialize: function(activate) {\n\t\tthis._scope = paper;\n\t\tthis._index = this._scope[this._list].push(this) - 1;\n\t\tif (activate || !this._scope[this._reference])\n\t\t\tthis.activate();\n\t},\n\n\tactivate: function() {\n\t\tif (!this._scope)\n\t\t\treturn false;\n\t\tvar prev = this._scope[this._reference];\n\t\tif (prev && prev !== this)\n\t\t\tprev.emit('deactivate');\n\t\tthis._scope[this._reference] = this;\n\t\tthis.emit('activate', prev);\n\t\treturn true;\n\t},\n\n\tisActive: function() {\n\t\treturn this._scope[this._reference] === this;\n\t},\n\n\tremove: function() {\n\t\tif (this._index == null)\n\t\t\treturn false;\n\t\tBase.splice(this._scope[this._list], null, this._index, 1);\n\t\tif (this._scope[this._reference] == this)\n\t\t\tthis._scope[this._reference] = null;\n\t\tthis._scope = null;\n\t\treturn true;\n\t},\n\n\tgetView: function() {\n\t\treturn this._scope.getView();\n\t}\n});\n\nvar CollisionDetection = {\n\tfindItemBoundsCollisions: function(items1, items2, tolerance) {\n\t\tfunction getBounds(items) {\n\t\t\tvar bounds = new Array(items.length);\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tvar rect = items[i].getBounds();\n\t\t\t\tbounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n\t\t\t}\n\t\t\treturn bounds;\n\t\t}\n\n\t\tvar bounds1 = getBounds(items1),\n\t\t\tbounds2 = !items2 || items2 === items1\n\t\t\t\t? bounds1\n\t\t\t\t: getBounds(items2);\n\t\treturn this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n\t},\n\n\tfindCurveBoundsCollisions: function(curves1, curves2, tolerance, bothAxis) {\n\t\tfunction getBounds(curves) {\n\t\t\tvar min = Math.min,\n\t\t\t\tmax = Math.max,\n\t\t\t\tbounds = new Array(curves.length);\n\t\t\tfor (var i = 0; i < curves.length; i++) {\n\t\t\t\tvar v = curves[i];\n\t\t\t\tbounds[i] = [\n\t\t\t\t\tmin(v[0], v[2], v[4], v[6]),\n\t\t\t\t\tmin(v[1], v[3], v[5], v[7]),\n\t\t\t\t\tmax(v[0], v[2], v[4], v[6]),\n\t\t\t\t\tmax(v[1], v[3], v[5], v[7])\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn bounds;\n\t\t}\n\n\t\tvar bounds1 = getBounds(curves1),\n\t\t\tbounds2 = !curves2 || curves2 === curves1\n\t\t\t\t? bounds1\n\t\t\t\t: getBounds(curves2);\n\t\tif (bothAxis) {\n\t\t\tvar hor = this.findBoundsCollisions(\n\t\t\t\t\tbounds1, bounds2, tolerance || 0, false, true),\n\t\t\t\tver = this.findBoundsCollisions(\n\t\t\t\t\tbounds1, bounds2, tolerance || 0, true, true),\n\t\t\t\tlist = [];\n\t\t\tfor (var i = 0, l = hor.length; i < l; i++) {\n\t\t\t\tlist[i] = { hor: hor[i], ver: ver[i] };\n\t\t\t}\n\t\t\treturn list;\n\t\t}\n\t\treturn this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n\t},\n\n\tfindBoundsCollisions: function(boundsA, boundsB, tolerance,\n\t\tsweepVertical, onlySweepAxisCollisions) {\n\t\tvar self = !boundsB || boundsA === boundsB,\n\t\t\tallBounds = self ? boundsA : boundsA.concat(boundsB),\n\t\t\tlengthA = boundsA.length,\n\t\t\tlengthAll = allBounds.length;\n\n\t\tfunction binarySearch(indices, coord, value) {\n\t\t\tvar lo = 0,\n\t\t\t\thi = indices.length;\n\t\t\twhile (lo < hi) {\n\t\t\t\tvar mid = (hi + lo) >>> 1;\n\t\t\t\tif (allBounds[indices[mid]][coord] < value) {\n\t\t\t\t\tlo = mid + 1;\n\t\t\t\t} else {\n\t\t\t\t\thi = mid;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lo - 1;\n\t\t}\n\n\t\tvar pri0 = sweepVertical ? 1 : 0,\n\t\t\tpri1 = pri0 + 2,\n\t\t\tsec0 = sweepVertical ? 0 : 1,\n\t\t\tsec1 = sec0 + 2;\n\t\tvar allIndicesByPri0 = new Array(lengthAll);\n\t\tfor (var i = 0; i < lengthAll; i++) {\n\t\t\tallIndicesByPri0[i] = i;\n\t\t}\n\t\tallIndicesByPri0.sort(function(i1, i2) {\n\t\t\treturn allBounds[i1][pri0] - allBounds[i2][pri0];\n\t\t});\n\t\tvar activeIndicesByPri1 = [],\n\t\t\tallCollisions = new Array(lengthA);\n\t\tfor (var i = 0; i < lengthAll; i++) {\n\t\t\tvar curIndex = allIndicesByPri0[i],\n\t\t\t\tcurBounds = allBounds[curIndex],\n\t\t\t\torigIndex = self ? curIndex : curIndex - lengthA,\n\t\t\t\tisCurrentA = curIndex < lengthA,\n\t\t\t\tisCurrentB = self || !isCurrentA,\n\t\t\t\tcurCollisions = isCurrentA ? [] : null;\n\t\t\tif (activeIndicesByPri1.length) {\n\t\t\t\tvar pruneCount = binarySearch(activeIndicesByPri1, pri1,\n\t\t\t\t\t\tcurBounds[pri0] - tolerance) + 1;\n\t\t\t\tactiveIndicesByPri1.splice(0, pruneCount);\n\t\t\t\tif (self && onlySweepAxisCollisions) {\n\t\t\t\t\tcurCollisions = curCollisions.concat(activeIndicesByPri1);\n\t\t\t\t\tfor (var j = 0; j < activeIndicesByPri1.length; j++) {\n\t\t\t\t\t\tvar activeIndex = activeIndicesByPri1[j];\n\t\t\t\t\t\tallCollisions[activeIndex].push(origIndex);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar curSec1 = curBounds[sec1],\n\t\t\t\t\t\tcurSec0 = curBounds[sec0];\n\t\t\t\t\tfor (var j = 0; j < activeIndicesByPri1.length; j++) {\n\t\t\t\t\t\tvar activeIndex = activeIndicesByPri1[j],\n\t\t\t\t\t\t\tactiveBounds = allBounds[activeIndex],\n\t\t\t\t\t\t\tisActiveA = activeIndex < lengthA,\n\t\t\t\t\t\t\tisActiveB = self || activeIndex >= lengthA;\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tonlySweepAxisCollisions ||\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tisCurrentA && isActiveB ||\n\t\t\t\t\t\t\t\tisCurrentB && isActiveA\n\t\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\t\tcurSec1 >= activeBounds[sec0] - tolerance &&\n\t\t\t\t\t\t\t\tcurSec0 <= activeBounds[sec1] + tolerance\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (isCurrentA && isActiveB) {\n\t\t\t\t\t\t\t\tcurCollisions.push(\n\t\t\t\t\t\t\t\t\tself ? activeIndex : activeIndex - lengthA);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isCurrentB && isActiveA) {\n\t\t\t\t\t\t\t\tallCollisions[activeIndex].push(origIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isCurrentA) {\n\t\t\t\tif (boundsA === boundsB) {\n\t\t\t\t\tcurCollisions.push(curIndex);\n\t\t\t\t}\n\t\t\t\tallCollisions[curIndex] = curCollisions;\n\t\t\t}\n\t\t\tif (activeIndicesByPri1.length) {\n\t\t\t\tvar curPri1 = curBounds[pri1],\n\t\t\t\t\tindex = binarySearch(activeIndicesByPri1, pri1, curPri1);\n\t\t\t\tactiveIndicesByPri1.splice(index + 1, 0, curIndex);\n\t\t\t} else {\n\t\t\t\tactiveIndicesByPri1.push(curIndex);\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < allCollisions.length; i++) {\n\t\t\tvar collisions = allCollisions[i];\n\t\t\tif (collisions) {\n\t\t\t\tcollisions.sort(function(i1, i2) { return i1 - i2; });\n\t\t\t}\n\t\t}\n\t\treturn allCollisions;\n\t}\n};\n\nvar Formatter = Base.extend({\n\tinitialize: function(precision) {\n\t\tthis.precision = Base.pick(precision, 5);\n\t\tthis.multiplier = Math.pow(10, this.precision);\n\t},\n\n\tnumber: function(val) {\n\t\treturn this.precision < 16\n\t\t\t\t? Math.round(val * this.multiplier) / this.multiplier : val;\n\t},\n\n\tpair: function(val1, val2, separator) {\n\t\treturn this.number(val1) + (separator || ',') + this.number(val2);\n\t},\n\n\tpoint: function(val, separator) {\n\t\treturn this.number(val.x) + (separator || ',') + this.number(val.y);\n\t},\n\n\tsize: function(val, separator) {\n\t\treturn this.number(val.width) + (separator || ',')\n\t\t\t\t+ this.number(val.height);\n\t},\n\n\trectangle: function(val, separator) {\n\t\treturn this.point(val, separator) + (separator || ',')\n\t\t\t\t+ this.size(val, separator);\n\t}\n});\n\nFormatter.instance = new Formatter();\n\nvar Numerical = new function() {\n\n\tvar abscissas = [\n\t\t[  0.5773502691896257645091488],\n\t\t[0,0.7745966692414833770358531],\n\t\t[  0.3399810435848562648026658,0.8611363115940525752239465],\n\t\t[0,0.5384693101056830910363144,0.9061798459386639927976269],\n\t\t[  0.2386191860831969086305017,0.6612093864662645136613996,0.9324695142031520278123016],\n\t\t[0,0.4058451513773971669066064,0.7415311855993944398638648,0.9491079123427585245261897],\n\t\t[  0.1834346424956498049394761,0.5255324099163289858177390,0.7966664774136267395915539,0.9602898564975362316835609],\n\t\t[0,0.3242534234038089290385380,0.6133714327005903973087020,0.8360311073266357942994298,0.9681602395076260898355762],\n\t\t[  0.1488743389816312108848260,0.4333953941292471907992659,0.6794095682990244062343274,0.8650633666889845107320967,0.9739065285171717200779640],\n\t\t[0,0.2695431559523449723315320,0.5190961292068118159257257,0.7301520055740493240934163,0.8870625997680952990751578,0.9782286581460569928039380],\n\t\t[  0.1252334085114689154724414,0.3678314989981801937526915,0.5873179542866174472967024,0.7699026741943046870368938,0.9041172563704748566784659,0.9815606342467192506905491],\n\t\t[0,0.2304583159551347940655281,0.4484927510364468528779129,0.6423493394403402206439846,0.8015780907333099127942065,0.9175983992229779652065478,0.9841830547185881494728294],\n\t\t[  0.1080549487073436620662447,0.3191123689278897604356718,0.5152486363581540919652907,0.6872929048116854701480198,0.8272013150697649931897947,0.9284348836635735173363911,0.9862838086968123388415973],\n\t\t[0,0.2011940939974345223006283,0.3941513470775633698972074,0.5709721726085388475372267,0.7244177313601700474161861,0.8482065834104272162006483,0.9372733924007059043077589,0.9879925180204854284895657],\n\t\t[  0.0950125098376374401853193,0.2816035507792589132304605,0.4580167776572273863424194,0.6178762444026437484466718,0.7554044083550030338951012,0.8656312023878317438804679,0.9445750230732325760779884,0.9894009349916499325961542]\n\t];\n\n\tvar weights = [\n\t\t[1],\n\t\t[0.8888888888888888888888889,0.5555555555555555555555556],\n\t\t[0.6521451548625461426269361,0.3478548451374538573730639],\n\t\t[0.5688888888888888888888889,0.4786286704993664680412915,0.2369268850561890875142640],\n\t\t[0.4679139345726910473898703,0.3607615730481386075698335,0.1713244923791703450402961],\n\t\t[0.4179591836734693877551020,0.3818300505051189449503698,0.2797053914892766679014678,0.1294849661688696932706114],\n\t\t[0.3626837833783619829651504,0.3137066458778872873379622,0.2223810344533744705443560,0.1012285362903762591525314],\n\t\t[0.3302393550012597631645251,0.3123470770400028400686304,0.2606106964029354623187429,0.1806481606948574040584720,0.0812743883615744119718922],\n\t\t[0.2955242247147528701738930,0.2692667193099963550912269,0.2190863625159820439955349,0.1494513491505805931457763,0.0666713443086881375935688],\n\t\t[0.2729250867779006307144835,0.2628045445102466621806889,0.2331937645919904799185237,0.1862902109277342514260976,0.1255803694649046246346943,0.0556685671161736664827537],\n\t\t[0.2491470458134027850005624,0.2334925365383548087608499,0.2031674267230659217490645,0.1600783285433462263346525,0.1069393259953184309602547,0.0471753363865118271946160],\n\t\t[0.2325515532308739101945895,0.2262831802628972384120902,0.2078160475368885023125232,0.1781459807619457382800467,0.1388735102197872384636018,0.0921214998377284479144218,0.0404840047653158795200216],\n\t\t[0.2152638534631577901958764,0.2051984637212956039659241,0.1855383974779378137417166,0.1572031671581935345696019,0.1215185706879031846894148,0.0801580871597602098056333,0.0351194603317518630318329],\n\t\t[0.2025782419255612728806202,0.1984314853271115764561183,0.1861610000155622110268006,0.1662692058169939335532009,0.1395706779261543144478048,0.1071592204671719350118695,0.0703660474881081247092674,0.0307532419961172683546284],\n\t\t[0.1894506104550684962853967,0.1826034150449235888667637,0.1691565193950025381893121,0.1495959888165767320815017,0.1246289712555338720524763,0.0951585116824927848099251,0.0622535239386478928628438,0.0271524594117540948517806]\n\t];\n\n\tvar abs = Math.abs,\n\t\tsqrt = Math.sqrt,\n\t\tpow = Math.pow,\n\t\tlog2 = Math.log2 || function(x) {\n\t\t\treturn Math.log(x) * Math.LOG2E;\n\t\t},\n\t\tEPSILON = 1e-12,\n\t\tMACHINE_EPSILON = 1.12e-16;\n\n\tfunction clamp(value, min, max) {\n\t\treturn value < min ? min : value > max ? max : value;\n\t}\n\n\tfunction getDiscriminant(a, b, c) {\n\t\tfunction split(v) {\n\t\t\tvar x = v * 134217729,\n\t\t\t\ty = v - x,\n\t\t\t\thi = y + x,\n\t\t\t\tlo = v - hi;\n\t\t\treturn [hi, lo];\n\t\t}\n\n\t\tvar D = b * b - a * c,\n\t\t\tE = b * b + a * c;\n\t\tif (abs(D) * 3 < E) {\n\t\t\tvar ad = split(a),\n\t\t\t\tbd = split(b),\n\t\t\t\tcd = split(c),\n\t\t\t\tp = b * b,\n\t\t\t\tdp = (bd[0] * bd[0] - p + 2 * bd[0] * bd[1]) + bd[1] * bd[1],\n\t\t\t\tq = a * c,\n\t\t\t\tdq = (ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0])\n\t\t\t\t\t\t+ ad[1] * cd[1];\n\t\t\tD = (p - q) + (dp - dq);\n\t\t}\n\t\treturn D;\n\t}\n\n\tfunction getNormalizationFactor() {\n\t\tvar norm = Math.max.apply(Math, arguments);\n\t\treturn norm && (norm < 1e-8 || norm > 1e8)\n\t\t\t\t? pow(2, -Math.round(log2(norm)))\n\t\t\t\t: 0;\n\t}\n\n\treturn {\n\t\tEPSILON: EPSILON,\n\t\tMACHINE_EPSILON: MACHINE_EPSILON,\n\t\tCURVETIME_EPSILON: 1e-8,\n\t\tGEOMETRIC_EPSILON: 1e-7,\n\t\tTRIGONOMETRIC_EPSILON: 1e-8,\n\t\tKAPPA: 4 * (sqrt(2) - 1) / 3,\n\n\t\tisZero: function(val) {\n\t\t\treturn val >= -EPSILON && val <= EPSILON;\n\t\t},\n\n\t\tisMachineZero: function(val) {\n\t\t\treturn val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n\t\t},\n\n\t\tclamp: clamp,\n\n\t\tintegrate: function(f, a, b, n) {\n\t\t\tvar x = abscissas[n - 2],\n\t\t\t\tw = weights[n - 2],\n\t\t\t\tA = (b - a) * 0.5,\n\t\t\t\tB = A + a,\n\t\t\t\ti = 0,\n\t\t\t\tm = (n + 1) >> 1,\n\t\t\t\tsum = n & 1 ? w[i++] * f(B) : 0;\n\t\t\twhile (i < m) {\n\t\t\t\tvar Ax = A * x[i];\n\t\t\t\tsum += w[i++] * (f(B + Ax) + f(B - Ax));\n\t\t\t}\n\t\t\treturn A * sum;\n\t\t},\n\n\t\tfindRoot: function(f, df, x, a, b, n, tolerance) {\n\t\t\tfor (var i = 0; i < n; i++) {\n\t\t\t\tvar fx = f(x),\n\t\t\t\t\tdx = fx / df(x),\n\t\t\t\t\tnx = x - dx;\n\t\t\t\tif (abs(dx) < tolerance) {\n\t\t\t\t\tx = nx;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (fx > 0) {\n\t\t\t\t\tb = x;\n\t\t\t\t\tx = nx <= a ? (a + b) * 0.5 : nx;\n\t\t\t\t} else {\n\t\t\t\t\ta = x;\n\t\t\t\t\tx = nx >= b ? (a + b) * 0.5 : nx;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn clamp(x, a, b);\n\t\t},\n\n\t\tsolveQuadratic: function(a, b, c, roots, min, max) {\n\t\t\tvar x1, x2 = Infinity;\n\t\t\tif (abs(a) < EPSILON) {\n\t\t\t\tif (abs(b) < EPSILON)\n\t\t\t\t\treturn abs(c) < EPSILON ? -1 : 0;\n\t\t\t\tx1 = -c / b;\n\t\t\t} else {\n\t\t\t\tb *= -0.5;\n\t\t\t\tvar D = getDiscriminant(a, b, c);\n\t\t\t\tif (D && abs(D) < MACHINE_EPSILON) {\n\t\t\t\t\tvar f = getNormalizationFactor(abs(a), abs(b), abs(c));\n\t\t\t\t\tif (f) {\n\t\t\t\t\t\ta *= f;\n\t\t\t\t\t\tb *= f;\n\t\t\t\t\t\tc *= f;\n\t\t\t\t\t\tD = getDiscriminant(a, b, c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (D >= -MACHINE_EPSILON) {\n\t\t\t\t\tvar Q = D < 0 ? 0 : sqrt(D),\n\t\t\t\t\t\tR = b + (b < 0 ? -Q : Q);\n\t\t\t\t\tif (R === 0) {\n\t\t\t\t\t\tx1 = c / a;\n\t\t\t\t\t\tx2 = -x1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tx1 = R / a;\n\t\t\t\t\t\tx2 = c / R;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar count = 0,\n\t\t\t\tboundless = min == null,\n\t\t\t\tminB = min - EPSILON,\n\t\t\t\tmaxB = max + EPSILON;\n\t\t\tif (isFinite(x1) && (boundless || x1 > minB && x1 < maxB))\n\t\t\t\troots[count++] = boundless ? x1 : clamp(x1, min, max);\n\t\t\tif (x2 !== x1\n\t\t\t\t\t&& isFinite(x2) && (boundless || x2 > minB && x2 < maxB))\n\t\t\t\troots[count++] = boundless ? x2 : clamp(x2, min, max);\n\t\t\treturn count;\n\t\t},\n\n\t\tsolveCubic: function(a, b, c, d, roots, min, max) {\n\t\t\tvar f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n\t\t\t\tx, b1, c2, qd, q;\n\t\t\tif (f) {\n\t\t\t\ta *= f;\n\t\t\t\tb *= f;\n\t\t\t\tc *= f;\n\t\t\t\td *= f;\n\t\t\t}\n\n\t\t\tfunction evaluate(x0) {\n\t\t\t\tx = x0;\n\t\t\t\tvar tmp = a * x;\n\t\t\t\tb1 = tmp + b;\n\t\t\t\tc2 = b1 * x + c;\n\t\t\t\tqd = (tmp + b1) * x + c2;\n\t\t\t\tq = c2 * x + d;\n\t\t\t}\n\n\t\t\tif (abs(a) < EPSILON) {\n\t\t\t\ta = b;\n\t\t\t\tb1 = c;\n\t\t\t\tc2 = d;\n\t\t\t\tx = Infinity;\n\t\t\t} else if (abs(d) < EPSILON) {\n\t\t\t\tb1 = b;\n\t\t\t\tc2 = c;\n\t\t\t\tx = 0;\n\t\t\t} else {\n\t\t\t\tevaluate(-(b / a) / 3);\n\t\t\t\tvar t = q / a,\n\t\t\t\t\tr = pow(abs(t), 1/3),\n\t\t\t\t\ts = t < 0 ? -1 : 1,\n\t\t\t\t\ttd = -qd / a,\n\t\t\t\t\trd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n\t\t\t\t\tx0 = x - s * rd;\n\t\t\t\tif (x0 !== x) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tevaluate(x0);\n\t\t\t\t\t\tx0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n\t\t\t\t\t} while (s * x0 > s * x);\n\t\t\t\t\tif (abs(a) * x * x > abs(d / x)) {\n\t\t\t\t\t\tc2 = -d / x;\n\t\t\t\t\t\tb1 = (c2 - c) / x;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n\t\t\t\tboundless = min == null;\n\t\t\tif (isFinite(x) && (count === 0\n\t\t\t\t\t|| count > 0 && x !== roots[0] && x !== roots[1])\n\t\t\t\t\t&& (boundless || x > min - EPSILON && x < max + EPSILON))\n\t\t\t\troots[count++] = boundless ? x : clamp(x, min, max);\n\t\t\treturn count;\n\t\t}\n\t};\n};\n\nvar UID = {\n\t_id: 1,\n\t_pools: {},\n\n\tget: function(name) {\n\t\tif (name) {\n\t\t\tvar pool = this._pools[name];\n\t\t\tif (!pool)\n\t\t\t\tpool = this._pools[name] = { _id: 1 };\n\t\t\treturn pool._id++;\n\t\t} else {\n\t\t\treturn this._id++;\n\t\t}\n\t}\n};\n\nvar Point = Base.extend({\n\t_class: 'Point',\n\t_readIndex: true,\n\n\tinitialize: function Point(arg0, arg1) {\n\t\tvar type = typeof arg0,\n\t\t\treading = this.__read,\n\t\t\tread = 0;\n\t\tif (type === 'number') {\n\t\t\tvar hasY = typeof arg1 === 'number';\n\t\t\tthis._set(arg0, hasY ? arg1 : arg0);\n\t\t\tif (reading)\n\t\t\t\tread = hasY ? 2 : 1;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0);\n\t\t\tif (reading)\n\t\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else {\n\t\t\tvar obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n\t\t\tread = 1;\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\tthis._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n\t\t\t} else if ('x' in obj) {\n\t\t\t\tthis._set(obj.x || 0, obj.y || 0);\n\t\t\t} else if ('width' in obj) {\n\t\t\t\tthis._set(obj.width || 0, obj.height || 0);\n\t\t\t} else if ('angle' in obj) {\n\t\t\t\tthis._set(obj.length || 0, 0);\n\t\t\t\tthis.setAngle(obj.angle || 0);\n\t\t\t} else {\n\t\t\t\tthis._set(0, 0);\n\t\t\t\tread = 0;\n\t\t\t}\n\t\t}\n\t\tif (reading)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\treturn this;\n\t},\n\n\tequals: function(point) {\n\t\treturn this === point || point\n\t\t\t\t&& (this.x === point.x && this.y === point.y\n\t\t\t\t\t|| Array.isArray(point)\n\t\t\t\t\t\t&& this.x === point[0] && this.y === point[1])\n\t\t\t\t|| false;\n\t},\n\n\tclone: function() {\n\t\treturn new Point(this.x, this.y);\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.x), f.number(this.y)];\n\t},\n\n\tgetLength: function() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t},\n\n\tsetLength: function(length) {\n\t\tif (this.isZero()) {\n\t\t\tvar angle = this._angle || 0;\n\t\t\tthis._set(\n\t\t\t\tMath.cos(angle) * length,\n\t\t\t\tMath.sin(angle) * length\n\t\t\t);\n\t\t} else {\n\t\t\tvar scale = length / this.getLength();\n\t\t\tif (Numerical.isZero(scale))\n\t\t\t\tthis.getAngle();\n\t\t\tthis._set(\n\t\t\t\tthis.x * scale,\n\t\t\t\tthis.y * scale\n\t\t\t);\n\t\t}\n\t},\n\tgetAngle: function() {\n\t\treturn this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n\t},\n\n\tsetAngle: function(angle) {\n\t\tthis.setAngleInRadians.call(this, angle * Math.PI / 180);\n\t},\n\n\tgetAngleInDegrees: '#getAngle',\n\tsetAngleInDegrees: '#setAngle',\n\n\tgetAngleInRadians: function() {\n\t\tif (!arguments.length) {\n\t\t\treturn this.isZero()\n\t\t\t\t\t? this._angle || 0\n\t\t\t\t\t: this._angle = Math.atan2(this.y, this.x);\n\t\t} else {\n\t\t\tvar point = Point.read(arguments),\n\t\t\t\tdiv = this.getLength() * point.getLength();\n\t\t\tif (Numerical.isZero(div)) {\n\t\t\t\treturn NaN;\n\t\t\t} else {\n\t\t\t\tvar a = this.dot(point) / div;\n\t\t\t\treturn Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n\t\t\t}\n\t\t}\n\t},\n\n\tsetAngleInRadians: function(angle) {\n\t\tthis._angle = angle;\n\t\tif (!this.isZero()) {\n\t\t\tvar length = this.getLength();\n\t\t\tthis._set(\n\t\t\t\tMath.cos(angle) * length,\n\t\t\t\tMath.sin(angle) * length\n\t\t\t);\n\t\t}\n\t},\n\n\tgetQuadrant: function() {\n\t\treturn this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n\t}\n}, {\n\tbeans: false,\n\n\tgetDirectedAngle: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n\t},\n\n\tgetDistance: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\tx = point.x - this.x,\n\t\t\ty = point.y - this.y,\n\t\t\td = x * x + y * y,\n\t\t\tsquared = Base.read(args);\n\t\treturn squared ? d : Math.sqrt(d);\n\t},\n\n\tnormalize: function(length) {\n\t\tif (length === undefined)\n\t\t\tlength = 1;\n\t\tvar current = this.getLength(),\n\t\t\tscale = current !== 0 ? length / current : 0,\n\t\t\tpoint = new Point(this.x * scale, this.y * scale);\n\t\tif (scale >= 0)\n\t\t\tpoint._angle = this._angle;\n\t\treturn point;\n\t},\n\n\trotate: function(angle, center) {\n\t\tif (angle === 0)\n\t\t\treturn this.clone();\n\t\tangle = angle * Math.PI / 180;\n\t\tvar point = center ? this.subtract(center) : this,\n\t\t\tsin = Math.sin(angle),\n\t\t\tcos = Math.cos(angle);\n\t\tpoint = new Point(\n\t\t\tpoint.x * cos - point.y * sin,\n\t\t\tpoint.x * sin + point.y * cos\n\t\t);\n\t\treturn center ? point.add(center) : point;\n\t},\n\n\ttransform: function(matrix) {\n\t\treturn matrix ? matrix._transformPoint(this) : this;\n\t},\n\n\tadd: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x + point.x, this.y + point.y);\n\t},\n\n\tsubtract: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x - point.x, this.y - point.y);\n\t},\n\n\tmultiply: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x * point.x, this.y * point.y);\n\t},\n\n\tdivide: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x / point.x, this.y / point.y);\n\t},\n\n\tmodulo: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn new Point(this.x % point.x, this.y % point.y);\n\t},\n\n\tnegate: function() {\n\t\treturn new Point(-this.x, -this.y);\n\t},\n\n\tisInside: function() {\n\t\treturn Rectangle.read(arguments).contains(this);\n\t},\n\n\tisClose: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\ttolerance = Base.read(args);\n\t\treturn this.getDistance(point) <= tolerance;\n\t},\n\n\tisCollinear: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Point.isCollinear(this.x, this.y, point.x, point.y);\n\t},\n\n\tisColinear: '#isCollinear',\n\n\tisOrthogonal: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn Point.isOrthogonal(this.x, this.y, point.x, point.y);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this.x) && isZero(this.y);\n\t},\n\n\tisNaN: function() {\n\t\treturn isNaN(this.x) || isNaN(this.y);\n\t},\n\n\tisInQuadrant: function(q) {\n\t\treturn this.x * (q > 1 && q < 4 ? -1 : 1) >= 0\n\t\t\t&& this.y * (q > 2 ? -1 : 1) >= 0;\n\t},\n\n\tdot: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn this.x * point.x + this.y * point.y;\n\t},\n\n\tcross: function() {\n\t\tvar point = Point.read(arguments);\n\t\treturn this.x * point.y - this.y * point.x;\n\t},\n\n\tproject: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tscale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n\t\treturn new Point(\n\t\t\tpoint.x * scale,\n\t\t\tpoint.y * scale\n\t\t);\n\t},\n\n\tstatics: {\n\t\tmin: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tpoint1 = Point.read(args),\n\t\t\t\tpoint2 = Point.read(args);\n\t\t\treturn new Point(\n\t\t\t\tMath.min(point1.x, point2.x),\n\t\t\t\tMath.min(point1.y, point2.y)\n\t\t\t);\n\t\t},\n\n\t\tmax: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tpoint1 = Point.read(args),\n\t\t\t\tpoint2 = Point.read(args);\n\t\t\treturn new Point(\n\t\t\t\tMath.max(point1.x, point2.x),\n\t\t\t\tMath.max(point1.y, point2.y)\n\t\t\t);\n\t\t},\n\n\t\trandom: function() {\n\t\t\treturn new Point(Math.random(), Math.random());\n\t\t},\n\n\t\tisCollinear: function(x1, y1, x2, y2) {\n\t\t\treturn Math.abs(x1 * y2 - y1 * x2)\n\t\t\t\t\t<= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2))\n\t\t\t\t\t\t* 1e-8;\n\t\t},\n\n\t\tisOrthogonal: function(x1, y1, x2, y2) {\n\t\t\treturn Math.abs(x1 * x2 + y1 * y2)\n\t\t\t\t\t<= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2))\n\t\t\t\t\t\t* 1e-8;\n\t\t}\n\t}\n}, Base.each(['round', 'ceil', 'floor', 'abs'], function(key) {\n\tvar op = Math[key];\n\tthis[key] = function() {\n\t\treturn new Point(op(this.x), op(this.y));\n\t};\n}, {}));\n\nvar LinkedPoint = Point.extend({\n\tinitialize: function Point(x, y, owner, setter) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(x, y, _dontNotify) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t},\n\n\tgetX: function() {\n\t\treturn this._x;\n\t},\n\n\tsetX: function(x) {\n\t\tthis._x = x;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tgetY: function() {\n\t\treturn this._y;\n\t},\n\n\tsetY: function(y) {\n\t\tthis._y = y;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._owner._selection & this._getSelection());\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._owner._changeSelection(this._getSelection(), selected);\n\t},\n\n\t_getSelection: function() {\n\t\treturn this._setter === 'setPosition' ? 4 : 0;\n\t}\n});\n\nvar Size = Base.extend({\n\t_class: 'Size',\n\t_readIndex: true,\n\n\tinitialize: function Size(arg0, arg1) {\n\t\tvar type = typeof arg0,\n\t\t\treading = this.__read,\n\t\t\tread = 0;\n\t\tif (type === 'number') {\n\t\t\tvar hasHeight = typeof arg1 === 'number';\n\t\t\tthis._set(arg0, hasHeight ? arg1 : arg0);\n\t\t\tif (reading)\n\t\t\t\tread = hasHeight ? 2 : 1;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0);\n\t\t\tif (reading)\n\t\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else {\n\t\t\tvar obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n\t\t\tread = 1;\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\tthis._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n\t\t\t} else if ('width' in obj) {\n\t\t\t\tthis._set(obj.width || 0, obj.height || 0);\n\t\t\t} else if ('x' in obj) {\n\t\t\t\tthis._set(obj.x || 0, obj.y || 0);\n\t\t\t} else {\n\t\t\t\tthis._set(0, 0);\n\t\t\t\tread = 0;\n\t\t\t}\n\t\t}\n\t\tif (reading)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(width, height) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\treturn this;\n\t},\n\n\tequals: function(size) {\n\t\treturn size === this || size && (this.width === size.width\n\t\t\t\t&& this.height === size.height\n\t\t\t\t|| Array.isArray(size) && this.width === size[0]\n\t\t\t\t\t&& this.height === size[1]) || false;\n\t},\n\n\tclone: function() {\n\t\treturn new Size(this.width, this.height);\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ width: ' + f.number(this.width)\n\t\t\t\t+ ', height: ' + f.number(this.height) + ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.width),\n\t\t\t\tf.number(this.height)];\n\t},\n\n\tadd: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width + size.width, this.height + size.height);\n\t},\n\n\tsubtract: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width - size.width, this.height - size.height);\n\t},\n\n\tmultiply: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width * size.width, this.height * size.height);\n\t},\n\n\tdivide: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width / size.width, this.height / size.height);\n\t},\n\n\tmodulo: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn new Size(this.width % size.width, this.height % size.height);\n\t},\n\n\tnegate: function() {\n\t\treturn new Size(-this.width, -this.height);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this.width) && isZero(this.height);\n\t},\n\n\tisNaN: function() {\n\t\treturn isNaN(this.width) || isNaN(this.height);\n\t},\n\n\tstatics: {\n\t\tmin: function(size1, size2) {\n\t\t\treturn new Size(\n\t\t\t\tMath.min(size1.width, size2.width),\n\t\t\t\tMath.min(size1.height, size2.height));\n\t\t},\n\n\t\tmax: function(size1, size2) {\n\t\t\treturn new Size(\n\t\t\t\tMath.max(size1.width, size2.width),\n\t\t\t\tMath.max(size1.height, size2.height));\n\t\t},\n\n\t\trandom: function() {\n\t\t\treturn new Size(Math.random(), Math.random());\n\t\t}\n\t}\n}, Base.each(['round', 'ceil', 'floor', 'abs'], function(key) {\n\tvar op = Math[key];\n\tthis[key] = function() {\n\t\treturn new Size(op(this.width), op(this.height));\n\t};\n}, {}));\n\nvar LinkedSize = Size.extend({\n\tinitialize: function Size(width, height, owner, setter) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(width, height, _dontNotify) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t},\n\n\tgetWidth: function() {\n\t\treturn this._width;\n\t},\n\n\tsetWidth: function(width) {\n\t\tthis._width = width;\n\t\tthis._owner[this._setter](this);\n\t},\n\n\tgetHeight: function() {\n\t\treturn this._height;\n\t},\n\n\tsetHeight: function(height) {\n\t\tthis._height = height;\n\t\tthis._owner[this._setter](this);\n\t}\n});\n\nvar Rectangle = Base.extend({\n\t_class: 'Rectangle',\n\t_readIndex: true,\n\tbeans: true,\n\n\tinitialize: function Rectangle(arg0, arg1, arg2, arg3) {\n\t\tvar args = arguments,\n\t\t\ttype = typeof arg0,\n\t\t\tread;\n\t\tif (type === 'number') {\n\t\t\tthis._set(arg0, arg1, arg2, arg3);\n\t\t\tread = 4;\n\t\t} else if (type === 'undefined' || arg0 === null) {\n\t\t\tthis._set(0, 0, 0, 0);\n\t\t\tread = arg0 === null ? 1 : 0;\n\t\t} else if (args.length === 1) {\n\t\t\tif (Array.isArray(arg0)) {\n\t\t\t\tthis._set.apply(this, arg0);\n\t\t\t\tread = 1;\n\t\t\t} else if (arg0.x !== undefined || arg0.width !== undefined) {\n\t\t\t\tthis._set(arg0.x || 0, arg0.y || 0,\n\t\t\t\t\t\targ0.width || 0, arg0.height || 0);\n\t\t\t\tread = 1;\n\t\t\t} else if (arg0.from === undefined && arg0.to === undefined) {\n\t\t\t\tthis._set(0, 0, 0, 0);\n\t\t\t\tif (Base.readSupported(args, this)) {\n\t\t\t\t\tread = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (read === undefined) {\n\t\t\tvar frm = Point.readNamed(args, 'from'),\n\t\t\t\tnext = Base.peek(args),\n\t\t\t\tx = frm.x,\n\t\t\t\ty = frm.y,\n\t\t\t\twidth,\n\t\t\t\theight;\n\t\t\tif (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n\t\t\t\tvar to = Point.readNamed(args, 'to');\n\t\t\t\twidth = to.x - x;\n\t\t\t\theight = to.y - y;\n\t\t\t\tif (width < 0) {\n\t\t\t\t\tx = to.x;\n\t\t\t\t\twidth = -width;\n\t\t\t\t}\n\t\t\t\tif (height < 0) {\n\t\t\t\t\ty = to.y;\n\t\t\t\t\theight = -height;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar size = Size.read(args);\n\t\t\t\twidth = size.width;\n\t\t\t\theight = size.height;\n\t\t\t}\n\t\t\tthis._set(x, y, width, height);\n\t\t\tread = args.__index;\n\t\t}\n\t\tvar filtered = args.__filtered;\n\t\tif (filtered)\n\t\t\tthis.__filtered = filtered;\n\t\tif (this.__read)\n\t\t\tthis.__read = read;\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(x, y, width, height) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\treturn this;\n\t},\n\n\tclone: function() {\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t},\n\n\tequals: function(rect) {\n\t\tvar rt = Base.isPlainValue(rect)\n\t\t\t\t? Rectangle.read(arguments)\n\t\t\t\t: rect;\n\t\treturn rt === this\n\t\t\t\t|| rt && this.x === rt.x && this.y === rt.y\n\t\t\t\t\t&& this.width === rt.width && this.height === rt.height\n\t\t\t\t|| false;\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '{ x: ' + f.number(this.x)\n\t\t\t\t+ ', y: ' + f.number(this.y)\n\t\t\t\t+ ', width: ' + f.number(this.width)\n\t\t\t\t+ ', height: ' + f.number(this.height)\n\t\t\t\t+ ' }';\n\t},\n\n\t_serialize: function(options) {\n\t\tvar f = options.formatter;\n\t\treturn [f.number(this.x),\n\t\t\t\tf.number(this.y),\n\t\t\t\tf.number(this.width),\n\t\t\t\tf.number(this.height)];\n\t},\n\n\tgetPoint: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\treturn new ctor(this.x, this.y, this, 'setPoint');\n\t},\n\n\tsetPoint: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.x = point.x;\n\t\tthis.y = point.y;\n\t},\n\n\tgetSize: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Size : LinkedSize;\n\t\treturn new ctor(this.width, this.height, this, 'setSize');\n\t},\n\n\t_fw: 1,\n\t_fh: 1,\n\n\tsetSize: function() {\n\t\tvar size = Size.read(arguments),\n\t\t\tsx = this._sx,\n\t\t\tsy = this._sy,\n\t\t\tw = size.width,\n\t\t\th = size.height;\n\t\tif (sx) {\n\t\t\tthis.x += (this.width - w) * sx;\n\t\t}\n\t\tif (sy) {\n\t\t\tthis.y += (this.height - h) * sy;\n\t\t}\n\t\tthis.width = w;\n\t\tthis.height = h;\n\t\tthis._fw = this._fh = 1;\n\t},\n\n\tgetLeft: function() {\n\t\treturn this.x;\n\t},\n\n\tsetLeft: function(left) {\n\t\tif (!this._fw) {\n\t\t\tvar amount = left - this.x;\n\t\t\tthis.width -= this._sx === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.x = left;\n\t\tthis._sx = this._fw = 0;\n\t},\n\n\tgetTop: function() {\n\t\treturn this.y;\n\t},\n\n\tsetTop: function(top) {\n\t\tif (!this._fh) {\n\t\t\tvar amount = top - this.y;\n\t\t\tthis.height -= this._sy === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.y = top;\n\t\tthis._sy = this._fh = 0;\n\t},\n\n\tgetRight: function() {\n\t\treturn this.x + this.width;\n\t},\n\n\tsetRight: function(right) {\n\t\tif (!this._fw) {\n\t\t\tvar amount = right - this.x;\n\t\t\tthis.width = this._sx === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.x = right - this.width;\n\t\tthis._sx = 1;\n\t\tthis._fw = 0;\n\t},\n\n\tgetBottom: function() {\n\t\treturn this.y + this.height;\n\t},\n\n\tsetBottom: function(bottom) {\n\t\tif (!this._fh) {\n\t\t\tvar amount = bottom - this.y;\n\t\t\tthis.height = this._sy === 0.5 ? amount * 2 : amount;\n\t\t}\n\t\tthis.y = bottom - this.height;\n\t\tthis._sy = 1;\n\t\tthis._fh = 0;\n\t},\n\n\tgetCenterX: function() {\n\t\treturn this.x + this.width / 2;\n\t},\n\n\tsetCenterX: function(x) {\n\t\tif (this._fw || this._sx === 0.5) {\n\t\t\tthis.x = x - this.width / 2;\n\t\t} else {\n\t\t\tif (this._sx) {\n\t\t\t\tthis.x += (x - this.x) * 2 * this._sx;\n\t\t\t}\n\t\t\tthis.width = (x - this.x) * 2;\n\t\t}\n\t\tthis._sx = 0.5;\n\t\tthis._fw = 0;\n\t},\n\n\tgetCenterY: function() {\n\t\treturn this.y + this.height / 2;\n\t},\n\n\tsetCenterY: function(y) {\n\t\tif (this._fh || this._sy === 0.5) {\n\t\t\tthis.y = y - this.height / 2;\n\t\t} else {\n\t\t\tif (this._sy) {\n\t\t\t\tthis.y += (y - this.y) * 2 * this._sy;\n\t\t\t}\n\t\t\tthis.height = (y - this.y) * 2;\n\t\t}\n\t\tthis._sy = 0.5;\n\t\tthis._fh = 0;\n\t},\n\n\tgetCenter: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\treturn new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n\t},\n\n\tsetCenter: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.setCenterX(point.x);\n\t\tthis.setCenterY(point.y);\n\t\treturn this;\n\t},\n\n\tgetArea: function() {\n\t\treturn this.width * this.height;\n\t},\n\n\tisEmpty: function() {\n\t\treturn this.width === 0 || this.height === 0;\n\t},\n\n\tcontains: function(arg) {\n\t\treturn arg && arg.width !== undefined\n\t\t\t\t|| (Array.isArray(arg) ? arg : arguments).length === 4\n\t\t\t\t? this._containsRectangle(Rectangle.read(arguments))\n\t\t\t\t: this._containsPoint(Point.read(arguments));\n\t},\n\n\t_containsPoint: function(point) {\n\t\tvar x = point.x,\n\t\t\ty = point.y;\n\t\treturn x >= this.x && y >= this.y\n\t\t\t\t&& x <= this.x + this.width\n\t\t\t\t&& y <= this.y + this.height;\n\t},\n\n\t_containsRectangle: function(rect) {\n\t\tvar x = rect.x,\n\t\t\ty = rect.y;\n\t\treturn x >= this.x && y >= this.y\n\t\t\t\t&& x + rect.width <= this.x + this.width\n\t\t\t\t&& y + rect.height <= this.y + this.height;\n\t},\n\n\tintersects: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tepsilon = Base.read(arguments) || 0;\n\t\treturn rect.x + rect.width > this.x - epsilon\n\t\t\t\t&& rect.y + rect.height > this.y - epsilon\n\t\t\t\t&& rect.x < this.x + this.width + epsilon\n\t\t\t\t&& rect.y < this.y + this.height + epsilon;\n\t},\n\n\tintersect: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tx1 = Math.max(this.x, rect.x),\n\t\t\ty1 = Math.max(this.y, rect.y),\n\t\t\tx2 = Math.min(this.x + this.width, rect.x + rect.width),\n\t\t\ty2 = Math.min(this.y + this.height, rect.y + rect.height);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\tunite: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tx1 = Math.min(this.x, rect.x),\n\t\t\ty1 = Math.min(this.y, rect.y),\n\t\t\tx2 = Math.max(this.x + this.width, rect.x + rect.width),\n\t\t\ty2 = Math.max(this.y + this.height, rect.y + rect.height);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\tinclude: function() {\n\t\tvar point = Point.read(arguments);\n\t\tvar x1 = Math.min(this.x, point.x),\n\t\t\ty1 = Math.min(this.y, point.y),\n\t\t\tx2 = Math.max(this.x + this.width, point.x),\n\t\t\ty2 = Math.max(this.y + this.height, point.y);\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t},\n\n\texpand: function() {\n\t\tvar amount = Size.read(arguments),\n\t\t\thor = amount.width,\n\t\t\tver = amount.height;\n\t\treturn new Rectangle(this.x - hor / 2, this.y - ver / 2,\n\t\t\t\tthis.width + hor, this.height + ver);\n\t},\n\n\tscale: function(hor, ver) {\n\t\treturn this.expand(this.width * hor - this.width,\n\t\t\t\tthis.height * (ver === undefined ? hor : ver) - this.height);\n\t}\n}, Base.each([\n\t\t['Top', 'Left'], ['Top', 'Right'],\n\t\t['Bottom', 'Left'], ['Bottom', 'Right'],\n\t\t['Left', 'Center'], ['Top', 'Center'],\n\t\t['Right', 'Center'], ['Bottom', 'Center']\n\t],\n\tfunction(parts, index) {\n\t\tvar part = parts.join(''),\n\t\t\txFirst = /^[RL]/.test(part);\n\t\tif (index >= 4)\n\t\t\tparts[1] += xFirst ? 'Y' : 'X';\n\t\tvar x = parts[xFirst ? 0 : 1],\n\t\t\ty = parts[xFirst ? 1 : 0],\n\t\t\tgetX = 'get' + x,\n\t\t\tgetY = 'get' + y,\n\t\t\tsetX = 'set' + x,\n\t\t\tsetY = 'set' + y,\n\t\t\tget = 'get' + part,\n\t\t\tset = 'set' + part;\n\t\tthis[get] = function(_dontLink) {\n\t\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\t\treturn new ctor(this[getX](), this[getY](), this, set);\n\t\t};\n\t\tthis[set] = function() {\n\t\t\tvar point = Point.read(arguments);\n\t\t\tthis[setX](point.x);\n\t\t\tthis[setY](point.y);\n\t\t};\n\t}, {\n\t\tbeans: true\n\t}\n));\n\nvar LinkedRectangle = Rectangle.extend({\n\tinitialize: function Rectangle(x, y, width, height, owner, setter) {\n\t\tthis._set(x, y, width, height, true);\n\t\tthis._owner = owner;\n\t\tthis._setter = setter;\n\t},\n\n\t_set: function(x, y, width, height, _dontNotify) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tif (!_dontNotify)\n\t\t\tthis._owner[this._setter](this);\n\t\treturn this;\n\t}\n},\nnew function() {\n\tvar proto = Rectangle.prototype;\n\n\treturn Base.each(['x', 'y', 'width', 'height'], function(key) {\n\t\tvar part = Base.capitalize(key),\n\t\t\tinternal = '_' + key;\n\t\tthis['get' + part] = function() {\n\t\t\treturn this[internal];\n\t\t};\n\n\t\tthis['set' + part] = function(value) {\n\t\t\tthis[internal] = value;\n\t\t\tif (!this._dontNotify)\n\t\t\t\tthis._owner[this._setter](this);\n\t\t};\n\t}, Base.each(['Point', 'Size', 'Center',\n\t\t\t'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY',\n\t\t\t'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight',\n\t\t\t'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'],\n\t\tfunction(key) {\n\t\t\tvar name = 'set' + key;\n\t\t\tthis[name] = function() {\n\t\t\t\tthis._dontNotify = true;\n\t\t\t\tproto[name].apply(this, arguments);\n\t\t\t\tthis._dontNotify = false;\n\t\t\t\tthis._owner[this._setter](this);\n\t\t\t};\n\t\t}, {\n\t\t\tisSelected: function() {\n\t\t\t\treturn !!(this._owner._selection & 2);\n\t\t\t},\n\n\t\t\tsetSelected: function(selected) {\n\t\t\t\tvar owner = this._owner;\n\t\t\t\tif (owner._changeSelection) {\n\t\t\t\t\towner._changeSelection(2, selected);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t);\n});\n\nvar Matrix = Base.extend({\n\t_class: 'Matrix',\n\n\tinitialize: function Matrix(arg, _dontNotify) {\n\t\tvar args = arguments,\n\t\t\tcount = args.length,\n\t\t\tok = true;\n\t\tif (count >= 6) {\n\t\t\tthis._set.apply(this, args);\n\t\t} else if (count === 1 || count === 2) {\n\t\t\tif (arg instanceof Matrix) {\n\t\t\t\tthis._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty,\n\t\t\t\t\t\t_dontNotify);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tthis._set.apply(this,\n\t\t\t\t\t\t_dontNotify ? arg.concat([_dontNotify]) : arg);\n\t\t\t} else {\n\t\t\t\tok = false;\n\t\t\t}\n\t\t} else if (!count) {\n\t\t\tthis.reset();\n\t\t} else {\n\t\t\tok = false;\n\t\t}\n\t\tif (!ok) {\n\t\t\tthrow new Error('Unsupported matrix parameters');\n\t\t}\n\t\treturn this;\n\t},\n\n\tset: '#initialize',\n\n\t_set: function(a, b, c, d, tx, ty, _dontNotify) {\n\t\tthis._a = a;\n\t\tthis._b = b;\n\t\tthis._c = c;\n\t\tthis._d = d;\n\t\tthis._tx = tx;\n\t\tthis._ty = ty;\n\t\tif (!_dontNotify)\n\t\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this.getValues(), options, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tvar owner = this._owner;\n\t\tif (owner) {\n\t\t\tif (owner._applyMatrix) {\n\t\t\t\towner.transform(null, true);\n\t\t\t} else {\n\t\t\t\towner._changed(25);\n\t\t\t}\n\t\t}\n\t},\n\n\tclone: function() {\n\t\treturn new Matrix(this._a, this._b, this._c, this._d,\n\t\t\t\tthis._tx, this._ty);\n\t},\n\n\tequals: function(mx) {\n\t\treturn mx === this || mx && this._a === mx._a && this._b === mx._b\n\t\t\t\t&& this._c === mx._c && this._d === mx._d\n\t\t\t\t&& this._tx === mx._tx && this._ty === mx._ty;\n\t},\n\n\ttoString: function() {\n\t\tvar f = Formatter.instance;\n\t\treturn '[[' + [f.number(this._a), f.number(this._c),\n\t\t\t\t\tf.number(this._tx)].join(', ') + '], ['\n\t\t\t\t+ [f.number(this._b), f.number(this._d),\n\t\t\t\t\tf.number(this._ty)].join(', ') + ']]';\n\t},\n\n\treset: function(_dontNotify) {\n\t\tthis._a = this._d = 1;\n\t\tthis._b = this._c = this._tx = this._ty = 0;\n\t\tif (!_dontNotify)\n\t\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tapply: function(recursively, _setApplyMatrix) {\n\t\tvar owner = this._owner;\n\t\tif (owner) {\n\t\t\towner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n\t\t\treturn this.isIdentity();\n\t\t}\n\t\treturn false;\n\t},\n\n\ttranslate: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tx = point.x,\n\t\t\ty = point.y;\n\t\tthis._tx += x * this._a + y * this._c;\n\t\tthis._ty += x * this._b + y * this._d;\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tscale: function() {\n\t\tvar args = arguments,\n\t\t\tscale = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\tif (center)\n\t\t\tthis.translate(center);\n\t\tthis._a *= scale.x;\n\t\tthis._b *= scale.x;\n\t\tthis._c *= scale.y;\n\t\tthis._d *= scale.y;\n\t\tif (center)\n\t\t\tthis.translate(center.negate());\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\trotate: function(angle ) {\n\t\tangle *= Math.PI / 180;\n\t\tvar center = Point.read(arguments, 1),\n\t\t\tx = center.x,\n\t\t\ty = center.y,\n\t\t\tcos = Math.cos(angle),\n\t\t\tsin = Math.sin(angle),\n\t\t\ttx = x - x * cos + y * sin,\n\t\t\tty = y - x * sin - y * cos,\n\t\t\ta = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d;\n\t\tthis._a = cos * a + sin * c;\n\t\tthis._b = cos * b + sin * d;\n\t\tthis._c = -sin * a + cos * c;\n\t\tthis._d = -sin * b + cos * d;\n\t\tthis._tx += tx * a + ty * c;\n\t\tthis._ty += tx * b + ty * d;\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tshear: function() {\n\t\tvar args = arguments,\n\t\t\tshear = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\tif (center)\n\t\t\tthis.translate(center);\n\t\tvar a = this._a,\n\t\t\tb = this._b;\n\t\tthis._a += shear.y * this._c;\n\t\tthis._b += shear.y * this._d;\n\t\tthis._c += shear.x * a;\n\t\tthis._d += shear.x * b;\n\t\tif (center)\n\t\t\tthis.translate(center.negate());\n\t\tthis._changed();\n\t\treturn this;\n\t},\n\n\tskew: function() {\n\t\tvar args = arguments,\n\t\t\tskew = Point.read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true }),\n\t\t\ttoRadians = Math.PI / 180,\n\t\t\tshear = new Point(Math.tan(skew.x * toRadians),\n\t\t\t\tMath.tan(skew.y * toRadians));\n\t\treturn this.shear(shear, center);\n\t},\n\n\tappend: function(mx, _dontNotify) {\n\t\tif (mx) {\n\t\t\tvar a1 = this._a,\n\t\t\t\tb1 = this._b,\n\t\t\t\tc1 = this._c,\n\t\t\t\td1 = this._d,\n\t\t\t\ta2 = mx._a,\n\t\t\t\tb2 = mx._c,\n\t\t\t\tc2 = mx._b,\n\t\t\t\td2 = mx._d,\n\t\t\t\ttx2 = mx._tx,\n\t\t\t\tty2 = mx._ty;\n\t\t\tthis._a = a2 * a1 + c2 * c1;\n\t\t\tthis._c = b2 * a1 + d2 * c1;\n\t\t\tthis._b = a2 * b1 + c2 * d1;\n\t\t\tthis._d = b2 * b1 + d2 * d1;\n\t\t\tthis._tx += tx2 * a1 + ty2 * c1;\n\t\t\tthis._ty += tx2 * b1 + ty2 * d1;\n\t\t\tif (!_dontNotify)\n\t\t\t\tthis._changed();\n\t\t}\n\t\treturn this;\n\t},\n\n\tprepend: function(mx, _dontNotify) {\n\t\tif (mx) {\n\t\t\tvar a1 = this._a,\n\t\t\t\tb1 = this._b,\n\t\t\t\tc1 = this._c,\n\t\t\t\td1 = this._d,\n\t\t\t\ttx1 = this._tx,\n\t\t\t\tty1 = this._ty,\n\t\t\t\ta2 = mx._a,\n\t\t\t\tb2 = mx._c,\n\t\t\t\tc2 = mx._b,\n\t\t\t\td2 = mx._d,\n\t\t\t\ttx2 = mx._tx,\n\t\t\t\tty2 = mx._ty;\n\t\t\tthis._a = a2 * a1 + b2 * b1;\n\t\t\tthis._c = a2 * c1 + b2 * d1;\n\t\t\tthis._b = c2 * a1 + d2 * b1;\n\t\t\tthis._d = c2 * c1 + d2 * d1;\n\t\t\tthis._tx = a2 * tx1 + b2 * ty1 + tx2;\n\t\t\tthis._ty = c2 * tx1 + d2 * ty1 + ty2;\n\t\t\tif (!_dontNotify)\n\t\t\t\tthis._changed();\n\t\t}\n\t\treturn this;\n\t},\n\n\tappended: function(mx) {\n\t\treturn this.clone().append(mx);\n\t},\n\n\tprepended: function(mx) {\n\t\treturn this.clone().prepend(mx);\n\t},\n\n\tinvert: function() {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\ttx = this._tx,\n\t\t\tty = this._ty,\n\t\t\tdet = a * d - b * c,\n\t\t\tres = null;\n\t\tif (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n\t\t\tthis._a = d / det;\n\t\t\tthis._b = -b / det;\n\t\t\tthis._c = -c / det;\n\t\t\tthis._d = a / det;\n\t\t\tthis._tx = (c * ty - d * tx) / det;\n\t\t\tthis._ty = (b * tx - a * ty) / det;\n\t\t\tres = this;\n\t\t}\n\t\treturn res;\n\t},\n\n\tinverted: function() {\n\t\treturn this.clone().invert();\n\t},\n\n\tconcatenate: '#append',\n\tpreConcatenate: '#prepend',\n\tchain: '#appended',\n\n\t_shiftless: function() {\n\t\treturn new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n\t},\n\n\t_orNullIfIdentity: function() {\n\t\treturn this.isIdentity() ? null : this;\n\t},\n\n\tisIdentity: function() {\n\t\treturn this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1\n\t\t\t\t&& this._tx === 0 && this._ty === 0;\n\t},\n\n\tisInvertible: function() {\n\t\tvar det = this._a * this._d - this._c * this._b;\n\t\treturn det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n\t},\n\n\tisSingular: function() {\n\t\treturn !this.isInvertible();\n\t},\n\n\ttransform: function( src, dst, count) {\n\t\treturn arguments.length < 3\n\t\t\t? this._transformPoint(Point.read(arguments))\n\t\t\t: this._transformCoordinates(src, dst, count);\n\t},\n\n\t_transformPoint: function(point, dest, _dontNotify) {\n\t\tvar x = point.x,\n\t\t\ty = point.y;\n\t\tif (!dest)\n\t\t\tdest = new Point();\n\t\treturn dest._set(\n\t\t\t\tx * this._a + y * this._c + this._tx,\n\t\t\t\tx * this._b + y * this._d + this._ty,\n\t\t\t\t_dontNotify);\n\t},\n\n\t_transformCoordinates: function(src, dst, count) {\n\t\tfor (var i = 0, max = 2 * count; i < max; i += 2) {\n\t\t\tvar x = src[i],\n\t\t\t\ty = src[i + 1];\n\t\t\tdst[i] = x * this._a + y * this._c + this._tx;\n\t\t\tdst[i + 1] = x * this._b + y * this._d + this._ty;\n\t\t}\n\t\treturn dst;\n\t},\n\n\t_transformCorners: function(rect) {\n\t\tvar x1 = rect.x,\n\t\t\ty1 = rect.y,\n\t\t\tx2 = x1 + rect.width,\n\t\t\ty2 = y1 + rect.height,\n\t\t\tcoords = [ x1, y1, x2, y1, x2, y2, x1, y2 ];\n\t\treturn this._transformCoordinates(coords, coords, 4);\n\t},\n\n\t_transformBounds: function(bounds, dest, _dontNotify) {\n\t\tvar coords = this._transformCorners(bounds),\n\t\t\tmin = coords.slice(0, 2),\n\t\t\tmax = min.slice();\n\t\tfor (var i = 2; i < 8; i++) {\n\t\t\tvar val = coords[i],\n\t\t\t\tj = i & 1;\n\t\t\tif (val < min[j]) {\n\t\t\t\tmin[j] = val;\n\t\t\t} else if (val > max[j]) {\n\t\t\t\tmax[j] = val;\n\t\t\t}\n\t\t}\n\t\tif (!dest)\n\t\t\tdest = new Rectangle();\n\t\treturn dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1],\n\t\t\t\t_dontNotify);\n\t},\n\n\tinverseTransform: function() {\n\t\treturn this._inverseTransform(Point.read(arguments));\n\t},\n\n\t_inverseTransform: function(point, dest, _dontNotify) {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\ttx = this._tx,\n\t\t\tty = this._ty,\n\t\t\tdet = a * d - b * c,\n\t\t\tres = null;\n\t\tif (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n\t\t\tvar x = point.x - this._tx,\n\t\t\t\ty = point.y - this._ty;\n\t\t\tif (!dest)\n\t\t\t\tdest = new Point();\n\t\t\tres = dest._set(\n\t\t\t\t\t(x * d - y * c) / det,\n\t\t\t\t\t(y * a - x * b) / det,\n\t\t\t\t\t_dontNotify);\n\t\t}\n\t\treturn res;\n\t},\n\n\tdecompose: function() {\n\t\tvar a = this._a,\n\t\t\tb = this._b,\n\t\t\tc = this._c,\n\t\t\td = this._d,\n\t\t\tdet = a * d - b * c,\n\t\t\tsqrt = Math.sqrt,\n\t\t\tatan2 = Math.atan2,\n\t\t\tdegrees = 180 / Math.PI,\n\t\t\trotate,\n\t\t\tscale,\n\t\t\tskew;\n\t\tif (a !== 0 || b !== 0) {\n\t\t\tvar r = sqrt(a * a + b * b);\n\t\t\trotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n\t\t\tscale = [r, det / r];\n\t\t\tskew = [atan2(a * c + b * d, r * r), 0];\n\t\t} else if (c !== 0 || d !== 0) {\n\t\t\tvar s = sqrt(c * c + d * d);\n\t\t\trotate = Math.asin(c / s)  * (d > 0 ? 1 : -1);\n\t\t\tscale = [det / s, s];\n\t\t\tskew = [0, atan2(a * c + b * d, s * s)];\n\t\t} else {\n\t\t\trotate = 0;\n\t\t\tskew = scale = [0, 0];\n\t\t}\n\t\treturn {\n\t\t\ttranslation: this.getTranslation(),\n\t\t\trotation: rotate * degrees,\n\t\t\tscaling: new Point(scale),\n\t\t\tskewing: new Point(skew[0] * degrees, skew[1] * degrees)\n\t\t};\n\t},\n\n\tgetValues: function() {\n\t\treturn [ this._a, this._b, this._c, this._d, this._tx, this._ty ];\n\t},\n\n\tgetTranslation: function() {\n\t\treturn new Point(this._tx, this._ty);\n\t},\n\n\tgetScaling: function() {\n\t\treturn this.decompose().scaling;\n\t},\n\n\tgetRotation: function() {\n\t\treturn this.decompose().rotation;\n\t},\n\n\tapplyToContext: function(ctx) {\n\t\tif (!this.isIdentity()) {\n\t\t\tctx.transform(this._a, this._b, this._c, this._d,\n\t\t\t\t\tthis._tx, this._ty);\n\t\t}\n\t}\n}, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function(key) {\n\tvar part = Base.capitalize(key),\n\t\tprop = '_' + key;\n\tthis['get' + part] = function() {\n\t\treturn this[prop];\n\t};\n\tthis['set' + part] = function(value) {\n\t\tthis[prop] = value;\n\t\tthis._changed();\n\t};\n}, {}));\n\nvar Line = Base.extend({\n\t_class: 'Line',\n\n\tinitialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n\t\tvar asVector = false;\n\t\tif (arguments.length >= 4) {\n\t\t\tthis._px = arg0;\n\t\t\tthis._py = arg1;\n\t\t\tthis._vx = arg2;\n\t\t\tthis._vy = arg3;\n\t\t\tasVector = arg4;\n\t\t} else {\n\t\t\tthis._px = arg0.x;\n\t\t\tthis._py = arg0.y;\n\t\t\tthis._vx = arg1.x;\n\t\t\tthis._vy = arg1.y;\n\t\t\tasVector = arg2;\n\t\t}\n\t\tif (!asVector) {\n\t\t\tthis._vx -= this._px;\n\t\t\tthis._vy -= this._py;\n\t\t}\n\t},\n\n\tgetPoint: function() {\n\t\treturn new Point(this._px, this._py);\n\t},\n\n\tgetVector: function() {\n\t\treturn new Point(this._vx, this._vy);\n\t},\n\n\tgetLength: function() {\n\t\treturn this.getVector().getLength();\n\t},\n\n\tintersect: function(line, isInfinite) {\n\t\treturn Line.intersect(\n\t\t\t\tthis._px, this._py, this._vx, this._vy,\n\t\t\t\tline._px, line._py, line._vx, line._vy,\n\t\t\t\ttrue, isInfinite);\n\t},\n\n\tgetSide: function(point, isInfinite) {\n\t\treturn Line.getSide(\n\t\t\t\tthis._px, this._py, this._vx, this._vy,\n\t\t\t\tpoint.x, point.y, true, isInfinite);\n\t},\n\n\tgetDistance: function(point) {\n\t\treturn Math.abs(this.getSignedDistance(point));\n\t},\n\n\tgetSignedDistance: function(point) {\n\t\treturn Line.getSignedDistance(this._px, this._py, this._vx, this._vy,\n\t\t\t\tpoint.x, point.y, true);\n\t},\n\n\tisCollinear: function(line) {\n\t\treturn Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n\t},\n\n\tisOrthogonal: function(line) {\n\t\treturn Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n\t},\n\n\tstatics: {\n\t\tintersect: function(p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector,\n\t\t\t\tisInfinite) {\n\t\t\tif (!asVector) {\n\t\t\t\tv1x -= p1x;\n\t\t\t\tv1y -= p1y;\n\t\t\t\tv2x -= p2x;\n\t\t\t\tv2y -= p2y;\n\t\t\t}\n\t\t\tvar cross = v1x * v2y - v1y * v2x;\n\t\t\tif (!Numerical.isMachineZero(cross)) {\n\t\t\t\tvar dx = p1x - p2x,\n\t\t\t\t\tdy = p1y - p2y,\n\t\t\t\t\tu1 = (v2x * dy - v2y * dx) / cross,\n\t\t\t\t\tu2 = (v1x * dy - v1y * dx) / cross,\n\t\t\t\t\tepsilon = 1e-12,\n\t\t\t\t\tuMin = -epsilon,\n\t\t\t\t\tuMax = 1 + epsilon;\n\t\t\t\tif (isInfinite\n\t\t\t\t\t\t|| uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n\t\t\t\t\tif (!isInfinite) {\n\t\t\t\t\t\tu1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n\t\t\t\t\t}\n\t\t\t\t\treturn new Point(\n\t\t\t\t\t\t\tp1x + u1 * v1x,\n\t\t\t\t\t\t\tp1y + u1 * v1y);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetSide: function(px, py, vx, vy, x, y, asVector, isInfinite) {\n\t\t\tif (!asVector) {\n\t\t\t\tvx -= px;\n\t\t\t\tvy -= py;\n\t\t\t}\n\t\t\tvar v2x = x - px,\n\t\t\t\tv2y = y - py,\n\t\t\t\tccw = v2x * vy - v2y * vx;\n\t\t\tif (!isInfinite && Numerical.isMachineZero(ccw)) {\n\t\t\t\tccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n\t\t\t\tif (ccw >= 0 && ccw <= 1)\n\t\t\t\t\tccw = 0;\n\t\t\t}\n\t\t\treturn ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n\t\t},\n\n\t\tgetSignedDistance: function(px, py, vx, vy, x, y, asVector) {\n\t\t\tif (!asVector) {\n\t\t\t\tvx -= px;\n\t\t\t\tvy -= py;\n\t\t\t}\n\t\t\t  return  vx === 0 ? (vy > 0 ? x - px : px - x)\n\t\t\t\t\t: vy === 0 ? (vx < 0 ? y - py : py - y)\n\t\t\t\t\t: ((x - px) * vy - (y - py) * vx) / (\n\t\t\t\t\t\tvy > vx\n\t\t\t\t\t\t\t? vy * Math.sqrt(1 + (vx * vx) / (vy * vy))\n\t\t\t\t\t\t\t: vx * Math.sqrt(1 + (vy * vy) / (vx * vx))\n\t\t\t\t\t);\n\t\t},\n\n\t\tgetDistance: function(px, py, vx, vy, x, y, asVector) {\n\t\t\treturn Math.abs(\n\t\t\t\t\tLine.getSignedDistance(px, py, vx, vy, x, y, asVector));\n\t\t}\n\t}\n});\n\nvar Project = PaperScopeItem.extend({\n\t_class: 'Project',\n\t_list: 'projects',\n\t_reference: 'project',\n\t_compactSerialize: true,\n\n\tinitialize: function Project(element) {\n\t\tPaperScopeItem.call(this, true);\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tthis._activeLayer = null;\n\t\tthis._currentStyle = new Style(null, null, this);\n\t\tthis._view = View.create(this,\n\t\t\t\telement || CanvasProvider.getCanvas(1, 1));\n\t\tthis._selectionItems = {};\n\t\tthis._selectionCount = 0;\n\t\tthis._updateVersion = 0;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this._children, options, true, dictionary);\n\t},\n\n\t_changed: function(flags, item) {\n\t\tif (flags & 1) {\n\t\t\tvar view = this._view;\n\t\t\tif (view) {\n\t\t\t\tview._needsUpdate = true;\n\t\t\t\tif (!view._requested && view._autoUpdate)\n\t\t\t\t\tview.requestUpdate();\n\t\t\t}\n\t\t}\n\t\tvar changes = this._changes;\n\t\tif (changes && item) {\n\t\t\tvar changesById = this._changesById,\n\t\t\t\tid = item._id,\n\t\t\t\tentry = changesById[id];\n\t\t\tif (entry) {\n\t\t\t\tentry.flags |= flags;\n\t\t\t} else {\n\t\t\t\tchanges.push(changesById[id] = { item: item, flags: flags });\n\t\t\t}\n\t\t}\n\t},\n\n\tclear: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = children.length - 1; i >= 0; i--)\n\t\t\tchildren[i].remove();\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._children.length;\n\t},\n\n\tremove: function remove() {\n\t\tif (!remove.base.call(this))\n\t\t\treturn false;\n\t\tif (this._view)\n\t\t\tthis._view.remove();\n\t\treturn true;\n\t},\n\n\tgetView: function() {\n\t\treturn this._view;\n\t},\n\n\tgetCurrentStyle: function() {\n\t\treturn this._currentStyle;\n\t},\n\n\tsetCurrentStyle: function(style) {\n\t\tthis._currentStyle.set(style);\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index;\n\t},\n\n\tgetOptions: function() {\n\t\treturn this._scope.settings;\n\t},\n\n\tgetLayers: function() {\n\t\treturn this._children;\n\t},\n\n\tgetActiveLayer: function() {\n\t\treturn this._activeLayer || new Layer({ project: this, insert: true });\n\t},\n\n\tgetSymbolDefinitions: function() {\n\t\tvar definitions = [],\n\t\t\tids = {};\n\t\tthis.getItems({\n\t\t\tclass: SymbolItem,\n\t\t\tmatch: function(item) {\n\t\t\t\tvar definition = item._definition,\n\t\t\t\t\tid = definition._id;\n\t\t\t\tif (!ids[id]) {\n\t\t\t\t\tids[id] = true;\n\t\t\t\t\tdefinitions.push(definition);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn definitions;\n\t},\n\n\tgetSymbols: 'getSymbolDefinitions',\n\n\tgetSelectedItems: function() {\n\t\tvar selectionItems = this._selectionItems,\n\t\t\titems = [];\n\t\tfor (var id in selectionItems) {\n\t\t\tvar item = selectionItems[id],\n\t\t\t\tselection = item._selection;\n\t\t\tif ((selection & 1) && item.isInserted()) {\n\t\t\t\titems.push(item);\n\t\t\t} else if (!selection) {\n\t\t\t\tthis._updateSelection(item);\n\t\t\t}\n\t\t}\n\t\treturn items;\n\t},\n\n\t_updateSelection: function(item) {\n\t\tvar id = item._id,\n\t\t\tselectionItems = this._selectionItems;\n\t\tif (item._selection) {\n\t\t\tif (selectionItems[id] !== item) {\n\t\t\t\tthis._selectionCount++;\n\t\t\t\tselectionItems[id] = item;\n\t\t\t}\n\t\t} else if (selectionItems[id] === item) {\n\t\t\tthis._selectionCount--;\n\t\t\tdelete selectionItems[id];\n\t\t}\n\t},\n\n\tselectAll: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tchildren[i].setFullySelected(true);\n\t},\n\n\tdeselectAll: function() {\n\t\tvar selectionItems = this._selectionItems;\n\t\tfor (var i in selectionItems)\n\t\t\tselectionItems[i].setFullySelected(false);\n\t},\n\n\taddLayer: function(layer) {\n\t\treturn this.insertLayer(undefined, layer);\n\t},\n\n\tinsertLayer: function(index, layer) {\n\t\tif (layer instanceof Layer) {\n\t\t\tlayer._remove(false, true);\n\t\t\tBase.splice(this._children, [layer], index, 0);\n\t\t\tlayer._setProject(this, true);\n\t\t\tvar name = layer._name;\n\t\t\tif (name)\n\t\t\t\tlayer.setName(name);\n\t\t\tif (this._changes)\n\t\t\t\tlayer._changed(5);\n\t\t\tif (!this._activeLayer)\n\t\t\t\tthis._activeLayer = layer;\n\t\t} else {\n\t\t\tlayer = null;\n\t\t}\n\t\treturn layer;\n\t},\n\n\t_insertItem: function(index, item, _created) {\n\t\titem = this.insertLayer(index, item)\n\t\t\t\t|| (this._activeLayer || this._insertItem(undefined,\n\t\t\t\t\t\tnew Layer(Item.NO_INSERT), true))\n\t\t\t\t\t\t.insertChild(index, item);\n\t\tif (_created && item.activate)\n\t\t\titem.activate();\n\t\treturn item;\n\t},\n\n\tgetItems: function(options) {\n\t\treturn Item._getItems(this, options);\n\t},\n\n\tgetItem: function(options) {\n\t\treturn Item._getItems(this, options, null, null, true)[0] || null;\n\t},\n\n\timportJSON: function(json) {\n\t\tthis.activate();\n\t\tvar layer = this._activeLayer;\n\t\treturn Base.importJSON(json, layer && layer.isEmpty() && layer);\n\t},\n\n\tremoveOn: function(type) {\n\t\tvar sets = this._removeSets;\n\t\tif (sets) {\n\t\t\tif (type === 'mouseup')\n\t\t\t\tsets.mousedrag = null;\n\t\t\tvar set = sets[type];\n\t\t\tif (set) {\n\t\t\t\tfor (var id in set) {\n\t\t\t\t\tvar item = set[id];\n\t\t\t\t\tfor (var key in sets) {\n\t\t\t\t\t\tvar other = sets[key];\n\t\t\t\t\t\tif (other && other != set)\n\t\t\t\t\t\t\tdelete other[item._id];\n\t\t\t\t\t}\n\t\t\t\t\titem.remove();\n\t\t\t\t}\n\t\t\t\tsets[type] = null;\n\t\t\t}\n\t\t}\n\t},\n\n\tdraw: function(ctx, matrix, pixelRatio) {\n\t\tthis._updateVersion++;\n\t\tctx.save();\n\t\tmatrix.applyToContext(ctx);\n\t\tvar children = this._children,\n\t\t\tparam = new Base({\n\t\t\t\toffset: new Point(0, 0),\n\t\t\t\tpixelRatio: pixelRatio,\n\t\t\t\tviewMatrix: matrix.isIdentity() ? null : matrix,\n\t\t\t\tmatrices: [new Matrix()],\n\t\t\t\tupdateMatrix: true\n\t\t\t});\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tchildren[i].draw(ctx, param);\n\t\t}\n\t\tctx.restore();\n\n\t\tif (this._selectionCount > 0) {\n\t\t\tctx.save();\n\t\t\tctx.strokeWidth = 1;\n\t\t\tvar items = this._selectionItems,\n\t\t\t\tsize = this._scope.settings.handleSize,\n\t\t\t\tversion = this._updateVersion;\n\t\t\tfor (var id in items) {\n\t\t\t\titems[id]._drawSelection(ctx, matrix, size, items, version);\n\t\t\t}\n\t\t\tctx.restore();\n\t\t}\n\t}\n});\n\nvar Item = Base.extend(Emitter, {\n\tstatics: {\n\t\textend: function extend(src) {\n\t\t\tif (src._serializeFields)\n\t\t\t\tsrc._serializeFields = Base.set({},\n\t\t\t\t\tthis.prototype._serializeFields, src._serializeFields);\n\t\t\treturn extend.base.apply(this, arguments);\n\t\t},\n\n\t\tNO_INSERT: { insert: false }\n\t},\n\n\t_class: 'Item',\n\t_name: null,\n\t_applyMatrix: true,\n\t_canApplyMatrix: true,\n\t_canScaleStroke: false,\n\t_pivot: null,\n\t_visible: true,\n\t_blendMode: 'normal',\n\t_opacity: 1,\n\t_locked: false,\n\t_guide: false,\n\t_clipMask: false,\n\t_selection: 0,\n\t_selectBounds: true,\n\t_selectChildren: false,\n\t_serializeFields: {\n\t\tname: null,\n\t\tapplyMatrix: null,\n\t\tmatrix: new Matrix(),\n\t\tpivot: null,\n\t\tvisible: true,\n\t\tblendMode: 'normal',\n\t\topacity: 1,\n\t\tlocked: false,\n\t\tguide: false,\n\t\tclipMask: false,\n\t\tselected: false,\n\t\tdata: {}\n\t},\n\t_prioritize: ['applyMatrix']\n},\nnew function() {\n\tvar handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick',\n\t\t\t'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n\treturn Base.each(handlers,\n\t\tfunction(name) {\n\t\t\tthis._events[name] = {\n\t\t\t\tinstall: function(type) {\n\t\t\t\t\tthis.getView()._countItemEvent(type, 1);\n\t\t\t\t},\n\n\t\t\t\tuninstall: function(type) {\n\t\t\t\t\tthis.getView()._countItemEvent(type, -1);\n\t\t\t\t}\n\t\t\t};\n\t\t}, {\n\t\t\t_events: {\n\t\t\t\tonFrame: {\n\t\t\t\t\tinstall: function() {\n\t\t\t\t\t\tthis.getView()._animateItem(this, true);\n\t\t\t\t\t},\n\n\t\t\t\t\tuninstall: function() {\n\t\t\t\t\t\tthis.getView()._animateItem(this, false);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tonLoad: {},\n\t\t\t\tonError: {}\n\t\t\t},\n\t\t\tstatics: {\n\t\t\t\t_itemHandlers: handlers\n\t\t\t}\n\t\t}\n\t);\n}, {\n\tinitialize: function Item() {\n\t},\n\n\t_initialize: function(props, point) {\n\t\tvar hasProps = props && Base.isPlainObject(props),\n\t\t\tinternal = hasProps && props.internal === true,\n\t\t\tmatrix = this._matrix = new Matrix(),\n\t\t\tproject = hasProps && props.project || paper.project,\n\t\t\tsettings = paper.settings;\n\t\tthis._id = internal ? null : UID.get();\n\t\tthis._parent = this._index = null;\n\t\tthis._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n\t\tif (point)\n\t\t\tmatrix.translate(point);\n\t\tmatrix._owner = this;\n\t\tthis._style = new Style(project._currentStyle, this, project);\n\t\tif (internal || hasProps && props.insert == false\n\t\t\t|| !settings.insertItems && !(hasProps && props.insert === true)) {\n\t\t\tthis._setProject(project);\n\t\t} else {\n\t\t\t(hasProps && props.parent || project)\n\t\t\t\t\t._insertItem(undefined, this, true);\n\t\t}\n\t\tif (hasProps && props !== Item.NO_INSERT) {\n\t\t\tthis.set(props, {\n\t\t\t\tinternal: true, insert: true, project: true, parent: true\n\t\t\t});\n\t\t}\n\t\treturn hasProps;\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar props = {},\n\t\t\tthat = this;\n\n\t\tfunction serialize(fields) {\n\t\t\tfor (var key in fields) {\n\t\t\t\tvar value = that[key];\n\t\t\t\tif (!Base.equals(value, key === 'leading'\n\t\t\t\t\t\t? fields.fontSize * 1.2 : fields[key])) {\n\t\t\t\t\tprops[key] = Base.serialize(value, options,\n\t\t\t\t\t\t\tkey !== 'data', dictionary);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tserialize(this._serializeFields);\n\t\tif (!(this instanceof Group))\n\t\t\tserialize(this._style._defaults);\n\t\treturn [ this._class, props ];\n\t},\n\n\t_changed: function(flags) {\n\t\tvar symbol = this._symbol,\n\t\t\tcacheParent = this._parent || symbol,\n\t\t\tproject = this._project;\n\t\tif (flags & 8) {\n\t\t\tthis._bounds = this._position = this._decomposed = undefined;\n\t\t}\n\t\tif (flags & 16) {\n\t\t\tthis._globalMatrix = undefined;\n\t\t}\n\t\tif (cacheParent\n\t\t\t\t&& (flags & 72)) {\n\t\t\tItem._clearBoundsCache(cacheParent);\n\t\t}\n\t\tif (flags & 2) {\n\t\t\tItem._clearBoundsCache(this);\n\t\t}\n\t\tif (project)\n\t\t\tproject._changed(flags, this);\n\t\tif (symbol)\n\t\t\tsymbol._changed(flags);\n\t},\n\n\tgetId: function() {\n\t\treturn this._id;\n\t},\n\n\tgetName: function() {\n\t\treturn this._name;\n\t},\n\n\tsetName: function(name) {\n\n\t\tif (this._name)\n\t\t\tthis._removeNamed();\n\t\tif (name === (+name) + '')\n\t\t\tthrow new Error(\n\t\t\t\t\t'Names consisting only of numbers are not supported.');\n\t\tvar owner = this._getOwner();\n\t\tif (name && owner) {\n\t\t\tvar children = owner._children,\n\t\t\t\tnamedChildren = owner._namedChildren;\n\t\t\t(namedChildren[name] = namedChildren[name] || []).push(this);\n\t\t\tif (!(name in children))\n\t\t\t\tchildren[name] = this;\n\t\t}\n\t\tthis._name = name || undefined;\n\t\tthis._changed(256);\n\t},\n\n\tgetStyle: function() {\n\t\treturn this._style;\n\t},\n\n\tsetStyle: function(style) {\n\t\tthis.getStyle().set(style);\n\t}\n}, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'],\n\tfunction(name) {\n\t\tvar part = Base.capitalize(name),\n\t\t\tkey = '_' + name,\n\t\t\tflags = {\n\t\t\t\tlocked: 256,\n\t\t\t\tvisible: 265\n\t\t\t};\n\t\tthis['get' + part] = function() {\n\t\t\treturn this[key];\n\t\t};\n\t\tthis['set' + part] = function(value) {\n\t\t\tif (value != this[key]) {\n\t\t\t\tthis[key] = value;\n\t\t\t\tthis._changed(flags[name] || 257);\n\t\t\t}\n\t\t};\n\t},\n{}), {\n\tbeans: true,\n\n\tgetSelection: function() {\n\t\treturn this._selection;\n\t},\n\n\tsetSelection: function(selection) {\n\t\tif (selection !== this._selection) {\n\t\t\tthis._selection = selection;\n\t\t\tvar project = this._project;\n\t\t\tif (project) {\n\t\t\t\tproject._updateSelection(this);\n\t\t\t\tthis._changed(257);\n\t\t\t}\n\t\t}\n\t},\n\n\t_changeSelection: function(flag, selected) {\n\t\tvar selection = this._selection;\n\t\tthis.setSelection(selected ? selection | flag : selection & ~flag);\n\t},\n\n\tisSelected: function() {\n\t\tif (this._selectChildren) {\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tif (children[i].isSelected())\n\t\t\t\t\treturn true;\n\t\t}\n\t\treturn !!(this._selection & 1);\n\t},\n\n\tsetSelected: function(selected) {\n\t\tif (this._selectChildren) {\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tchildren[i].setSelected(selected);\n\t\t}\n\t\tthis._changeSelection(1, selected);\n\t},\n\n\tisFullySelected: function() {\n\t\tvar children = this._children,\n\t\t\tselected = !!(this._selection & 1);\n\t\tif (children && selected) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tif (!children[i].isFullySelected())\n\t\t\t\t\treturn false;\n\t\t\treturn true;\n\t\t}\n\t\treturn selected;\n\t},\n\n\tsetFullySelected: function(selected) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\tchildren[i].setFullySelected(selected);\n\t\t}\n\t\tthis._changeSelection(1, selected);\n\t},\n\n\tisClipMask: function() {\n\t\treturn this._clipMask;\n\t},\n\n\tsetClipMask: function(clipMask) {\n\t\tif (this._clipMask != (clipMask = !!clipMask)) {\n\t\t\tthis._clipMask = clipMask;\n\t\t\tif (clipMask) {\n\t\t\t\tthis.setFillColor(null);\n\t\t\t\tthis.setStrokeColor(null);\n\t\t\t}\n\t\t\tthis._changed(257);\n\t\t\tif (this._parent)\n\t\t\t\tthis._parent._changed(2048);\n\t\t}\n\t},\n\n\tgetData: function() {\n\t\tif (!this._data)\n\t\t\tthis._data = {};\n\t\treturn this._data;\n\t},\n\n\tsetData: function(data) {\n\t\tthis._data = data;\n\t},\n\n\tgetPosition: function(_dontLink) {\n\t\tvar ctor = _dontLink ? Point : LinkedPoint;\n\t\tvar position = this._position ||\n\t\t\t(this._position = this._getPositionFromBounds());\n\t\treturn new ctor(position.x, position.y, this, 'setPosition');\n\t},\n\n\tsetPosition: function() {\n\t\tthis.translate(Point.read(arguments).subtract(this.getPosition(true)));\n\t},\n\n\t_getPositionFromBounds: function(bounds) {\n\t\treturn this._pivot\n\t\t\t\t? this._matrix._transformPoint(this._pivot)\n\t\t\t\t: (bounds || this.getBounds()).getCenter(true);\n\t},\n\n\tgetPivot: function() {\n\t\tvar pivot = this._pivot;\n\t\treturn pivot\n\t\t\t\t? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot')\n\t\t\t\t: null;\n\t},\n\n\tsetPivot: function() {\n\t\tthis._pivot = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tthis._position = undefined;\n\t}\n}, Base.each({\n\t\tgetStrokeBounds: { stroke: true },\n\t\tgetHandleBounds: { handle: true },\n\t\tgetInternalBounds: { internal: true }\n\t},\n\tfunction(options, key) {\n\t\tthis[key] = function(matrix) {\n\t\t\treturn this.getBounds(matrix, options);\n\t\t};\n\t},\n{\n\tbeans: true,\n\n\tgetBounds: function(matrix, options) {\n\t\tvar hasMatrix = options || matrix instanceof Matrix,\n\t\t\topts = Base.set({}, hasMatrix ? options : matrix,\n\t\t\t\t\tthis._boundsOptions);\n\t\tif (!opts.stroke || this.getStrokeScaling())\n\t\t\topts.cacheItem = this;\n\t\tvar rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n\t\treturn !arguments.length\n\t\t\t\t? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height,\n\t\t\t\t\tthis, 'setBounds')\n\t\t\t\t: rect;\n\t},\n\n\tsetBounds: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tbounds = this.getBounds(),\n\t\t\t_matrix = this._matrix,\n\t\t\tmatrix = new Matrix(),\n\t\t\tcenter = rect.getCenter();\n\t\tmatrix.translate(center);\n\t\tif (rect.width != bounds.width || rect.height != bounds.height) {\n\t\t\tif (!_matrix.isInvertible()) {\n\t\t\t\t_matrix.set(_matrix._backup\n\t\t\t\t\t\t|| new Matrix().translate(_matrix.getTranslation()));\n\t\t\t\tbounds = this.getBounds();\n\t\t\t}\n\t\t\tmatrix.scale(\n\t\t\t\t\tbounds.width !== 0 ? rect.width / bounds.width : 0,\n\t\t\t\t\tbounds.height !== 0 ? rect.height / bounds.height : 0);\n\t\t}\n\t\tcenter = bounds.getCenter();\n\t\tmatrix.translate(-center.x, -center.y);\n\t\tthis.transform(matrix);\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar children = this._children;\n\t\tif (!children || !children.length)\n\t\t\treturn new Rectangle();\n\t\tItem._updateBoundsCache(this, options.cacheItem);\n\t\treturn Item._getBounds(children, matrix, options);\n\t},\n\n\t_getBoundsCacheKey: function(options, internal) {\n\t\treturn [\n\t\t\toptions.stroke ? 1 : 0,\n\t\t\toptions.handle ? 1 : 0,\n\t\t\tinternal ? 1 : 0\n\t\t].join('');\n\t},\n\n\t_getCachedBounds: function(matrix, options, noInternal) {\n\t\tmatrix = matrix && matrix._orNullIfIdentity();\n\t\tvar internal = options.internal && !noInternal,\n\t\t\tcacheItem = options.cacheItem,\n\t\t\t_matrix = internal ? null : this._matrix._orNullIfIdentity(),\n\t\t\tcacheKey = cacheItem && (!matrix || matrix.equals(_matrix))\n\t\t\t\t&& this._getBoundsCacheKey(options, internal),\n\t\t\tbounds = this._bounds;\n\t\tItem._updateBoundsCache(this._parent || this._symbol, cacheItem);\n\t\tif (cacheKey && bounds && cacheKey in bounds) {\n\t\t\tvar cached = bounds[cacheKey];\n\t\t\treturn {\n\t\t\t\trect: cached.rect.clone(),\n\t\t\t\tnonscaling: cached.nonscaling\n\t\t\t};\n\t\t}\n\t\tvar res = this._getBounds(matrix || _matrix, options),\n\t\t\trect = res.rect || res,\n\t\t\tstyle = this._style,\n\t\t\tnonscaling = res.nonscaling || style.hasStroke()\n\t\t\t\t&& !style.getStrokeScaling();\n\t\tif (cacheKey) {\n\t\t\tif (!bounds) {\n\t\t\t\tthis._bounds = bounds = {};\n\t\t\t}\n\t\t\tvar cached = bounds[cacheKey] = {\n\t\t\t\trect: rect.clone(),\n\t\t\t\tnonscaling: nonscaling,\n\t\t\t\tinternal: internal\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\trect: rect,\n\t\t\tnonscaling: nonscaling\n\t\t};\n\t},\n\n\t_getStrokeMatrix: function(matrix, options) {\n\t\tvar parent = this.getStrokeScaling() ? null\n\t\t\t\t: options && options.internal ? this\n\t\t\t\t\t: this._parent || this._symbol && this._symbol._item,\n\t\t\tmx = parent ? parent.getViewMatrix().invert() : matrix;\n\t\treturn mx && mx._shiftless();\n\t},\n\n\tstatics: {\n\t\t_updateBoundsCache: function(parent, item) {\n\t\t\tif (parent && item) {\n\t\t\t\tvar id = item._id,\n\t\t\t\t\tref = parent._boundsCache = parent._boundsCache || {\n\t\t\t\t\t\tids: {},\n\t\t\t\t\t\tlist: []\n\t\t\t\t\t};\n\t\t\t\tif (!ref.ids[id]) {\n\t\t\t\t\tref.list.push(item);\n\t\t\t\t\tref.ids[id] = item;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_clearBoundsCache: function(item) {\n\t\t\tvar cache = item._boundsCache;\n\t\t\tif (cache) {\n\t\t\t\titem._bounds = item._position = item._boundsCache = undefined;\n\t\t\t\tfor (var i = 0, list = cache.list, l = list.length; i < l; i++){\n\t\t\t\t\tvar other = list[i];\n\t\t\t\t\tif (other !== item) {\n\t\t\t\t\t\tother._bounds = other._position = undefined;\n\t\t\t\t\t\tif (other._boundsCache)\n\t\t\t\t\t\t\tItem._clearBoundsCache(other);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_getBounds: function(items, matrix, options) {\n\t\t\tvar x1 = Infinity,\n\t\t\t\tx2 = -x1,\n\t\t\t\ty1 = x1,\n\t\t\t\ty2 = x2,\n\t\t\t\tnonscaling = false;\n\t\t\toptions = options || {};\n\t\t\tfor (var i = 0, l = items.length; i < l; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tif (item._visible && !item.isEmpty(true)) {\n\t\t\t\t\tvar bounds = item._getCachedBounds(\n\t\t\t\t\t\tmatrix && matrix.appended(item._matrix), options, true),\n\t\t\t\t\t\trect = bounds.rect;\n\t\t\t\t\tx1 = Math.min(rect.x, x1);\n\t\t\t\t\ty1 = Math.min(rect.y, y1);\n\t\t\t\t\tx2 = Math.max(rect.x + rect.width, x2);\n\t\t\t\t\ty2 = Math.max(rect.y + rect.height, y2);\n\t\t\t\t\tif (bounds.nonscaling)\n\t\t\t\t\t\tnonscaling = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\trect: isFinite(x1)\n\t\t\t\t\t? new Rectangle(x1, y1, x2 - x1, y2 - y1)\n\t\t\t\t\t: new Rectangle(),\n\t\t\t\tnonscaling: nonscaling\n\t\t\t};\n\t\t}\n\t}\n\n}), {\n\tbeans: true,\n\n\t_decompose: function() {\n\t\treturn this._applyMatrix\n\t\t\t? null\n\t\t\t: this._decomposed || (this._decomposed = this._matrix.decompose());\n\t},\n\n\tgetRotation: function() {\n\t\tvar decomposed = this._decompose();\n\t\treturn decomposed ? decomposed.rotation : 0;\n\t},\n\n\tsetRotation: function(rotation) {\n\t\tvar current = this.getRotation();\n\t\tif (current != null && rotation != null) {\n\t\t\tvar decomposed = this._decomposed;\n\t\t\tthis.rotate(rotation - current);\n\t\t\tif (decomposed) {\n\t\t\t\tdecomposed.rotation = rotation;\n\t\t\t\tthis._decomposed = decomposed;\n\t\t\t}\n\t\t}\n\t},\n\n\tgetScaling: function() {\n\t\tvar decomposed = this._decompose(),\n\t\t\ts = decomposed && decomposed.scaling;\n\t\treturn new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n\t},\n\n\tsetScaling: function() {\n\t\tvar current = this.getScaling(),\n\t\t\tscaling = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tif (current && scaling && !current.equals(scaling)) {\n\t\t\tvar rotation = this.getRotation(),\n\t\t\t\tdecomposed = this._decomposed,\n\t\t\t\tmatrix = new Matrix(),\n\t\t\t\tisZero = Numerical.isZero;\n\t\t\tif (isZero(current.x) || isZero(current.y)) {\n\t\t\t\tmatrix.translate(decomposed.translation);\n\t\t\t\tif (rotation) {\n\t\t\t\t\tmatrix.rotate(rotation);\n\t\t\t\t}\n\t\t\t\tmatrix.scale(scaling.x, scaling.y);\n\t\t\t\tthis._matrix.set(matrix);\n\t\t\t} else {\n\t\t\t\tvar center = this.getPosition(true);\n\t\t\t\tmatrix.translate(center);\n\t\t\t\tif (rotation)\n\t\t\t\t\tmatrix.rotate(rotation);\n\t\t\t\tmatrix.scale(scaling.x / current.x, scaling.y / current.y);\n\t\t\t\tif (rotation)\n\t\t\t\t\tmatrix.rotate(-rotation);\n\t\t\t\tmatrix.translate(center.negate());\n\t\t\t\tthis.transform(matrix);\n\t\t\t}\n\t\t\tif (decomposed) {\n\t\t\t\tdecomposed.scaling = scaling;\n\t\t\t\tthis._decomposed = decomposed;\n\t\t\t}\n\t\t}\n\t},\n\n\tgetMatrix: function() {\n\t\treturn this._matrix;\n\t},\n\n\tsetMatrix: function() {\n\t\tvar matrix = this._matrix;\n\t\tmatrix.set.apply(matrix, arguments);\n\t},\n\n\tgetGlobalMatrix: function(_dontClone) {\n\t\tvar matrix = this._globalMatrix;\n\t\tif (matrix) {\n\t\t\tvar parent = this._parent;\n\t\t\tvar parents = [];\n\t\t\twhile (parent) {\n\t\t\t\tif (!parent._globalMatrix) {\n\t\t\t\t\tmatrix = null;\n\t\t\t\t\tfor (var i = 0, l = parents.length; i < l; i++) {\n\t\t\t\t\t\tparents[i]._globalMatrix = null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparents.push(parent);\n\t\t\t\tparent = parent._parent;\n\t\t\t}\n\t\t}\n\t\tif (!matrix) {\n\t\t\tmatrix = this._globalMatrix = this._matrix.clone();\n\t\t\tvar parent = this._parent;\n\t\t\tif (parent)\n\t\t\t\tmatrix.prepend(parent.getGlobalMatrix(true));\n\t\t}\n\t\treturn _dontClone ? matrix : matrix.clone();\n\t},\n\n\tgetViewMatrix: function() {\n\t\treturn this.getGlobalMatrix().prepend(this.getView()._matrix);\n\t},\n\n\tgetApplyMatrix: function() {\n\t\treturn this._applyMatrix;\n\t},\n\n\tsetApplyMatrix: function(apply) {\n\t\tif (this._applyMatrix = this._canApplyMatrix && !!apply)\n\t\t\tthis.transform(null, true);\n\t},\n\n\tgetTransformContent: '#getApplyMatrix',\n\tsetTransformContent: '#setApplyMatrix',\n}, {\n\tgetProject: function() {\n\t\treturn this._project;\n\t},\n\n\t_setProject: function(project, installEvents) {\n\t\tif (this._project !== project) {\n\t\t\tif (this._project)\n\t\t\t\tthis._installEvents(false);\n\t\t\tthis._project = project;\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children && children.length; i < l; i++)\n\t\t\t\tchildren[i]._setProject(project);\n\t\t\tinstallEvents = true;\n\t\t}\n\t\tif (installEvents)\n\t\t\tthis._installEvents(true);\n\t},\n\n\tgetView: function() {\n\t\treturn this._project._view;\n\t},\n\n\t_installEvents: function _installEvents(install) {\n\t\t_installEvents.base.call(this, install);\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children && children.length; i < l; i++)\n\t\t\tchildren[i]._installEvents(install);\n\t},\n\n\tgetLayer: function() {\n\t\tvar parent = this;\n\t\twhile (parent = parent._parent) {\n\t\t\tif (parent instanceof Layer)\n\t\t\t\treturn parent;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetParent: function() {\n\t\treturn this._parent;\n\t},\n\n\tsetParent: function(item) {\n\t\treturn item.addChild(this);\n\t},\n\n\t_getOwner: '#getParent',\n\n\tgetChildren: function() {\n\t\treturn this._children;\n\t},\n\n\tsetChildren: function(items) {\n\t\tthis.removeChildren();\n\t\tthis.addChildren(items);\n\t},\n\n\tgetFirstChild: function() {\n\t\treturn this._children && this._children[0] || null;\n\t},\n\n\tgetLastChild: function() {\n\t\treturn this._children && this._children[this._children.length - 1]\n\t\t\t\t|| null;\n\t},\n\n\tgetNextSibling: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner && owner._children[this._index + 1] || null;\n\t},\n\n\tgetPreviousSibling: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner && owner._children[this._index - 1] || null;\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index;\n\t},\n\n\tequals: function(item) {\n\t\treturn item === this || item && this._class === item._class\n\t\t\t\t&& this._style.equals(item._style)\n\t\t\t\t&& this._matrix.equals(item._matrix)\n\t\t\t\t&& this._locked === item._locked\n\t\t\t\t&& this._visible === item._visible\n\t\t\t\t&& this._blendMode === item._blendMode\n\t\t\t\t&& this._opacity === item._opacity\n\t\t\t\t&& this._clipMask === item._clipMask\n\t\t\t\t&& this._guide === item._guide\n\t\t\t\t&& this._equals(item)\n\t\t\t\t|| false;\n\t},\n\n\t_equals: function(item) {\n\t\treturn Base.equals(this._children, item._children);\n\t},\n\n\tclone: function(options) {\n\t\tvar copy = new this.constructor(Item.NO_INSERT),\n\t\t\tchildren = this._children,\n\t\t\tinsert = Base.pick(options ? options.insert : undefined,\n\t\t\t\t\toptions === undefined || options === true),\n\t\t\tdeep = Base.pick(options ? options.deep : undefined, true);\n\t\tif (children)\n\t\t\tcopy.copyAttributes(this);\n\t\tif (!children || deep)\n\t\t\tcopy.copyContent(this);\n\t\tif (!children)\n\t\t\tcopy.copyAttributes(this);\n\t\tif (insert)\n\t\t\tcopy.insertAbove(this);\n\t\tvar name = this._name,\n\t\t\tparent = this._parent;\n\t\tif (name && parent) {\n\t\t\tvar children = parent._children,\n\t\t\t\torig = name,\n\t\t\t\ti = 1;\n\t\t\twhile (children[name])\n\t\t\t\tname = orig + ' ' + (i++);\n\t\t\tif (name !== orig)\n\t\t\t\tcopy.setName(name);\n\t\t}\n\t\treturn copy;\n\t},\n\n\tcopyContent: function(source) {\n\t\tvar children = source._children;\n\t\tfor (var i = 0, l = children && children.length; i < l; i++) {\n\t\t\tthis.addChild(children[i].clone(false), true);\n\t\t}\n\t},\n\n\tcopyAttributes: function(source, excludeMatrix) {\n\t\tthis.setStyle(source._style);\n\t\tvar keys = ['_locked', '_visible', '_blendMode', '_opacity',\n\t\t\t\t'_clipMask', '_guide'];\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i];\n\t\t\tif (source.hasOwnProperty(key))\n\t\t\t\tthis[key] = source[key];\n\t\t}\n\t\tif (!excludeMatrix)\n\t\t\tthis._matrix.set(source._matrix, true);\n\t\tthis.setApplyMatrix(source._applyMatrix);\n\t\tthis.setPivot(source._pivot);\n\t\tthis.setSelection(source._selection);\n\t\tvar data = source._data,\n\t\t\tname = source._name;\n\t\tthis._data = data ? Base.clone(data) : null;\n\t\tif (name)\n\t\t\tthis.setName(name);\n\t},\n\n\trasterize: function(arg0, arg1) {\n\t\tvar resolution,\n\t\t\tinsert,\n\t\t\traster;\n\t\tif (Base.isPlainObject(arg0)) {\n\t\t\tresolution = arg0.resolution;\n\t\t\tinsert = arg0.insert;\n\t\t\traster = arg0.raster;\n\t\t} else {\n\t\t\tresolution = arg0;\n\t\t\tinsert = arg1;\n\t\t}\n\t\tif (raster) {\n\t\t\traster.matrix.reset(true);\n\t\t} else {\n\t\t\traster = new Raster(Item.NO_INSERT);\n\t\t}\n\t\tvar bounds = this.getStrokeBounds(),\n\t\t\tscale = (resolution || this.getView().getResolution()) / 72,\n\t\t\ttopLeft = bounds.getTopLeft().floor(),\n\t\t\tbottomRight = bounds.getBottomRight().ceil(),\n\t\t\tboundsSize = new Size(bottomRight.subtract(topLeft)),\n\t\t\trasterSize = boundsSize.multiply(scale);\n\t\traster.setSize(rasterSize, true);\n\n\t\tif (!rasterSize.isZero()) {\n\t\t\tvar ctx = raster.getContext(true),\n\t\t\t\tmatrix = new Matrix().scale(scale).translate(topLeft.negate());\n\t\t\tctx.save();\n\t\t\tmatrix.applyToContext(ctx);\n\t\t\tthis.draw(ctx, new Base({ matrices: [matrix] }));\n\t\t\tctx.restore();\n\t\t}\n\t\traster.transform(\n\t\t\tnew Matrix()\n\t\t\t\t.translate(topLeft.add(boundsSize.divide(2)))\n\t\t\t\t.scale(1 / scale)\n\t\t);\n\t\tif (insert === undefined || insert) {\n\t\t\traster.insertAbove(this);\n\t\t}\n\t\treturn raster;\n\t},\n\n\tcontains: function() {\n\t\tvar matrix = this._matrix;\n\t\treturn (\n\t\t\tmatrix.isInvertible() &&\n\t\t\t!!this._contains(matrix._inverseTransform(Point.read(arguments)))\n\t\t);\n\t},\n\n\t_contains: function(point) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\t\tif (children[i].contains(point))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn point.isInside(this.getInternalBounds());\n\t},\n\n\tisInside: function() {\n\t\treturn Rectangle.read(arguments).contains(this.getBounds());\n\t},\n\n\t_asPathItem: function() {\n\t\treturn new Path.Rectangle({\n\t\t\trectangle: this.getInternalBounds(),\n\t\t\tmatrix: this._matrix,\n\t\t\tinsert: false,\n\t\t});\n\t},\n\n\tintersects: function(item, _matrix) {\n\t\tif (!(item instanceof Item))\n\t\t\treturn false;\n\t\treturn this._asPathItem().getIntersections(item._asPathItem(), null,\n\t\t\t\t_matrix, true).length > 0;\n\t}\n},\nnew function() {\n\tfunction hitTest() {\n\t\tvar args = arguments;\n\t\treturn this._hitTest(\n\t\t\t\tPoint.read(args),\n\t\t\t\tHitResult.getOptions(args));\n\t}\n\n\tfunction hitTestAll() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\toptions = HitResult.getOptions(args),\n\t\t\tall = [];\n\t\tthis._hitTest(point, new Base({ all: all }, options));\n\t\treturn all;\n\t}\n\n\tfunction hitTestChildren(point, options, viewMatrix, _exclude) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\t\tvar child = children[i];\n\t\t\t\tvar res = child !== _exclude && child._hitTest(point, options,\n\t\t\t\t\t\tviewMatrix);\n\t\t\t\tif (res && !options.all)\n\t\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tProject.inject({\n\t\thitTest: hitTest,\n\t\thitTestAll: hitTestAll,\n\t\t_hitTest: hitTestChildren\n\t});\n\n\treturn {\n\t\thitTest: hitTest,\n\t\thitTestAll: hitTestAll,\n\t\t_hitTestChildren: hitTestChildren,\n\t};\n}, {\n\n\t_hitTest: function(point, options, parentViewMatrix) {\n\t\tif (this._locked || !this._visible || this._guide && !options.guides\n\t\t\t\t|| this.isEmpty()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar matrix = this._matrix,\n\t\t\tviewMatrix = parentViewMatrix\n\t\t\t\t\t? parentViewMatrix.appended(matrix)\n\t\t\t\t\t: this.getGlobalMatrix().prepend(this.getView()._matrix),\n\t\t\ttolerance = Math.max(options.tolerance, 1e-12),\n\t\t\ttolerancePadding = options._tolerancePadding = new Size(\n\t\t\t\t\tPath._getStrokePadding(tolerance,\n\t\t\t\t\t\tmatrix._shiftless().invert()));\n\t\tpoint = matrix._inverseTransform(point);\n\t\tif (!point || !this._children &&\n\t\t\t!this.getBounds({ internal: true, stroke: true, handle: true })\n\t\t\t\t.expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar checkSelf = !(options.guides && !this._guide\n\t\t\t\t|| options.selected && !this.isSelected()\n\t\t\t\t|| options.type && options.type !== Base.hyphenate(this._class)\n\t\t\t\t|| options.class && !(this instanceof options.class)),\n\t\t\tmatch = options.match,\n\t\t\tthat = this,\n\t\t\tbounds,\n\t\t\tres;\n\n\t\tfunction filter(hit) {\n\t\t\tif (hit && match && !match(hit))\n\t\t\t\thit = null;\n\t\t\tif (hit && options.all)\n\t\t\t\toptions.all.push(hit);\n\t\t\treturn hit;\n\t\t}\n\n\t\tfunction checkPoint(type, part) {\n\t\t\tvar pt = part ? bounds['get' + part]() : that.getPosition();\n\t\t\tif (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n\t\t\t\treturn new HitResult(type, that, {\n\t\t\t\t\tname: part ? Base.hyphenate(part) : type,\n\t\t\t\t\tpoint: pt\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tvar checkPosition = options.position,\n\t\t\tcheckCenter = options.center,\n\t\t\tcheckBounds = options.bounds;\n\t\tif (checkSelf && this._parent\n\t\t\t\t&& (checkPosition || checkCenter || checkBounds)) {\n\t\t\tif (checkCenter || checkBounds) {\n\t\t\t\tbounds = this.getInternalBounds();\n\t\t\t}\n\t\t\tres = checkPosition && checkPoint('position') ||\n\t\t\t\t\tcheckCenter && checkPoint('center', 'Center');\n\t\t\tif (!res && checkBounds) {\n\t\t\t\tvar points = [\n\t\t\t\t\t'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight',\n\t\t\t\t\t'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'\n\t\t\t\t];\n\t\t\t\tfor (var i = 0; i < 8 && !res; i++) {\n\t\t\t\t\tres = checkPoint('bounds', points[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tres = filter(res);\n\t\t}\n\n\t\tif (!res) {\n\t\t\tres = this._hitTestChildren(point, options, viewMatrix)\n\t\t\t\t|| checkSelf\n\t\t\t\t\t&& filter(this._hitTestSelf(point, options, viewMatrix,\n\t\t\t\t\t\tthis.getStrokeScaling() ? null\n\t\t\t\t\t\t\t: viewMatrix._shiftless().invert()))\n\t\t\t\t|| null;\n\t\t}\n\t\tif (res && res.point) {\n\t\t\tres.point = matrix.transform(res.point);\n\t\t}\n\t\treturn res;\n\t},\n\n\t_hitTestSelf: function(point, options) {\n\t\tif (options.fill && this.hasFill() && this._contains(point))\n\t\t\treturn new HitResult('fill', this);\n\t},\n\n\tmatches: function(name, compare) {\n\t\tfunction matchObject(obj1, obj2) {\n\t\t\tfor (var i in obj1) {\n\t\t\t\tif (obj1.hasOwnProperty(i)) {\n\t\t\t\t\tvar val1 = obj1[i],\n\t\t\t\t\t\tval2 = obj2[i];\n\t\t\t\t\tif (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n\t\t\t\t\t\tif (!matchObject(val1, val2))\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (!Base.equals(val1, val2)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tvar type = typeof name;\n\t\tif (type === 'object') {\n\t\t\tfor (var key in name) {\n\t\t\t\tif (name.hasOwnProperty(key) && !this.matches(key, name[key]))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t} else if (type === 'function') {\n\t\t\treturn name(this);\n\t\t} else if (name === 'match') {\n\t\t\treturn compare(this);\n\t\t} else {\n\t\t\tvar value = /^(empty|editable)$/.test(name)\n\t\t\t\t\t? this['is' + Base.capitalize(name)]()\n\t\t\t\t\t: name === 'type'\n\t\t\t\t\t\t? Base.hyphenate(this._class)\n\t\t\t\t\t\t: this[name];\n\t\t\tif (name === 'class') {\n\t\t\t\tif (typeof compare === 'function')\n\t\t\t\t\treturn this instanceof compare;\n\t\t\t\tvalue = this._class;\n\t\t\t}\n\t\t\tif (typeof compare === 'function') {\n\t\t\t\treturn !!compare(value);\n\t\t\t} else if (compare) {\n\t\t\t\tif (compare.test) {\n\t\t\t\t\treturn compare.test(value);\n\t\t\t\t} else if (Base.isPlainObject(compare)) {\n\t\t\t\t\treturn matchObject(compare, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Base.equals(value, compare);\n\t\t}\n\t},\n\n\tgetItems: function(options) {\n\t\treturn Item._getItems(this, options, this._matrix);\n\t},\n\n\tgetItem: function(options) {\n\t\treturn Item._getItems(this, options, this._matrix, null, true)[0]\n\t\t\t\t|| null;\n\t},\n\n\tstatics: {\n\t\t_getItems: function _getItems(item, options, matrix, param, firstOnly) {\n\t\t\tif (!param) {\n\t\t\t\tvar obj = typeof options === 'object' && options,\n\t\t\t\t\toverlapping = obj && obj.overlapping,\n\t\t\t\t\tinside = obj && obj.inside,\n\t\t\t\t\tbounds = overlapping || inside,\n\t\t\t\t\trect = bounds && Rectangle.read([bounds]);\n\t\t\t\tparam = {\n\t\t\t\t\titems: [],\n\t\t\t\t\trecursive: obj && obj.recursive !== false,\n\t\t\t\t\tinside: !!inside,\n\t\t\t\t\toverlapping: !!overlapping,\n\t\t\t\t\trect: rect,\n\t\t\t\t\tpath: overlapping && new Path.Rectangle({\n\t\t\t\t\t\trectangle: rect,\n\t\t\t\t\t\tinsert: false\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t\tif (obj) {\n\t\t\t\t\toptions = Base.filter({}, options, {\n\t\t\t\t\t\trecursive: true, inside: true, overlapping: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar children = item._children,\n\t\t\t\titems = param.items,\n\t\t\t\trect = param.rect;\n\t\t\tmatrix = rect && (matrix || new Matrix());\n\t\t\tfor (var i = 0, l = children && children.length; i < l; i++) {\n\t\t\t\tvar child = children[i],\n\t\t\t\t\tchildMatrix = matrix && matrix.appended(child._matrix),\n\t\t\t\t\tadd = true;\n\t\t\t\tif (rect) {\n\t\t\t\t\tvar bounds = child.getBounds(childMatrix);\n\t\t\t\t\tif (!rect.intersects(bounds))\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tif (!(rect.contains(bounds)\n\t\t\t\t\t\t\t|| param.overlapping && (bounds.contains(rect)\n\t\t\t\t\t\t\t\t|| param.path.intersects(child, childMatrix))))\n\t\t\t\t\t\tadd = false;\n\t\t\t\t}\n\t\t\t\tif (add && child.matches(options)) {\n\t\t\t\t\titems.push(child);\n\t\t\t\t\tif (firstOnly)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (param.recursive !== false) {\n\t\t\t\t\t_getItems(child, options, childMatrix, param, firstOnly);\n\t\t\t\t}\n\t\t\t\tif (firstOnly && items.length > 0)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn items;\n\t\t}\n\t}\n}, {\n\n\timportJSON: function(json) {\n\t\tvar res = Base.importJSON(json, this);\n\t\treturn res !== this ? this.addChild(res) : res;\n\t},\n\n\taddChild: function(item) {\n\t\treturn this.insertChild(undefined, item);\n\t},\n\n\tinsertChild: function(index, item) {\n\t\tvar res = item ? this.insertChildren(index, [item]) : null;\n\t\treturn res && res[0];\n\t},\n\n\taddChildren: function(items) {\n\t\treturn this.insertChildren(this._children.length, items);\n\t},\n\n\tinsertChildren: function(index, items) {\n\t\tvar children = this._children;\n\t\tif (children && items && items.length > 0) {\n\t\t\titems = Base.slice(items);\n\t\t\tvar inserted = {};\n\t\t\tfor (var i = items.length - 1; i >= 0; i--) {\n\t\t\t\tvar item = items[i],\n\t\t\t\t\tid = item && item._id;\n\t\t\t\tif (!item || inserted[id]) {\n\t\t\t\t\titems.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\titem._remove(false, true);\n\t\t\t\t\tinserted[id] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tBase.splice(children, items, index, 0);\n\t\t\tvar project = this._project,\n\t\t\t\tnotifySelf = project._changes;\n\t\t\tfor (var i = 0, l = items.length; i < l; i++) {\n\t\t\t\tvar item = items[i],\n\t\t\t\t\tname = item._name;\n\t\t\t\titem._parent = this;\n\t\t\t\titem._setProject(project, true);\n\t\t\t\tif (name)\n\t\t\t\t\titem.setName(name);\n\t\t\t\tif (notifySelf)\n\t\t\t\t\titem._changed(5);\n\t\t\t}\n\t\t\tthis._changed(11);\n\t\t} else {\n\t\t\titems = null;\n\t\t}\n\t\treturn items;\n\t},\n\n\t_insertItem: '#insertChild',\n\n\t_insertAt: function(item, offset) {\n\t\tvar owner = item && item._getOwner(),\n\t\t\tres = item !== this && owner ? this : null;\n\t\tif (res) {\n\t\t\tres._remove(false, true);\n\t\t\towner._insertItem(item._index + offset, res);\n\t\t}\n\t\treturn res;\n\t},\n\n\tinsertAbove: function(item) {\n\t\treturn this._insertAt(item, 1);\n\t},\n\n\tinsertBelow: function(item) {\n\t\treturn this._insertAt(item, 0);\n\t},\n\n\tsendToBack: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner ? owner._insertItem(0, this) : null;\n\t},\n\n\tbringToFront: function() {\n\t\tvar owner = this._getOwner();\n\t\treturn owner ? owner._insertItem(undefined, this) : null;\n\t},\n\n\tappendTop: '#addChild',\n\n\tappendBottom: function(item) {\n\t\treturn this.insertChild(0, item);\n\t},\n\n\tmoveAbove: '#insertAbove',\n\n\tmoveBelow: '#insertBelow',\n\n\taddTo: function(owner) {\n\t\treturn owner._insertItem(undefined, this);\n\t},\n\n\tcopyTo: function(owner) {\n\t\treturn this.clone(false).addTo(owner);\n\t},\n\n\treduce: function(options) {\n\t\tvar children = this._children;\n\t\tif (children && children.length === 1) {\n\t\t\tvar child = children[0].reduce(options);\n\t\t\tif (this._parent) {\n\t\t\t\tchild.insertAbove(this);\n\t\t\t\tthis.remove();\n\t\t\t} else {\n\t\t\t\tchild.remove();\n\t\t\t}\n\t\t\treturn child;\n\t\t}\n\t\treturn this;\n\t},\n\n\t_removeNamed: function() {\n\t\tvar owner = this._getOwner();\n\t\tif (owner) {\n\t\t\tvar children = owner._children,\n\t\t\t\tnamedChildren = owner._namedChildren,\n\t\t\t\tname = this._name,\n\t\t\t\tnamedArray = namedChildren[name],\n\t\t\t\tindex = namedArray ? namedArray.indexOf(this) : -1;\n\t\t\tif (index !== -1) {\n\t\t\t\tif (children[name] == this)\n\t\t\t\t\tdelete children[name];\n\t\t\t\tnamedArray.splice(index, 1);\n\t\t\t\tif (namedArray.length) {\n\t\t\t\t\tchildren[name] = namedArray[0];\n\t\t\t\t} else {\n\t\t\t\t\tdelete namedChildren[name];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_remove: function(notifySelf, notifyParent) {\n\t\tvar owner = this._getOwner(),\n\t\t\tproject = this._project,\n\t\t\tindex = this._index;\n\t\tif (this._style)\n\t\t\tthis._style._dispose();\n\t\tif (owner) {\n\t\t\tif (this._name)\n\t\t\t\tthis._removeNamed();\n\t\t\tif (index != null) {\n\t\t\t\tif (project._activeLayer === this)\n\t\t\t\t\tproject._activeLayer = this.getNextSibling()\n\t\t\t\t\t\t\t|| this.getPreviousSibling();\n\t\t\t\tBase.splice(owner._children, null, index, 1);\n\t\t\t}\n\t\t\tthis._installEvents(false);\n\t\t\tif (notifySelf && project._changes)\n\t\t\t\tthis._changed(5);\n\t\t\tif (notifyParent)\n\t\t\t\towner._changed(11, this);\n\t\t\tthis._parent = null;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tremove: function() {\n\t\treturn this._remove(true, true);\n\t},\n\n\treplaceWith: function(item) {\n\t\tvar ok = item && item.insertBelow(this);\n\t\tif (ok)\n\t\t\tthis.remove();\n\t\treturn ok;\n\t},\n\n\tremoveChildren: function(start, end) {\n\t\tif (!this._children)\n\t\t\treturn null;\n\t\tstart = start || 0;\n\t\tend = Base.pick(end, this._children.length);\n\t\tvar removed = Base.splice(this._children, null, start, end - start);\n\t\tfor (var i = removed.length - 1; i >= 0; i--) {\n\t\t\tremoved[i]._remove(true, false);\n\t\t}\n\t\tif (removed.length > 0)\n\t\t\tthis._changed(11);\n\t\treturn removed;\n\t},\n\n\tclear: '#removeChildren',\n\n\treverseChildren: function() {\n\t\tif (this._children) {\n\t\t\tthis._children.reverse();\n\t\t\tfor (var i = 0, l = this._children.length; i < l; i++)\n\t\t\t\tthis._children[i]._index = i;\n\t\t\tthis._changed(11);\n\t\t}\n\t},\n\n\tisEmpty: function(recursively) {\n\t\tvar children = this._children;\n\t\tvar numChildren = children ? children.length : 0;\n\t\tif (recursively) {\n\t\t\tfor (var i = 0; i < numChildren; i++) {\n\t\t\t\tif (!children[i].isEmpty(recursively)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn !numChildren;\n\t},\n\n\tisEditable: function() {\n\t\tvar item = this;\n\t\twhile (item) {\n\t\t\tif (!item._visible || item._locked)\n\t\t\t\treturn false;\n\t\t\titem = item._parent;\n\t\t}\n\t\treturn true;\n\t},\n\n\thasFill: function() {\n\t\treturn this.getStyle().hasFill();\n\t},\n\n\thasStroke: function() {\n\t\treturn this.getStyle().hasStroke();\n\t},\n\n\thasShadow: function() {\n\t\treturn this.getStyle().hasShadow();\n\t},\n\n\t_getOrder: function(item) {\n\t\tfunction getList(item) {\n\t\t\tvar list = [];\n\t\t\tdo {\n\t\t\t\tlist.unshift(item);\n\t\t\t} while (item = item._parent);\n\t\t\treturn list;\n\t\t}\n\t\tvar list1 = getList(this),\n\t\t\tlist2 = getList(item);\n\t\tfor (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n\t\t\tif (list1[i] != list2[i]) {\n\t\t\t\treturn list1[i]._index < list2[i]._index ? 1 : -1;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t},\n\n\thasChildren: function() {\n\t\treturn this._children && this._children.length > 0;\n\t},\n\n\tisInserted: function() {\n\t\treturn this._parent ? this._parent.isInserted() : false;\n\t},\n\n\tisAbove: function(item) {\n\t\treturn this._getOrder(item) === -1;\n\t},\n\n\tisBelow: function(item) {\n\t\treturn this._getOrder(item) === 1;\n\t},\n\n\tisParent: function(item) {\n\t\treturn this._parent === item;\n\t},\n\n\tisChild: function(item) {\n\t\treturn item && item._parent === this;\n\t},\n\n\tisDescendant: function(item) {\n\t\tvar parent = this;\n\t\twhile (parent = parent._parent) {\n\t\t\tif (parent === item)\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tisAncestor: function(item) {\n\t\treturn item ? item.isDescendant(this) : false;\n\t},\n\n\tisSibling: function(item) {\n\t\treturn this._parent === item._parent;\n\t},\n\n\tisGroupedWith: function(item) {\n\t\tvar parent = this._parent;\n\t\twhile (parent) {\n\t\t\tif (parent._parent\n\t\t\t\t&& /^(Group|Layer|CompoundPath)$/.test(parent._class)\n\t\t\t\t&& item.isDescendant(parent))\n\t\t\t\t\treturn true;\n\t\t\tparent = parent._parent;\n\t\t}\n\t\treturn false;\n\t},\n\n}, Base.each(['rotate', 'scale', 'shear', 'skew'], function(key) {\n\tvar rotate = key === 'rotate';\n\tthis[key] = function() {\n\t\tvar args = arguments,\n\t\t\tvalue = (rotate ? Base : Point).read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\treturn this.transform(new Matrix()[key](value,\n\t\t\t\tcenter || this.getPosition(true)));\n\t};\n}, {\n\ttranslate: function() {\n\t\tvar mx = new Matrix();\n\t\treturn this.transform(mx.translate.apply(mx, arguments));\n\t},\n\n\ttransform: function(matrix, _applyRecursively, _setApplyMatrix) {\n\t\tvar _matrix = this._matrix,\n\t\t\ttransformMatrix = matrix && !matrix.isIdentity(),\n\t\t\tapplyMatrix = (\n\t\t\t\t_setApplyMatrix && this._canApplyMatrix ||\n\t\t\t\tthis._applyMatrix && (\n\t\t\t\t\ttransformMatrix || !_matrix.isIdentity() ||\n\t\t\t\t\t_applyRecursively && this._children\n\t\t\t\t)\n\t\t\t);\n\t\tif (!transformMatrix && !applyMatrix)\n\t\t\treturn this;\n\t\tif (transformMatrix) {\n\t\t\tif (!matrix.isInvertible() && _matrix.isInvertible())\n\t\t\t\t_matrix._backup = _matrix.getValues();\n\t\t\t_matrix.prepend(matrix, true);\n\t\t\tvar style = this._style,\n\t\t\t\tfillColor = style.getFillColor(true),\n\t\t\t\tstrokeColor = style.getStrokeColor(true);\n\t\t\tif (fillColor)\n\t\t\t\tfillColor.transform(matrix);\n\t\t\tif (strokeColor)\n\t\t\t\tstrokeColor.transform(matrix);\n\t\t}\n\n\t\tif (applyMatrix && (applyMatrix = this._transformContent(\n\t\t\t\t_matrix, _applyRecursively, _setApplyMatrix))) {\n\t\t\tvar pivot = this._pivot;\n\t\t\tif (pivot)\n\t\t\t\t_matrix._transformPoint(pivot, pivot, true);\n\t\t\t_matrix.reset(true);\n\t\t\tif (_setApplyMatrix && this._canApplyMatrix)\n\t\t\t\tthis._applyMatrix = true;\n\t\t}\n\t\tvar bounds = this._bounds,\n\t\t\tposition = this._position;\n\t\tif (transformMatrix || applyMatrix) {\n\t\t\tthis._changed(25);\n\t\t}\n\t\tvar decomp = transformMatrix && bounds && matrix.decompose();\n\t\tif (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n\t\t\tfor (var key in bounds) {\n\t\t\t\tvar cache = bounds[key];\n\t\t\t\tif (cache.nonscaling) {\n\t\t\t\t\tdelete bounds[key];\n\t\t\t\t} else if (applyMatrix || !cache.internal) {\n\t\t\t\t\tvar rect = cache.rect;\n\t\t\t\t\tmatrix._transformBounds(rect, rect);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._bounds = bounds;\n\t\t\tvar cached = bounds[this._getBoundsCacheKey(\n\t\t\t\tthis._boundsOptions || {})];\n\t\t\tif (cached) {\n\t\t\t\tthis._position = this._getPositionFromBounds(cached.rect);\n\t\t\t}\n\t\t} else if (transformMatrix && position && this._pivot) {\n\t\t\tthis._position = matrix._transformPoint(position, position);\n\t\t}\n\t\treturn this;\n\t},\n\n\t_transformContent: function(matrix, applyRecursively, setApplyMatrix) {\n\t\tvar children = this._children;\n\t\tif (children) {\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tchildren[i].transform(matrix, applyRecursively, setApplyMatrix);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\n\tglobalToLocal: function() {\n\t\treturn this.getGlobalMatrix(true)._inverseTransform(\n\t\t\t\tPoint.read(arguments));\n\t},\n\n\tlocalToGlobal: function() {\n\t\treturn this.getGlobalMatrix(true)._transformPoint(\n\t\t\t\tPoint.read(arguments));\n\t},\n\n\tparentToLocal: function() {\n\t\treturn this._matrix._inverseTransform(Point.read(arguments));\n\t},\n\n\tlocalToParent: function() {\n\t\treturn this._matrix._transformPoint(Point.read(arguments));\n\t},\n\n\tfitBounds: function(rectangle, fill) {\n\t\trectangle = Rectangle.read(arguments);\n\t\tvar bounds = this.getBounds(),\n\t\t\titemRatio = bounds.height / bounds.width,\n\t\t\trectRatio = rectangle.height / rectangle.width,\n\t\t\tscale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio)\n\t\t\t\t\t? rectangle.width / bounds.width\n\t\t\t\t\t: rectangle.height / bounds.height,\n\t\t\tnewBounds = new Rectangle(new Point(),\n\t\t\t\t\tnew Size(bounds.width * scale, bounds.height * scale));\n\t\tnewBounds.setCenter(rectangle.getCenter());\n\t\tthis.setBounds(newBounds);\n\t}\n}), {\n\n\t_setStyles: function(ctx, param, viewMatrix) {\n\t\tvar style = this._style,\n\t\t\tmatrix = this._matrix;\n\t\tif (style.hasFill()) {\n\t\t\tctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n\t\t}\n\t\tif (style.hasStroke()) {\n\t\t\tctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n\t\t\tctx.lineWidth = style.getStrokeWidth();\n\t\t\tvar strokeJoin = style.getStrokeJoin(),\n\t\t\t\tstrokeCap = style.getStrokeCap(),\n\t\t\t\tmiterLimit = style.getMiterLimit();\n\t\t\tif (strokeJoin)\n\t\t\t\tctx.lineJoin = strokeJoin;\n\t\t\tif (strokeCap)\n\t\t\t\tctx.lineCap = strokeCap;\n\t\t\tif (miterLimit)\n\t\t\t\tctx.miterLimit = miterLimit;\n\t\t\tif (paper.support.nativeDash) {\n\t\t\t\tvar dashArray = style.getDashArray(),\n\t\t\t\t\tdashOffset = style.getDashOffset();\n\t\t\t\tif (dashArray && dashArray.length) {\n\t\t\t\t\tif ('setLineDash' in ctx) {\n\t\t\t\t\t\tctx.setLineDash(dashArray);\n\t\t\t\t\t\tctx.lineDashOffset = dashOffset;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.mozDash = dashArray;\n\t\t\t\t\t\tctx.mozDashOffset = dashOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (style.hasShadow()) {\n\t\t\tvar pixelRatio = param.pixelRatio || 1,\n\t\t\t\tmx = viewMatrix._shiftless().prepend(\n\t\t\t\t\tnew Matrix().scale(pixelRatio, pixelRatio)),\n\t\t\t\tblur = mx.transform(new Point(style.getShadowBlur(), 0)),\n\t\t\t\toffset = mx.transform(this.getShadowOffset());\n\t\t\tctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n\t\t\tctx.shadowBlur = blur.getLength();\n\t\t\tctx.shadowOffsetX = offset.x;\n\t\t\tctx.shadowOffsetY = offset.y;\n\t\t}\n\t},\n\n\tdraw: function(ctx, param, parentStrokeMatrix) {\n\t\tvar updateVersion = this._updateVersion = this._project._updateVersion;\n\t\tif (!this._visible || this._opacity === 0)\n\t\t\treturn;\n\t\tvar matrices = param.matrices,\n\t\t\tviewMatrix = param.viewMatrix,\n\t\t\tmatrix = this._matrix,\n\t\t\tglobalMatrix = matrices[matrices.length - 1].appended(matrix);\n\t\tif (!globalMatrix.isInvertible())\n\t\t\treturn;\n\n\t\tviewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix)\n\t\t\t\t: globalMatrix;\n\n\t\tmatrices.push(globalMatrix);\n\t\tif (param.updateMatrix) {\n\t\t\tthis._globalMatrix = globalMatrix;\n\t\t}\n\n\t\tvar blendMode = this._blendMode,\n\t\t\topacity = Numerical.clamp(this._opacity, 0, 1),\n\t\t\tnormalBlend = blendMode === 'normal',\n\t\t\tnativeBlend = BlendMode.nativeModes[blendMode],\n\t\t\tdirect = normalBlend && opacity === 1\n\t\t\t\t\t|| param.dontStart\n\t\t\t\t\t|| param.clip\n\t\t\t\t\t|| (nativeBlend || normalBlend && opacity < 1)\n\t\t\t\t\t\t&& this._canComposite(),\n\t\t\tpixelRatio = param.pixelRatio || 1,\n\t\t\tmainCtx, itemOffset, prevOffset;\n\t\tif (!direct) {\n\t\t\tvar bounds = this.getStrokeBounds(viewMatrix);\n\t\t\tif (!bounds.width || !bounds.height) {\n\t\t\t\tmatrices.pop();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tprevOffset = param.offset;\n\t\t\titemOffset = param.offset = bounds.getTopLeft().floor();\n\t\t\tmainCtx = ctx;\n\t\t\tctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1)\n\t\t\t\t\t.multiply(pixelRatio));\n\t\t\tif (pixelRatio !== 1)\n\t\t\t\tctx.scale(pixelRatio, pixelRatio);\n\t\t}\n\t\tctx.save();\n\t\tvar strokeMatrix = parentStrokeMatrix\n\t\t\t\t? parentStrokeMatrix.appended(matrix)\n\t\t\t\t: this._canScaleStroke && !this.getStrokeScaling(true)\n\t\t\t\t\t&& viewMatrix,\n\t\t\tclip = !direct && param.clipItem,\n\t\t\ttransform = !strokeMatrix || clip;\n\t\tif (direct) {\n\t\t\tctx.globalAlpha = opacity;\n\t\t\tif (nativeBlend)\n\t\t\t\tctx.globalCompositeOperation = blendMode;\n\t\t} else if (transform) {\n\t\t\tctx.translate(-itemOffset.x, -itemOffset.y);\n\t\t}\n\t\tif (transform) {\n\t\t\t(direct ? matrix : viewMatrix).applyToContext(ctx);\n\t\t}\n\t\tif (clip) {\n\t\t\tparam.clipItem.draw(ctx, param.extend({ clip: true }));\n\t\t}\n\t\tif (strokeMatrix) {\n\t\t\tctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\t\t\tvar offset = param.offset;\n\t\t\tif (offset)\n\t\t\t\tctx.translate(-offset.x, -offset.y);\n\t\t}\n\t\tthis._draw(ctx, param, viewMatrix, strokeMatrix);\n\t\tctx.restore();\n\t\tmatrices.pop();\n\t\tif (param.clip && !param.dontFinish) {\n\t\t\tctx.clip(this.getFillRule());\n\t\t}\n\t\tif (!direct) {\n\t\t\tBlendMode.process(blendMode, ctx, mainCtx, opacity,\n\t\t\t\t\titemOffset.subtract(prevOffset).multiply(pixelRatio));\n\t\t\tCanvasProvider.release(ctx);\n\t\t\tparam.offset = prevOffset;\n\t\t}\n\t},\n\n\t_isUpdated: function(updateVersion) {\n\t\tvar parent = this._parent;\n\t\tif (parent instanceof CompoundPath)\n\t\t\treturn parent._isUpdated(updateVersion);\n\t\tvar updated = this._updateVersion === updateVersion;\n\t\tif (!updated && parent && parent._visible\n\t\t\t\t&& parent._isUpdated(updateVersion)) {\n\t\t\tthis._updateVersion = updateVersion;\n\t\t\tupdated = true;\n\t\t}\n\t\treturn updated;\n\t},\n\n\t_drawSelection: function(ctx, matrix, size, selectionItems, updateVersion) {\n\t\tvar selection = this._selection,\n\t\t\titemSelected = selection & 1,\n\t\t\tboundsSelected = selection & 2\n\t\t\t\t\t|| itemSelected && this._selectBounds,\n\t\t\tpositionSelected = selection & 4;\n\t\tif (!this._drawSelected)\n\t\t\titemSelected = false;\n\t\tif ((itemSelected || boundsSelected || positionSelected)\n\t\t\t\t&& this._isUpdated(updateVersion)) {\n\t\t\tvar layer,\n\t\t\t\tcolor = this.getSelectedColor(true) || (layer = this.getLayer())\n\t\t\t\t\t&& layer.getSelectedColor(true),\n\t\t\t\tmx = matrix.appended(this.getGlobalMatrix(true)),\n\t\t\t\thalf = size / 2;\n\t\t\tctx.strokeStyle = ctx.fillStyle = color\n\t\t\t\t\t? color.toCanvasStyle(ctx) : '#009dec';\n\t\t\tif (itemSelected)\n\t\t\t\tthis._drawSelected(ctx, mx, selectionItems);\n\t\t\tif (positionSelected) {\n\t\t\t\tvar pos = this.getPosition(true),\n\t\t\t\t\tparent = this._parent,\n\t\t\t\t\tpoint = parent ? parent.localToGlobal(pos) : pos,\n\t\t\t\t\tx = point.x,\n\t\t\t\t\ty = point.y;\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(x, y, half, 0, Math.PI * 2, true);\n\t\t\t\tctx.stroke();\n\t\t\t\tvar deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n\t\t\t\t\tstart = half,\n\t\t\t\t\tend = size + 1;\n\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\tvar delta = deltas[i],\n\t\t\t\t\t\tdx = delta[0],\n\t\t\t\t\t\tdy = delta[1];\n\t\t\t\t\tctx.moveTo(x + dx * start, y + dy * start);\n\t\t\t\t\tctx.lineTo(x + dx * end, y + dy * end);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (boundsSelected) {\n\t\t\t\tvar coords = mx._transformCorners(this.getInternalBounds());\n\t\t\t\tctx.beginPath();\n\t\t\t\tfor (var i = 0; i < 8; i++) {\n\t\t\t\t\tctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n\t\t\t\t}\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.stroke();\n\t\t\t\tfor (var i = 0; i < 8; i++) {\n\t\t\t\t\tctx.fillRect(coords[i] - half, coords[++i] - half,\n\t\t\t\t\t\t\tsize, size);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn false;\n\t}\n}, Base.each(['down', 'drag', 'up', 'move'], function(key) {\n\tthis['removeOn' + Base.capitalize(key)] = function() {\n\t\tvar hash = {};\n\t\thash[key] = true;\n\t\treturn this.removeOn(hash);\n\t};\n}, {\n\n\tremoveOn: function(obj) {\n\t\tfor (var name in obj) {\n\t\t\tif (obj[name]) {\n\t\t\t\tvar key = 'mouse' + name,\n\t\t\t\t\tproject = this._project,\n\t\t\t\t\tsets = project._removeSets = project._removeSets || {};\n\t\t\t\tsets[key] = sets[key] || {};\n\t\t\t\tsets[key][this._id] = this;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n}), {\n\ttween: function(from, to, options) {\n\t\tif (!options) {\n\t\t\toptions = to;\n\t\t\tto = from;\n\t\t\tfrom = null;\n\t\t\tif (!options) {\n\t\t\t\toptions = to;\n\t\t\t\tto = null;\n\t\t\t}\n\t\t}\n\t\tvar easing = options && options.easing,\n\t\t\tstart = options && options.start,\n\t\t\tduration = options != null && (\n\t\t\t\ttypeof options === 'number' ? options : options.duration\n\t\t\t),\n\t\t\ttween = new Tween(this, from, to, duration, easing, start);\n\t\tfunction onFrame(event) {\n\t\t\ttween._handleFrame(event.time * 1000);\n\t\t\tif (!tween.running) {\n\t\t\t\tthis.off('frame', onFrame);\n\t\t\t}\n\t\t}\n\t\tif (duration) {\n\t\t\tthis.on('frame', onFrame);\n\t\t}\n\t\treturn tween;\n\t},\n\n\ttweenTo: function(to, options) {\n\t\treturn this.tween(null, to, options);\n\t},\n\n\ttweenFrom: function(from, options) {\n\t\treturn this.tween(from, null, options);\n\t}\n});\n\nvar Group = Item.extend({\n\t_class: 'Group',\n\t_selectBounds: false,\n\t_selectChildren: true,\n\t_serializeFields: {\n\t\tchildren: []\n\t},\n\n\tinitialize: function Group(arg) {\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tif (!this._initialize(arg))\n\t\t\tthis.addChildren(Array.isArray(arg) ? arg : arguments);\n\t},\n\n\t_changed: function _changed(flags) {\n\t\t_changed.base.call(this, flags);\n\t\tif (flags & 2050) {\n\t\t\tthis._clipItem = undefined;\n\t\t}\n\t},\n\n\t_getClipItem: function() {\n\t\tvar clipItem = this._clipItem;\n\t\tif (clipItem === undefined) {\n\t\t\tclipItem = null;\n\t\t\tvar children = this._children;\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tif (children[i]._clipMask) {\n\t\t\t\t\tclipItem = children[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._clipItem = clipItem;\n\t\t}\n\t\treturn clipItem;\n\t},\n\n\tisClipped: function() {\n\t\treturn !!this._getClipItem();\n\t},\n\n\tsetClipped: function(clipped) {\n\t\tvar child = this.getFirstChild();\n\t\tif (child)\n\t\t\tchild.setClipMask(clipped);\n\t},\n\n\t_getBounds: function _getBounds(matrix, options) {\n\t\tvar clipItem = this._getClipItem();\n\t\treturn clipItem\n\t\t\t? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix),\n\t\t\t\tBase.set({}, options, { stroke: false }))\n\t\t\t: _getBounds.base.call(this, matrix, options);\n\t},\n\n\t_hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n\t\tvar clipItem = this._getClipItem();\n\t\treturn (!clipItem || clipItem.contains(point))\n\t\t\t\t&& _hitTestChildren.base.call(this, point, options, viewMatrix,\n\t\t\t\t\tclipItem);\n\t},\n\n\t_draw: function(ctx, param) {\n\t\tvar clip = param.clip,\n\t\t\tclipItem = !clip && this._getClipItem();\n\t\tparam = param.extend({ clipItem: clipItem, clip: false });\n\t\tif (clip) {\n\t\t\tctx.beginPath();\n\t\t\tparam.dontStart = param.dontFinish = true;\n\t\t} else if (clipItem) {\n\t\t\tclipItem.draw(ctx, param.extend({ clip: true }));\n\t\t}\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar item = children[i];\n\t\t\tif (item !== clipItem)\n\t\t\t\titem.draw(ctx, param);\n\t\t}\n\t}\n});\n\nvar Layer = Group.extend({\n\t_class: 'Layer',\n\n\tinitialize: function Layer() {\n\t\tGroup.apply(this, arguments);\n\t},\n\n\t_getOwner: function() {\n\t\treturn this._parent || this._index != null && this._project;\n\t},\n\n\tisInserted: function isInserted() {\n\t\treturn this._parent ? isInserted.base.call(this) : this._index != null;\n\t},\n\n\tactivate: function() {\n\t\tthis._project._activeLayer = this;\n\t},\n\n\t_hitTestSelf: function() {\n\t}\n});\n\nvar Shape = Item.extend({\n\t_class: 'Shape',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_canScaleStroke: true,\n\t_serializeFields: {\n\t\ttype: null,\n\t\tsize: null,\n\t\tradius: null\n\t},\n\n\tinitialize: function Shape(props, point) {\n\t\tthis._initialize(props, point);\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._type === item._type\n\t\t\t&& this._size.equals(item._size)\n\t\t\t&& Base.equals(this._radius, item._radius);\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setType(source._type);\n\t\tthis.setSize(source._size);\n\t\tthis.setRadius(source._radius);\n\t},\n\n\tgetType: function() {\n\t\treturn this._type;\n\t},\n\n\tsetType: function(type) {\n\t\tthis._type = type;\n\t},\n\n\tgetShape: '#getType',\n\tsetShape: '#setType',\n\n\tgetSize: function() {\n\t\tvar size = this._size;\n\t\treturn new LinkedSize(size.width, size.height, this, 'setSize');\n\t},\n\n\tsetSize: function() {\n\t\tvar size = Size.read(arguments);\n\t\tif (!this._size) {\n\t\t\tthis._size = size.clone();\n\t\t} else if (!this._size.equals(size)) {\n\t\t\tvar type = this._type,\n\t\t\t\twidth = size.width,\n\t\t\t\theight = size.height;\n\t\t\tif (type === 'rectangle') {\n\t\t\t\tthis._radius.set(Size.min(this._radius, size.divide(2).abs()));\n\t\t\t} else if (type === 'circle') {\n\t\t\t\twidth = height = (width + height) / 2;\n\t\t\t\tthis._radius = width / 2;\n\t\t\t} else if (type === 'ellipse') {\n\t\t\t\tthis._radius._set(width / 2, height / 2);\n\t\t\t}\n\t\t\tthis._size._set(width, height);\n\t\t\tthis._changed(9);\n\t\t}\n\t},\n\n\tgetRadius: function() {\n\t\tvar rad = this._radius;\n\t\treturn this._type === 'circle'\n\t\t\t\t? rad\n\t\t\t\t: new LinkedSize(rad.width, rad.height, this, 'setRadius');\n\t},\n\n\tsetRadius: function(radius) {\n\t\tvar type = this._type;\n\t\tif (type === 'circle') {\n\t\t\tif (radius === this._radius)\n\t\t\t\treturn;\n\t\t\tvar size = radius * 2;\n\t\t\tthis._radius = radius;\n\t\t\tthis._size._set(size, size);\n\t\t} else {\n\t\t\tradius = Size.read(arguments);\n\t\t\tif (!this._radius) {\n\t\t\t\tthis._radius = radius.clone();\n\t\t\t} else {\n\t\t\t\tif (this._radius.equals(radius))\n\t\t\t\t\treturn;\n\t\t\t\tthis._radius.set(radius);\n\t\t\t\tif (type === 'rectangle') {\n\t\t\t\t\tvar size = Size.max(this._size, radius.multiply(2));\n\t\t\t\t\tthis._size.set(size);\n\t\t\t\t} else if (type === 'ellipse') {\n\t\t\t\t\tthis._size._set(radius.width * 2, radius.height * 2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._changed(9);\n\t},\n\n\tisEmpty: function() {\n\t\treturn false;\n\t},\n\n\ttoPath: function(insert) {\n\t\tvar path = new Path[Base.capitalize(this._type)]({\n\t\t\tcenter: new Point(),\n\t\t\tsize: this._size,\n\t\t\tradius: this._radius,\n\t\t\tinsert: false\n\t\t});\n\t\tpath.copyAttributes(this);\n\t\tif (paper.settings.applyMatrix)\n\t\t\tpath.setApplyMatrix(true);\n\t\tif (insert === undefined || insert)\n\t\t\tpath.insertAbove(this);\n\t\treturn path;\n\t},\n\n\ttoShape: '#clone',\n\n\t_asPathItem: function() {\n\t\treturn this.toPath(false);\n\t},\n\n\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\tvar style = this._style,\n\t\t\thasFill = style.hasFill(),\n\t\t\thasStroke = style.hasStroke(),\n\t\t\tdontPaint = param.dontFinish || param.clip,\n\t\t\tuntransformed = !strokeMatrix;\n\t\tif (hasFill || hasStroke || dontPaint) {\n\t\t\tvar type = this._type,\n\t\t\t\tradius = this._radius,\n\t\t\t\tisCircle = type === 'circle';\n\t\t\tif (!param.dontStart)\n\t\t\t\tctx.beginPath();\n\t\t\tif (untransformed && isCircle) {\n\t\t\t\tctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n\t\t\t} else {\n\t\t\t\tvar rx = isCircle ? radius : radius.width,\n\t\t\t\t\try = isCircle ? radius : radius.height,\n\t\t\t\t\tsize = this._size,\n\t\t\t\t\twidth = size.width,\n\t\t\t\t\theight = size.height;\n\t\t\t\tif (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n\t\t\t\t\tctx.rect(-width / 2, -height / 2, width, height);\n\t\t\t\t} else {\n\t\t\t\t\tvar x = width / 2,\n\t\t\t\t\t\ty = height / 2,\n\t\t\t\t\t\tkappa = 1 - 0.5522847498307936,\n\t\t\t\t\t\tcx = rx * kappa,\n\t\t\t\t\t\tcy = ry * kappa,\n\t\t\t\t\t\tc = [\n\t\t\t\t\t\t\t-x, -y + ry,\n\t\t\t\t\t\t\t-x, -y + cy,\n\t\t\t\t\t\t\t-x + cx, -y,\n\t\t\t\t\t\t\t-x + rx, -y,\n\t\t\t\t\t\t\tx - rx, -y,\n\t\t\t\t\t\t\tx - cx, -y,\n\t\t\t\t\t\t\tx, -y + cy,\n\t\t\t\t\t\t\tx, -y + ry,\n\t\t\t\t\t\t\tx, y - ry,\n\t\t\t\t\t\t\tx, y - cy,\n\t\t\t\t\t\t\tx - cx, y,\n\t\t\t\t\t\t\tx - rx, y,\n\t\t\t\t\t\t\t-x + rx, y,\n\t\t\t\t\t\t\t-x + cx, y,\n\t\t\t\t\t\t\t-x, y - cy,\n\t\t\t\t\t\t\t-x, y - ry\n\t\t\t\t\t\t];\n\t\t\t\t\tif (strokeMatrix)\n\t\t\t\t\t\tstrokeMatrix.transform(c, c, 32);\n\t\t\t\t\tctx.moveTo(c[0], c[1]);\n\t\t\t\t\tctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n\t\t\t\t\tif (x !== rx)\n\t\t\t\t\t\tctx.lineTo(c[8], c[9]);\n\t\t\t\t\tctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n\t\t\t\t\tif (y !== ry)\n\t\t\t\t\t\tctx.lineTo(c[16], c[17]);\n\t\t\t\t\tctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n\t\t\t\t\tif (x !== rx)\n\t\t\t\t\t\tctx.lineTo(c[24], c[25]);\n\t\t\t\t\tctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tctx.closePath();\n\t\t}\n\t\tif (!dontPaint && (hasFill || hasStroke)) {\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\tif (hasFill) {\n\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (hasStroke)\n\t\t\t\tctx.stroke();\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn !(this.hasFill() && this.hasStroke());\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar rect = new Rectangle(this._size).setCenter(0, 0),\n\t\t\tstyle = this._style,\n\t\t\tstrokeWidth = options.stroke && style.hasStroke()\n\t\t\t\t\t&& style.getStrokeWidth();\n\t\tif (matrix)\n\t\t\trect = matrix._transformBounds(rect);\n\t\treturn strokeWidth\n\t\t\t\t? rect.expand(Path._getStrokePadding(strokeWidth,\n\t\t\t\t\tthis._getStrokeMatrix(matrix, options)))\n\t\t\t\t: rect;\n\t}\n},\nnew function() {\n\tfunction getCornerCenter(that, point, expand) {\n\t\tvar radius = that._radius;\n\t\tif (!radius.isZero()) {\n\t\t\tvar halfSize = that._size.divide(2);\n\t\t\tfor (var q = 1; q <= 4; q++) {\n\t\t\t\tvar dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n\t\t\t\t\tcorner = dir.multiply(halfSize),\n\t\t\t\t\tcenter = corner.subtract(dir.multiply(radius)),\n\t\t\t\t\trect = new Rectangle(\n\t\t\t\t\t\t\texpand ? corner.add(dir.multiply(expand)) : corner,\n\t\t\t\t\t\t\tcenter);\n\t\t\t\tif (rect.contains(point))\n\t\t\t\t\treturn { point: center, quadrant: q };\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction isOnEllipseStroke(point, radius, padding, quadrant) {\n\t\tvar vector = point.divide(radius);\n\t\treturn (!quadrant || vector.isInQuadrant(quadrant)) &&\n\t\t\t\tvector.subtract(vector.normalize()).multiply(radius)\n\t\t\t\t\t.divide(padding).length <= 1;\n\t}\n\n\treturn {\n\t\t_contains: function _contains(point) {\n\t\t\tif (this._type === 'rectangle') {\n\t\t\t\tvar center = getCornerCenter(this, point);\n\t\t\t\treturn center\n\t\t\t\t\t\t? point.subtract(center.point).divide(this._radius)\n\t\t\t\t\t\t\t.getLength() <= 1\n\t\t\t\t\t\t: _contains.base.call(this, point);\n\t\t\t} else {\n\t\t\t\treturn point.divide(this.size).getLength() <= 0.5;\n\t\t\t}\n\t\t},\n\n\t\t_hitTestSelf: function _hitTestSelf(point, options, viewMatrix,\n\t\t\t\tstrokeMatrix) {\n\t\t\tvar hit = false,\n\t\t\t\tstyle = this._style,\n\t\t\t\thitStroke = options.stroke && style.hasStroke(),\n\t\t\t\thitFill = options.fill && style.hasFill();\n\t\t\tif (hitStroke || hitFill) {\n\t\t\t\tvar type = this._type,\n\t\t\t\t\tradius = this._radius,\n\t\t\t\t\tstrokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n\t\t\t\t\tstrokePadding = options._tolerancePadding.add(\n\t\t\t\t\t\tPath._getStrokePadding(strokeRadius,\n\t\t\t\t\t\t\t!style.getStrokeScaling() && strokeMatrix));\n\t\t\t\tif (type === 'rectangle') {\n\t\t\t\t\tvar padding = strokePadding.multiply(2),\n\t\t\t\t\t\tcenter = getCornerCenter(this, point, padding);\n\t\t\t\t\tif (center) {\n\t\t\t\t\t\thit = isOnEllipseStroke(point.subtract(center.point),\n\t\t\t\t\t\t\t\tradius, strokePadding, center.quadrant);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar rect = new Rectangle(this._size).setCenter(0, 0),\n\t\t\t\t\t\t\touter = rect.expand(padding),\n\t\t\t\t\t\t\tinner = rect.expand(padding.negate());\n\t\t\t\t\t\thit = outer._containsPoint(point)\n\t\t\t\t\t\t\t\t&& !inner._containsPoint(point);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\thit = isOnEllipseStroke(point, radius, strokePadding);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this)\n\t\t\t\t\t: _hitTestSelf.base.apply(this, arguments);\n\t\t}\n\t};\n}, {\n\nstatics: new function() {\n\tfunction createShape(type, point, size, radius, args) {\n\t\tvar item = Base.create(Shape.prototype);\n\t\titem._type = type;\n\t\titem._size = size;\n\t\titem._radius = radius;\n\t\titem._initialize(Base.getNamed(args), point);\n\t\treturn item;\n\t}\n\n\treturn {\n\t\tCircle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tradius = Base.readNamed(args, 'radius');\n\t\t\treturn createShape('circle', center, new Size(radius * 2), radius,\n\t\t\t\t\targs);\n\t\t},\n\n\t\tRectangle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\trect = Rectangle.readNamed(args, 'rectangle'),\n\t\t\t\tradius = Size.min(Size.readNamed(args, 'radius'),\n\t\t\t\t\t\trect.getSize(true).divide(2));\n\t\t\treturn createShape('rectangle', rect.getCenter(true),\n\t\t\t\t\trect.getSize(true), radius, args);\n\t\t},\n\n\t\tEllipse: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tellipse = Shape._readEllipse(args),\n\t\t\t\tradius = ellipse.radius;\n\t\t\treturn createShape('ellipse', ellipse.center, radius.multiply(2),\n\t\t\t\t\tradius, args);\n\t\t},\n\n\t\t_readEllipse: function(args) {\n\t\t\tvar center,\n\t\t\t\tradius;\n\t\t\tif (Base.hasNamed(args, 'radius')) {\n\t\t\t\tcenter = Point.readNamed(args, 'center');\n\t\t\t\tradius = Size.readNamed(args, 'radius');\n\t\t\t} else {\n\t\t\t\tvar rect = Rectangle.readNamed(args, 'rectangle');\n\t\t\t\tcenter = rect.getCenter(true);\n\t\t\t\tradius = rect.getSize(true).divide(2);\n\t\t\t}\n\t\t\treturn { center: center, radius: radius };\n\t\t}\n\t};\n}});\n\nvar Raster = Item.extend({\n\t_class: 'Raster',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_boundsOptions: { stroke: false, handle: false },\n\t_serializeFields: {\n\t\tcrossOrigin: null,\n\t\tsource: null\n\t},\n\t_prioritize: ['crossOrigin'],\n\t_smoothing: 'low',\n\tbeans: true,\n\n\tinitialize: function Raster(source, position) {\n\t\tif (!this._initialize(source,\n\t\t\t\tposition !== undefined && Point.read(arguments))) {\n\t\t\tvar image,\n\t\t\t\ttype = typeof source,\n\t\t\t\tobject = type === 'string'\n\t\t\t\t\t? document.getElementById(source)\n\t\t\t\t\t: type  === 'object'\n\t\t\t\t\t\t? source\n\t\t\t\t\t\t: null;\n\t\t\tif (object && object !== Item.NO_INSERT) {\n\t\t\t\tif (object.getContext || object.naturalHeight != null) {\n\t\t\t\t\timage = object;\n\t\t\t\t} else if (object) {\n\t\t\t\t\tvar size = Size.read(arguments);\n\t\t\t\t\tif (!size.isZero()) {\n\t\t\t\t\t\timage = CanvasProvider.getCanvas(size);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (image) {\n\t\t\t\tthis.setImage(image);\n\t\t\t} else {\n\t\t\t\tthis.setSource(source);\n\t\t\t}\n\t\t}\n\t\tif (!this._size) {\n\t\t\tthis._size = new Size();\n\t\t\tthis._loaded = false;\n\t\t}\n\t},\n\n\t_equals: function(item) {\n\t\treturn this.getSource() === item.getSource();\n\t},\n\n\tcopyContent: function(source) {\n\t\tvar image = source._image,\n\t\t\tcanvas = source._canvas;\n\t\tif (image) {\n\t\t\tthis._setImage(image);\n\t\t} else if (canvas) {\n\t\t\tvar copyCanvas = CanvasProvider.getCanvas(source._size);\n\t\t\tcopyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n\t\t\tthis._setImage(copyCanvas);\n\t\t}\n\t\tthis._crossOrigin = source._crossOrigin;\n\t},\n\n\tgetSize: function() {\n\t\tvar size = this._size;\n\t\treturn new LinkedSize(size ? size.width : 0, size ? size.height : 0,\n\t\t\t\tthis, 'setSize');\n\t},\n\n\tsetSize: function(_size, _clear) {\n\t\tvar size = Size.read(arguments);\n\t\tif (!size.equals(this._size)) {\n\t\t\tif (size.width > 0 && size.height > 0) {\n\t\t\t\tvar element = !_clear && this.getElement();\n\t\t\t\tthis._setImage(CanvasProvider.getCanvas(size));\n\t\t\t\tif (element) {\n\t\t\t\t\tthis.getContext(true).drawImage(element, 0, 0,\n\t\t\t\t\t\t\tsize.width, size.height);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._canvas)\n\t\t\t\t\tCanvasProvider.release(this._canvas);\n\t\t\t\tthis._size = size.clone();\n\t\t\t}\n\t\t} else if (_clear) {\n\t\t\tthis.clear();\n\t\t}\n\t},\n\n\tgetWidth: function() {\n\t\treturn this._size ? this._size.width : 0;\n\t},\n\n\tsetWidth: function(width) {\n\t\tthis.setSize(width, this.getHeight());\n\t},\n\n\tgetHeight: function() {\n\t\treturn this._size ? this._size.height : 0;\n\t},\n\n\tsetHeight: function(height) {\n\t\tthis.setSize(this.getWidth(), height);\n\t},\n\n\tgetLoaded: function() {\n\t\treturn this._loaded;\n\t},\n\n\tisEmpty: function() {\n\t\tvar size = this._size;\n\t\treturn !size || size.width === 0 && size.height === 0;\n\t},\n\n\tgetResolution: function() {\n\t\tvar matrix = this._matrix,\n\t\t\torig = new Point(0, 0).transform(matrix),\n\t\t\tu = new Point(1, 0).transform(matrix).subtract(orig),\n\t\t\tv = new Point(0, 1).transform(matrix).subtract(orig);\n\t\treturn new Size(\n\t\t\t72 / u.getLength(),\n\t\t\t72 / v.getLength()\n\t\t);\n\t},\n\n\tgetPpi: '#getResolution',\n\n\tgetImage: function() {\n\t\treturn this._image;\n\t},\n\n\tsetImage: function(image) {\n\t\tvar that = this;\n\n\t\tfunction emit(event) {\n\t\t\tvar view = that.getView(),\n\t\t\t\ttype = event && event.type || 'load';\n\t\t\tif (view && that.responds(type)) {\n\t\t\t\tpaper = view._scope;\n\t\t\t\tthat.emit(type, new Event(event));\n\t\t\t}\n\t\t}\n\n\t\tthis._setImage(image);\n\t\tif (this._loaded) {\n\t\t\tsetTimeout(emit, 0);\n\t\t} else if (image) {\n\t\t\tDomEvent.add(image, {\n\t\t\t\tload: function(event) {\n\t\t\t\t\tthat._setImage(image);\n\t\t\t\t\temit(event);\n\t\t\t\t},\n\t\t\t\terror: emit\n\t\t\t});\n\t\t}\n\t},\n\n\t_setImage: function(image) {\n\t\tif (this._canvas)\n\t\t\tCanvasProvider.release(this._canvas);\n\t\tif (image && image.getContext) {\n\t\t\tthis._image = null;\n\t\t\tthis._canvas = image;\n\t\t\tthis._loaded = true;\n\t\t} else {\n\t\t\tthis._image = image;\n\t\t\tthis._canvas = null;\n\t\t\tthis._loaded = !!(image && image.src && image.complete);\n\t\t}\n\t\tthis._size = new Size(\n\t\t\t\timage ? image.naturalWidth || image.width : 0,\n\t\t\t\timage ? image.naturalHeight || image.height : 0);\n\t\tthis._context = null;\n\t\tthis._changed(1033);\n\t},\n\n\tgetCanvas: function() {\n\t\tif (!this._canvas) {\n\t\t\tvar ctx = CanvasProvider.getContext(this._size);\n\t\t\ttry {\n\t\t\t\tif (this._image)\n\t\t\t\t\tctx.drawImage(this._image, 0, 0);\n\t\t\t\tthis._canvas = ctx.canvas;\n\t\t\t} catch (e) {\n\t\t\t\tCanvasProvider.release(ctx);\n\t\t\t}\n\t\t}\n\t\treturn this._canvas;\n\t},\n\n\tsetCanvas: '#setImage',\n\n\tgetContext: function(_change) {\n\t\tif (!this._context)\n\t\t\tthis._context = this.getCanvas().getContext('2d');\n\t\tif (_change) {\n\t\t\tthis._image = null;\n\t\t\tthis._changed(1025);\n\t\t}\n\t\treturn this._context;\n\t},\n\n\tsetContext: function(context) {\n\t\tthis._context = context;\n\t},\n\n\tgetSource: function() {\n\t\tvar image = this._image;\n\t\treturn image && image.src || this.toDataURL();\n\t},\n\n\tsetSource: function(src) {\n\t\tvar image = new self.Image(),\n\t\t\tcrossOrigin = this._crossOrigin;\n\t\tif (crossOrigin)\n\t\t\timage.crossOrigin = crossOrigin;\n\t\tif (src)\n\t\t\timage.src = src;\n\t\tthis.setImage(image);\n\t},\n\n\tgetCrossOrigin: function() {\n\t\tvar image = this._image;\n\t\treturn image && image.crossOrigin || this._crossOrigin || '';\n\t},\n\n\tsetCrossOrigin: function(crossOrigin) {\n\t\tthis._crossOrigin = crossOrigin;\n\t\tvar image = this._image;\n\t\tif (image)\n\t\t\timage.crossOrigin = crossOrigin;\n\t},\n\n\tgetSmoothing: function() {\n\t\treturn this._smoothing;\n\t},\n\n\tsetSmoothing: function(smoothing) {\n\t\tthis._smoothing = typeof smoothing === 'string'\n\t\t\t? smoothing\n\t\t\t: smoothing ? 'low' : 'off';\n\t\tthis._changed(257);\n\t},\n\n\tgetElement: function() {\n\t\treturn this._canvas || this._loaded && this._image;\n\t}\n}, {\n\tbeans: false,\n\n\tgetSubCanvas: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\tctx = CanvasProvider.getContext(rect.getSize());\n\t\tctx.drawImage(this.getCanvas(), rect.x, rect.y,\n\t\t\t\trect.width, rect.height, 0, 0, rect.width, rect.height);\n\t\treturn ctx.canvas;\n\t},\n\n\tgetSubRaster: function() {\n\t\tvar rect = Rectangle.read(arguments),\n\t\t\traster = new Raster(Item.NO_INSERT);\n\t\traster._setImage(this.getSubCanvas(rect));\n\t\traster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n\t\traster._matrix.prepend(this._matrix);\n\t\traster.insertAbove(this);\n\t\treturn raster;\n\t},\n\n\ttoDataURL: function() {\n\t\tvar image = this._image,\n\t\t\tsrc = image && image.src;\n\t\tif (/^data:/.test(src))\n\t\t\treturn src;\n\t\tvar canvas = this.getCanvas();\n\t\treturn canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n\t},\n\n\tdrawImage: function(image ) {\n\t\tvar point = Point.read(arguments, 1);\n\t\tthis.getContext(true).drawImage(image, point.x, point.y);\n\t},\n\n\tgetAverageColor: function(object) {\n\t\tvar bounds, path;\n\t\tif (!object) {\n\t\t\tbounds = this.getBounds();\n\t\t} else if (object instanceof PathItem) {\n\t\t\tpath = object;\n\t\t\tbounds = object.getBounds();\n\t\t} else if (typeof object === 'object') {\n\t\t\tif ('width' in object) {\n\t\t\t\tbounds = new Rectangle(object);\n\t\t\t} else if ('x' in object) {\n\t\t\t\tbounds = new Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n\t\t\t}\n\t\t}\n\t\tif (!bounds)\n\t\t\treturn null;\n\t\tvar sampleSize = 32,\n\t\t\twidth = Math.min(bounds.width, sampleSize),\n\t\t\theight = Math.min(bounds.height, sampleSize);\n\t\tvar ctx = Raster._sampleContext;\n\t\tif (!ctx) {\n\t\t\tctx = Raster._sampleContext = CanvasProvider.getContext(\n\t\t\t\t\tnew Size(sampleSize));\n\t\t} else {\n\t\t\tctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n\t\t}\n\t\tctx.save();\n\t\tvar matrix = new Matrix()\n\t\t\t\t.scale(width / bounds.width, height / bounds.height)\n\t\t\t\t.translate(-bounds.x, -bounds.y);\n\t\tmatrix.applyToContext(ctx);\n\t\tif (path)\n\t\t\tpath.draw(ctx, new Base({ clip: true, matrices: [matrix] }));\n\t\tthis._matrix.applyToContext(ctx);\n\t\tvar element = this.getElement(),\n\t\t\tsize = this._size;\n\t\tif (element)\n\t\t\tctx.drawImage(element, -size.width / 2, -size.height / 2);\n\t\tctx.restore();\n\t\tvar pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width),\n\t\t\t\tMath.ceil(height)).data,\n\t\t\tchannels = [0, 0, 0],\n\t\t\ttotal = 0;\n\t\tfor (var i = 0, l = pixels.length; i < l; i += 4) {\n\t\t\tvar alpha = pixels[i + 3];\n\t\t\ttotal += alpha;\n\t\t\talpha /= 255;\n\t\t\tchannels[0] += pixels[i] * alpha;\n\t\t\tchannels[1] += pixels[i + 1] * alpha;\n\t\t\tchannels[2] += pixels[i + 2] * alpha;\n\t\t}\n\t\tfor (var i = 0; i < 3; i++)\n\t\t\tchannels[i] /= total;\n\t\treturn total ? Color.read(channels) : null;\n\t},\n\n\tgetPixel: function() {\n\t\tvar point = Point.read(arguments);\n\t\tvar data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n\t\treturn new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255],\n\t\t\t\tdata[3] / 255);\n\t},\n\n\tsetPixel: function() {\n\t\tvar args = arguments,\n\t\t\tpoint = Point.read(args),\n\t\t\tcolor = Color.read(args),\n\t\t\tcomponents = color._convert('rgb'),\n\t\t\talpha = color._alpha,\n\t\t\tctx = this.getContext(true),\n\t\t\timageData = ctx.createImageData(1, 1),\n\t\t\tdata = imageData.data;\n\t\tdata[0] = components[0] * 255;\n\t\tdata[1] = components[1] * 255;\n\t\tdata[2] = components[2] * 255;\n\t\tdata[3] = alpha != null ? alpha * 255 : 255;\n\t\tctx.putImageData(imageData, point.x, point.y);\n\t},\n\n\tclear: function() {\n\t\tvar size = this._size;\n\t\tthis.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n\t},\n\n\tcreateImageData: function() {\n\t\tvar size = Size.read(arguments);\n\t\treturn this.getContext().createImageData(size.width, size.height);\n\t},\n\n\tgetImageData: function() {\n\t\tvar rect = Rectangle.read(arguments);\n\t\tif (rect.isEmpty())\n\t\t\trect = new Rectangle(this._size);\n\t\treturn this.getContext().getImageData(rect.x, rect.y,\n\t\t\t\trect.width, rect.height);\n\t},\n\n\tsetImageData: function(data ) {\n\t\tvar point = Point.read(arguments, 1);\n\t\tthis.getContext(true).putImageData(data, point.x, point.y);\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar rect = new Rectangle(this._size).setCenter(0, 0);\n\t\treturn matrix ? matrix._transformBounds(rect) : rect;\n\t},\n\n\t_hitTestSelf: function(point) {\n\t\tif (this._contains(point)) {\n\t\t\tvar that = this;\n\t\t\treturn new HitResult('pixel', that, {\n\t\t\t\toffset: point.add(that._size.divide(2)).round(),\n\t\t\t\tcolor: {\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn that.getPixel(this.offset);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_draw: function(ctx, param, viewMatrix) {\n\t\tvar element = this.getElement();\n\t\tif (element && element.width > 0 && element.height > 0) {\n\t\t\tctx.globalAlpha = Numerical.clamp(this._opacity, 0, 1);\n\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\n\t\t\tvar smoothing = this._smoothing,\n\t\t\t\tdisabled = smoothing === 'off';\n\t\t\tDomElement.setPrefixed(\n\t\t\t\tctx,\n\t\t\t\tdisabled ? 'imageSmoothingEnabled' : 'imageSmoothingQuality',\n\t\t\t\tdisabled ? false : smoothing\n\t\t\t);\n\n\t\t\tctx.drawImage(element,\n\t\t\t\t\t-this._size.width / 2, -this._size.height / 2);\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn true;\n\t}\n});\n\nvar SymbolItem = Item.extend({\n\t_class: 'SymbolItem',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_boundsOptions: { stroke: true },\n\t_serializeFields: {\n\t\tsymbol: null\n\t},\n\n\tinitialize: function SymbolItem(arg0, arg1) {\n\t\tif (!this._initialize(arg0,\n\t\t\t\targ1 !== undefined && Point.read(arguments, 1)))\n\t\t\tthis.setDefinition(arg0 instanceof SymbolDefinition ?\n\t\t\t\t\targ0 : new SymbolDefinition(arg0));\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._definition === item._definition;\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setDefinition(source._definition);\n\t},\n\n\tgetDefinition: function() {\n\t\treturn this._definition;\n\t},\n\n\tsetDefinition: function(definition) {\n\t\tthis._definition = definition;\n\t\tthis._changed(9);\n\t},\n\n\tgetSymbol: '#getDefinition',\n\tsetSymbol: '#setDefinition',\n\n\tisEmpty: function() {\n\t\treturn this._definition._item.isEmpty();\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar item = this._definition._item;\n\t\treturn item._getCachedBounds(item._matrix.prepended(matrix), options);\n\t},\n\n\t_hitTestSelf: function(point, options, viewMatrix) {\n\t\tvar opts = options.extend({ all: false });\n\t\tvar res = this._definition._item._hitTest(point, opts, viewMatrix);\n\t\tif (res)\n\t\t\tres.item = this;\n\t\treturn res;\n\t},\n\n\t_draw: function(ctx, param) {\n\t\tthis._definition._item.draw(ctx, param);\n\t}\n\n});\n\nvar SymbolDefinition = Base.extend({\n\t_class: 'SymbolDefinition',\n\n\tinitialize: function SymbolDefinition(item, dontCenter) {\n\t\tthis._id = UID.get();\n\t\tthis.project = paper.project;\n\t\tif (item)\n\t\t\tthis.setItem(item, dontCenter);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn dictionary.add(this, function() {\n\t\t\treturn Base.serialize([this._class, this._item],\n\t\t\t\t\toptions, false, dictionary);\n\t\t});\n\t},\n\n\t_changed: function(flags) {\n\t\tif (flags & 8)\n\t\t\tItem._clearBoundsCache(this);\n\t\tif (flags & 1)\n\t\t\tthis.project._changed(flags);\n\t},\n\n\tgetItem: function() {\n\t\treturn this._item;\n\t},\n\n\tsetItem: function(item, _dontCenter) {\n\t\tif (item._symbol)\n\t\t\titem = item.clone();\n\t\tif (this._item)\n\t\t\tthis._item._symbol = null;\n\t\tthis._item = item;\n\t\titem.remove();\n\t\titem.setSelected(false);\n\t\tif (!_dontCenter)\n\t\t\titem.setPosition(new Point());\n\t\titem._symbol = this;\n\t\tthis._changed(9);\n\t},\n\n\tgetDefinition: '#getItem',\n\tsetDefinition: '#setItem',\n\n\tplace: function(position) {\n\t\treturn new SymbolItem(this, position);\n\t},\n\n\tclone: function() {\n\t\treturn new SymbolDefinition(this._item.clone(false));\n\t},\n\n\tequals: function(symbol) {\n\t\treturn symbol === this\n\t\t\t\t|| symbol && this._item.equals(symbol._item)\n\t\t\t\t|| false;\n\t}\n});\n\nvar HitResult = Base.extend({\n\t_class: 'HitResult',\n\n\tinitialize: function HitResult(type, item, values) {\n\t\tthis.type = type;\n\t\tthis.item = item;\n\t\tif (values)\n\t\t\tthis.inject(values);\n\t},\n\n\tstatics: {\n\t\tgetOptions: function(args) {\n\t\t\tvar options = args && Base.read(args);\n\t\t\treturn new Base({\n\t\t\t\ttype: null,\n\t\t\t\ttolerance: paper.settings.hitTolerance,\n\t\t\t\tfill: !options,\n\t\t\t\tstroke: !options,\n\t\t\t\tsegments: !options,\n\t\t\t\thandles: false,\n\t\t\t\tends: false,\n\t\t\t\tposition: false,\n\t\t\t\tcenter: false,\n\t\t\t\tbounds: false,\n\t\t\t\tguides: false,\n\t\t\t\tselected: false\n\t\t\t}, options);\n\t\t}\n\t}\n});\n\nvar Segment = Base.extend({\n\t_class: 'Segment',\n\tbeans: true,\n\t_selection: 0,\n\n\tinitialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n\t\tvar count = arguments.length,\n\t\t\tpoint, handleIn, handleOut, selection;\n\t\tif (count > 0) {\n\t\t\tif (arg0 == null || typeof arg0 === 'object') {\n\t\t\t\tif (count === 1 && arg0 && 'point' in arg0) {\n\t\t\t\t\tpoint = arg0.point;\n\t\t\t\t\thandleIn = arg0.handleIn;\n\t\t\t\t\thandleOut = arg0.handleOut;\n\t\t\t\t\tselection = arg0.selection;\n\t\t\t\t} else {\n\t\t\t\t\tpoint = arg0;\n\t\t\t\t\thandleIn = arg1;\n\t\t\t\t\thandleOut = arg2;\n\t\t\t\t\tselection = arg3;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpoint = [ arg0, arg1 ];\n\t\t\t\thandleIn = arg2 !== undefined ? [ arg2, arg3 ] : null;\n\t\t\t\thandleOut = arg4 !== undefined ? [ arg4, arg5 ] : null;\n\t\t\t}\n\t\t}\n\t\tnew SegmentPoint(point, this, '_point');\n\t\tnew SegmentPoint(handleIn, this, '_handleIn');\n\t\tnew SegmentPoint(handleOut, this, '_handleOut');\n\t\tif (selection)\n\t\t\tthis.setSelection(selection);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar point = this._point,\n\t\t\tselection = this._selection,\n\t\t\tobj = selection || this.hasHandles()\n\t\t\t\t\t? [point, this._handleIn, this._handleOut]\n\t\t\t\t\t: point;\n\t\tif (selection)\n\t\t\tobj.push(selection);\n\t\treturn Base.serialize(obj, options, true, dictionary);\n\t},\n\n\t_changed: function(point) {\n\t\tvar path = this._path;\n\t\tif (!path)\n\t\t\treturn;\n\t\tvar curves = path._curves,\n\t\t\tindex = this._index,\n\t\t\tcurve;\n\t\tif (curves) {\n\t\t\tif ((!point || point === this._point || point === this._handleIn)\n\t\t\t\t\t&& (curve = index > 0 ? curves[index - 1] : path._closed\n\t\t\t\t\t\t? curves[curves.length - 1] : null))\n\t\t\t\tcurve._changed();\n\t\t\tif ((!point || point === this._point || point === this._handleOut)\n\t\t\t\t\t&& (curve = curves[index]))\n\t\t\t\tcurve._changed();\n\t\t}\n\t\tpath._changed(41);\n\t},\n\n\tgetPoint: function() {\n\t\treturn this._point;\n\t},\n\n\tsetPoint: function() {\n\t\tthis._point.set(Point.read(arguments));\n\t},\n\n\tgetHandleIn: function() {\n\t\treturn this._handleIn;\n\t},\n\n\tsetHandleIn: function() {\n\t\tthis._handleIn.set(Point.read(arguments));\n\t},\n\n\tgetHandleOut: function() {\n\t\treturn this._handleOut;\n\t},\n\n\tsetHandleOut: function() {\n\t\tthis._handleOut.set(Point.read(arguments));\n\t},\n\n\thasHandles: function() {\n\t\treturn !this._handleIn.isZero() || !this._handleOut.isZero();\n\t},\n\n\tisSmooth: function() {\n\t\tvar handleIn = this._handleIn,\n\t\t\thandleOut = this._handleOut;\n\t\treturn !handleIn.isZero() && !handleOut.isZero()\n\t\t\t\t&& handleIn.isCollinear(handleOut);\n\t},\n\n\tclearHandles: function() {\n\t\tthis._handleIn._set(0, 0);\n\t\tthis._handleOut._set(0, 0);\n\t},\n\n\tgetSelection: function() {\n\t\treturn this._selection;\n\t},\n\n\tsetSelection: function(selection) {\n\t\tvar oldSelection = this._selection,\n\t\t\tpath = this._path;\n\t\tthis._selection = selection = selection || 0;\n\t\tif (path && selection !== oldSelection) {\n\t\t\tpath._updateSelection(this, oldSelection, selection);\n\t\t\tpath._changed(257);\n\t\t}\n\t},\n\n\t_changeSelection: function(flag, selected) {\n\t\tvar selection = this._selection;\n\t\tthis.setSelection(selected ? selection | flag : selection & ~flag);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._selection & 7);\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._changeSelection(7, selected);\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._index !== undefined ? this._index : null;\n\t},\n\n\tgetPath: function() {\n\t\treturn this._path || null;\n\t},\n\n\tgetCurve: function() {\n\t\tvar path = this._path,\n\t\t\tindex = this._index;\n\t\tif (path) {\n\t\t\tif (index > 0 && !path._closed\n\t\t\t\t\t&& index === path._segments.length - 1)\n\t\t\t\tindex--;\n\t\t\treturn path.getCurves()[index] || null;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetLocation: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve\n\t\t\t\t? new CurveLocation(curve, this === curve._segment1 ? 0 : 1)\n\t\t\t\t: null;\n\t},\n\n\tgetNext: function() {\n\t\tvar segments = this._path && this._path._segments;\n\t\treturn segments && (segments[this._index + 1]\n\t\t\t\t|| this._path._closed && segments[0]) || null;\n\t},\n\n\tsmooth: function(options, _first, _last) {\n\t\tvar opts = options || {},\n\t\t\ttype = opts.type,\n\t\t\tfactor = opts.factor,\n\t\t\tprev = this.getPrevious(),\n\t\t\tnext = this.getNext(),\n\t\t\tp0 = (prev || this)._point,\n\t\t\tp1 = this._point,\n\t\t\tp2 = (next || this)._point,\n\t\t\td1 = p0.getDistance(p1),\n\t\t\td2 = p1.getDistance(p2);\n\t\tif (!type || type === 'catmull-rom') {\n\t\t\tvar a = factor === undefined ? 0.5 : factor,\n\t\t\t\td1_a = Math.pow(d1, a),\n\t\t\t\td1_2a = d1_a * d1_a,\n\t\t\t\td2_a = Math.pow(d2, a),\n\t\t\t\td2_2a = d2_a * d2_a;\n\t\t\tif (!_first && prev) {\n\t\t\t\tvar A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n\t\t\t\t\tN = 3 * d2_a * (d2_a + d1_a);\n\t\t\t\tthis.setHandleIn(N !== 0\n\t\t\t\t\t? new Point(\n\t\t\t\t\t\t(d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x,\n\t\t\t\t\t\t(d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y)\n\t\t\t\t\t: new Point());\n\t\t\t}\n\t\t\tif (!_last && next) {\n\t\t\t\tvar A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n\t\t\t\t\tN = 3 * d1_a * (d1_a + d2_a);\n\t\t\t\tthis.setHandleOut(N !== 0\n\t\t\t\t\t? new Point(\n\t\t\t\t\t\t(d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x,\n\t\t\t\t\t\t(d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y)\n\t\t\t\t\t: new Point());\n\t\t\t}\n\t\t} else if (type === 'geometric') {\n\t\t\tif (prev && next) {\n\t\t\t\tvar vector = p0.subtract(p2),\n\t\t\t\t\tt = factor === undefined ? 0.4 : factor,\n\t\t\t\t\tk = t * d1 / (d1 + d2);\n\t\t\t\tif (!_first)\n\t\t\t\t\tthis.setHandleIn(vector.multiply(k));\n\t\t\t\tif (!_last)\n\t\t\t\t\tthis.setHandleOut(vector.multiply(k - t));\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('Smoothing method \\'' + type + '\\' not supported.');\n\t\t}\n\t},\n\n\tgetPrevious: function() {\n\t\tvar segments = this._path && this._path._segments;\n\t\treturn segments && (segments[this._index - 1]\n\t\t\t\t|| this._path._closed && segments[segments.length - 1]) || null;\n\t},\n\n\tisFirst: function() {\n\t\treturn !this._index;\n\t},\n\n\tisLast: function() {\n\t\tvar path = this._path;\n\t\treturn path && this._index === path._segments.length - 1 || false;\n\t},\n\n\treverse: function() {\n\t\tvar handleIn = this._handleIn,\n\t\t\thandleOut = this._handleOut,\n\t\t\ttmp = handleIn.clone();\n\t\thandleIn.set(handleOut);\n\t\thandleOut.set(tmp);\n\t},\n\n\treversed: function() {\n\t\treturn new Segment(this._point, this._handleOut, this._handleIn);\n\t},\n\n\tremove: function() {\n\t\treturn this._path ? !!this._path.removeSegment(this._index) : false;\n\t},\n\n\tclone: function() {\n\t\treturn new Segment(this._point, this._handleIn, this._handleOut);\n\t},\n\n\tequals: function(segment) {\n\t\treturn segment === this || segment && this._class === segment._class\n\t\t\t\t&& this._point.equals(segment._point)\n\t\t\t\t&& this._handleIn.equals(segment._handleIn)\n\t\t\t\t&& this._handleOut.equals(segment._handleOut)\n\t\t\t\t|| false;\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [ 'point: ' + this._point ];\n\t\tif (!this._handleIn.isZero())\n\t\t\tparts.push('handleIn: ' + this._handleIn);\n\t\tif (!this._handleOut.isZero())\n\t\t\tparts.push('handleOut: ' + this._handleOut);\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\ttransform: function(matrix) {\n\t\tthis._transformCoordinates(matrix, new Array(6), true);\n\t\tthis._changed();\n\t},\n\n\tinterpolate: function(from, to, factor) {\n\t\tvar u = 1 - factor,\n\t\t\tv = factor,\n\t\t\tpoint1 = from._point,\n\t\t\tpoint2 = to._point,\n\t\t\thandleIn1 = from._handleIn,\n\t\t\thandleIn2 = to._handleIn,\n\t\t\thandleOut2 = to._handleOut,\n\t\t\thandleOut1 = from._handleOut;\n\t\tthis._point._set(\n\t\t\t\tu * point1._x + v * point2._x,\n\t\t\t\tu * point1._y + v * point2._y, true);\n\t\tthis._handleIn._set(\n\t\t\t\tu * handleIn1._x + v * handleIn2._x,\n\t\t\t\tu * handleIn1._y + v * handleIn2._y, true);\n\t\tthis._handleOut._set(\n\t\t\t\tu * handleOut1._x + v * handleOut2._x,\n\t\t\t\tu * handleOut1._y + v * handleOut2._y, true);\n\t\tthis._changed();\n\t},\n\n\t_transformCoordinates: function(matrix, coords, change) {\n\t\tvar point = this._point,\n\t\t\thandleIn = !change || !this._handleIn.isZero()\n\t\t\t\t\t? this._handleIn : null,\n\t\t\thandleOut = !change || !this._handleOut.isZero()\n\t\t\t\t\t? this._handleOut : null,\n\t\t\tx = point._x,\n\t\t\ty = point._y,\n\t\t\ti = 2;\n\t\tcoords[0] = x;\n\t\tcoords[1] = y;\n\t\tif (handleIn) {\n\t\t\tcoords[i++] = handleIn._x + x;\n\t\t\tcoords[i++] = handleIn._y + y;\n\t\t}\n\t\tif (handleOut) {\n\t\t\tcoords[i++] = handleOut._x + x;\n\t\t\tcoords[i++] = handleOut._y + y;\n\t\t}\n\t\tif (matrix) {\n\t\t\tmatrix._transformCoordinates(coords, coords, i / 2);\n\t\t\tx = coords[0];\n\t\t\ty = coords[1];\n\t\t\tif (change) {\n\t\t\t\tpoint._x = x;\n\t\t\t\tpoint._y = y;\n\t\t\t\ti = 2;\n\t\t\t\tif (handleIn) {\n\t\t\t\t\thandleIn._x = coords[i++] - x;\n\t\t\t\t\thandleIn._y = coords[i++] - y;\n\t\t\t\t}\n\t\t\t\tif (handleOut) {\n\t\t\t\t\thandleOut._x = coords[i++] - x;\n\t\t\t\t\thandleOut._y = coords[i++] - y;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!handleIn) {\n\t\t\t\t\tcoords[i++] = x;\n\t\t\t\t\tcoords[i++] = y;\n\t\t\t\t}\n\t\t\t\tif (!handleOut) {\n\t\t\t\t\tcoords[i++] = x;\n\t\t\t\t\tcoords[i++] = y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn coords;\n\t}\n});\n\nvar SegmentPoint = Point.extend({\n\tinitialize: function SegmentPoint(point, owner, key) {\n\t\tvar x, y,\n\t\t\tselected;\n\t\tif (!point) {\n\t\t\tx = y = 0;\n\t\t} else if ((x = point[0]) !== undefined) {\n\t\t\ty = point[1];\n\t\t} else {\n\t\t\tvar pt = point;\n\t\t\tif ((x = pt.x) === undefined) {\n\t\t\t\tpt = Point.read(arguments);\n\t\t\t\tx = pt.x;\n\t\t\t}\n\t\t\ty = pt.y;\n\t\t\tselected = pt.selected;\n\t\t}\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner = owner;\n\t\towner[key] = this;\n\t\tif (selected)\n\t\t\tthis.setSelected(true);\n\t},\n\n\t_set: function(x, y) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._owner._changed(this);\n\t\treturn this;\n\t},\n\n\tgetX: function() {\n\t\treturn this._x;\n\t},\n\n\tsetX: function(x) {\n\t\tthis._x = x;\n\t\tthis._owner._changed(this);\n\t},\n\n\tgetY: function() {\n\t\treturn this._y;\n\t},\n\n\tsetY: function(y) {\n\t\tthis._y = y;\n\t\tthis._owner._changed(this);\n\t},\n\n\tisZero: function() {\n\t\tvar isZero = Numerical.isZero;\n\t\treturn isZero(this._x) && isZero(this._y);\n\t},\n\n\tisSelected: function() {\n\t\treturn !!(this._owner._selection & this._getSelection());\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis._owner._changeSelection(this._getSelection(), selected);\n\t},\n\n\t_getSelection: function() {\n\t\tvar owner = this._owner;\n\t\treturn this === owner._point ? 1\n\t\t\t: this === owner._handleIn ? 2\n\t\t\t: this === owner._handleOut ? 4\n\t\t\t: 0;\n\t}\n});\n\nvar Curve = Base.extend({\n\t_class: 'Curve',\n\tbeans: true,\n\n\tinitialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n\t\tvar count = arguments.length,\n\t\t\tseg1, seg2,\n\t\t\tpoint1, point2,\n\t\t\thandle1, handle2;\n\t\tif (count === 3) {\n\t\t\tthis._path = arg0;\n\t\t\tseg1 = arg1;\n\t\t\tseg2 = arg2;\n\t\t} else if (!count) {\n\t\t\tseg1 = new Segment();\n\t\t\tseg2 = new Segment();\n\t\t} else if (count === 1) {\n\t\t\tif ('segment1' in arg0) {\n\t\t\t\tseg1 = new Segment(arg0.segment1);\n\t\t\t\tseg2 = new Segment(arg0.segment2);\n\t\t\t} else if ('point1' in arg0) {\n\t\t\t\tpoint1 = arg0.point1;\n\t\t\t\thandle1 = arg0.handle1;\n\t\t\t\thandle2 = arg0.handle2;\n\t\t\t\tpoint2 = arg0.point2;\n\t\t\t} else if (Array.isArray(arg0)) {\n\t\t\t\tpoint1 = [arg0[0], arg0[1]];\n\t\t\t\tpoint2 = [arg0[6], arg0[7]];\n\t\t\t\thandle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n\t\t\t\thandle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n\t\t\t}\n\t\t} else if (count === 2) {\n\t\t\tseg1 = new Segment(arg0);\n\t\t\tseg2 = new Segment(arg1);\n\t\t} else if (count === 4) {\n\t\t\tpoint1 = arg0;\n\t\t\thandle1 = arg1;\n\t\t\thandle2 = arg2;\n\t\t\tpoint2 = arg3;\n\t\t} else if (count === 8) {\n\t\t\tpoint1 = [arg0, arg1];\n\t\t\tpoint2 = [arg6, arg7];\n\t\t\thandle1 = [arg2 - arg0, arg3 - arg1];\n\t\t\thandle2 = [arg4 - arg6, arg5 - arg7];\n\t\t}\n\t\tthis._segment1 = seg1 || new Segment(point1, null, handle1);\n\t\tthis._segment2 = seg2 || new Segment(point2, handle2, null);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn Base.serialize(this.hasHandles()\n\t\t\t\t? [this.getPoint1(), this.getHandle1(), this.getHandle2(),\n\t\t\t\t\tthis.getPoint2()]\n\t\t\t\t: [this.getPoint1(), this.getPoint2()],\n\t\t\t\toptions, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tthis._length = this._bounds = undefined;\n\t},\n\n\tclone: function() {\n\t\treturn new Curve(this._segment1, this._segment2);\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [ 'point1: ' + this._segment1._point ];\n\t\tif (!this._segment1._handleOut.isZero())\n\t\t\tparts.push('handle1: ' + this._segment1._handleOut);\n\t\tif (!this._segment2._handleIn.isZero())\n\t\t\tparts.push('handle2: ' + this._segment2._handleIn);\n\t\tparts.push('point2: ' + this._segment2._point);\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\tclassify: function() {\n\t\treturn Curve.classify(this.getValues());\n\t},\n\n\tremove: function() {\n\t\tvar removed = false;\n\t\tif (this._path) {\n\t\t\tvar segment2 = this._segment2,\n\t\t\t\thandleOut = segment2._handleOut;\n\t\t\tremoved = segment2.remove();\n\t\t\tif (removed)\n\t\t\t\tthis._segment1._handleOut.set(handleOut);\n\t\t}\n\t\treturn removed;\n\t},\n\n\tgetPoint1: function() {\n\t\treturn this._segment1._point;\n\t},\n\n\tsetPoint1: function() {\n\t\tthis._segment1._point.set(Point.read(arguments));\n\t},\n\n\tgetPoint2: function() {\n\t\treturn this._segment2._point;\n\t},\n\n\tsetPoint2: function() {\n\t\tthis._segment2._point.set(Point.read(arguments));\n\t},\n\n\tgetHandle1: function() {\n\t\treturn this._segment1._handleOut;\n\t},\n\n\tsetHandle1: function() {\n\t\tthis._segment1._handleOut.set(Point.read(arguments));\n\t},\n\n\tgetHandle2: function() {\n\t\treturn this._segment2._handleIn;\n\t},\n\n\tsetHandle2: function() {\n\t\tthis._segment2._handleIn.set(Point.read(arguments));\n\t},\n\n\tgetSegment1: function() {\n\t\treturn this._segment1;\n\t},\n\n\tgetSegment2: function() {\n\t\treturn this._segment2;\n\t},\n\n\tgetPath: function() {\n\t\treturn this._path;\n\t},\n\n\tgetIndex: function() {\n\t\treturn this._segment1._index;\n\t},\n\n\tgetNext: function() {\n\t\tvar curves = this._path && this._path._curves;\n\t\treturn curves && (curves[this._segment1._index + 1]\n\t\t\t\t|| this._path._closed && curves[0]) || null;\n\t},\n\n\tgetPrevious: function() {\n\t\tvar curves = this._path && this._path._curves;\n\t\treturn curves && (curves[this._segment1._index - 1]\n\t\t\t\t|| this._path._closed && curves[curves.length - 1]) || null;\n\t},\n\n\tisFirst: function() {\n\t\treturn !this._segment1._index;\n\t},\n\n\tisLast: function() {\n\t\tvar path = this._path;\n\t\treturn path && this._segment1._index === path._curves.length - 1\n\t\t\t\t|| false;\n\t},\n\n\tisSelected: function() {\n\t\treturn this.getPoint1().isSelected()\n\t\t\t\t&& this.getHandle1().isSelected()\n\t\t\t\t&& this.getHandle2().isSelected()\n\t\t\t\t&& this.getPoint2().isSelected();\n\t},\n\n\tsetSelected: function(selected) {\n\t\tthis.getPoint1().setSelected(selected);\n\t\tthis.getHandle1().setSelected(selected);\n\t\tthis.getHandle2().setSelected(selected);\n\t\tthis.getPoint2().setSelected(selected);\n\t},\n\n\tgetValues: function(matrix) {\n\t\treturn Curve.getValues(this._segment1, this._segment2, matrix);\n\t},\n\n\tgetPoints: function() {\n\t\tvar coords = this.getValues(),\n\t\t\tpoints = [];\n\t\tfor (var i = 0; i < 8; i += 2)\n\t\t\tpoints.push(new Point(coords[i], coords[i + 1]));\n\t\treturn points;\n\t}\n}, {\n\tgetLength: function() {\n\t\tif (this._length == null)\n\t\t\tthis._length = Curve.getLength(this.getValues(), 0, 1);\n\t\treturn this._length;\n\t},\n\n\tgetArea: function() {\n\t\treturn Curve.getArea(this.getValues());\n\t},\n\n\tgetLine: function() {\n\t\treturn new Line(this._segment1._point, this._segment2._point);\n\t},\n\n\tgetPart: function(from, to) {\n\t\treturn new Curve(Curve.getPart(this.getValues(), from, to));\n\t},\n\n\tgetPartLength: function(from, to) {\n\t\treturn Curve.getLength(this.getValues(), from, to);\n\t},\n\n\tdivideAt: function(location) {\n\t\treturn this.divideAtTime(location && location.curve === this\n\t\t\t\t? location.time : this.getTimeAt(location));\n\t},\n\n\tdivideAtTime: function(time, _setHandles) {\n\t\tvar tMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tres = null;\n\t\tif (time >= tMin && time <= tMax) {\n\t\t\tvar parts = Curve.subdivide(this.getValues(), time),\n\t\t\t\tleft = parts[0],\n\t\t\t\tright = parts[1],\n\t\t\t\tsetHandles = _setHandles || this.hasHandles(),\n\t\t\t\tseg1 = this._segment1,\n\t\t\t\tseg2 = this._segment2,\n\t\t\t\tpath = this._path;\n\t\t\tif (setHandles) {\n\t\t\t\tseg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n\t\t\t\tseg2._handleIn._set(right[4] - right[6],right[5] - right[7]);\n\t\t\t}\n\t\t\tvar x = left[6], y = left[7],\n\t\t\t\tsegment = new Segment(new Point(x, y),\n\t\t\t\t\t\tsetHandles && new Point(left[4] - x, left[5] - y),\n\t\t\t\t\t\tsetHandles && new Point(right[2] - x, right[3] - y));\n\t\t\tif (path) {\n\t\t\t\tpath.insert(seg1._index + 1, segment);\n\t\t\t\tres = this.getNext();\n\t\t\t} else {\n\t\t\t\tthis._segment2 = segment;\n\t\t\t\tthis._changed();\n\t\t\t\tres = new Curve(segment, seg2);\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t},\n\n\tsplitAt: function(location) {\n\t\tvar path = this._path;\n\t\treturn path ? path.splitAt(location) : null;\n\t},\n\n\tsplitAtTime: function(time) {\n\t\treturn this.splitAt(this.getLocationAtTime(time));\n\t},\n\n\tdivide: function(offset, isTime) {\n\t\treturn this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset\n\t\t\t\t: this.getTimeAt(offset));\n\t},\n\n\tsplit: function(offset, isTime) {\n\t\treturn this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset\n\t\t\t\t: this.getTimeAt(offset));\n\t},\n\n\treversed: function() {\n\t\treturn new Curve(this._segment2.reversed(), this._segment1.reversed());\n\t},\n\n\tclearHandles: function() {\n\t\tthis._segment1._handleOut._set(0, 0);\n\t\tthis._segment2._handleIn._set(0, 0);\n\t},\n\nstatics: {\n\tgetValues: function(segment1, segment2, matrix, straight) {\n\t\tvar p1 = segment1._point,\n\t\t\th1 = segment1._handleOut,\n\t\t\th2 = segment2._handleIn,\n\t\t\tp2 = segment2._point,\n\t\t\tx1 = p1.x, y1 = p1.y,\n\t\t\tx2 = p2.x, y2 = p2.y,\n\t\t\tvalues = straight\n\t\t\t\t? [ x1, y1, x1, y1, x2, y2, x2, y2 ]\n\t\t\t\t: [\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx1 + h1._x, y1 + h1._y,\n\t\t\t\t\tx2 + h2._x, y2 + h2._y,\n\t\t\t\t\tx2, y2\n\t\t\t\t];\n\t\tif (matrix)\n\t\t\tmatrix._transformCoordinates(values, values, 4);\n\t\treturn values;\n\t},\n\n\tsubdivide: function(v, t) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\tif (t === undefined)\n\t\t\tt = 0.5;\n\t\tvar u = 1 - t,\n\t\t\tx4 = u * x0 + t * x1, y4 = u * y0 + t * y1,\n\t\t\tx5 = u * x1 + t * x2, y5 = u * y1 + t * y2,\n\t\t\tx6 = u * x2 + t * x3, y6 = u * y2 + t * y3,\n\t\t\tx7 = u * x4 + t * x5, y7 = u * y4 + t * y5,\n\t\t\tx8 = u * x5 + t * x6, y8 = u * y5 + t * y6,\n\t\t\tx9 = u * x7 + t * x8, y9 = u * y7 + t * y8;\n\t\treturn [\n\t\t\t[x0, y0, x4, y4, x7, y7, x9, y9],\n\t\t\t[x9, y9, x8, y8, x6, y6, x3, y3]\n\t\t];\n\t},\n\n\tgetMonoCurves: function(v, dir) {\n\t\tvar curves = [],\n\t\t\tio = dir ? 0 : 1,\n\t\t\to0 = v[io + 0],\n\t\t\to1 = v[io + 2],\n\t\t\to2 = v[io + 4],\n\t\t\to3 = v[io + 6];\n\t\tif ((o0 >= o1) === (o1 >= o2) && (o1 >= o2) === (o2 >= o3)\n\t\t\t\t|| Curve.isStraight(v)) {\n\t\t\tcurves.push(v);\n\t\t} else {\n\t\t\tvar a = 3 * (o1 - o2) - o0 + o3,\n\t\t\t\tb = 2 * (o0 + o2) - 4 * o1,\n\t\t\t\tc = o1 - o0,\n\t\t\t\ttMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin,\n\t\t\t\troots = [],\n\t\t\t\tn = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n\t\t\tif (!n) {\n\t\t\t\tcurves.push(v);\n\t\t\t} else {\n\t\t\t\troots.sort();\n\t\t\t\tvar t = roots[0],\n\t\t\t\t\tparts = Curve.subdivide(v, t);\n\t\t\t\tcurves.push(parts[0]);\n\t\t\t\tif (n > 1) {\n\t\t\t\t\tt = (roots[1] - t) / (1 - t);\n\t\t\t\t\tparts = Curve.subdivide(parts[1], t);\n\t\t\t\t\tcurves.push(parts[0]);\n\t\t\t\t}\n\t\t\t\tcurves.push(parts[1]);\n\t\t\t}\n\t\t}\n\t\treturn curves;\n\t},\n\n\tsolveCubic: function (v, coord, val, roots, min, max) {\n\t\tvar v0 = v[coord],\n\t\t\tv1 = v[coord + 2],\n\t\t\tv2 = v[coord + 4],\n\t\t\tv3 = v[coord + 6],\n\t\t\tres = 0;\n\t\tif (  !(v0 < val && v3 < val && v1 < val && v2 < val ||\n\t\t\t\tv0 > val && v3 > val && v1 > val && v2 > val)) {\n\t\t\tvar c = 3 * (v1 - v0),\n\t\t\t\tb = 3 * (v2 - v1) - c,\n\t\t\t\ta = v3 - v0 - c - b;\n\t\t\tres = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n\t\t}\n\t\treturn res;\n\t},\n\n\tgetTimeOf: function(v, point) {\n\t\tvar p0 = new Point(v[0], v[1]),\n\t\t\tp3 = new Point(v[6], v[7]),\n\t\t\tepsilon = 1e-12,\n\t\t\tgeomEpsilon = 1e-7,\n\t\t\tt = point.isClose(p0, epsilon) ? 0\n\t\t\t  : point.isClose(p3, epsilon) ? 1\n\t\t\t  : null;\n\t\tif (t === null) {\n\t\t\tvar coords = [point.x, point.y],\n\t\t\t\troots = [];\n\t\t\tfor (var c = 0; c < 2; c++) {\n\t\t\t\tvar count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n\t\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\t\tvar u = roots[i];\n\t\t\t\t\tif (point.isClose(Curve.getPoint(v, u), geomEpsilon))\n\t\t\t\t\t\treturn u;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn point.isClose(p0, geomEpsilon) ? 0\n\t\t\t : point.isClose(p3, geomEpsilon) ? 1\n\t\t\t : null;\n\t},\n\n\tgetNearestTime: function(v, point) {\n\t\tif (Curve.isStraight(v)) {\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\tvx = x3 - x0, vy = y3 - y0,\n\t\t\t\tdet = vx * vx + vy * vy;\n\t\t\tif (det === 0)\n\t\t\t\treturn 0;\n\t\t\tvar u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n\t\t\treturn u < 1e-12 ? 0\n\t\t\t\t : u > 0.999999999999 ? 1\n\t\t\t\t : Curve.getTimeOf(v,\n\t\t\t\t\tnew Point(x0 + u * vx, y0 + u * vy));\n\t\t}\n\n\t\tvar count = 100,\n\t\t\tminDist = Infinity,\n\t\t\tminT = 0;\n\n\t\tfunction refine(t) {\n\t\t\tif (t >= 0 && t <= 1) {\n\t\t\t\tvar dist = point.getDistance(Curve.getPoint(v, t), true);\n\t\t\t\tif (dist < minDist) {\n\t\t\t\t\tminDist = dist;\n\t\t\t\t\tminT = t;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i <= count; i++)\n\t\t\trefine(i / count);\n\n\t\tvar step = 1 / (count * 2);\n\t\twhile (step > 1e-8) {\n\t\t\tif (!refine(minT - step) && !refine(minT + step))\n\t\t\t\tstep /= 2;\n\t\t}\n\t\treturn minT;\n\t},\n\n\tgetPart: function(v, from, to) {\n\t\tvar flip = from > to;\n\t\tif (flip) {\n\t\t\tvar tmp = from;\n\t\t\tfrom = to;\n\t\t\tto = tmp;\n\t\t}\n\t\tif (from > 0)\n\t\t\tv = Curve.subdivide(v, from)[1];\n\t\tif (to < 1)\n\t\t\tv = Curve.subdivide(v, (to - from) / (1 - from))[0];\n\t\treturn flip\n\t\t\t\t? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]]\n\t\t\t\t: v;\n\t},\n\n\tisFlatEnough: function(v, flatness) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tux = 3 * x1 - 2 * x0 - x3,\n\t\t\tuy = 3 * y1 - 2 * y0 - y3,\n\t\t\tvx = 3 * x2 - 2 * x3 - x0,\n\t\t\tvy = 3 * y2 - 2 * y3 - y0;\n\t\treturn Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy)\n\t\t\t\t<= 16 * flatness * flatness;\n\t},\n\n\tgetArea: function(v) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\treturn 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2)\n\t\t\t\t+ y1 * (x0 - x2) - x1 * (y0 - y2)\n\t\t\t\t+ y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n\t},\n\n\tgetBounds: function(v) {\n\t\tvar min = v.slice(0, 2),\n\t\t\tmax = min.slice(),\n\t\t\troots = [0, 0];\n\t\tfor (var i = 0; i < 2; i++)\n\t\t\tCurve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6],\n\t\t\t\t\ti, 0, min, max, roots);\n\t\treturn new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n\t},\n\n\t_addBounds: function(v0, v1, v2, v3, coord, padding, min, max, roots) {\n\t\tfunction add(value, padding) {\n\t\t\tvar left = value - padding,\n\t\t\t\tright = value + padding;\n\t\t\tif (left < min[coord])\n\t\t\t\tmin[coord] = left;\n\t\t\tif (right > max[coord])\n\t\t\t\tmax[coord] = right;\n\t\t}\n\n\t\tpadding /= 2;\n\t\tvar minPad = min[coord] + padding,\n\t\t\tmaxPad = max[coord] - padding;\n\t\tif (    v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad ||\n\t\t\t\tv0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n\t\t\tif (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n\t\t\t\tadd(v0, 0);\n\t\t\t\tadd(v3, 0);\n\t\t\t} else {\n\t\t\t\tvar a = 3 * (v1 - v2) - v0 + v3,\n\t\t\t\t\tb = 2 * (v0 + v2) - 4 * v1,\n\t\t\t\t\tc = v1 - v0,\n\t\t\t\t\tcount = Numerical.solveQuadratic(a, b, c, roots),\n\t\t\t\t\ttMin = 1e-8,\n\t\t\t\t\ttMax = 1 - tMin;\n\t\t\t\tadd(v3, 0);\n\t\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\t\tvar t = roots[i],\n\t\t\t\t\t\tu = 1 - t;\n\t\t\t\t\tif (tMin <= t && t <= tMax)\n\t\t\t\t\t\tadd(u * u * u * v0\n\t\t\t\t\t\t\t+ 3 * u * u * t * v1\n\t\t\t\t\t\t\t+ 3 * u * t * t * v2\n\t\t\t\t\t\t\t+ t * t * t * v3,\n\t\t\t\t\t\t\tpadding);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}}, Base.each(\n\t['getBounds', 'getStrokeBounds', 'getHandleBounds'],\n\tfunction(name) {\n\t\tthis[name] = function() {\n\t\t\tif (!this._bounds)\n\t\t\t\tthis._bounds = {};\n\t\t\tvar bounds = this._bounds[name];\n\t\t\tif (!bounds) {\n\t\t\t\tbounds = this._bounds[name] = Path[name](\n\t\t\t\t\t\t[this._segment1, this._segment2], false, this._path);\n\t\t\t}\n\t\t\treturn bounds.clone();\n\t\t};\n\t},\n{\n\n}), Base.each({\n\tisStraight: function(p1, h1, h2, p2) {\n\t\tif (h1.isZero() && h2.isZero()) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tvar v = p2.subtract(p1);\n\t\t\tif (v.isZero()) {\n\t\t\t\treturn false;\n\t\t\t} else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n\t\t\t\tvar l = new Line(p1, p2),\n\t\t\t\t\tepsilon = 1e-7;\n\t\t\t\tif (l.getDistance(p1.add(h1)) < epsilon &&\n\t\t\t\t\tl.getDistance(p2.add(h2)) < epsilon) {\n\t\t\t\t\tvar div = v.dot(v),\n\t\t\t\t\t\ts1 = v.dot(h1) / div,\n\t\t\t\t\t\ts2 = v.dot(h2) / div;\n\t\t\t\t\treturn s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tisLinear: function(p1, h1, h2, p2) {\n\t\tvar third = p2.subtract(p1).divide(3);\n\t\treturn h1.equals(third) && h2.negate().equals(third);\n\t}\n}, function(test, name) {\n\tthis[name] = function(epsilon) {\n\t\tvar seg1 = this._segment1,\n\t\t\tseg2 = this._segment2;\n\t\treturn test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point,\n\t\t\t\tepsilon);\n\t};\n\n\tthis.statics[name] = function(v, epsilon) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx3 = v[6], y3 = v[7];\n\t\treturn test(\n\t\t\t\tnew Point(x0, y0),\n\t\t\t\tnew Point(v[2] - x0, v[3] - y0),\n\t\t\t\tnew Point(v[4] - x3, v[5] - y3),\n\t\t\t\tnew Point(x3, y3), epsilon);\n\t};\n}, {\n\tstatics: {},\n\n\thasHandles: function() {\n\t\treturn !this._segment1._handleOut.isZero()\n\t\t\t\t|| !this._segment2._handleIn.isZero();\n\t},\n\n\thasLength: function(epsilon) {\n\t\treturn (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles())\n\t\t\t\t&& this.getLength() > (epsilon || 0);\n\t},\n\n\tisCollinear: function(curve) {\n\t\treturn curve && this.isStraight() && curve.isStraight()\n\t\t\t\t&& this.getLine().isCollinear(curve.getLine());\n\t},\n\n\tisHorizontal: function() {\n\t\treturn this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y)\n\t\t\t\t< 1e-8;\n\t},\n\n\tisVertical: function() {\n\t\treturn this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x)\n\t\t\t\t< 1e-8;\n\t}\n}), {\n\tbeans: false,\n\n\tgetLocationAt: function(offset, _isTime) {\n\t\treturn this.getLocationAtTime(\n\t\t\t\t_isTime ? offset : this.getTimeAt(offset));\n\t},\n\n\tgetLocationAtTime: function(t) {\n\t\treturn t != null && t >= 0 && t <= 1\n\t\t\t\t? new CurveLocation(this, t)\n\t\t\t\t: null;\n\t},\n\n\tgetTimeAt: function(offset, start) {\n\t\treturn Curve.getTimeAt(this.getValues(), offset, start);\n\t},\n\n\tgetParameterAt: '#getTimeAt',\n\n\tgetTimesWithTangent: function () {\n\t\tvar tangent = Point.read(arguments);\n\t\treturn tangent.isZero()\n\t\t\t\t? []\n\t\t\t\t: Curve.getTimesWithTangent(this.getValues(), tangent);\n\t},\n\n\tgetOffsetAtTime: function(t) {\n\t\treturn this.getPartLength(0, t);\n\t},\n\n\tgetLocationOf: function() {\n\t\treturn this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n\t},\n\n\tgetOffsetOf: function() {\n\t\tvar loc = this.getLocationOf.apply(this, arguments);\n\t\treturn loc ? loc.getOffset() : null;\n\t},\n\n\tgetTimeOf: function() {\n\t\treturn Curve.getTimeOf(this.getValues(), Point.read(arguments));\n\t},\n\n\tgetParameterOf: '#getTimeOf',\n\n\tgetNearestLocation: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tvalues = this.getValues(),\n\t\t\tt = Curve.getNearestTime(values, point),\n\t\t\tpt = Curve.getPoint(values, t);\n\t\treturn new CurveLocation(this, t, pt, null, point.getDistance(pt));\n\t},\n\n\tgetNearestPoint: function() {\n\t\tvar loc = this.getNearestLocation.apply(this, arguments);\n\t\treturn loc ? loc.getPoint() : loc;\n\t}\n\n},\nnew function() {\n\tvar methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent',\n\t\t'getWeightedNormal', 'getCurvature'];\n\treturn Base.each(methods,\n\t\tfunction(name) {\n\t\t\tthis[name + 'At'] = function(location, _isTime) {\n\t\t\t\tvar values = this.getValues();\n\t\t\t\treturn Curve[name](values, _isTime ? location\n\t\t\t\t\t\t: Curve.getTimeAt(values, location));\n\t\t\t};\n\n\t\t\tthis[name + 'AtTime'] = function(time) {\n\t\t\t\treturn Curve[name](this.getValues(), time);\n\t\t\t};\n\t\t}, {\n\t\t\tstatics: {\n\t\t\t\t_evaluateMethods: methods\n\t\t\t}\n\t\t}\n\t);\n},\nnew function() {\n\n\tfunction getLengthIntegrand(v) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\n\t\t\tax = 9 * (x1 - x2) + 3 * (x3 - x0),\n\t\t\tbx = 6 * (x0 + x2) - 12 * x1,\n\t\t\tcx = 3 * (x1 - x0),\n\n\t\t\tay = 9 * (y1 - y2) + 3 * (y3 - y0),\n\t\t\tby = 6 * (y0 + y2) - 12 * y1,\n\t\t\tcy = 3 * (y1 - y0);\n\n\t\treturn function(t) {\n\t\t\tvar dx = (ax * t + bx) * t + cx,\n\t\t\t\tdy = (ay * t + by) * t + cy;\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t\t};\n\t}\n\n\tfunction getIterations(a, b) {\n\t\treturn Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n\t}\n\n\tfunction evaluate(v, t, type, normalized) {\n\t\tif (t == null || t < 0 || t > 1)\n\t\t\treturn null;\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tisZero = Numerical.isZero;\n\t\tif (isZero(x1 - x0) && isZero(y1 - y0)) {\n\t\t\tx1 = x0;\n\t\t\ty1 = y0;\n\t\t}\n\t\tif (isZero(x2 - x3) && isZero(y2 - y3)) {\n\t\t\tx2 = x3;\n\t\t\ty2 = y3;\n\t\t}\n\t\tvar cx = 3 * (x1 - x0),\n\t\t\tbx = 3 * (x2 - x1) - cx,\n\t\t\tax = x3 - x0 - cx - bx,\n\t\t\tcy = 3 * (y1 - y0),\n\t\t\tby = 3 * (y2 - y1) - cy,\n\t\t\tay = y3 - y0 - cy - by,\n\t\t\tx, y;\n\t\tif (type === 0) {\n\t\t\tx = t === 0 ? x0 : t === 1 ? x3\n\t\t\t\t\t: ((ax * t + bx) * t + cx) * t + x0;\n\t\t\ty = t === 0 ? y0 : t === 1 ? y3\n\t\t\t\t\t: ((ay * t + by) * t + cy) * t + y0;\n\t\t} else {\n\t\t\tvar tMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin;\n\t\t\tif (t < tMin) {\n\t\t\t\tx = cx;\n\t\t\t\ty = cy;\n\t\t\t} else if (t > tMax) {\n\t\t\t\tx = 3 * (x3 - x2);\n\t\t\t\ty = 3 * (y3 - y2);\n\t\t\t} else {\n\t\t\t\tx = (3 * ax * t + 2 * bx) * t + cx;\n\t\t\t\ty = (3 * ay * t + 2 * by) * t + cy;\n\t\t\t}\n\t\t\tif (normalized) {\n\t\t\t\tif (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n\t\t\t\t\tx = x2 - x1;\n\t\t\t\t\ty = y2 - y1;\n\t\t\t\t}\n\t\t\t\tvar len = Math.sqrt(x * x + y * y);\n\t\t\t\tif (len) {\n\t\t\t\t\tx /= len;\n\t\t\t\t\ty /= len;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (type === 3) {\n\t\t\t\tvar x2 = 6 * ax * t + 2 * bx,\n\t\t\t\t\ty2 = 6 * ay * t + 2 * by,\n\t\t\t\t\td = Math.pow(x * x + y * y, 3 / 2);\n\t\t\t\tx = d !== 0 ? (x * y2 - y * x2) / d : 0;\n\t\t\t\ty = 0;\n\t\t\t}\n\t\t}\n\t\treturn type === 2 ? new Point(y, -x) : new Point(x, y);\n\t}\n\n\treturn { statics: {\n\n\t\tclassify: function(v) {\n\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx1 = v[2], y1 = v[3],\n\t\t\t\tx2 = v[4], y2 = v[5],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\ta1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n\t\t\t\ta2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n\t\t\t\ta3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n\t\t\t\td3 = 3 * a3,\n\t\t\t\td2 = d3 - a2,\n\t\t\t\td1 = d2 - a2 + a1,\n\t\t\t\tl = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n\t\t\t\ts = l !== 0 ? 1 / l : 0,\n\t\t\t\tisZero = Numerical.isZero,\n\t\t\t\tserpentine = 'serpentine';\n\t\t\td1 *= s;\n\t\t\td2 *= s;\n\t\t\td3 *= s;\n\n\t\t\tfunction type(type, t1, t2) {\n\t\t\t\tvar hasRoots = t1 !== undefined,\n\t\t\t\t\tt1Ok = hasRoots && t1 > 0 && t1 < 1,\n\t\t\t\t\tt2Ok = hasRoots && t2 > 0 && t2 < 1;\n\t\t\t\tif (hasRoots && (!(t1Ok || t2Ok)\n\t\t\t\t\t\t|| type === 'loop' && !(t1Ok && t2Ok))) {\n\t\t\t\t\ttype = 'arch';\n\t\t\t\t\tt1Ok = t2Ok = false;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttype: type,\n\t\t\t\t\troots: t1Ok || t2Ok\n\t\t\t\t\t\t\t? t1Ok && t2Ok\n\t\t\t\t\t\t\t\t? t1 < t2 ? [t1, t2] : [t2, t1]\n\t\t\t\t\t\t\t\t: [t1Ok ? t1 : t2]\n\t\t\t\t\t\t\t: null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (isZero(d1)) {\n\t\t\t\treturn isZero(d2)\n\t\t\t\t\t\t? type(isZero(d3) ? 'line' : 'quadratic')\n\t\t\t\t\t\t: type(serpentine, d3 / (3 * d2));\n\t\t\t}\n\t\t\tvar d = 3 * d2 * d2 - 4 * d1 * d3;\n\t\t\tif (isZero(d)) {\n\t\t\t\treturn type('cusp', d2 / (2 * d1));\n\t\t\t}\n\t\t\tvar f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n\t\t\t\tf2 = 2 * d1;\n\t\t\treturn type(d > 0 ? serpentine : 'loop',\n\t\t\t\t\t(d2 + f1) / f2,\n\t\t\t\t\t(d2 - f1) / f2);\n\t\t},\n\n\t\tgetLength: function(v, a, b, ds) {\n\t\t\tif (a === undefined)\n\t\t\t\ta = 0;\n\t\t\tif (b === undefined)\n\t\t\t\tb = 1;\n\t\t\tif (Curve.isStraight(v)) {\n\t\t\t\tvar c = v;\n\t\t\t\tif (b < 1) {\n\t\t\t\t\tc = Curve.subdivide(c, b)[0];\n\t\t\t\t\ta /= b;\n\t\t\t\t}\n\t\t\t\tif (a > 0) {\n\t\t\t\t\tc = Curve.subdivide(c, a)[1];\n\t\t\t\t}\n\t\t\t\tvar dx = c[6] - c[0],\n\t\t\t\t\tdy = c[7] - c[1];\n\t\t\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t\t\t}\n\t\t\treturn Numerical.integrate(ds || getLengthIntegrand(v), a, b,\n\t\t\t\t\tgetIterations(a, b));\n\t\t},\n\n\t\tgetTimeAt: function(v, offset, start) {\n\t\t\tif (start === undefined)\n\t\t\t\tstart = offset < 0 ? 1 : 0;\n\t\t\tif (offset === 0)\n\t\t\t\treturn start;\n\t\t\tvar abs = Math.abs,\n\t\t\t\tepsilon = 1e-12,\n\t\t\t\tforward = offset > 0,\n\t\t\t\ta = forward ? start : 0,\n\t\t\t\tb = forward ? 1 : start,\n\t\t\t\tds = getLengthIntegrand(v),\n\t\t\t\trangeLength = Curve.getLength(v, a, b, ds),\n\t\t\t\tdiff = abs(offset) - rangeLength;\n\t\t\tif (abs(diff) < epsilon) {\n\t\t\t\treturn forward ? b : a;\n\t\t\t} else if (diff > epsilon) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar guess = offset / rangeLength,\n\t\t\t\tlength = 0;\n\t\t\tfunction f(t) {\n\t\t\t\tlength += Numerical.integrate(ds, start, t,\n\t\t\t\t\t\tgetIterations(start, t));\n\t\t\t\tstart = t;\n\t\t\t\treturn length - offset;\n\t\t\t}\n\t\t\treturn Numerical.findRoot(f, ds, start + guess, a, b, 32,\n\t\t\t\t\t1e-12);\n\t\t},\n\n\t\tgetPoint: function(v, t) {\n\t\t\treturn evaluate(v, t, 0, false);\n\t\t},\n\n\t\tgetTangent: function(v, t) {\n\t\t\treturn evaluate(v, t, 1, true);\n\t\t},\n\n\t\tgetWeightedTangent: function(v, t) {\n\t\t\treturn evaluate(v, t, 1, false);\n\t\t},\n\n\t\tgetNormal: function(v, t) {\n\t\t\treturn evaluate(v, t, 2, true);\n\t\t},\n\n\t\tgetWeightedNormal: function(v, t) {\n\t\t\treturn evaluate(v, t, 2, false);\n\t\t},\n\n\t\tgetCurvature: function(v, t) {\n\t\t\treturn evaluate(v, t, 3, false).x;\n\t\t},\n\n\t\tgetPeaks: function(v) {\n\t\t\tvar x0 = v[0], y0 = v[1],\n\t\t\t\tx1 = v[2], y1 = v[3],\n\t\t\t\tx2 = v[4], y2 = v[5],\n\t\t\t\tx3 = v[6], y3 = v[7],\n\t\t\t\tax =     -x0 + 3 * x1 - 3 * x2 + x3,\n\t\t\t\tbx =  3 * x0 - 6 * x1 + 3 * x2,\n\t\t\t\tcx = -3 * x0 + 3 * x1,\n\t\t\t\tay =     -y0 + 3 * y1 - 3 * y2 + y3,\n\t\t\t\tby =  3 * y0 - 6 * y1 + 3 * y2,\n\t\t\t\tcy = -3 * y0 + 3 * y1,\n\t\t\t\ttMin = 1e-8,\n\t\t\t\ttMax = 1 - tMin,\n\t\t\t\troots = [];\n\t\t\tNumerical.solveCubic(\n\t\t\t\t\t9 * (ax * ax + ay * ay),\n\t\t\t\t\t9 * (ax * bx + by * ay),\n\t\t\t\t\t2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay),\n\t\t\t\t\t(cx * bx + by * cy),\n\t\t\t\t\troots, tMin, tMax);\n\t\t\treturn roots.sort();\n\t\t}\n\t}};\n},\nnew function() {\n\n\tfunction addLocation(locations, include, c1, t1, c2, t2, overlap) {\n\t\tvar excludeStart = !overlap && c1.getPrevious() === c2,\n\t\t\texcludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin;\n\t\tif (t1 !== null && t1 >= (excludeStart ? tMin : 0) &&\n\t\t\tt1 <= (excludeEnd ? tMax : 1)) {\n\t\t\tif (t2 !== null && t2 >= (excludeEnd ? tMin : 0) &&\n\t\t\t\tt2 <= (excludeStart ? tMax : 1)) {\n\t\t\t\tvar loc1 = new CurveLocation(c1, t1, null, overlap),\n\t\t\t\t\tloc2 = new CurveLocation(c2, t2, null, overlap);\n\t\t\t\tloc1._intersection = loc2;\n\t\t\t\tloc2._intersection = loc1;\n\t\t\t\tif (!include || include(loc1)) {\n\t\t\t\t\tCurveLocation.insert(locations, loc1, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addCurveIntersections(v1, v2, c1, c2, locations, include, flip,\n\t\t\trecursion, calls, tMin, tMax, uMin, uMax) {\n\t\tif (++calls >= 4096 || ++recursion >= 40)\n\t\t\treturn calls;\n\t\tvar fatLineEpsilon = 1e-9,\n\t\t\tq0x = v2[0], q0y = v2[1], q3x = v2[6], q3y = v2[7],\n\t\t\tgetSignedDistance = Line.getSignedDistance,\n\t\t\td1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n\t\t\td2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n\t\t\tfactor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n\t\t\tdMin = factor * Math.min(0, d1, d2),\n\t\t\tdMax = factor * Math.max(0, d1, d2),\n\t\t\tdp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n\t\t\tdp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n\t\t\tdp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n\t\t\tdp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n\t\t\thull = getConvexHull(dp0, dp1, dp2, dp3),\n\t\t\ttop = hull[0],\n\t\t\tbottom = hull[1],\n\t\t\ttMinClip,\n\t\t\ttMaxClip;\n\t\tif (d1 === 0 && d2 === 0\n\t\t\t\t&& dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0\n\t\t\t|| (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null\n\t\t\t|| (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(),\n\t\t\t\tdMin, dMax)) == null)\n\t\t\treturn calls;\n\t\tvar tMinNew = tMin + (tMax - tMin) * tMinClip,\n\t\t\ttMaxNew = tMin + (tMax - tMin) * tMaxClip;\n\t\tif (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n\t\t\tvar t = (tMinNew + tMaxNew) / 2,\n\t\t\t\tu = (uMin + uMax) / 2;\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tflip ? c2 : c1, flip ? u : t,\n\t\t\t\t\tflip ? c1 : c2, flip ? t : u);\n\t\t} else {\n\t\t\tv1 = Curve.getPart(v1, tMinClip, tMaxClip);\n\t\t\tvar uDiff = uMax - uMin;\n\t\t\tif (tMaxClip - tMinClip > 0.8) {\n\t\t\t\tif (tMaxNew - tMinNew > uDiff) {\n\t\t\t\t\tvar parts = Curve.subdivide(v1, 0.5),\n\t\t\t\t\t\tt = (tMinNew + tMaxNew) / 2;\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, parts[0], c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, tMinNew, t);\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, parts[1], c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, t, tMaxNew);\n\t\t\t\t} else {\n\t\t\t\t\tvar parts = Curve.subdivide(v2, 0.5),\n\t\t\t\t\t\tu = (uMin + uMax) / 2;\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tparts[0], v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, u, tMinNew, tMaxNew);\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tparts[1], v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, u, uMax, tMinNew, tMaxNew);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (uDiff === 0 || uDiff >= fatLineEpsilon) {\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv2, v1, c2, c1, locations, include, !flip,\n\t\t\t\t\t\t\trecursion, calls, uMin, uMax, tMinNew, tMaxNew);\n\t\t\t\t} else {\n\t\t\t\t\tcalls = addCurveIntersections(\n\t\t\t\t\t\t\tv1, v2, c1, c2, locations, include, flip,\n\t\t\t\t\t\t\trecursion, calls, tMinNew, tMaxNew, uMin, uMax);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn calls;\n\t}\n\n\tfunction getConvexHull(dq0, dq1, dq2, dq3) {\n\t\tvar p0 = [ 0, dq0 ],\n\t\t\tp1 = [ 1 / 3, dq1 ],\n\t\t\tp2 = [ 2 / 3, dq2 ],\n\t\t\tp3 = [ 1, dq3 ],\n\t\t\tdist1 = dq1 - (2 * dq0 + dq3) / 3,\n\t\t\tdist2 = dq2 - (dq0 + 2 * dq3) / 3,\n\t\t\thull;\n\t\tif (dist1 * dist2 < 0) {\n\t\t\thull = [[p0, p1, p3], [p0, p2, p3]];\n\t\t} else {\n\t\t\tvar distRatio = dist1 / dist2;\n\t\t\thull = [\n\t\t\t\tdistRatio >= 2 ? [p0, p1, p3]\n\t\t\t\t: distRatio <= 0.5 ? [p0, p2, p3]\n\t\t\t\t: [p0, p1, p2, p3],\n\t\t\t\t[p0, p3]\n\t\t\t];\n\t\t}\n\t\treturn (dist1 || dist2) < 0 ? hull.reverse() : hull;\n\t}\n\n\tfunction clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n\t\tif (hullTop[0][1] < dMin) {\n\t\t\treturn clipConvexHullPart(hullTop, true, dMin);\n\t\t} else if (hullBottom[0][1] > dMax) {\n\t\t\treturn clipConvexHullPart(hullBottom, false, dMax);\n\t\t} else {\n\t\t\treturn hullTop[0][0];\n\t\t}\n\t}\n\n\tfunction clipConvexHullPart(part, top, threshold) {\n\t\tvar px = part[0][0],\n\t\t\tpy = part[0][1];\n\t\tfor (var i = 1, l = part.length; i < l; i++) {\n\t\t\tvar qx = part[i][0],\n\t\t\t\tqy = part[i][1];\n\t\t\tif (top ? qy >= threshold : qy <= threshold) {\n\t\t\t\treturn qy === threshold ? qx\n\t\t\t\t\t\t: px + (threshold - py) * (qx - px) / (qy - py);\n\t\t\t}\n\t\t\tpx = qx;\n\t\t\tpy = qy;\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction getCurveLineIntersections(v, px, py, vx, vy) {\n\t\tvar isZero = Numerical.isZero;\n\t\tif (isZero(vx) && isZero(vy)) {\n\t\t\tvar t = Curve.getTimeOf(v, new Point(px, py));\n\t\t\treturn t === null ? [] : [t];\n\t\t}\n\t\tvar angle = Math.atan2(-vy, vx),\n\t\t\tsin = Math.sin(angle),\n\t\t\tcos = Math.cos(angle),\n\t\t\trv = [],\n\t\t\troots = [];\n\t\tfor (var i = 0; i < 8; i += 2) {\n\t\t\tvar x = v[i] - px,\n\t\t\t\ty = v[i + 1] - py;\n\t\t\trv.push(\n\t\t\t\tx * cos - y * sin,\n\t\t\t\tx * sin + y * cos);\n\t\t}\n\t\tCurve.solveCubic(rv, 1, 0, roots, 0, 1);\n\t\treturn roots;\n\t}\n\n\tfunction addCurveLineIntersections(v1, v2, c1, c2, locations, include,\n\t\t\tflip) {\n\t\tvar x1 = v2[0], y1 = v2[1],\n\t\t\tx2 = v2[6], y2 = v2[7],\n\t\t\troots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n\t\tfor (var i = 0, l = roots.length; i < l; i++) {\n\t\t\tvar t1 = roots[i],\n\t\t\t\tp1 = Curve.getPoint(v1, t1),\n\t\t\t\tt2 = Curve.getTimeOf(v2, p1);\n\t\t\tif (t2 !== null) {\n\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\tflip ? c2 : c1, flip ? t2 : t1,\n\t\t\t\t\t\tflip ? c1 : c2, flip ? t1 : t2);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addLineIntersection(v1, v2, c1, c2, locations, include) {\n\t\tvar pt = Line.intersect(\n\t\t\t\tv1[0], v1[1], v1[6], v1[7],\n\t\t\t\tv2[0], v2[1], v2[6], v2[7]);\n\t\tif (pt) {\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tc1, Curve.getTimeOf(v1, pt),\n\t\t\t\t\tc2, Curve.getTimeOf(v2, pt));\n\t\t}\n\t}\n\n\tfunction getCurveIntersections(v1, v2, c1, c2, locations, include) {\n\t\tvar epsilon = 1e-12,\n\t\t\tmin = Math.min,\n\t\t\tmax = Math.max;\n\n\t\tif (max(v1[0], v1[2], v1[4], v1[6]) + epsilon >\n\t\t\tmin(v2[0], v2[2], v2[4], v2[6]) &&\n\t\t\tmin(v1[0], v1[2], v1[4], v1[6]) - epsilon <\n\t\t\tmax(v2[0], v2[2], v2[4], v2[6]) &&\n\t\t\tmax(v1[1], v1[3], v1[5], v1[7]) + epsilon >\n\t\t\tmin(v2[1], v2[3], v2[5], v2[7]) &&\n\t\t\tmin(v1[1], v1[3], v1[5], v1[7]) - epsilon <\n\t\t\tmax(v2[1], v2[3], v2[5], v2[7])) {\n\t\t\tvar overlaps = getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tfor (var i = 0; i < 2; i++) {\n\t\t\t\t\tvar overlap = overlaps[i];\n\t\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\t\tc1, overlap[0],\n\t\t\t\t\t\t\tc2, overlap[1], true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar straight1 = Curve.isStraight(v1),\n\t\t\t\t\tstraight2 = Curve.isStraight(v2),\n\t\t\t\t\tstraight = straight1 && straight2,\n\t\t\t\t\tflip = straight1 && !straight2,\n\t\t\t\t\tbefore = locations.length;\n\t\t\t\t(straight\n\t\t\t\t\t? addLineIntersection\n\t\t\t\t\t: straight1 || straight2\n\t\t\t\t\t\t? addCurveLineIntersections\n\t\t\t\t\t\t: addCurveIntersections)(\n\t\t\t\t\t\t\tflip ? v2 : v1, flip ? v1 : v2,\n\t\t\t\t\t\t\tflip ? c2 : c1, flip ? c1 : c2,\n\t\t\t\t\t\t\tlocations, include, flip,\n\t\t\t\t\t\t\t0, 0, 0, 1, 0, 1);\n\t\t\t\tif (!straight || locations.length === before) {\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\t\tvar t1 = i >> 1,\n\t\t\t\t\t\t\tt2 = i & 1,\n\t\t\t\t\t\t\ti1 = t1 * 6,\n\t\t\t\t\t\t\ti2 = t2 * 6,\n\t\t\t\t\t\t\tp1 = new Point(v1[i1], v1[i1 + 1]),\n\t\t\t\t\t\t\tp2 = new Point(v2[i2], v2[i2 + 1]);\n\t\t\t\t\t\tif (p1.isClose(p2, epsilon)) {\n\t\t\t\t\t\t\taddLocation(locations, include,\n\t\t\t\t\t\t\t\t\tc1, t1,\n\t\t\t\t\t\t\t\t\tc2, t2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn locations;\n\t}\n\n\tfunction getSelfIntersection(v1, c1, locations, include) {\n\t\tvar info = Curve.classify(v1);\n\t\tif (info.type === 'loop') {\n\t\t\tvar roots = info.roots;\n\t\t\taddLocation(locations, include,\n\t\t\t\t\tc1, roots[0],\n\t\t\t\t\tc1, roots[1]);\n\t\t}\n\t  return locations;\n\t}\n\n\tfunction getIntersections(curves1, curves2, include, matrix1, matrix2,\n\t\t\t_returnFirst) {\n\t\tvar epsilon = 1e-7,\n\t\t\tself = !curves2;\n\t\tif (self)\n\t\t\tcurves2 = curves1;\n\t\tvar length1 = curves1.length,\n\t\t\tlength2 = curves2.length,\n\t\t\tvalues1 = new Array(length1),\n\t\t\tvalues2 = self ? values1 : new Array(length2),\n\t\t\tlocations = [];\n\n\t\tfor (var i = 0; i < length1; i++) {\n\t\t\tvalues1[i] = curves1[i].getValues(matrix1);\n\t\t}\n\t\tif (!self) {\n\t\t\tfor (var i = 0; i < length2; i++) {\n\t\t\t\tvalues2[i] = curves2[i].getValues(matrix2);\n\t\t\t}\n\t\t}\n\t\tvar boundsCollisions = CollisionDetection.findCurveBoundsCollisions(\n\t\t\t\tvalues1, values2, epsilon);\n\t\tfor (var index1 = 0; index1 < length1; index1++) {\n\t\t\tvar curve1 = curves1[index1],\n\t\t\t\tv1 = values1[index1];\n\t\t\tif (self) {\n\t\t\t\tgetSelfIntersection(v1, curve1, locations, include);\n\t\t\t}\n\t\t\tvar collisions1 = boundsCollisions[index1];\n\t\t\tif (collisions1) {\n\t\t\t\tfor (var j = 0; j < collisions1.length; j++) {\n\t\t\t\t\tif (_returnFirst && locations.length)\n\t\t\t\t\t\treturn locations;\n\t\t\t\t\tvar index2 = collisions1[j];\n\t\t\t\t\tif (!self || index2 > index1) {\n\t\t\t\t\t\tvar curve2 = curves2[index2],\n\t\t\t\t\t\t\tv2 = values2[index2];\n\t\t\t\t\t\tgetCurveIntersections(\n\t\t\t\t\t\t\t\tv1, v2, curve1, curve2, locations, include);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn locations;\n\t}\n\n\tfunction getOverlaps(v1, v2) {\n\n\t\tfunction getSquaredLineLength(v) {\n\t\t\tvar x = v[6] - v[0],\n\t\t\t\ty = v[7] - v[1];\n\t\t\treturn x * x + y * y;\n\t\t}\n\n\t\tvar abs = Math.abs,\n\t\t\tgetDistance = Line.getDistance,\n\t\t\ttimeEpsilon = 1e-8,\n\t\t\tgeomEpsilon = 1e-7,\n\t\t\tstraight1 = Curve.isStraight(v1),\n\t\t\tstraight2 = Curve.isStraight(v2),\n\t\t\tstraightBoth = straight1 && straight2,\n\t\t\tflip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n\t\t\tl1 = flip ? v2 : v1,\n\t\t\tl2 = flip ? v1 : v2,\n\t\t\tpx = l1[0], py = l1[1],\n\t\t\tvx = l1[6] - px, vy = l1[7] - py;\n\t\tif (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon &&\n\t\t\tgetDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n\t\t\tif (!straightBoth &&\n\t\t\t\tgetDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon &&\n\t\t\t\tgetDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n\t\t\t\tstraight1 = straight2 = straightBoth = true;\n\t\t\t}\n\t\t} else if (straightBoth) {\n\t\t\treturn null;\n\t\t}\n\t\tif (straight1 ^ straight2) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar v = [v1, v2],\n\t\t\tpairs = [];\n\t\tfor (var i = 0; i < 4 && pairs.length < 2; i++) {\n\t\t\tvar i1 = i & 1,\n\t\t\t\ti2 = i1 ^ 1,\n\t\t\t\tt1 = i >> 1,\n\t\t\t\tt2 = Curve.getTimeOf(v[i1], new Point(\n\t\t\t\t\tv[i2][t1 ? 6 : 0],\n\t\t\t\t\tv[i2][t1 ? 7 : 1]));\n\t\t\tif (t2 != null) {\n\t\t\t\tvar pair = i1 ? [t1, t2] : [t2, t1];\n\t\t\t\tif (!pairs.length ||\n\t\t\t\t\tabs(pair[0] - pairs[0][0]) > timeEpsilon &&\n\t\t\t\t\tabs(pair[1] - pairs[0][1]) > timeEpsilon) {\n\t\t\t\t\tpairs.push(pair);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i > 2 && !pairs.length)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (pairs.length !== 2) {\n\t\t\tpairs = null;\n\t\t} else if (!straightBoth) {\n\t\t\tvar o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n\t\t\t\to2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n\t\t\tif (abs(o2[2] - o1[2]) > geomEpsilon ||\n\t\t\t\tabs(o2[3] - o1[3]) > geomEpsilon ||\n\t\t\t\tabs(o2[4] - o1[4]) > geomEpsilon ||\n\t\t\t\tabs(o2[5] - o1[5]) > geomEpsilon)\n\t\t\t\tpairs = null;\n\t\t}\n\t\treturn pairs;\n\t}\n\n\tfunction getTimesWithTangent(v, tangent) {\n\t\tvar x0 = v[0], y0 = v[1],\n\t\t\tx1 = v[2], y1 = v[3],\n\t\t\tx2 = v[4], y2 = v[5],\n\t\t\tx3 = v[6], y3 = v[7],\n\t\t\tnormalized = tangent.normalize(),\n\t\t\ttx = normalized.x,\n\t\t\tty = normalized.y,\n\t\t\tax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n\t\t\tay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n\t\t\tbx = 6 * x2 - 12 * x1 + 6 * x0,\n\t\t\tby = 6 * y2 - 12 * y1 + 6 * y0,\n\t\t\tcx = 3 * x1 - 3 * x0,\n\t\t\tcy = 3 * y1 - 3 * y0,\n\t\t\tden = 2 * ax * ty - 2 * ay * tx,\n\t\t\ttimes = [];\n\t\tif (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n\t\t\tvar num = ax * cy - ay * cx,\n\t\t\t\tden = ax * by - ay * bx;\n\t\t\tif (den != 0) {\n\t\t\t\tvar t = -num / den;\n\t\t\t\tif (t >= 0 && t <= 1) times.push(t);\n\t\t\t}\n\t\t} else {\n\t\t\tvar delta = (bx * bx - 4 * ax * cx) * ty * ty +\n\t\t\t\t(-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty +\n\t\t\t\t(by * by - 4 * ay * cy) * tx * tx,\n\t\t\t\tk = bx * ty - by * tx;\n\t\t\tif (delta >= 0 && den != 0) {\n\t\t\t\tvar d = Math.sqrt(delta),\n\t\t\t\t\tt0 = -(k + d) / den,\n\t\t\t\t\tt1 = (-k + d) / den;\n\t\t\t\tif (t0 >= 0 && t0 <= 1) times.push(t0);\n\t\t\t\tif (t1 >= 0 && t1 <= 1) times.push(t1);\n\t\t\t}\n\t\t}\n\t\treturn times;\n\t}\n\n\treturn {\n\t\tgetIntersections: function(curve) {\n\t\t\tvar v1 = this.getValues(),\n\t\t\t\tv2 = curve && curve !== this && curve.getValues();\n\t\t\treturn v2 ? getCurveIntersections(v1, v2, this, curve, [])\n\t\t\t\t\t  : getSelfIntersection(v1, this, []);\n\t\t},\n\n\t\tstatics: {\n\t\t\tgetOverlaps: getOverlaps,\n\t\t\tgetIntersections: getIntersections,\n\t\t\tgetCurveLineIntersections: getCurveLineIntersections,\n\t\t\tgetTimesWithTangent: getTimesWithTangent\n\t\t}\n\t};\n});\n\nvar CurveLocation = Base.extend({\n\t_class: 'CurveLocation',\n\n\tinitialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n\t\tif (time >= 0.99999999) {\n\t\t\tvar next = curve.getNext();\n\t\t\tif (next) {\n\t\t\t\ttime = 0;\n\t\t\t\tcurve = next;\n\t\t\t}\n\t\t}\n\t\tthis._setCurve(curve);\n\t\tthis._time = time;\n\t\tthis._point = point || curve.getPointAtTime(time);\n\t\tthis._overlap = _overlap;\n\t\tthis._distance = _distance;\n\t\tthis._intersection = this._next = this._previous = null;\n\t},\n\n\t_setPath: function(path) {\n\t\tthis._path = path;\n\t\tthis._version = path ? path._version : 0;\n\t},\n\n\t_setCurve: function(curve) {\n\t\tthis._setPath(curve._path);\n\t\tthis._curve = curve;\n\t\tthis._segment = null;\n\t\tthis._segment1 = curve._segment1;\n\t\tthis._segment2 = curve._segment2;\n\t},\n\n\t_setSegment: function(segment) {\n\t\tvar curve = segment.getCurve();\n\t\tif (curve) {\n\t\t\tthis._setCurve(curve);\n\t\t} else {\n\t\t\tthis._setPath(segment._path);\n\t\t\tthis._segment1 = segment;\n\t\t\tthis._segment2 = null;\n\t\t}\n\t\tthis._segment = segment;\n\t\tthis._time = segment === this._segment1 ? 0 : 1;\n\t\tthis._point = segment._point.clone();\n\t},\n\n\tgetSegment: function() {\n\t\tvar segment = this._segment;\n\t\tif (!segment) {\n\t\t\tvar curve = this.getCurve(),\n\t\t\t\ttime = this.getTime();\n\t\t\tif (time === 0) {\n\t\t\t\tsegment = curve._segment1;\n\t\t\t} else if (time === 1) {\n\t\t\t\tsegment = curve._segment2;\n\t\t\t} else if (time != null) {\n\t\t\t\tsegment = curve.getPartLength(0, time)\n\t\t\t\t\t< curve.getPartLength(time, 1)\n\t\t\t\t\t\t? curve._segment1\n\t\t\t\t\t\t: curve._segment2;\n\t\t\t}\n\t\t\tthis._segment = segment;\n\t\t}\n\t\treturn segment;\n\t},\n\n\tgetCurve: function() {\n\t\tvar path = this._path,\n\t\t\tthat = this;\n\t\tif (path && path._version !== this._version) {\n\t\t\tthis._time = this._offset = this._curveOffset = this._curve = null;\n\t\t}\n\n\t\tfunction trySegment(segment) {\n\t\t\tvar curve = segment && segment.getCurve();\n\t\t\tif (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n\t\t\t\tthat._setCurve(curve);\n\t\t\t\treturn curve;\n\t\t\t}\n\t\t}\n\n\t\treturn this._curve\n\t\t\t|| trySegment(this._segment)\n\t\t\t|| trySegment(this._segment1)\n\t\t\t|| trySegment(this._segment2.getPrevious());\n\t},\n\n\tgetPath: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve && curve._path;\n\t},\n\n\tgetIndex: function() {\n\t\tvar curve = this.getCurve();\n\t\treturn curve && curve.getIndex();\n\t},\n\n\tgetTime: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\ttime = this._time;\n\t\treturn curve && time == null\n\t\t\t? this._time = curve.getTimeOf(this._point)\n\t\t\t: time;\n\t},\n\n\tgetParameter: '#getTime',\n\n\tgetPoint: function() {\n\t\treturn this._point;\n\t},\n\n\tgetOffset: function() {\n\t\tvar offset = this._offset;\n\t\tif (offset == null) {\n\t\t\toffset = 0;\n\t\t\tvar path = this.getPath(),\n\t\t\t\tindex = this.getIndex();\n\t\t\tif (path && index != null) {\n\t\t\t\tvar curves = path.getCurves();\n\t\t\t\tfor (var i = 0; i < index; i++)\n\t\t\t\t\toffset += curves[i].getLength();\n\t\t\t}\n\t\t\tthis._offset = offset += this.getCurveOffset();\n\t\t}\n\t\treturn offset;\n\t},\n\n\tgetCurveOffset: function() {\n\t\tvar offset = this._curveOffset;\n\t\tif (offset == null) {\n\t\t\tvar curve = this.getCurve(),\n\t\t\t\ttime = this.getTime();\n\t\t\tthis._curveOffset = offset = time != null && curve\n\t\t\t\t\t&& curve.getPartLength(0, time);\n\t\t}\n\t\treturn offset;\n\t},\n\n\tgetIntersection: function() {\n\t\treturn this._intersection;\n\t},\n\n\tgetDistance: function() {\n\t\treturn this._distance;\n\t},\n\n\tdivide: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\tres = curve && curve.divideAtTime(this.getTime());\n\t\tif (res) {\n\t\t\tthis._setSegment(res._segment1);\n\t\t}\n\t\treturn res;\n\t},\n\n\tsplit: function() {\n\t\tvar curve = this.getCurve(),\n\t\t\tpath = curve._path,\n\t\t\tres = curve && curve.splitAtTime(this.getTime());\n\t\tif (res) {\n\t\t\tthis._setSegment(path.getLastSegment());\n\t\t}\n\t\treturn  res;\n\t},\n\n\tequals: function(loc, _ignoreOther) {\n\t\tvar res = this === loc;\n\t\tif (!res && loc instanceof CurveLocation) {\n\t\t\tvar c1 = this.getCurve(),\n\t\t\t\tc2 = loc.getCurve(),\n\t\t\t\tp1 = c1._path,\n\t\t\t\tp2 = c2._path;\n\t\t\tif (p1 === p2) {\n\t\t\t\tvar abs = Math.abs,\n\t\t\t\t\tepsilon = 1e-7,\n\t\t\t\t\tdiff = abs(this.getOffset() - loc.getOffset()),\n\t\t\t\t\ti1 = !_ignoreOther && this._intersection,\n\t\t\t\t\ti2 = !_ignoreOther && loc._intersection;\n\t\t\t\tres = (diff < epsilon\n\t\t\t\t\t\t|| p1 && abs(p1.getLength() - diff) < epsilon)\n\t\t\t\t\t&& (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t},\n\n\ttoString: function() {\n\t\tvar parts = [],\n\t\t\tpoint = this.getPoint(),\n\t\t\tf = Formatter.instance;\n\t\tif (point)\n\t\t\tparts.push('point: ' + point);\n\t\tvar index = this.getIndex();\n\t\tif (index != null)\n\t\t\tparts.push('index: ' + index);\n\t\tvar time = this.getTime();\n\t\tif (time != null)\n\t\t\tparts.push('time: ' + f.number(time));\n\t\tif (this._distance != null)\n\t\t\tparts.push('distance: ' + f.number(this._distance));\n\t\treturn '{ ' + parts.join(', ') + ' }';\n\t},\n\n\tisTouching: function() {\n\t\tvar inter = this._intersection;\n\t\tif (inter && this.getTangent().isCollinear(inter.getTangent())) {\n\t\t\tvar curve1 = this.getCurve(),\n\t\t\t\tcurve2 = inter.getCurve();\n\t\t\treturn !(curve1.isStraight() && curve2.isStraight()\n\t\t\t\t\t&& curve1.getLine().intersect(curve2.getLine()));\n\t\t}\n\t\treturn false;\n\t},\n\n\tisCrossing: function() {\n\t\tvar inter = this._intersection;\n\t\tif (!inter)\n\t\t\treturn false;\n\t\tvar t1 = this.getTime(),\n\t\t\tt2 = inter.getTime(),\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tt1Inside = t1 >= tMin && t1 <= tMax,\n\t\t\tt2Inside = t2 >= tMin && t2 <= tMax;\n\t\tif (t1Inside && t2Inside)\n\t\t\treturn !this.isTouching();\n\t\tvar c2 = this.getCurve(),\n\t\t\tc1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n\t\t\tc4 = inter.getCurve(),\n\t\t\tc3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n\t\tif (t1 > tMax)\n\t\t\tc2 = c2.getNext();\n\t\tif (t2 > tMax)\n\t\t\tc4 = c4.getNext();\n\t\tif (!c1 || !c2 || !c3 || !c4)\n\t\t\treturn false;\n\n\t\tvar offsets = [];\n\n\t\tfunction addOffsets(curve, end) {\n\t\t\tvar v = curve.getValues(),\n\t\t\t\troots = Curve.classify(v).roots || Curve.getPeaks(v),\n\t\t\t\tcount = roots.length,\n\t\t\t\toffset = Curve.getLength(v,\n\t\t\t\t\tend && count ? roots[count - 1] : 0,\n\t\t\t\t\t!end && count ? roots[0] : 1);\n\t\t\toffsets.push(count ? offset : offset / 32);\n\t\t}\n\n\t\tfunction isInRange(angle, min, max) {\n\t\t\treturn min < max\n\t\t\t\t\t? angle > min && angle < max\n\t\t\t\t\t: angle > min || angle < max;\n\t\t}\n\n\t\tif (!t1Inside) {\n\t\t\taddOffsets(c1, true);\n\t\t\taddOffsets(c2, false);\n\t\t}\n\t\tif (!t2Inside) {\n\t\t\taddOffsets(c3, true);\n\t\t\taddOffsets(c4, false);\n\t\t}\n\t\tvar pt = this.getPoint(),\n\t\t\toffset = Math.min.apply(Math, offsets),\n\t\t\tv2 = t1Inside ? c2.getTangentAtTime(t1)\n\t\t\t\t\t: c2.getPointAt(offset).subtract(pt),\n\t\t\tv1 = t1Inside ? v2.negate()\n\t\t\t\t\t: c1.getPointAt(-offset).subtract(pt),\n\t\t\tv4 = t2Inside ? c4.getTangentAtTime(t2)\n\t\t\t\t\t: c4.getPointAt(offset).subtract(pt),\n\t\t\tv3 = t2Inside ? v4.negate()\n\t\t\t\t\t: c3.getPointAt(-offset).subtract(pt),\n\t\t\ta1 = v1.getAngle(),\n\t\t\ta2 = v2.getAngle(),\n\t\t\ta3 = v3.getAngle(),\n\t\t\ta4 = v4.getAngle();\n\t\treturn !!(t1Inside\n\t\t\t\t? (isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4)) &&\n\t\t\t\t  (isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3))\n\t\t\t\t: (isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2)) &&\n\t\t\t\t  (isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1)));\n\t},\n\n\thasOverlap: function() {\n\t\treturn !!this._overlap;\n\t}\n}, Base.each(Curve._evaluateMethods, function(name) {\n\tvar get = name + 'At';\n\tthis[name] = function() {\n\t\tvar curve = this.getCurve(),\n\t\t\ttime = this.getTime();\n\t\treturn time != null && curve && curve[get](time, true);\n\t};\n}, {\n\tpreserve: true\n}),\nnew function() {\n\n\tfunction insert(locations, loc, merge) {\n\t\tvar length = locations.length,\n\t\t\tl = 0,\n\t\t\tr = length - 1;\n\n\t\tfunction search(index, dir) {\n\t\t\tfor (var i = index + dir; i >= -1 && i <= length; i += dir) {\n\t\t\t\tvar loc2 = locations[((i % length) + length) % length];\n\t\t\t\tif (!loc.getPoint().isClose(loc2.getPoint(),\n\t\t\t\t\t\t1e-7))\n\t\t\t\t\tbreak;\n\t\t\t\tif (loc.equals(loc2))\n\t\t\t\t\treturn loc2;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\twhile (l <= r) {\n\t\t\tvar m = (l + r) >>> 1,\n\t\t\t\tloc2 = locations[m],\n\t\t\t\tfound;\n\t\t\tif (merge && (found = loc.equals(loc2) ? loc2\n\t\t\t\t\t: (search(m, -1) || search(m, 1)))) {\n\t\t\t\tif (loc._overlap) {\n\t\t\t\t\tfound._overlap = found._intersection._overlap = true;\n\t\t\t\t}\n\t\t\t\treturn found;\n\t\t\t}\n\t\tvar path1 = loc.getPath(),\n\t\t\tpath2 = loc2.getPath(),\n\t\t\tdiff = path1 !== path2\n\t\t\t\t? path1._id - path2._id\n\t\t\t\t: (loc.getIndex() + loc.getTime())\n\t\t\t\t- (loc2.getIndex() + loc2.getTime());\n\t\t\tif (diff < 0) {\n\t\t\t\tr = m - 1;\n\t\t\t} else {\n\t\t\t\tl = m + 1;\n\t\t\t}\n\t\t}\n\t\tlocations.splice(l, 0, loc);\n\t\treturn loc;\n\t}\n\n\treturn { statics: {\n\t\tinsert: insert,\n\n\t\texpand: function(locations) {\n\t\t\tvar expanded = locations.slice();\n\t\t\tfor (var i = locations.length - 1; i >= 0; i--) {\n\t\t\t\tinsert(expanded, locations[i]._intersection, false);\n\t\t\t}\n\t\t\treturn expanded;\n\t\t}\n\t}};\n});\n\nvar PathItem = Item.extend({\n\t_class: 'PathItem',\n\t_selectBounds: false,\n\t_canScaleStroke: true,\n\tbeans: true,\n\n\tinitialize: function PathItem() {\n\t},\n\n\tstatics: {\n\t\tcreate: function(arg) {\n\t\t\tvar data,\n\t\t\t\tsegments,\n\t\t\t\tcompound;\n\t\t\tif (Base.isPlainObject(arg)) {\n\t\t\t\tsegments = arg.segments;\n\t\t\t\tdata = arg.pathData;\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tsegments = arg;\n\t\t\t} else if (typeof arg === 'string') {\n\t\t\t\tdata = arg;\n\t\t\t}\n\t\t\tif (segments) {\n\t\t\t\tvar first = segments[0];\n\t\t\t\tcompound = first && Array.isArray(first[0]);\n\t\t\t} else if (data) {\n\t\t\t\tcompound = (data.match(/m/gi) || []).length > 1\n\t\t\t\t\t\t|| /z\\s*\\S+/i.test(data);\n\t\t\t}\n\t\t\tvar ctor = compound ? CompoundPath : Path;\n\t\t\treturn new ctor(arg);\n\t\t}\n\t},\n\n\t_asPathItem: function() {\n\t\treturn this;\n\t},\n\n\tisClockwise: function() {\n\t\treturn this.getArea() >= 0;\n\t},\n\n\tsetClockwise: function(clockwise) {\n\t\tif (this.isClockwise() != (clockwise = !!clockwise))\n\t\t\tthis.reverse();\n\t},\n\n\tsetPathData: function(data) {\n\n\t\tvar parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n\t\t\tcoords,\n\t\t\trelative = false,\n\t\t\tprevious,\n\t\t\tcontrol,\n\t\t\tcurrent = new Point(),\n\t\t\tstart = new Point();\n\n\t\tfunction getCoord(index, coord) {\n\t\t\tvar val = +coords[index];\n\t\t\tif (relative)\n\t\t\t\tval += current[coord];\n\t\t\treturn val;\n\t\t}\n\n\t\tfunction getPoint(index) {\n\t\t\treturn new Point(\n\t\t\t\tgetCoord(index, 'x'),\n\t\t\t\tgetCoord(index + 1, 'y')\n\t\t\t);\n\t\t}\n\n\t\tthis.clear();\n\n\t\tfor (var i = 0, l = parts && parts.length; i < l; i++) {\n\t\t\tvar part = parts[i],\n\t\t\t\tcommand = part[0],\n\t\t\t\tlower = command.toLowerCase();\n\t\t\tcoords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n\t\t\tvar length = coords && coords.length;\n\t\t\trelative = command === lower;\n\t\t\tif (previous === 'z' && !/[mz]/.test(lower))\n\t\t\t\tthis.moveTo(current);\n\t\t\tswitch (lower) {\n\t\t\tcase 'm':\n\t\t\tcase 'l':\n\t\t\t\tvar move = lower === 'm';\n\t\t\t\tfor (var j = 0; j < length; j += 2) {\n\t\t\t\t\tthis[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n\t\t\t\t\tif (move) {\n\t\t\t\t\t\tstart = current;\n\t\t\t\t\t\tmove = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontrol = current;\n\t\t\t\tbreak;\n\t\t\tcase 'h':\n\t\t\tcase 'v':\n\t\t\t\tvar coord = lower === 'h' ? 'x' : 'y';\n\t\t\t\tcurrent = current.clone();\n\t\t\t\tfor (var j = 0; j < length; j++) {\n\t\t\t\t\tcurrent[coord] = getCoord(j, coord);\n\t\t\t\t\tthis.lineTo(current);\n\t\t\t\t}\n\t\t\t\tcontrol = current;\n\t\t\t\tbreak;\n\t\t\tcase 'c':\n\t\t\t\tfor (var j = 0; j < length; j += 6) {\n\t\t\t\t\tthis.cubicCurveTo(\n\t\t\t\t\t\t\tgetPoint(j),\n\t\t\t\t\t\t\tcontrol = getPoint(j + 2),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 4));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 's':\n\t\t\t\tfor (var j = 0; j < length; j += 4) {\n\t\t\t\t\tthis.cubicCurveTo(\n\t\t\t\t\t\t\t/[cs]/.test(previous)\n\t\t\t\t\t\t\t\t\t? current.multiply(2).subtract(control)\n\t\t\t\t\t\t\t\t\t: current,\n\t\t\t\t\t\t\tcontrol = getPoint(j),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 2));\n\t\t\t\t\tprevious = lower;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'q':\n\t\t\t\tfor (var j = 0; j < length; j += 4) {\n\t\t\t\t\tthis.quadraticCurveTo(\n\t\t\t\t\t\t\tcontrol = getPoint(j),\n\t\t\t\t\t\t\tcurrent = getPoint(j + 2));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 't':\n\t\t\t\tfor (var j = 0; j < length; j += 2) {\n\t\t\t\t\tthis.quadraticCurveTo(\n\t\t\t\t\t\t\tcontrol = (/[qt]/.test(previous)\n\t\t\t\t\t\t\t\t\t? current.multiply(2).subtract(control)\n\t\t\t\t\t\t\t\t\t: current),\n\t\t\t\t\t\t\tcurrent = getPoint(j));\n\t\t\t\t\tprevious = lower;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'a':\n\t\t\t\tfor (var j = 0; j < length; j += 7) {\n\t\t\t\t\tthis.arcTo(current = getPoint(j + 5),\n\t\t\t\t\t\t\tnew Size(+coords[j], +coords[j + 1]),\n\t\t\t\t\t\t\t+coords[j + 2], +coords[j + 4], +coords[j + 3]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'z':\n\t\t\t\tthis.closePath(1e-12);\n\t\t\t\tcurrent = start;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tprevious = lower;\n\t\t}\n\t},\n\n\t_canComposite: function() {\n\t\treturn !(this.hasFill() && this.hasStroke());\n\t},\n\n\t_contains: function(point) {\n\t\tvar winding = point.isInside(\n\t\t\t\tthis.getBounds({ internal: true, handle: true }))\n\t\t\t\t\t? this._getWinding(point)\n\t\t\t\t\t: {};\n\t\treturn winding.onPath || !!(this.getFillRule() === 'evenodd'\n\t\t\t\t? winding.windingL & 1 || winding.windingR & 1\n\t\t\t\t: winding.winding);\n\t},\n\n\tgetIntersections: function(path, include, _matrix, _returnFirst) {\n\t\tvar self = this === path || !path,\n\t\t\tmatrix1 = this._matrix._orNullIfIdentity(),\n\t\t\tmatrix2 = self ? matrix1\n\t\t\t\t: (_matrix || path._matrix)._orNullIfIdentity();\n\t\treturn self || this.getBounds(matrix1).intersects(\n\t\t\t\tpath.getBounds(matrix2), 1e-12)\n\t\t\t\t? Curve.getIntersections(\n\t\t\t\t\t\tthis.getCurves(), !self && path.getCurves(), include,\n\t\t\t\t\t\tmatrix1, matrix2, _returnFirst)\n\t\t\t\t: [];\n\t},\n\n\tgetCrossings: function(path) {\n\t\treturn this.getIntersections(path, function(inter) {\n\t\t\treturn inter.isCrossing();\n\t\t});\n\t},\n\n\tgetNearestLocation: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tcurves = this.getCurves(),\n\t\t\tminDist = Infinity,\n\t\t\tminLoc = null;\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar loc = curves[i].getNearestLocation(point);\n\t\t\tif (loc._distance < minDist) {\n\t\t\t\tminDist = loc._distance;\n\t\t\t\tminLoc = loc;\n\t\t\t}\n\t\t}\n\t\treturn minLoc;\n\t},\n\n\tgetNearestPoint: function() {\n\t\tvar loc = this.getNearestLocation.apply(this, arguments);\n\t\treturn loc ? loc.getPoint() : loc;\n\t},\n\n\tinterpolate: function(from, to, factor) {\n\t\tvar isPath = !this._children,\n\t\t\tname = isPath ? '_segments' : '_children',\n\t\t\titemsFrom = from[name],\n\t\t\titemsTo = to[name],\n\t\t\titems = this[name];\n\t\tif (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n\t\t\tthrow new Error('Invalid operands in interpolate() call: ' +\n\t\t\t\t\tfrom + ', ' + to);\n\t\t}\n\t\tvar current = items.length,\n\t\t\tlength = itemsTo.length;\n\t\tif (current < length) {\n\t\t\tvar ctor = isPath ? Segment : Path;\n\t\t\tfor (var i = current; i < length; i++) {\n\t\t\t\tthis.add(new ctor());\n\t\t\t}\n\t\t} else if (current > length) {\n\t\t\tthis[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n\t\t}\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\titems[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n\t\t}\n\t\tif (isPath) {\n\t\t\tthis.setClosed(from._closed);\n\t\t\tthis._changed(9);\n\t\t}\n\t},\n\n\tcompare: function(path) {\n\t\tvar ok = false;\n\t\tif (path) {\n\t\t\tvar paths1 = this._children || [this],\n\t\t\t\tpaths2 = path._children ? path._children.slice() : [path],\n\t\t\t\tlength1 = paths1.length,\n\t\t\t\tlength2 = paths2.length,\n\t\t\t\tmatched = [],\n\t\t\t\tcount = 0;\n\t\t\tok = true;\n\t\t\tvar boundsOverlaps = CollisionDetection.findItemBoundsCollisions(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n\t\t\tfor (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n\t\t\t\tvar path1 = paths1[i1];\n\t\t\t\tok = false;\n\t\t\t\tvar pathBoundsOverlaps = boundsOverlaps[i1];\n\t\t\t\tif (pathBoundsOverlaps) {\n\t\t\t\t\tfor (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n\t\t\t\t\t\tif (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n\t\t\t\t\t\t\tif (!matched[pathBoundsOverlaps[i2]]) {\n\t\t\t\t\t\t\t\tmatched[pathBoundsOverlaps[i2]] = true;\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tok = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tok = ok && count === length2;\n\t\t}\n\t\treturn ok;\n\t},\n\n});\n\nvar Path = PathItem.extend({\n\t_class: 'Path',\n\t_serializeFields: {\n\t\tsegments: [],\n\t\tclosed: false\n\t},\n\n\tinitialize: function Path(arg) {\n\t\tthis._closed = false;\n\t\tthis._segments = [];\n\t\tthis._version = 0;\n\t\tvar args = arguments,\n\t\t\tsegments = Array.isArray(arg)\n\t\t\t? typeof arg[0] === 'object'\n\t\t\t\t? arg\n\t\t\t\t: args\n\t\t\t: arg && (arg.size === undefined && (arg.x !== undefined\n\t\t\t\t\t|| arg.point !== undefined))\n\t\t\t\t? args\n\t\t\t\t: null;\n\t\tif (segments && segments.length > 0) {\n\t\t\tthis.setSegments(segments);\n\t\t} else {\n\t\t\tthis._curves = undefined;\n\t\t\tthis._segmentSelection = 0;\n\t\t\tif (!segments && typeof arg === 'string') {\n\t\t\t\tthis.setPathData(arg);\n\t\t\t\targ = null;\n\t\t\t}\n\t\t}\n\t\tthis._initialize(!segments && arg);\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._closed === item._closed\n\t\t\t\t&& Base.equals(this._segments, item._segments);\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setSegments(source._segments);\n\t\tthis._closed = source._closed;\n\t},\n\n\t_changed: function _changed(flags) {\n\t\t_changed.base.call(this, flags);\n\t\tif (flags & 8) {\n\t\t\tthis._length = this._area = undefined;\n\t\t\tif (flags & 32) {\n\t\t\t\tthis._version++;\n\t\t\t} else if (this._curves) {\n\t\t\t   for (var i = 0, l = this._curves.length; i < l; i++)\n\t\t\t\t\tthis._curves[i]._changed();\n\t\t\t}\n\t\t} else if (flags & 64) {\n\t\t\tthis._bounds = undefined;\n\t\t}\n\t},\n\n\tgetStyle: function() {\n\t\tvar parent = this._parent;\n\t\treturn (parent instanceof CompoundPath ? parent : this)._style;\n\t},\n\n\tgetSegments: function() {\n\t\treturn this._segments;\n\t},\n\n\tsetSegments: function(segments) {\n\t\tvar fullySelected = this.isFullySelected(),\n\t\t\tlength = segments && segments.length;\n\t\tthis._segments.length = 0;\n\t\tthis._segmentSelection = 0;\n\t\tthis._curves = undefined;\n\t\tif (length) {\n\t\t\tvar last = segments[length - 1];\n\t\t\tif (typeof last === 'boolean') {\n\t\t\t\tthis.setClosed(last);\n\t\t\t\tlength--;\n\t\t\t}\n\t\t\tthis._add(Segment.readList(segments, 0, {}, length));\n\t\t}\n\t\tif (fullySelected)\n\t\t\tthis.setFullySelected(true);\n\t},\n\n\tgetFirstSegment: function() {\n\t\treturn this._segments[0];\n\t},\n\n\tgetLastSegment: function() {\n\t\treturn this._segments[this._segments.length - 1];\n\t},\n\n\tgetCurves: function() {\n\t\tvar curves = this._curves,\n\t\t\tsegments = this._segments;\n\t\tif (!curves) {\n\t\t\tvar length = this._countCurves();\n\t\t\tcurves = this._curves = new Array(length);\n\t\t\tfor (var i = 0; i < length; i++)\n\t\t\t\tcurves[i] = new Curve(this, segments[i],\n\t\t\t\t\tsegments[i + 1] || segments[0]);\n\t\t}\n\t\treturn curves;\n\t},\n\n\tgetFirstCurve: function() {\n\t\treturn this.getCurves()[0];\n\t},\n\n\tgetLastCurve: function() {\n\t\tvar curves = this.getCurves();\n\t\treturn curves[curves.length - 1];\n\t},\n\n\tisClosed: function() {\n\t\treturn this._closed;\n\t},\n\n\tsetClosed: function(closed) {\n\t\tif (this._closed != (closed = !!closed)) {\n\t\t\tthis._closed = closed;\n\t\t\tif (this._curves) {\n\t\t\t\tvar length = this._curves.length = this._countCurves();\n\t\t\t\tif (closed)\n\t\t\t\t\tthis._curves[length - 1] = new Curve(this,\n\t\t\t\t\t\tthis._segments[length - 1], this._segments[0]);\n\t\t\t}\n\t\t\tthis._changed(41);\n\t\t}\n\t}\n}, {\n\tbeans: true,\n\n\tgetPathData: function(_matrix, _precision) {\n\t\tvar segments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tf = new Formatter(_precision),\n\t\t\tcoords = new Array(6),\n\t\t\tfirst = true,\n\t\t\tcurX, curY,\n\t\t\tprevX, prevY,\n\t\t\tinX, inY,\n\t\t\toutX, outY,\n\t\t\tparts = [];\n\n\t\tfunction addSegment(segment, skipLine) {\n\t\t\tsegment._transformCoordinates(_matrix, coords);\n\t\t\tcurX = coords[0];\n\t\t\tcurY = coords[1];\n\t\t\tif (first) {\n\t\t\t\tparts.push('M' + f.pair(curX, curY));\n\t\t\t\tfirst = false;\n\t\t\t} else {\n\t\t\t\tinX = coords[2];\n\t\t\t\tinY = coords[3];\n\t\t\t\tif (inX === curX && inY === curY\n\t\t\t\t\t\t&& outX === prevX && outY === prevY) {\n\t\t\t\t\tif (!skipLine) {\n\t\t\t\t\t\tvar dx = curX - prevX,\n\t\t\t\t\t\t\tdy = curY - prevY;\n\t\t\t\t\t\tparts.push(\n\t\t\t\t\t\t\t  dx === 0 ? 'v' + f.number(dy)\n\t\t\t\t\t\t\t: dy === 0 ? 'h' + f.number(dx)\n\t\t\t\t\t\t\t: 'l' + f.pair(dx, dy));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tparts.push('c' + f.pair(outX - prevX, outY - prevY)\n\t\t\t\t\t\t\t + ' ' + f.pair( inX - prevX,  inY - prevY)\n\t\t\t\t\t\t\t + ' ' + f.pair(curX - prevX, curY - prevY));\n\t\t\t\t}\n\t\t\t}\n\t\t\tprevX = curX;\n\t\t\tprevY = curY;\n\t\t\toutX = coords[4];\n\t\t\toutY = coords[5];\n\t\t}\n\n\t\tif (!length)\n\t\t\treturn '';\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\taddSegment(segments[i]);\n\t\tif (this._closed && length > 0) {\n\t\t\taddSegment(segments[0], true);\n\t\t\tparts.push('z');\n\t\t}\n\t\treturn parts.join('');\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._segments.length;\n\t},\n\n\t_transformContent: function(matrix) {\n\t\tvar segments = this._segments,\n\t\t\tcoords = new Array(6);\n\t\tfor (var i = 0, l = segments.length; i < l; i++)\n\t\t\tsegments[i]._transformCoordinates(matrix, coords, true);\n\t\treturn true;\n\t},\n\n\t_add: function(segs, index) {\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tamount = segs.length,\n\t\t\tappend = index == null,\n\t\t\tindex = append ? segments.length : index;\n\t\tfor (var i = 0; i < amount; i++) {\n\t\t\tvar segment = segs[i];\n\t\t\tif (segment._path)\n\t\t\t\tsegment = segs[i] = segment.clone();\n\t\t\tsegment._path = this;\n\t\t\tsegment._index = index + i;\n\t\t\tif (segment._selection)\n\t\t\t\tthis._updateSelection(segment, 0, segment._selection);\n\t\t}\n\t\tif (append) {\n\t\t\tBase.push(segments, segs);\n\t\t} else {\n\t\t\tsegments.splice.apply(segments, [index, 0].concat(segs));\n\t\t\tfor (var i = index + amount, l = segments.length; i < l; i++)\n\t\t\t\tsegments[i]._index = i;\n\t\t}\n\t\tif (curves) {\n\t\t\tvar total = this._countCurves(),\n\t\t\t\tstart = index > 0 && index + amount - 1 === total ? index - 1\n\t\t\t\t\t: index,\n\t\t\t\tinsert = start,\n\t\t\t\tend = Math.min(start + amount, total);\n\t\t\tif (segs._curves) {\n\t\t\t\tcurves.splice.apply(curves, [start, 0].concat(segs._curves));\n\t\t\t\tinsert += segs._curves.length;\n\t\t\t}\n\t\t\tfor (var i = insert; i < end; i++)\n\t\t\t\tcurves.splice(i, 0, new Curve(this, null, null));\n\t\t\tthis._adjustCurves(start, end);\n\t\t}\n\t\tthis._changed(41);\n\t\treturn segs;\n\t},\n\n\t_adjustCurves: function(start, end) {\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tcurve;\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tcurve = curves[i];\n\t\t\tcurve._path = this;\n\t\t\tcurve._segment1 = segments[i];\n\t\t\tcurve._segment2 = segments[i + 1] || segments[0];\n\t\t\tcurve._changed();\n\t\t}\n\t\tif (curve = curves[this._closed && !start ? segments.length - 1\n\t\t\t\t: start - 1]) {\n\t\t\tcurve._segment2 = segments[start] || segments[0];\n\t\t\tcurve._changed();\n\t\t}\n\t\tif (curve = curves[end]) {\n\t\t\tcurve._segment1 = segments[end];\n\t\t\tcurve._changed();\n\t\t}\n\t},\n\n\t_countCurves: function() {\n\t\tvar length = this._segments.length;\n\t\treturn !this._closed && length > 0 ? length - 1 : length;\n\t},\n\n\tadd: function(segment1 ) {\n\t\tvar args = arguments;\n\t\treturn args.length > 1 && typeof segment1 !== 'number'\n\t\t\t? this._add(Segment.readList(args))\n\t\t\t: this._add([ Segment.read(args) ])[0];\n\t},\n\n\tinsert: function(index, segment1 ) {\n\t\tvar args = arguments;\n\t\treturn args.length > 2 && typeof segment1 !== 'number'\n\t\t\t? this._add(Segment.readList(args, 1), index)\n\t\t\t: this._add([ Segment.read(args, 1) ], index)[0];\n\t},\n\n\taddSegment: function() {\n\t\treturn this._add([ Segment.read(arguments) ])[0];\n\t},\n\n\tinsertSegment: function(index ) {\n\t\treturn this._add([ Segment.read(arguments, 1) ], index)[0];\n\t},\n\n\taddSegments: function(segments) {\n\t\treturn this._add(Segment.readList(segments));\n\t},\n\n\tinsertSegments: function(index, segments) {\n\t\treturn this._add(Segment.readList(segments), index);\n\t},\n\n\tremoveSegment: function(index) {\n\t\treturn this.removeSegments(index, index + 1)[0] || null;\n\t},\n\n\tremoveSegments: function(start, end, _includeCurves) {\n\t\tstart = start || 0;\n\t\tend = Base.pick(end, this._segments.length);\n\t\tvar segments = this._segments,\n\t\t\tcurves = this._curves,\n\t\t\tcount = segments.length,\n\t\t\tremoved = segments.splice(start, end - start),\n\t\t\tamount = removed.length;\n\t\tif (!amount)\n\t\t\treturn removed;\n\t\tfor (var i = 0; i < amount; i++) {\n\t\t\tvar segment = removed[i];\n\t\t\tif (segment._selection)\n\t\t\t\tthis._updateSelection(segment, segment._selection, 0);\n\t\t\tsegment._index = segment._path = null;\n\t\t}\n\t\tfor (var i = start, l = segments.length; i < l; i++)\n\t\t\tsegments[i]._index = i;\n\t\tif (curves) {\n\t\t\tvar index = start > 0 && end === count + (this._closed ? 1 : 0)\n\t\t\t\t\t? start - 1\n\t\t\t\t\t: start,\n\t\t\t\tcurves = curves.splice(index, amount);\n\t\t\tfor (var i = curves.length - 1; i >= 0; i--)\n\t\t\t\tcurves[i]._path = null;\n\t\t\tif (_includeCurves)\n\t\t\t\tremoved._curves = curves.slice(1);\n\t\t\tthis._adjustCurves(index, index);\n\t\t}\n\t\tthis._changed(41);\n\t\treturn removed;\n\t},\n\n\tclear: '#removeSegments',\n\n\thasHandles: function() {\n\t\tvar segments = this._segments;\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tif (segments[i].hasHandles())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tclearHandles: function() {\n\t\tvar segments = this._segments;\n\t\tfor (var i = 0, l = segments.length; i < l; i++)\n\t\t\tsegments[i].clearHandles();\n\t},\n\n\tgetLength: function() {\n\t\tif (this._length == null) {\n\t\t\tvar curves = this.getCurves(),\n\t\t\t\tlength = 0;\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++)\n\t\t\t\tlength += curves[i].getLength();\n\t\t\tthis._length = length;\n\t\t}\n\t\treturn this._length;\n\t},\n\n\tgetArea: function() {\n\t\tvar area = this._area;\n\t\tif (area == null) {\n\t\t\tvar segments = this._segments,\n\t\t\t\tclosed = this._closed;\n\t\t\tarea = 0;\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tvar last = i + 1 === l;\n\t\t\t\tarea += Curve.getArea(Curve.getValues(\n\t\t\t\t\t\tsegments[i], segments[last ? 0 : i + 1],\n\t\t\t\t\t\tnull, last && !closed));\n\t\t\t}\n\t\t\tthis._area = area;\n\t\t}\n\t\treturn area;\n\t},\n\n\tisFullySelected: function() {\n\t\tvar length = this._segments.length;\n\t\treturn this.isSelected() && length > 0 && this._segmentSelection\n\t\t\t\t=== length * 7;\n\t},\n\n\tsetFullySelected: function(selected) {\n\t\tif (selected)\n\t\t\tthis._selectSegments(true);\n\t\tthis.setSelected(selected);\n\t},\n\n\tsetSelection: function setSelection(selection) {\n\t\tif (!(selection & 1))\n\t\t\tthis._selectSegments(false);\n\t\tsetSelection.base.call(this, selection);\n\t},\n\n\t_selectSegments: function(selected) {\n\t\tvar segments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tselection = selected ? 7 : 0;\n\t\tthis._segmentSelection = selection * length;\n\t\tfor (var i = 0; i < length; i++)\n\t\t\tsegments[i]._selection = selection;\n\t},\n\n\t_updateSelection: function(segment, oldSelection, newSelection) {\n\t\tsegment._selection = newSelection;\n\t\tvar selection = this._segmentSelection += newSelection - oldSelection;\n\t\tif (selection > 0)\n\t\t\tthis.setSelected(true);\n\t},\n\n\tdivideAt: function(location) {\n\t\tvar loc = this.getLocationAt(location),\n\t\t\tcurve;\n\t\treturn loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset()))\n\t\t\t\t? curve._segment1\n\t\t\t\t: null;\n\t},\n\n\tsplitAt: function(location) {\n\t\tvar loc = this.getLocationAt(location),\n\t\t\tindex = loc && loc.index,\n\t\t\ttime = loc && loc.time,\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin;\n\t\tif (time > tMax) {\n\t\t\tindex++;\n\t\t\ttime = 0;\n\t\t}\n\t\tvar curves = this.getCurves();\n\t\tif (index >= 0 && index < curves.length) {\n\t\t\tif (time >= tMin) {\n\t\t\t\tcurves[index++].divideAtTime(time);\n\t\t\t}\n\t\t\tvar segs = this.removeSegments(index, this._segments.length, true),\n\t\t\t\tpath;\n\t\t\tif (this._closed) {\n\t\t\t\tthis.setClosed(false);\n\t\t\t\tpath = this;\n\t\t\t} else {\n\t\t\t\tpath = new Path(Item.NO_INSERT);\n\t\t\t\tpath.insertAbove(this);\n\t\t\t\tpath.copyAttributes(this);\n\t\t\t}\n\t\t\tpath._add(segs, 0);\n\t\t\tthis.addSegment(segs[0]);\n\t\t\treturn path;\n\t\t}\n\t\treturn null;\n\t},\n\n\tsplit: function(index, time) {\n\t\tvar curve,\n\t\t\tlocation = time === undefined ? index\n\t\t\t\t: (curve = this.getCurves()[index])\n\t\t\t\t\t&& curve.getLocationAtTime(time);\n\t\treturn location != null ? this.splitAt(location) : null;\n\t},\n\n\tjoin: function(path, tolerance) {\n\t\tvar epsilon = tolerance || 0;\n\t\tif (path && path !== this) {\n\t\t\tvar segments = path._segments,\n\t\t\t\tlast1 = this.getLastSegment(),\n\t\t\t\tlast2 = path.getLastSegment();\n\t\t\tif (!last2)\n\t\t\t\treturn this;\n\t\t\tif (last1 && last1._point.isClose(last2._point, epsilon))\n\t\t\t\tpath.reverse();\n\t\t\tvar first2 = path.getFirstSegment();\n\t\t\tif (last1 && last1._point.isClose(first2._point, epsilon)) {\n\t\t\t\tlast1.setHandleOut(first2._handleOut);\n\t\t\t\tthis._add(segments.slice(1));\n\t\t\t} else {\n\t\t\t\tvar first1 = this.getFirstSegment();\n\t\t\t\tif (first1 && first1._point.isClose(first2._point, epsilon))\n\t\t\t\t\tpath.reverse();\n\t\t\t\tlast2 = path.getLastSegment();\n\t\t\t\tif (first1 && first1._point.isClose(last2._point, epsilon)) {\n\t\t\t\t\tfirst1.setHandleIn(last2._handleIn);\n\t\t\t\t\tthis._add(segments.slice(0, segments.length - 1), 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis._add(segments.slice());\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (path._closed)\n\t\t\t\tthis._add([segments[0]]);\n\t\t\tpath.remove();\n\t\t}\n\t\tvar first = this.getFirstSegment(),\n\t\t\tlast = this.getLastSegment();\n\t\tif (first !== last && first._point.isClose(last._point, epsilon)) {\n\t\t\tfirst.setHandleIn(last._handleIn);\n\t\t\tlast.remove();\n\t\t\tthis.setClosed(true);\n\t\t}\n\t\treturn this;\n\t},\n\n\treduce: function(options) {\n\t\tvar curves = this.getCurves(),\n\t\t\tsimplify = options && options.simplify,\n\t\t\ttolerance = simplify ? 1e-7 : 0;\n\t\tfor (var i = curves.length - 1; i >= 0; i--) {\n\t\t\tvar curve = curves[i];\n\t\t\tif (!curve.hasHandles() && (!curve.hasLength(tolerance)\n\t\t\t\t\t|| simplify && curve.isCollinear(curve.getNext())))\n\t\t\t\tcurve.remove();\n\t\t}\n\t\treturn this;\n\t},\n\n\treverse: function() {\n\t\tthis._segments.reverse();\n\t\tfor (var i = 0, l = this._segments.length; i < l; i++) {\n\t\t\tvar segment = this._segments[i];\n\t\t\tvar handleIn = segment._handleIn;\n\t\t\tsegment._handleIn = segment._handleOut;\n\t\t\tsegment._handleOut = handleIn;\n\t\t\tsegment._index = i;\n\t\t}\n\t\tthis._curves = null;\n\t\tthis._changed(9);\n\t},\n\n\tflatten: function(flatness) {\n\t\tvar flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n\t\t\tparts = flattener.parts,\n\t\t\tlength = parts.length,\n\t\t\tsegments = [];\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tsegments.push(new Segment(parts[i].curve.slice(0, 2)));\n\t\t}\n\t\tif (!this._closed && length > 0) {\n\t\t\tsegments.push(new Segment(parts[length - 1].curve.slice(6)));\n\t\t}\n\t\tthis.setSegments(segments);\n\t},\n\n\tsimplify: function(tolerance) {\n\t\tvar segments = new PathFitter(this).fit(tolerance || 2.5);\n\t\tif (segments)\n\t\t\tthis.setSegments(segments);\n\t\treturn !!segments;\n\t},\n\n\tsmooth: function(options) {\n\t\tvar that = this,\n\t\t\topts = options || {},\n\t\t\ttype = opts.type || 'asymmetric',\n\t\t\tsegments = this._segments,\n\t\t\tlength = segments.length,\n\t\t\tclosed = this._closed;\n\n\t\tfunction getIndex(value, _default) {\n\t\t\tvar index = value && value.index;\n\t\t\tif (index != null) {\n\t\t\t\tvar path = value.path;\n\t\t\t\tif (path && path !== that)\n\t\t\t\t\tthrow new Error(value._class + ' ' + index + ' of ' + path\n\t\t\t\t\t\t\t+ ' is not part of ' + that);\n\t\t\t\tif (_default && value instanceof Curve)\n\t\t\t\t\tindex++;\n\t\t\t} else {\n\t\t\t\tindex = typeof value === 'number' ? value : _default;\n\t\t\t}\n\t\t\treturn Math.min(index < 0 && closed\n\t\t\t\t\t? index % length\n\t\t\t\t\t: index < 0 ? index + length : index, length - 1);\n\t\t}\n\n\t\tvar loop = closed && opts.from === undefined && opts.to === undefined,\n\t\t\tfrom = getIndex(opts.from, 0),\n\t\t\tto = getIndex(opts.to, length - 1);\n\n\t\tif (from > to) {\n\t\t\tif (closed) {\n\t\t\t\tfrom -= length;\n\t\t\t} else {\n\t\t\t\tvar tmp = from;\n\t\t\t\tfrom = to;\n\t\t\t\tto = tmp;\n\t\t\t}\n\t\t}\n\t\tif (/^(?:asymmetric|continuous)$/.test(type)) {\n\t\t\tvar asymmetric = type === 'asymmetric',\n\t\t\t\tmin = Math.min,\n\t\t\t\tamount = to - from + 1,\n\t\t\t\tn = amount - 1,\n\t\t\t\tpadding = loop ? min(amount, 4) : 1,\n\t\t\t\tpaddingLeft = padding,\n\t\t\t\tpaddingRight = padding,\n\t\t\t\tknots = [];\n\t\t\tif (!closed) {\n\t\t\t\tpaddingLeft = min(1, from);\n\t\t\t\tpaddingRight = min(1, length - to - 1);\n\t\t\t}\n\t\t\tn += paddingLeft + paddingRight;\n\t\t\tif (n <= 1)\n\t\t\t\treturn;\n\t\t\tfor (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n\t\t\t\tknots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n\t\t\t}\n\n\t\t\tvar x = knots[0]._x + 2 * knots[1]._x,\n\t\t\t\ty = knots[0]._y + 2 * knots[1]._y,\n\t\t\t\tf = 2,\n\t\t\t\tn_1 = n - 1,\n\t\t\t\trx = [x],\n\t\t\t\try = [y],\n\t\t\t\trf = [f],\n\t\t\t\tpx = [],\n\t\t\t\tpy = [];\n\t\t\tfor (var i = 1; i < n; i++) {\n\t\t\t\tvar internal = i < n_1,\n\t\t\t\t\ta = internal ? 1 : asymmetric ? 1 : 2,\n\t\t\t\t\tb = internal ? 4 : asymmetric ? 2 : 7,\n\t\t\t\t\tu = internal ? 4 : asymmetric ? 3 : 8,\n\t\t\t\t\tv = internal ? 2 : asymmetric ? 0 : 1,\n\t\t\t\t\tm = a / f;\n\t\t\t\tf = rf[i] = b - m;\n\t\t\t\tx = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n\t\t\t\ty = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n\t\t\t}\n\n\t\t\tpx[n_1] = rx[n_1] / rf[n_1];\n\t\t\tpy[n_1] = ry[n_1] / rf[n_1];\n\t\t\tfor (var i = n - 2; i >= 0; i--) {\n\t\t\t\tpx[i] = (rx[i] - px[i + 1]) / rf[i];\n\t\t\t\tpy[i] = (ry[i] - py[i + 1]) / rf[i];\n\t\t\t}\n\t\t\tpx[n] = (3 * knots[n]._x - px[n_1]) / 2;\n\t\t\tpy[n] = (3 * knots[n]._y - py[n_1]) / 2;\n\n\t\t\tfor (var i = paddingLeft, max = n - paddingRight, j = from;\n\t\t\t\t\ti <= max; i++, j++) {\n\t\t\t\tvar segment = segments[j < 0 ? j + length : j],\n\t\t\t\t\tpt = segment._point,\n\t\t\t\t\thx = px[i] - pt._x,\n\t\t\t\t\thy = py[i] - pt._y;\n\t\t\t\tif (loop || i < max)\n\t\t\t\t\tsegment.setHandleOut(hx, hy);\n\t\t\t\tif (loop || i > paddingLeft)\n\t\t\t\t\tsegment.setHandleIn(-hx, -hy);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i = from; i <= to; i++) {\n\t\t\t\tsegments[i < 0 ? i + length : i].smooth(opts,\n\t\t\t\t\t\t!loop && i === from, !loop && i === to);\n\t\t\t}\n\t\t}\n\t},\n\n\ttoShape: function(insert) {\n\t\tif (!this._closed)\n\t\t\treturn null;\n\n\t\tvar segments = this._segments,\n\t\t\ttype,\n\t\t\tsize,\n\t\t\tradius,\n\t\t\ttopCenter;\n\n\t\tfunction isCollinear(i, j) {\n\t\t\tvar seg1 = segments[i],\n\t\t\t\tseg2 = seg1.getNext(),\n\t\t\t\tseg3 = segments[j],\n\t\t\t\tseg4 = seg3.getNext();\n\t\t\treturn seg1._handleOut.isZero() && seg2._handleIn.isZero()\n\t\t\t\t\t&& seg3._handleOut.isZero() && seg4._handleIn.isZero()\n\t\t\t\t\t&& seg2._point.subtract(seg1._point).isCollinear(\n\t\t\t\t\t\tseg4._point.subtract(seg3._point));\n\t\t}\n\n\t\tfunction isOrthogonal(i) {\n\t\t\tvar seg2 = segments[i],\n\t\t\t\tseg1 = seg2.getPrevious(),\n\t\t\t\tseg3 = seg2.getNext();\n\t\t\treturn seg1._handleOut.isZero() && seg2._handleIn.isZero()\n\t\t\t\t\t&& seg2._handleOut.isZero() && seg3._handleIn.isZero()\n\t\t\t\t\t&& seg2._point.subtract(seg1._point).isOrthogonal(\n\t\t\t\t\t\tseg3._point.subtract(seg2._point));\n\t\t}\n\n\t\tfunction isArc(i) {\n\t\t\tvar seg1 = segments[i],\n\t\t\t\tseg2 = seg1.getNext(),\n\t\t\t\thandle1 = seg1._handleOut,\n\t\t\t\thandle2 = seg2._handleIn,\n\t\t\t\tkappa = 0.5522847498307936;\n\t\t\tif (handle1.isOrthogonal(handle2)) {\n\t\t\t\tvar pt1 = seg1._point,\n\t\t\t\t\tpt2 = seg2._point,\n\t\t\t\t\tcorner = new Line(pt1, handle1, true).intersect(\n\t\t\t\t\t\t\tnew Line(pt2, handle2, true), true);\n\t\t\t\treturn corner && Numerical.isZero(handle1.getLength() /\n\t\t\t\t\t\tcorner.subtract(pt1).getLength() - kappa)\n\t\t\t\t\t&& Numerical.isZero(handle2.getLength() /\n\t\t\t\t\t\tcorner.subtract(pt2).getLength() - kappa);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction getDistance(i, j) {\n\t\t\treturn segments[i]._point.getDistance(segments[j]._point);\n\t\t}\n\n\t\tif (!this.hasHandles() && segments.length === 4\n\t\t\t\t&& isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n\t\t\ttype = Shape.Rectangle;\n\t\t\tsize = new Size(getDistance(0, 3), getDistance(0, 1));\n\t\t\ttopCenter = segments[1]._point.add(segments[2]._point).divide(2);\n\t\t} else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4)\n\t\t\t\t&& isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n\t\t\ttype = Shape.Rectangle;\n\t\t\tsize = new Size(getDistance(1, 6), getDistance(0, 3));\n\t\t\tradius = size.subtract(new Size(getDistance(0, 7),\n\t\t\t\t\tgetDistance(1, 2))).divide(2);\n\t\t\ttopCenter = segments[3]._point.add(segments[4]._point).divide(2);\n\t\t} else if (segments.length === 4\n\t\t\t\t&& isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n\t\t\tif (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n\t\t\t\ttype = Shape.Circle;\n\t\t\t\tradius = getDistance(0, 2) / 2;\n\t\t\t} else {\n\t\t\t\ttype = Shape.Ellipse;\n\t\t\t\tradius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n\t\t\t}\n\t\t\ttopCenter = segments[1]._point;\n\t\t}\n\n\t\tif (type) {\n\t\t\tvar center = this.getPosition(true),\n\t\t\t\tshape = new type({\n\t\t\t\t\tcenter: center,\n\t\t\t\t\tsize: size,\n\t\t\t\t\tradius: radius,\n\t\t\t\t\tinsert: false\n\t\t\t\t});\n\t\t\tshape.copyAttributes(this, true);\n\t\t\tshape._matrix.prepend(this._matrix);\n\t\t\tshape.rotate(topCenter.subtract(center).getAngle() + 90);\n\t\t\tif (insert === undefined || insert)\n\t\t\t\tshape.insertAbove(this);\n\t\t\treturn shape;\n\t\t}\n\t\treturn null;\n\t},\n\n\ttoPath: '#clone',\n\n\tcompare: function compare(path) {\n\t\tif (!path || path instanceof CompoundPath)\n\t\t\treturn compare.base.call(this, path);\n\t\tvar curves1 = this.getCurves(),\n\t\t\tcurves2 = path.getCurves(),\n\t\t\tlength1 = curves1.length,\n\t\t\tlength2 = curves2.length;\n\t\tif (!length1 || !length2) {\n\t\t\treturn length1 == length2;\n\t\t}\n\t\tvar v1 = curves1[0].getValues(),\n\t\t\tvalues2 = [],\n\t\t\tpos1 = 0, pos2,\n\t\t\tend1 = 0, end2;\n\t\tfor (var i = 0; i < length2; i++) {\n\t\t\tvar v2 = curves2[i].getValues();\n\t\t\tvalues2.push(v2);\n\t\t\tvar overlaps = Curve.getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tpos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n\t\t\t\tend2 = overlaps[0][1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar abs = Math.abs,\n\t\t\tepsilon = 1e-8,\n\t\t\tv2 = values2[pos2],\n\t\t\tstart2;\n\t\twhile (v1 && v2) {\n\t\t\tvar overlaps = Curve.getOverlaps(v1, v2);\n\t\t\tif (overlaps) {\n\t\t\t\tvar t1 = overlaps[0][0];\n\t\t\t\tif (abs(t1 - end1) < epsilon) {\n\t\t\t\t\tend1 = overlaps[1][0];\n\t\t\t\t\tif (end1 === 1) {\n\t\t\t\t\t\tv1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n\t\t\t\t\t\tend1 = 0;\n\t\t\t\t\t}\n\t\t\t\t\tvar t2 = overlaps[0][1];\n\t\t\t\t\tif (abs(t2 - end2) < epsilon) {\n\t\t\t\t\t\tif (!start2)\n\t\t\t\t\t\t\tstart2 = [pos2, t2];\n\t\t\t\t\t\tend2 = overlaps[1][1];\n\t\t\t\t\t\tif (end2 === 1) {\n\t\t\t\t\t\t\tif (++pos2 >= length2)\n\t\t\t\t\t\t\t\tpos2 = 0;\n\t\t\t\t\t\t\tv2 = values2[pos2] || curves2[pos2].getValues();\n\t\t\t\t\t\t\tend2 = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!v1) {\n\t\t\t\t\t\t\treturn start2[0] === pos2 && start2[1] === end2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t},\n\n\t_hitTestSelf: function(point, options, viewMatrix, strokeMatrix) {\n\t\tvar that = this,\n\t\t\tstyle = this.getStyle(),\n\t\t\tsegments = this._segments,\n\t\t\tnumSegments = segments.length,\n\t\t\tclosed = this._closed,\n\t\t\ttolerancePadding = options._tolerancePadding,\n\t\t\tstrokePadding = tolerancePadding,\n\t\t\tjoin, cap, miterLimit,\n\t\t\tarea, loc, res,\n\t\t\thitStroke = options.stroke && style.hasStroke(),\n\t\t\thitFill = options.fill && style.hasFill(),\n\t\t\thitCurves = options.curves,\n\t\t\tstrokeRadius = hitStroke\n\t\t\t\t\t? style.getStrokeWidth() / 2\n\t\t\t\t\t: hitFill && options.tolerance > 0 || hitCurves\n\t\t\t\t\t\t? 0 : null;\n\t\tif (strokeRadius !== null) {\n\t\t\tif (strokeRadius > 0) {\n\t\t\t\tjoin = style.getStrokeJoin();\n\t\t\t\tcap = style.getStrokeCap();\n\t\t\t\tmiterLimit = style.getMiterLimit();\n\t\t\t\tstrokePadding = strokePadding.add(\n\t\t\t\t\tPath._getStrokePadding(strokeRadius, strokeMatrix));\n\t\t\t} else {\n\t\t\t\tjoin = cap = 'round';\n\t\t\t}\n\t\t}\n\n\t\tfunction isCloseEnough(pt, padding) {\n\t\t\treturn point.subtract(pt).divide(padding).length <= 1;\n\t\t}\n\n\t\tfunction checkSegmentPoint(seg, pt, name) {\n\t\t\tif (!options.selected || pt.isSelected()) {\n\t\t\t\tvar anchor = seg._point;\n\t\t\t\tif (pt !== anchor)\n\t\t\t\t\tpt = pt.add(anchor);\n\t\t\t\tif (isCloseEnough(pt, strokePadding)) {\n\t\t\t\t\treturn new HitResult(name, that, {\n\t\t\t\t\t\tsegment: seg,\n\t\t\t\t\t\tpoint: pt\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction checkSegmentPoints(seg, ends) {\n\t\t\treturn (ends || options.segments)\n\t\t\t\t&& checkSegmentPoint(seg, seg._point, 'segment')\n\t\t\t\t|| (!ends && options.handles) && (\n\t\t\t\t\tcheckSegmentPoint(seg, seg._handleIn, 'handle-in') ||\n\t\t\t\t\tcheckSegmentPoint(seg, seg._handleOut, 'handle-out'));\n\t\t}\n\n\t\tfunction addToArea(point) {\n\t\t\tarea.add(point);\n\t\t}\n\n\t\tfunction checkSegmentStroke(segment) {\n\t\t\tvar isJoin = closed || segment._index > 0\n\t\t\t\t\t&& segment._index < numSegments - 1;\n\t\t\tif ((isJoin ? join : cap) === 'round') {\n\t\t\t\treturn isCloseEnough(segment._point, strokePadding);\n\t\t\t} else {\n\t\t\t\tarea = new Path({ internal: true, closed: true });\n\t\t\t\tif (isJoin) {\n\t\t\t\t\tif (!segment.isSmooth()) {\n\t\t\t\t\t\tPath._addBevelJoin(segment, join, strokeRadius,\n\t\t\t\t\t\t\t   miterLimit, null, strokeMatrix, addToArea, true);\n\t\t\t\t\t}\n\t\t\t\t} else if (cap === 'square') {\n\t\t\t\t\tPath._addSquareCap(segment, cap, strokeRadius, null,\n\t\t\t\t\t\t\tstrokeMatrix, addToArea, true);\n\t\t\t\t}\n\t\t\t\tif (!area.isEmpty()) {\n\t\t\t\t\tvar loc;\n\t\t\t\t\treturn area.contains(point)\n\t\t\t\t\t\t|| (loc = area.getNearestLocation(point))\n\t\t\t\t\t\t\t&& isCloseEnough(loc.getPoint(), tolerancePadding);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (options.ends && !options.segments && !closed) {\n\t\t\tif (res = checkSegmentPoints(segments[0], true)\n\t\t\t\t\t|| checkSegmentPoints(segments[numSegments - 1], true))\n\t\t\t\treturn res;\n\t\t} else if (options.segments || options.handles) {\n\t\t\tfor (var i = 0; i < numSegments; i++)\n\t\t\t\tif (res = checkSegmentPoints(segments[i]))\n\t\t\t\t\treturn res;\n\t\t}\n\t\tif (strokeRadius !== null) {\n\t\t\tloc = this.getNearestLocation(point);\n\t\t\tif (loc) {\n\t\t\t\tvar time = loc.getTime();\n\t\t\t\tif (time === 0 || time === 1 && numSegments > 1) {\n\t\t\t\t\tif (!checkSegmentStroke(loc.getSegment()))\n\t\t\t\t\t\tloc = null;\n\t\t\t\t} else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n\t\t\t\t\tloc = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!loc && join === 'miter' && numSegments > 1) {\n\t\t\t\tfor (var i = 0; i < numSegments; i++) {\n\t\t\t\t\tvar segment = segments[i];\n\t\t\t\t\tif (point.getDistance(segment._point)\n\t\t\t\t\t\t\t<= miterLimit * strokeRadius\n\t\t\t\t\t\t\t&& checkSegmentStroke(segment)) {\n\t\t\t\t\t\tloc = segment.getLocation();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn !loc && hitFill && this._contains(point)\n\t\t\t\t|| loc && !hitStroke && !hitCurves\n\t\t\t\t\t? new HitResult('fill', this)\n\t\t\t\t\t: loc\n\t\t\t\t\t\t? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n\t\t\t\t\t\t\tlocation: loc,\n\t\t\t\t\t\t\tpoint: loc.getPoint()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t: null;\n\t}\n\n}, Base.each(Curve._evaluateMethods,\n\tfunction(name) {\n\t\tthis[name + 'At'] = function(offset) {\n\t\t\tvar loc = this.getLocationAt(offset);\n\t\t\treturn loc && loc[name]();\n\t\t};\n\t},\n{\n\tbeans: false,\n\n\tgetLocationOf: function() {\n\t\tvar point = Point.read(arguments),\n\t\t\tcurves = this.getCurves();\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar loc = curves[i].getLocationOf(point);\n\t\t\tif (loc)\n\t\t\t\treturn loc;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetOffsetOf: function() {\n\t\tvar loc = this.getLocationOf.apply(this, arguments);\n\t\treturn loc ? loc.getOffset() : null;\n\t},\n\n\tgetLocationAt: function(offset) {\n\t\tif (typeof offset === 'number') {\n\t\t\tvar curves = this.getCurves(),\n\t\t\t\tlength = 0;\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\tvar start = length,\n\t\t\t\t\tcurve = curves[i];\n\t\t\t\tlength += curve.getLength();\n\t\t\t\tif (length > offset) {\n\t\t\t\t\treturn curve.getLocationAt(offset - start);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (curves.length > 0 && offset <= this.getLength()) {\n\t\t\t\treturn new CurveLocation(curves[curves.length - 1], 1);\n\t\t\t}\n\t\t} else if (offset && offset.getPath && offset.getPath() === this) {\n\t\t\treturn offset;\n\t\t}\n\t\treturn null;\n\t},\n\n\tgetOffsetsWithTangent: function() {\n\t\tvar tangent = Point.read(arguments);\n\t\tif (tangent.isZero()) {\n\t\t\treturn [];\n\t\t}\n\n\t\tvar offsets = [];\n\t\tvar curveStart = 0;\n\t\tvar curves = this.getCurves();\n\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar curveTimes = curve.getTimesWithTangent(tangent);\n\t\t\tfor (var j = 0, m = curveTimes.length; j < m; j++) {\n\t\t\t\tvar offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n\t\t\t\tif (offsets.indexOf(offset) < 0) {\n\t\t\t\t\toffsets.push(offset);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcurveStart += curve.length;\n\t\t}\n\t\treturn offsets;\n\t}\n}),\nnew function() {\n\n\tfunction drawHandles(ctx, segments, matrix, size) {\n\t\tif (size <= 0) return;\n\n\t\tvar half = size / 2,\n\t\t\tminiSize = size - 2,\n\t\t\tminiHalf = half - 1,\n\t\t\tcoords = new Array(6),\n\t\t\tpX, pY;\n\n\t\tfunction drawHandle(index) {\n\t\t\tvar hX = coords[index],\n\t\t\t\thY = coords[index + 1];\n\t\t\tif (pX != hX || pY != hY) {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(pX, pY);\n\t\t\t\tctx.lineTo(hX, hY);\n\t\t\t\tctx.stroke();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n\t\t\t\tctx.fill();\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar segment = segments[i],\n\t\t\t\tselection = segment._selection;\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tpX = coords[0];\n\t\t\tpY = coords[1];\n\t\t\tif (selection & 2)\n\t\t\t\tdrawHandle(2);\n\t\t\tif (selection & 4)\n\t\t\t\tdrawHandle(4);\n\t\t\tctx.fillRect(pX - half, pY - half, size, size);\n\t\t\tif (miniSize > 0 && !(selection & 1)) {\n\t\t\t\tvar fillStyle = ctx.fillStyle;\n\t\t\t\tctx.fillStyle = '#ffffff';\n\t\t\t\tctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n\t\t\t\tctx.fillStyle = fillStyle;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawSegments(ctx, path, matrix) {\n\t\tvar segments = path._segments,\n\t\t\tlength = segments.length,\n\t\t\tcoords = new Array(6),\n\t\t\tfirst = true,\n\t\t\tcurX, curY,\n\t\t\tprevX, prevY,\n\t\t\tinX, inY,\n\t\t\toutX, outY;\n\n\t\tfunction drawSegment(segment) {\n\t\t\tif (matrix) {\n\t\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\t\tcurX = coords[0];\n\t\t\t\tcurY = coords[1];\n\t\t\t} else {\n\t\t\t\tvar point = segment._point;\n\t\t\t\tcurX = point._x;\n\t\t\t\tcurY = point._y;\n\t\t\t}\n\t\t\tif (first) {\n\t\t\t\tctx.moveTo(curX, curY);\n\t\t\t\tfirst = false;\n\t\t\t} else {\n\t\t\t\tif (matrix) {\n\t\t\t\t\tinX = coords[2];\n\t\t\t\t\tinY = coords[3];\n\t\t\t\t} else {\n\t\t\t\t\tvar handle = segment._handleIn;\n\t\t\t\t\tinX = curX + handle._x;\n\t\t\t\t\tinY = curY + handle._y;\n\t\t\t\t}\n\t\t\t\tif (inX === curX && inY === curY\n\t\t\t\t\t\t&& outX === prevX && outY === prevY) {\n\t\t\t\t\tctx.lineTo(curX, curY);\n\t\t\t\t} else {\n\t\t\t\t\tctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n\t\t\t\t}\n\t\t\t}\n\t\t\tprevX = curX;\n\t\t\tprevY = curY;\n\t\t\tif (matrix) {\n\t\t\t\toutX = coords[4];\n\t\t\t\toutY = coords[5];\n\t\t\t} else {\n\t\t\t\tvar handle = segment._handleOut;\n\t\t\t\toutX = prevX + handle._x;\n\t\t\t\toutY = prevY + handle._y;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\tdrawSegment(segments[i]);\n\t\tif (path._closed && length > 0)\n\t\t\tdrawSegment(segments[0]);\n\t}\n\n\treturn {\n\t\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\t\tvar dontStart = param.dontStart,\n\t\t\t\tdontPaint = param.dontFinish || param.clip,\n\t\t\t\tstyle = this.getStyle(),\n\t\t\t\thasFill = style.hasFill(),\n\t\t\t\thasStroke = style.hasStroke(),\n\t\t\t\tdashArray = style.getDashArray(),\n\t\t\t\tdashLength = !paper.support.nativeDash && hasStroke\n\t\t\t\t\t\t&& dashArray && dashArray.length;\n\n\t\t\tif (!dontStart)\n\t\t\t\tctx.beginPath();\n\n\t\t\tif (hasFill || hasStroke && !dashLength || dontPaint) {\n\t\t\t\tdrawSegments(ctx, this, strokeMatrix);\n\t\t\t\tif (this._closed)\n\t\t\t\t\tctx.closePath();\n\t\t\t}\n\n\t\t\tfunction getOffset(i) {\n\t\t\t\treturn dashArray[((i % dashLength) + dashLength) % dashLength];\n\t\t\t}\n\n\t\t\tif (!dontPaint && (hasFill || hasStroke)) {\n\t\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\t\tif (hasFill) {\n\t\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t\t}\n\t\t\t\tif (hasStroke) {\n\t\t\t\t\tif (dashLength) {\n\t\t\t\t\t\tif (!dontStart)\n\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tvar flattener = new PathFlattener(this, 0.25, 32, false,\n\t\t\t\t\t\t\t\tstrokeMatrix),\n\t\t\t\t\t\t\tlength = flattener.length,\n\t\t\t\t\t\t\tfrom = -style.getDashOffset(), to,\n\t\t\t\t\t\t\ti = 0;\n\t\t\t\t\t\twhile (from > 0) {\n\t\t\t\t\t\t\tfrom -= getOffset(i--) + getOffset(i--);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile (from < length) {\n\t\t\t\t\t\t\tto = from + getOffset(i++);\n\t\t\t\t\t\t\tif (from > 0 || to > 0)\n\t\t\t\t\t\t\t\tflattener.drawPart(ctx,\n\t\t\t\t\t\t\t\t\t\tMath.max(from, 0), Math.max(to, 0));\n\t\t\t\t\t\t\tfrom = to + getOffset(i++);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_drawSelected: function(ctx, matrix) {\n\t\t\tctx.beginPath();\n\t\t\tdrawSegments(ctx, this, matrix);\n\t\t\tctx.stroke();\n\t\t\tdrawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n\t\t}\n\t};\n},\nnew function() {\n\tfunction getCurrentSegment(that) {\n\t\tvar segments = that._segments;\n\t\tif (!segments.length)\n\t\t\tthrow new Error('Use a moveTo() command first');\n\t\treturn segments[segments.length - 1];\n\t}\n\n\treturn {\n\t\tmoveTo: function() {\n\t\t\tvar segments = this._segments;\n\t\t\tif (segments.length === 1)\n\t\t\t\tthis.removeSegment(0);\n\t\t\tif (!segments.length)\n\t\t\t\tthis._add([ new Segment(Point.read(arguments)) ]);\n\t\t},\n\n\t\tmoveBy: function() {\n\t\t\tthrow new Error('moveBy() is unsupported on Path items.');\n\t\t},\n\n\t\tlineTo: function() {\n\t\t\tthis._add([ new Segment(Point.read(arguments)) ]);\n\t\t},\n\n\t\tcubicCurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle1 = Point.read(args),\n\t\t\t\thandle2 = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this);\n\t\t\tcurrent.setHandleOut(handle1.subtract(current._point));\n\t\t\tthis._add([ new Segment(to, handle2.subtract(to)) ]);\n\t\t},\n\n\t\tquadraticCurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.cubicCurveTo(\n\t\t\t\thandle.add(current.subtract(handle).multiply(1 / 3)),\n\t\t\t\thandle.add(to.subtract(handle).multiply(1 / 3)),\n\t\t\t\tto\n\t\t\t);\n\t\t},\n\n\t\tcurveTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tthrough = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tt = Base.pick(Base.read(args), 0.5),\n\t\t\t\tt1 = 1 - t,\n\t\t\t\tcurrent = getCurrentSegment(this)._point,\n\t\t\t\thandle = through.subtract(current.multiply(t1 * t1))\n\t\t\t\t\t.subtract(to.multiply(t * t)).divide(2 * t * t1);\n\t\t\tif (handle.isNaN())\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'Cannot put a curve through points with parameter = ' + t);\n\t\t\tthis.quadraticCurveTo(handle, to);\n\t\t},\n\n\t\tarcTo: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tabs = Math.abs,\n\t\t\t\tsqrt = Math.sqrt,\n\t\t\t\tcurrent = getCurrentSegment(this),\n\t\t\t\tfrom = current._point,\n\t\t\t\tto = Point.read(args),\n\t\t\t\tthrough,\n\t\t\t\tpeek = Base.peek(args),\n\t\t\t\tclockwise = Base.pick(peek, true),\n\t\t\t\tcenter, extent, vector, matrix;\n\t\t\tif (typeof clockwise === 'boolean') {\n\t\t\t\tvar middle = from.add(to).divide(2),\n\t\t\t\tthrough = middle.add(middle.subtract(from).rotate(\n\t\t\t\t\t\tclockwise ? -90 : 90));\n\t\t\t} else if (Base.remain(args) <= 2) {\n\t\t\t\tthrough = to;\n\t\t\t\tto = Point.read(args);\n\t\t\t} else if (!from.equals(to)) {\n\t\t\t\tvar radius = Size.read(args),\n\t\t\t\t\tisZero = Numerical.isZero;\n\t\t\t\tif (isZero(radius.width) || isZero(radius.height))\n\t\t\t\t\treturn this.lineTo(to);\n\t\t\t\tvar rotation = Base.read(args),\n\t\t\t\t\tclockwise = !!Base.read(args),\n\t\t\t\t\tlarge = !!Base.read(args),\n\t\t\t\t\tmiddle = from.add(to).divide(2),\n\t\t\t\t\tpt = from.subtract(middle).rotate(-rotation),\n\t\t\t\t\tx = pt.x,\n\t\t\t\t\ty = pt.y,\n\t\t\t\t\trx = abs(radius.width),\n\t\t\t\t\try = abs(radius.height),\n\t\t\t\t\trxSq = rx * rx,\n\t\t\t\t\trySq = ry * ry,\n\t\t\t\t\txSq = x * x,\n\t\t\t\t\tySq = y * y;\n\t\t\t\tvar factor = sqrt(xSq / rxSq + ySq / rySq);\n\t\t\t\tif (factor > 1) {\n\t\t\t\t\trx *= factor;\n\t\t\t\t\try *= factor;\n\t\t\t\t\trxSq = rx * rx;\n\t\t\t\t\trySq = ry * ry;\n\t\t\t\t}\n\t\t\t\tfactor = (rxSq * rySq - rxSq * ySq - rySq * xSq) /\n\t\t\t\t\t\t(rxSq * ySq + rySq * xSq);\n\t\t\t\tif (abs(factor) < 1e-12)\n\t\t\t\t\tfactor = 0;\n\t\t\t\tif (factor < 0)\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Cannot create an arc with the given arguments');\n\t\t\t\tcenter = new Point(rx * y / ry, -ry * x / rx)\n\t\t\t\t\t\t.multiply((large === clockwise ? -1 : 1) * sqrt(factor))\n\t\t\t\t\t\t.rotate(rotation).add(middle);\n\t\t\t\tmatrix = new Matrix().translate(center).rotate(rotation)\n\t\t\t\t\t\t.scale(rx, ry);\n\t\t\t\tvector = matrix._inverseTransform(from);\n\t\t\t\textent = vector.getDirectedAngle(matrix._inverseTransform(to));\n\t\t\t\tif (!clockwise && extent > 0)\n\t\t\t\t\textent -= 360;\n\t\t\t\telse if (clockwise && extent < 0)\n\t\t\t\t\textent += 360;\n\t\t\t}\n\t\t\tif (through) {\n\t\t\t\tvar l1 = new Line(from.add(through).divide(2),\n\t\t\t\t\t\t\tthrough.subtract(from).rotate(90), true),\n\t\t\t\t\tl2 = new Line(through.add(to).divide(2),\n\t\t\t\t\t\t\tto.subtract(through).rotate(90), true),\n\t\t\t\t\tline = new Line(from, to),\n\t\t\t\t\tthroughSide = line.getSide(through);\n\t\t\t\tcenter = l1.intersect(l2, true);\n\t\t\t\tif (!center) {\n\t\t\t\t\tif (!throughSide)\n\t\t\t\t\t\treturn this.lineTo(to);\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Cannot create an arc with the given arguments');\n\t\t\t\t}\n\t\t\t\tvector = from.subtract(center);\n\t\t\t\textent = vector.getDirectedAngle(to.subtract(center));\n\t\t\t\tvar centerSide = line.getSide(center, true);\n\t\t\t\tif (centerSide === 0) {\n\t\t\t\t\textent = throughSide * abs(extent);\n\t\t\t\t} else if (throughSide === centerSide) {\n\t\t\t\t\textent += extent < 0 ? 360 : -360;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extent) {\n\t\t\t\tvar epsilon = 1e-7,\n\t\t\t\t\text = abs(extent),\n\t\t\t\t\tcount = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n\t\t\t\t\tinc = extent / count,\n\t\t\t\t\thalf = inc * Math.PI / 360,\n\t\t\t\t\tz = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n\t\t\t\t\tsegments = [];\n\t\t\t\tfor (var i = 0; i <= count; i++) {\n\t\t\t\t\tvar pt = to,\n\t\t\t\t\t\tout = null;\n\t\t\t\t\tif (i < count) {\n\t\t\t\t\t\tout = vector.rotate(90).multiply(z);\n\t\t\t\t\t\tif (matrix) {\n\t\t\t\t\t\t\tpt = matrix._transformPoint(vector);\n\t\t\t\t\t\t\tout = matrix._transformPoint(vector.add(out))\n\t\t\t\t\t\t\t\t\t.subtract(pt);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpt = center.add(vector);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!i) {\n\t\t\t\t\t\tcurrent.setHandleOut(out);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar _in = vector.rotate(-90).multiply(z);\n\t\t\t\t\t\tif (matrix) {\n\t\t\t\t\t\t\t_in = matrix._transformPoint(vector.add(_in))\n\t\t\t\t\t\t\t\t\t.subtract(pt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsegments.push(new Segment(pt, _in, out));\n\t\t\t\t\t}\n\t\t\t\t\tvector = vector.rotate(inc);\n\t\t\t\t}\n\t\t\t\tthis._add(segments);\n\t\t\t}\n\t\t},\n\n\t\tlineBy: function() {\n\t\t\tvar to = Point.read(arguments),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.lineTo(current.add(to));\n\t\t},\n\n\t\tcurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tthrough = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tparameter = Base.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.curveTo(current.add(through), current.add(to), parameter);\n\t\t},\n\n\t\tcubicCurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle1 = Point.read(args),\n\t\t\t\thandle2 = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.cubicCurveTo(current.add(handle1), current.add(handle2),\n\t\t\t\t\tcurrent.add(to));\n\t\t},\n\n\t\tquadraticCurveBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\thandle = Point.read(args),\n\t\t\t\tto = Point.read(args),\n\t\t\t\tcurrent = getCurrentSegment(this)._point;\n\t\t\tthis.quadraticCurveTo(current.add(handle), current.add(to));\n\t\t},\n\n\t\tarcBy: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcurrent = getCurrentSegment(this)._point,\n\t\t\t\tpoint = current.add(Point.read(args)),\n\t\t\t\tclockwise = Base.pick(Base.peek(args), true);\n\t\t\tif (typeof clockwise === 'boolean') {\n\t\t\t\tthis.arcTo(point, clockwise);\n\t\t\t} else {\n\t\t\t\tthis.arcTo(point, current.add(Point.read(args)));\n\t\t\t}\n\t\t},\n\n\t\tclosePath: function(tolerance) {\n\t\t\tthis.setClosed(true);\n\t\t\tthis.join(this, tolerance);\n\t\t}\n\t};\n}, {\n\n\t_getBounds: function(matrix, options) {\n\t\tvar method = options.handle\n\t\t\t\t? 'getHandleBounds'\n\t\t\t\t: options.stroke\n\t\t\t\t? 'getStrokeBounds'\n\t\t\t\t: 'getBounds';\n\t\treturn Path[method](this._segments, this._closed, this, matrix, options);\n\t},\n\nstatics: {\n\tgetBounds: function(segments, closed, path, matrix, options, strokePadding) {\n\t\tvar first = segments[0];\n\t\tif (!first)\n\t\t\treturn new Rectangle();\n\t\tvar coords = new Array(6),\n\t\t\tprevCoords = first._transformCoordinates(matrix, new Array(6)),\n\t\t\tmin = prevCoords.slice(0, 2),\n\t\t\tmax = min.slice(),\n\t\t\troots = new Array(2);\n\n\t\tfunction processSegment(segment) {\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tfor (var i = 0; i < 2; i++) {\n\t\t\t\tCurve._addBounds(\n\t\t\t\t\tprevCoords[i],\n\t\t\t\t\tprevCoords[i + 4],\n\t\t\t\t\tcoords[i + 2],\n\t\t\t\t\tcoords[i],\n\t\t\t\t\ti, strokePadding ? strokePadding[i] : 0, min, max, roots);\n\t\t\t}\n\t\t\tvar tmp = prevCoords;\n\t\t\tprevCoords = coords;\n\t\t\tcoords = tmp;\n\t\t}\n\n\t\tfor (var i = 1, l = segments.length; i < l; i++)\n\t\t\tprocessSegment(segments[i]);\n\t\tif (closed)\n\t\t\tprocessSegment(first);\n\t\treturn new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n\t},\n\n\tgetStrokeBounds: function(segments, closed, path, matrix, options) {\n\t\tvar style = path.getStyle(),\n\t\t\tstroke = style.hasStroke(),\n\t\t\tstrokeWidth = style.getStrokeWidth(),\n\t\t\tstrokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n\t\t\tstrokePadding = stroke && Path._getStrokePadding(strokeWidth,\n\t\t\t\tstrokeMatrix),\n\t\t\tbounds = Path.getBounds(segments, closed, path, matrix, options,\n\t\t\t\tstrokePadding);\n\t\tif (!stroke)\n\t\t\treturn bounds;\n\t\tvar strokeRadius = strokeWidth / 2,\n\t\t\tjoin = style.getStrokeJoin(),\n\t\t\tcap = style.getStrokeCap(),\n\t\t\tmiterLimit = style.getMiterLimit(),\n\t\t\tjoinBounds = new Rectangle(new Size(strokePadding));\n\n\t\tfunction addPoint(point) {\n\t\t\tbounds = bounds.include(point);\n\t\t}\n\n\t\tfunction addRound(segment) {\n\t\t\tbounds = bounds.unite(\n\t\t\t\t\tjoinBounds.setCenter(segment._point.transform(matrix)));\n\t\t}\n\n\t\tfunction addJoin(segment, join) {\n\t\t\tif (join === 'round' || segment.isSmooth()) {\n\t\t\t\taddRound(segment);\n\t\t\t} else {\n\t\t\t\tPath._addBevelJoin(segment, join, strokeRadius, miterLimit,\n\t\t\t\t\t\tmatrix, strokeMatrix, addPoint);\n\t\t\t}\n\t\t}\n\n\t\tfunction addCap(segment, cap) {\n\t\t\tif (cap === 'round') {\n\t\t\t\taddRound(segment);\n\t\t\t} else {\n\t\t\t\tPath._addSquareCap(segment, cap, strokeRadius, matrix,\n\t\t\t\t\t\tstrokeMatrix, addPoint);\n\t\t\t}\n\t\t}\n\n\t\tvar length = segments.length - (closed ? 0 : 1);\n\t\tif (length > 0) {\n\t\t\tfor (var i = 1; i < length; i++) {\n\t\t\t\taddJoin(segments[i], join);\n\t\t\t}\n\t\t\tif (closed) {\n\t\t\t\taddJoin(segments[0], join);\n\t\t\t} else {\n\t\t\t\taddCap(segments[0], cap);\n\t\t\t\taddCap(segments[segments.length - 1], cap);\n\t\t\t}\n\t\t}\n\t\treturn bounds;\n\t},\n\n\t_getStrokePadding: function(radius, matrix) {\n\t\tif (!matrix)\n\t\t\treturn [radius, radius];\n\t\tvar hor = new Point(radius, 0).transform(matrix),\n\t\t\tver = new Point(0, radius).transform(matrix),\n\t\t\tphi = hor.getAngleInRadians(),\n\t\t\ta = hor.getLength(),\n\t\t\tb = ver.getLength();\n\t\tvar sin = Math.sin(phi),\n\t\t\tcos = Math.cos(phi),\n\t\t\ttan = Math.tan(phi),\n\t\t\ttx = Math.atan2(b * tan, a),\n\t\t\tty = Math.atan2(b, tan * a);\n\t\treturn [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin),\n\t\t\t\tMath.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n\t},\n\n\t_addBevelJoin: function(segment, join, radius, miterLimit, matrix,\n\t\t\tstrokeMatrix, addPoint, isArea) {\n\t\tvar curve2 = segment.getCurve(),\n\t\t\tcurve1 = curve2.getPrevious(),\n\t\t\tpoint = curve2.getPoint1().transform(matrix),\n\t\t\tnormal1 = curve1.getNormalAtTime(1).multiply(radius)\n\t\t\t\t.transform(strokeMatrix),\n\t\t\tnormal2 = curve2.getNormalAtTime(0).multiply(radius)\n\t\t\t\t.transform(strokeMatrix),\n\t\t\t\tangle = normal1.getDirectedAngle(normal2);\n\t\tif (angle < 0 || angle >= 180) {\n\t\t\tnormal1 = normal1.negate();\n\t\t\tnormal2 = normal2.negate();\n\t\t}\n\t\tif (isArea)\n\t\t\taddPoint(point);\n\t\taddPoint(point.add(normal1));\n\t\tif (join === 'miter') {\n\t\t\tvar corner = new Line(point.add(normal1),\n\t\t\t\t\tnew Point(-normal1.y, normal1.x), true\n\t\t\t\t).intersect(new Line(point.add(normal2),\n\t\t\t\t\tnew Point(-normal2.y, normal2.x), true\n\t\t\t\t), true);\n\t\t\tif (corner && point.getDistance(corner) <= miterLimit * radius) {\n\t\t\t\taddPoint(corner);\n\t\t\t}\n\t\t}\n\t\taddPoint(point.add(normal2));\n\t},\n\n\t_addSquareCap: function(segment, cap, radius, matrix, strokeMatrix,\n\t\t\taddPoint, isArea) {\n\t\tvar point = segment._point.transform(matrix),\n\t\t\tloc = segment.getLocation(),\n\t\t\tnormal = loc.getNormal()\n\t\t\t\t\t.multiply(loc.getTime() === 0 ? radius : -radius)\n\t\t\t\t\t.transform(strokeMatrix);\n\t\tif (cap === 'square') {\n\t\t\tif (isArea) {\n\t\t\t\taddPoint(point.subtract(normal));\n\t\t\t\taddPoint(point.add(normal));\n\t\t\t}\n\t\t\tpoint = point.add(normal.rotate(-90));\n\t\t}\n\t\taddPoint(point.add(normal));\n\t\taddPoint(point.subtract(normal));\n\t},\n\n\tgetHandleBounds: function(segments, closed, path, matrix, options) {\n\t\tvar style = path.getStyle(),\n\t\t\tstroke = options.stroke && style.hasStroke(),\n\t\t\tstrokePadding,\n\t\t\tjoinPadding;\n\t\tif (stroke) {\n\t\t\tvar strokeMatrix = path._getStrokeMatrix(matrix, options),\n\t\t\t\tstrokeRadius = style.getStrokeWidth() / 2,\n\t\t\t\tjoinRadius = strokeRadius;\n\t\t\tif (style.getStrokeJoin() === 'miter')\n\t\t\t\tjoinRadius = strokeRadius * style.getMiterLimit();\n\t\t\tif (style.getStrokeCap() === 'square')\n\t\t\t\tjoinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n\t\t\tstrokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n\t\t\tjoinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n\t\t}\n\t\tvar coords = new Array(6),\n\t\t\tx1 = Infinity,\n\t\t\tx2 = -x1,\n\t\t\ty1 = x1,\n\t\t\ty2 = x2;\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar segment = segments[i];\n\t\t\tsegment._transformCoordinates(matrix, coords);\n\t\t\tfor (var j = 0; j < 6; j += 2) {\n\t\t\t\tvar padding = !j ? joinPadding : strokePadding,\n\t\t\t\t\tpaddingX = padding ? padding[0] : 0,\n\t\t\t\t\tpaddingY = padding ? padding[1] : 0,\n\t\t\t\t\tx = coords[j],\n\t\t\t\t\ty = coords[j + 1],\n\t\t\t\t\txn = x - paddingX,\n\t\t\t\t\txx = x + paddingX,\n\t\t\t\t\tyn = y - paddingY,\n\t\t\t\t\tyx = y + paddingY;\n\t\t\t\tif (xn < x1) x1 = xn;\n\t\t\t\tif (xx > x2) x2 = xx;\n\t\t\t\tif (yn < y1) y1 = yn;\n\t\t\t\tif (yx > y2) y2 = yx;\n\t\t\t}\n\t\t}\n\t\treturn new Rectangle(x1, y1, x2 - x1, y2 - y1);\n\t}\n}});\n\nPath.inject({ statics: new function() {\n\n\tvar kappa = 0.5522847498307936,\n\t\tellipseSegments = [\n\t\t\tnew Segment([-1, 0], [0, kappa ], [0, -kappa]),\n\t\t\tnew Segment([0, -1], [-kappa, 0], [kappa, 0 ]),\n\t\t\tnew Segment([1, 0], [0, -kappa], [0, kappa ]),\n\t\t\tnew Segment([0, 1], [kappa, 0 ], [-kappa, 0])\n\t\t];\n\n\tfunction createPath(segments, closed, args) {\n\t\tvar props = Base.getNamed(args),\n\t\t\tpath = new Path(props && props.insert == false && Item.NO_INSERT);\n\t\tpath._add(segments);\n\t\tpath._closed = closed;\n\t\treturn path.set(props, { insert: true });\n\t}\n\n\tfunction createEllipse(center, radius, args) {\n\t\tvar segments = new Array(4);\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tvar segment = ellipseSegments[i];\n\t\t\tsegments[i] = new Segment(\n\t\t\t\tsegment._point.multiply(radius).add(center),\n\t\t\t\tsegment._handleIn.multiply(radius),\n\t\t\t\tsegment._handleOut.multiply(radius)\n\t\t\t);\n\t\t}\n\t\treturn createPath(segments, true, args);\n\t}\n\n\treturn {\n\t\tLine: function() {\n\t\t\tvar args = arguments;\n\t\t\treturn createPath([\n\t\t\t\tnew Segment(Point.readNamed(args, 'from')),\n\t\t\t\tnew Segment(Point.readNamed(args, 'to'))\n\t\t\t], false, args);\n\t\t},\n\n\t\tCircle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tradius = Base.readNamed(args, 'radius');\n\t\t\treturn createEllipse(center, new Size(radius), args);\n\t\t},\n\n\t\tRectangle: function() {\n\t\t\tvar args = arguments,\n\t\t\t\trect = Rectangle.readNamed(args, 'rectangle'),\n\t\t\t\tradius = Size.readNamed(args, 'radius', 0,\n\t\t\t\t\t\t{ readNull: true }),\n\t\t\t\tbl = rect.getBottomLeft(true),\n\t\t\t\ttl = rect.getTopLeft(true),\n\t\t\t\ttr = rect.getTopRight(true),\n\t\t\t\tbr = rect.getBottomRight(true),\n\t\t\t\tsegments;\n\t\t\tif (!radius || radius.isZero()) {\n\t\t\t\tsegments = [\n\t\t\t\t\tnew Segment(bl),\n\t\t\t\t\tnew Segment(tl),\n\t\t\t\t\tnew Segment(tr),\n\t\t\t\t\tnew Segment(br)\n\t\t\t\t];\n\t\t\t} else {\n\t\t\t\tradius = Size.min(radius, rect.getSize(true).divide(2));\n\t\t\t\tvar rx = radius.width,\n\t\t\t\t\try = radius.height,\n\t\t\t\t\thx = rx * kappa,\n\t\t\t\t\thy = ry * kappa;\n\t\t\t\tsegments = [\n\t\t\t\t\tnew Segment(bl.add(rx, 0), null, [-hx, 0]),\n\t\t\t\t\tnew Segment(bl.subtract(0, ry), [0, hy]),\n\t\t\t\t\tnew Segment(tl.add(0, ry), null, [0, -hy]),\n\t\t\t\t\tnew Segment(tl.add(rx, 0), [-hx, 0], null),\n\t\t\t\t\tnew Segment(tr.subtract(rx, 0), null, [hx, 0]),\n\t\t\t\t\tnew Segment(tr.add(0, ry), [0, -hy], null),\n\t\t\t\t\tnew Segment(br.subtract(0, ry), null, [0, hy]),\n\t\t\t\t\tnew Segment(br.subtract(rx, 0), [hx, 0])\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn createPath(segments, true, args);\n\t\t},\n\n\t\tRoundRectangle: '#Rectangle',\n\n\t\tEllipse: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tellipse = Shape._readEllipse(args);\n\t\t\treturn createEllipse(ellipse.center, ellipse.radius, args);\n\t\t},\n\n\t\tOval: '#Ellipse',\n\n\t\tArc: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tfrom = Point.readNamed(args, 'from'),\n\t\t\t\tthrough = Point.readNamed(args, 'through'),\n\t\t\t\tto = Point.readNamed(args, 'to'),\n\t\t\t\tprops = Base.getNamed(args),\n\t\t\t\tpath = new Path(props && props.insert == false\n\t\t\t\t\t\t&& Item.NO_INSERT);\n\t\t\tpath.moveTo(from);\n\t\t\tpath.arcTo(through, to);\n\t\t\treturn path.set(props);\n\t\t},\n\n\t\tRegularPolygon: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tsides = Base.readNamed(args, 'sides'),\n\t\t\t\tradius = Base.readNamed(args, 'radius'),\n\t\t\t\tstep = 360 / sides,\n\t\t\t\tthree = sides % 3 === 0,\n\t\t\t\tvector = new Point(0, three ? -radius : radius),\n\t\t\t\toffset = three ? -1 : 0.5,\n\t\t\t\tsegments = new Array(sides);\n\t\t\tfor (var i = 0; i < sides; i++)\n\t\t\t\tsegments[i] = new Segment(center.add(\n\t\t\t\t\tvector.rotate((i + offset) * step)));\n\t\t\treturn createPath(segments, true, args);\n\t\t},\n\n\t\tStar: function() {\n\t\t\tvar args = arguments,\n\t\t\t\tcenter = Point.readNamed(args, 'center'),\n\t\t\t\tpoints = Base.readNamed(args, 'points') * 2,\n\t\t\t\tradius1 = Base.readNamed(args, 'radius1'),\n\t\t\t\tradius2 = Base.readNamed(args, 'radius2'),\n\t\t\t\tstep = 360 / points,\n\t\t\t\tvector = new Point(0, -1),\n\t\t\t\tsegments = new Array(points);\n\t\t\tfor (var i = 0; i < points; i++)\n\t\t\t\tsegments[i] = new Segment(center.add(vector.rotate(step * i)\n\t\t\t\t\t\t.multiply(i % 2 ? radius2 : radius1)));\n\t\t\treturn createPath(segments, true, args);\n\t\t}\n\t};\n}});\n\nvar CompoundPath = PathItem.extend({\n\t_class: 'CompoundPath',\n\t_serializeFields: {\n\t\tchildren: []\n\t},\n\tbeans: true,\n\n\tinitialize: function CompoundPath(arg) {\n\t\tthis._children = [];\n\t\tthis._namedChildren = {};\n\t\tif (!this._initialize(arg)) {\n\t\t\tif (typeof arg === 'string') {\n\t\t\t\tthis.setPathData(arg);\n\t\t\t} else {\n\t\t\t\tthis.addChildren(Array.isArray(arg) ? arg : arguments);\n\t\t\t}\n\t\t}\n\t},\n\n\tinsertChildren: function insertChildren(index, items) {\n\t\tvar list = items,\n\t\t\tfirst = list[0];\n\t\tif (first && typeof first[0] === 'number')\n\t\t\tlist = [list];\n\t\tfor (var i = items.length - 1; i >= 0; i--) {\n\t\t\tvar item = list[i];\n\t\t\tif (list === items && !(item instanceof Path))\n\t\t\t\tlist = Base.slice(list);\n\t\t\tif (Array.isArray(item)) {\n\t\t\t\tlist[i] = new Path({ segments: item, insert: false });\n\t\t\t} else if (item instanceof CompoundPath) {\n\t\t\t\tlist.splice.apply(list, [i, 1].concat(item.removeChildren()));\n\t\t\t\titem.remove();\n\t\t\t}\n\t\t}\n\t\treturn insertChildren.base.call(this, index, list);\n\t},\n\n\treduce: function reduce(options) {\n\t\tvar children = this._children;\n\t\tfor (var i = children.length - 1; i >= 0; i--) {\n\t\t\tvar path = children[i].reduce(options);\n\t\t\tif (path.isEmpty())\n\t\t\t\tpath.remove();\n\t\t}\n\t\tif (!children.length) {\n\t\t\tvar path = new Path(Item.NO_INSERT);\n\t\t\tpath.copyAttributes(this);\n\t\t\tpath.insertAbove(this);\n\t\t\tthis.remove();\n\t\t\treturn path;\n\t\t}\n\t\treturn reduce.base.call(this);\n\t},\n\n\tisClosed: function() {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tif (!children[i]._closed)\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tsetClosed: function(closed) {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tchildren[i].setClosed(closed);\n\t\t}\n\t},\n\n\tgetFirstSegment: function() {\n\t\tvar first = this.getFirstChild();\n\t\treturn first && first.getFirstSegment();\n\t},\n\n\tgetLastSegment: function() {\n\t\tvar last = this.getLastChild();\n\t\treturn last && last.getLastSegment();\n\t},\n\n\tgetCurves: function() {\n\t\tvar children = this._children,\n\t\t\tcurves = [];\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tBase.push(curves, children[i].getCurves());\n\t\t}\n\t\treturn curves;\n\t},\n\n\tgetFirstCurve: function() {\n\t\tvar first = this.getFirstChild();\n\t\treturn first && first.getFirstCurve();\n\t},\n\n\tgetLastCurve: function() {\n\t\tvar last = this.getLastChild();\n\t\treturn last && last.getLastCurve();\n\t},\n\n\tgetArea: function() {\n\t\tvar children = this._children,\n\t\t\tarea = 0;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tarea += children[i].getArea();\n\t\treturn area;\n\t},\n\n\tgetLength: function() {\n\t\tvar children = this._children,\n\t\t\tlength = 0;\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tlength += children[i].getLength();\n\t\treturn length;\n\t},\n\n\tgetPathData: function(_matrix, _precision) {\n\t\tvar children = this._children,\n\t\t\tpaths = [];\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i],\n\t\t\t\tmx = child._matrix;\n\t\t\tpaths.push(child.getPathData(_matrix && !mx.isIdentity()\n\t\t\t\t\t? _matrix.appended(mx) : _matrix, _precision));\n\t\t}\n\t\treturn paths.join('');\n\t},\n\n\t_hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n\t\treturn _hitTestChildren.base.call(this, point,\n\t\t\t\toptions.class === Path || options.type === 'path' ? options\n\t\t\t\t\t: Base.set({}, options, { fill: false }),\n\t\t\t\tviewMatrix);\n\t},\n\n\t_draw: function(ctx, param, viewMatrix, strokeMatrix) {\n\t\tvar children = this._children;\n\t\tif (!children.length)\n\t\t\treturn;\n\n\t\tparam = param.extend({ dontStart: true, dontFinish: true });\n\t\tctx.beginPath();\n\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\tchildren[i].draw(ctx, param, strokeMatrix);\n\n\t\tif (!param.clip) {\n\t\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\t\tvar style = this._style;\n\t\t\tif (style.hasFill()) {\n\t\t\t\tctx.fill(style.getFillRule());\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (style.hasStroke())\n\t\t\t\tctx.stroke();\n\t\t}\n\t},\n\n\t_drawSelected: function(ctx, matrix, selectionItems) {\n\t\tvar children = this._children;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i],\n\t\t\t\tmx = child._matrix;\n\t\t\tif (!selectionItems[child._id]) {\n\t\t\t\tchild._drawSelected(ctx, mx.isIdentity() ? matrix\n\t\t\t\t\t\t: matrix.appended(mx));\n\t\t\t}\n\t\t}\n\t}\n},\nnew function() {\n\tfunction getCurrentPath(that, check) {\n\t\tvar children = that._children;\n\t\tif (check && !children.length)\n\t\t\tthrow new Error('Use a moveTo() command first');\n\t\treturn children[children.length - 1];\n\t}\n\n\treturn Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo',\n\t\t\t'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy',\n\t\t\t'arcBy'],\n\t\tfunction(key) {\n\t\t\tthis[key] = function() {\n\t\t\t\tvar path = getCurrentPath(this, true);\n\t\t\t\tpath[key].apply(path, arguments);\n\t\t\t};\n\t\t}, {\n\t\t\tmoveTo: function() {\n\t\t\t\tvar current = getCurrentPath(this),\n\t\t\t\t\tpath = current && current.isEmpty() ? current\n\t\t\t\t\t\t\t: new Path(Item.NO_INSERT);\n\t\t\t\tif (path !== current)\n\t\t\t\t\tthis.addChild(path);\n\t\t\t\tpath.moveTo.apply(path, arguments);\n\t\t\t},\n\n\t\t\tmoveBy: function() {\n\t\t\t\tvar current = getCurrentPath(this, true),\n\t\t\t\t\tlast = current && current.getLastSegment(),\n\t\t\t\t\tpoint = Point.read(arguments);\n\t\t\t\tthis.moveTo(last ? point.add(last._point) : point);\n\t\t\t},\n\n\t\t\tclosePath: function(tolerance) {\n\t\t\t\tgetCurrentPath(this, true).closePath(tolerance);\n\t\t\t}\n\t\t}\n\t);\n}, Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function(key) {\n\tthis[key] = function(param) {\n\t\tvar children = this._children,\n\t\t\tres;\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tres = children[i][key](param) || res;\n\t\t}\n\t\treturn res;\n\t};\n}, {}));\n\nPathItem.inject(new function() {\n\tvar min = Math.min,\n\t\tmax = Math.max,\n\t\tabs = Math.abs,\n\t\toperators = {\n\t\t\tunite:     { '1': true, '2': true },\n\t\t\tintersect: { '2': true },\n\t\t\tsubtract:  { '1': true },\n\t\t\texclude:   { '1': true, '-1': true }\n\t\t};\n\n\tfunction getPaths(path) {\n\t\treturn path._children || [path];\n\t}\n\n\tfunction preparePath(path, resolve) {\n\t\tvar res = path\n\t\t\t.clone(false)\n\t\t\t.reduce({ simplify: true })\n\t\t\t.transform(null, true, true);\n\t\tif (resolve) {\n\t\t\tvar paths = getPaths(res);\n\t\t\tfor (var i = 0, l = paths.length; i < l; i++) {\n\t\t\t\tvar path = paths[i];\n\t\t\t\tif (!path._closed && !path.isEmpty()) {\n\t\t\t\t\tpath.closePath(1e-12);\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(0, 0);\n\t\t\t\t\tpath.getLastSegment().setHandleOut(0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tres = res\n\t\t\t\t.resolveCrossings()\n\t\t\t\t.reorient(res.getFillRule() === 'nonzero', true);\n\t\t}\n\t\treturn res;\n\t}\n\n\tfunction createResult(paths, simplify, path1, path2, options) {\n\t\tvar result = new CompoundPath(Item.NO_INSERT);\n\t\tresult.addChildren(paths, true);\n\t\tresult = result.reduce({ simplify: simplify });\n\t\tif (!(options && options.insert == false)) {\n\t\t\tresult.insertAbove(path2 && path1.isSibling(path2)\n\t\t\t\t\t&& path1.getIndex() < path2.getIndex() ? path2 : path1);\n\t\t}\n\t\tresult.copyAttributes(path1, true);\n\t\treturn result;\n\t}\n\n\tfunction filterIntersection(inter) {\n\t\treturn inter.hasOverlap() || inter.isCrossing();\n\t}\n\n\tfunction traceBoolean(path1, path2, operation, options) {\n\t\tif (options && (options.trace == false || options.stroke) &&\n\t\t\t\t/^(subtract|intersect)$/.test(operation))\n\t\t\treturn splitBoolean(path1, path2, operation);\n\t\tvar _path1 = preparePath(path1, true),\n\t\t\t_path2 = path2 && path1 !== path2 && preparePath(path2, true),\n\t\t\toperator = operators[operation];\n\t\toperator[operation] = true;\n\t\tif (_path2 && (operator.subtract || operator.exclude)\n\t\t\t\t^ (_path2.isClockwise() ^ _path1.isClockwise()))\n\t\t\t_path2.reverse();\n\t\tvar crossings = divideLocations(CurveLocation.expand(\n\t\t\t\t_path1.getIntersections(_path2, filterIntersection))),\n\t\t\tpaths1 = getPaths(_path1),\n\t\t\tpaths2 = _path2 && getPaths(_path2),\n\t\t\tsegments = [],\n\t\t\tcurves = [],\n\t\t\tpaths;\n\n\t\tfunction collectPaths(paths) {\n\t\t\tfor (var i = 0, l = paths.length; i < l; i++) {\n\t\t\t\tvar path = paths[i];\n\t\t\t\tBase.push(segments, path._segments);\n\t\t\t\tBase.push(curves, path.getCurves());\n\t\t\t\tpath._overlapsOnly = true;\n\t\t\t}\n\t\t}\n\n\t\tfunction getCurves(indices) {\n\t\t\tvar list = [];\n\t\t\tfor (var i = 0, l = indices && indices.length; i < l; i++) {\n\t\t\t\tlist.push(curves[indices[i]]);\n\t\t\t}\n\t\t\treturn list;\n\t\t}\n\n\t\tif (crossings.length) {\n\t\t\tcollectPaths(paths1);\n\t\t\tif (paths2)\n\t\t\t\tcollectPaths(paths2);\n\n\t\t\tvar curvesValues = new Array(curves.length);\n\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\tcurvesValues[i] = curves[i].getValues();\n\t\t\t}\n\t\t\tvar curveCollisions = CollisionDetection.findCurveBoundsCollisions(\n\t\t\t\t\tcurvesValues, curvesValues, 0, true);\n\t\t\tvar curveCollisionsMap = {};\n\t\t\tfor (var i = 0; i < curves.length; i++) {\n\t\t\t\tvar curve = curves[i],\n\t\t\t\t\tid = curve._path._id,\n\t\t\t\t\tmap = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n\t\t\t\tmap[curve.getIndex()] = {\n\t\t\t\t\thor: getCurves(curveCollisions[i].hor),\n\t\t\t\t\tver: getCurves(curveCollisions[i].ver)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (var i = 0, l = crossings.length; i < l; i++) {\n\t\t\t\tpropagateWinding(crossings[i]._segment, _path1, _path2,\n\t\t\t\t\t\tcurveCollisionsMap, operator);\n\t\t\t}\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tvar segment = segments[i],\n\t\t\t\t\tinter = segment._intersection;\n\t\t\t\tif (!segment._winding) {\n\t\t\t\t\tpropagateWinding(segment, _path1, _path2,\n\t\t\t\t\t\t\tcurveCollisionsMap, operator);\n\t\t\t\t}\n\t\t\t\tif (!(inter && inter._overlap))\n\t\t\t\t\tsegment._path._overlapsOnly = false;\n\t\t\t}\n\t\t\tpaths = tracePaths(segments, operator);\n\t\t} else {\n\t\t\tpaths = reorientPaths(\n\t\t\t\t\tpaths2 ? paths1.concat(paths2) : paths1.slice(),\n\t\t\t\t\tfunction(w) {\n\t\t\t\t\t\treturn !!operator[w];\n\t\t\t\t\t});\n\t\t}\n\t\treturn createResult(paths, true, path1, path2, options);\n\t}\n\n\tfunction splitBoolean(path1, path2, operation) {\n\t\tvar _path1 = preparePath(path1),\n\t\t\t_path2 = preparePath(path2),\n\t\t\tcrossings = _path1.getIntersections(_path2, filterIntersection),\n\t\t\tsubtract = operation === 'subtract',\n\t\t\tdivide = operation === 'divide',\n\t\t\tadded = {},\n\t\t\tpaths = [];\n\n\t\tfunction addPath(path) {\n\t\t\tif (!added[path._id] && (divide ||\n\t\t\t\t\t_path2.contains(path.getPointAt(path.getLength() / 2))\n\t\t\t\t\t\t^ subtract)) {\n\t\t\t\tpaths.unshift(path);\n\t\t\t\treturn added[path._id] = true;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = crossings.length - 1; i >= 0; i--) {\n\t\t\tvar path = crossings[i].split();\n\t\t\tif (path) {\n\t\t\t\tif (addPath(path))\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(0, 0);\n\t\t\t\t_path1.getLastSegment().setHandleOut(0, 0);\n\t\t\t}\n\t\t}\n\t\taddPath(_path1);\n\t\treturn createResult(paths, false, path1, path2);\n\t}\n\n\tfunction linkIntersections(from, to) {\n\t\tvar prev = from;\n\t\twhile (prev) {\n\t\t\tif (prev === to)\n\t\t\t\treturn;\n\t\t\tprev = prev._previous;\n\t\t}\n\t\twhile (from._next && from._next !== to)\n\t\t\tfrom = from._next;\n\t\tif (!from._next) {\n\t\t\twhile (to._previous)\n\t\t\t\tto = to._previous;\n\t\t\tfrom._next = to;\n\t\t\tto._previous = from;\n\t\t}\n\t}\n\n\tfunction clearCurveHandles(curves) {\n\t\tfor (var i = curves.length - 1; i >= 0; i--)\n\t\t\tcurves[i].clearHandles();\n\t}\n\n\tfunction reorientPaths(paths, isInside, clockwise) {\n\t\tvar length = paths && paths.length;\n\t\tif (length) {\n\t\t\tvar lookup = Base.each(paths, function (path, i) {\n\t\t\t\t\tthis[path._id] = {\n\t\t\t\t\t\tcontainer: null,\n\t\t\t\t\t\twinding: path.isClockwise() ? 1 : -1,\n\t\t\t\t\t\tindex: i\n\t\t\t\t\t};\n\t\t\t\t}, {}),\n\t\t\t\tsorted = paths.slice().sort(function (a, b) {\n\t\t\t\t\treturn abs(b.getArea()) - abs(a.getArea());\n\t\t\t\t}),\n\t\t\t\tfirst = sorted[0];\n\t\t\tvar collisions = CollisionDetection.findItemBoundsCollisions(sorted,\n\t\t\t\t\tnull, Numerical.GEOMETRIC_EPSILON);\n\t\t\tif (clockwise == null)\n\t\t\t\tclockwise = first.isClockwise();\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tvar path1 = sorted[i],\n\t\t\t\t\tentry1 = lookup[path1._id],\n\t\t\t\t\tcontainerWinding = 0,\n\t\t\t\t\tindices = collisions[i];\n\t\t\t\tif (indices) {\n\t\t\t\t\tvar point = null;\n\t\t\t\t\tfor (var j = indices.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tif (indices[j] < i) {\n\t\t\t\t\t\t\tpoint = point || path1.getInteriorPoint();\n\t\t\t\t\t\t\tvar path2 = sorted[indices[j]];\n\t\t\t\t\t\t\tif (path2.contains(point)) {\n\t\t\t\t\t\t\t\tvar entry2 = lookup[path2._id];\n\t\t\t\t\t\t\t\tcontainerWinding = entry2.winding;\n\t\t\t\t\t\t\t\tentry1.winding += containerWinding;\n\t\t\t\t\t\t\t\tentry1.container = entry2.exclude\n\t\t\t\t\t\t\t\t\t? entry2.container : path2;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isInside(entry1.winding) === isInside(containerWinding)) {\n\t\t\t\t\tentry1.exclude = true;\n\t\t\t\t\tpaths[entry1.index] = null;\n\t\t\t\t} else {\n\t\t\t\t\tvar container = entry1.container;\n\t\t\t\t\tpath1.setClockwise(\n\t\t\t\t\t\t\tcontainer ? !container.isClockwise() : clockwise);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn paths;\n\t}\n\n\tfunction divideLocations(locations, include, clearLater) {\n\t\tvar results = include && [],\n\t\t\ttMin = 1e-8,\n\t\t\ttMax = 1 - tMin,\n\t\t\tclearHandles = false,\n\t\t\tclearCurves = clearLater || [],\n\t\t\tclearLookup = clearLater && {},\n\t\t\trenormalizeLocs,\n\t\t\tprevCurve,\n\t\t\tprevTime;\n\n\t\tfunction getId(curve) {\n\t\t\treturn curve._path._id + '.' + curve._segment1._index;\n\t\t}\n\n\t\tfor (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n\t\t\tvar curve = clearLater[i];\n\t\t\tif (curve._path)\n\t\t\t\tclearLookup[getId(curve)] = true;\n\t\t}\n\n\t\tfor (var i = locations.length - 1; i >= 0; i--) {\n\t\t\tvar loc = locations[i],\n\t\t\t\ttime = loc._time,\n\t\t\t\torigTime = time,\n\t\t\t\texclude = include && !include(loc),\n\t\t\t\tcurve = loc._curve,\n\t\t\t\tsegment;\n\t\t\tif (curve) {\n\t\t\t\tif (curve !== prevCurve) {\n\t\t\t\t\tclearHandles = !curve.hasHandles()\n\t\t\t\t\t\t\t|| clearLookup && clearLookup[getId(curve)];\n\t\t\t\t\trenormalizeLocs = [];\n\t\t\t\t\tprevTime = null;\n\t\t\t\t\tprevCurve = curve;\n\t\t\t\t} else if (prevTime >= tMin) {\n\t\t\t\t\ttime /= prevTime;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (exclude) {\n\t\t\t\tif (renormalizeLocs)\n\t\t\t\t\trenormalizeLocs.push(loc);\n\t\t\t\tcontinue;\n\t\t\t} else if (include) {\n\t\t\t\tresults.unshift(loc);\n\t\t\t}\n\t\t\tprevTime = origTime;\n\t\t\tif (time < tMin) {\n\t\t\t\tsegment = curve._segment1;\n\t\t\t} else if (time > tMax) {\n\t\t\t\tsegment = curve._segment2;\n\t\t\t} else {\n\t\t\t\tvar newCurve = curve.divideAtTime(time, true);\n\t\t\t\tif (clearHandles)\n\t\t\t\t\tclearCurves.push(curve, newCurve);\n\t\t\t\tsegment = newCurve._segment1;\n\t\t\t\tfor (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n\t\t\t\t\tvar l = renormalizeLocs[j];\n\t\t\t\t\tl._time = (l._time - time) / (1 - time);\n\t\t\t\t}\n\t\t\t}\n\t\t\tloc._setSegment(segment);\n\t\t\tvar inter = segment._intersection,\n\t\t\t\tdest = loc._intersection;\n\t\t\tif (inter) {\n\t\t\t\tlinkIntersections(inter, dest);\n\t\t\t\tvar other = inter;\n\t\t\t\twhile (other) {\n\t\t\t\t\tlinkIntersections(other._intersection, inter);\n\t\t\t\t\tother = other._next;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsegment._intersection = dest;\n\t\t\t}\n\t\t}\n\t\tif (!clearLater)\n\t\t\tclearCurveHandles(clearCurves);\n\t\treturn results || locations;\n\t}\n\n\tfunction getWinding(point, curves, dir, closed, dontFlip) {\n\t\tvar curvesList = Array.isArray(curves)\n\t\t\t? curves\n\t\t\t: curves[dir ? 'hor' : 'ver'];\n\t\tvar ia = dir ? 1 : 0,\n\t\t\tio = ia ^ 1,\n\t\t\tpv = [point.x, point.y],\n\t\t\tpa = pv[ia],\n\t\t\tpo = pv[io],\n\t\t\twindingEpsilon = 1e-9,\n\t\t\tqualityEpsilon = 1e-6,\n\t\t\tpaL = pa - windingEpsilon,\n\t\t\tpaR = pa + windingEpsilon,\n\t\t\twindingL = 0,\n\t\t\twindingR = 0,\n\t\t\tpathWindingL = 0,\n\t\t\tpathWindingR = 0,\n\t\t\tonPath = false,\n\t\t\tonAnyPath = false,\n\t\t\tquality = 1,\n\t\t\troots = [],\n\t\t\tvPrev,\n\t\t\tvClose;\n\n\t\tfunction addWinding(v) {\n\t\t\tvar o0 = v[io + 0],\n\t\t\t\to3 = v[io + 6];\n\t\t\tif (po < min(o0, o3) || po > max(o0, o3)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar a0 = v[ia + 0],\n\t\t\t\ta1 = v[ia + 2],\n\t\t\t\ta2 = v[ia + 4],\n\t\t\t\ta3 = v[ia + 6];\n\t\t\tif (o0 === o3) {\n\t\t\t\tif (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n\t\t\t\t\tonPath = true;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar t =   po === o0 ? 0\n\t\t\t\t\t: po === o3 ? 1\n\t\t\t\t\t: paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3)\n\t\t\t\t\t? 1\n\t\t\t\t\t: Curve.solveCubic(v, io, po, roots, 0, 1) > 0\n\t\t\t\t\t\t? roots[0]\n\t\t\t\t\t\t: 1,\n\t\t\t\ta =   t === 0 ? a0\n\t\t\t\t\t: t === 1 ? a3\n\t\t\t\t\t: Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n\t\t\t\twinding = o0 > o3 ? 1 : -1,\n\t\t\t\twindingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n\t\t\t\ta3Prev = vPrev[ia + 6];\n\t\t\tif (po !== o0) {\n\t\t\t\tif (a < paL) {\n\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t} else if (a > paR) {\n\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t} else {\n\t\t\t\t\tonPath = true;\n\t\t\t\t}\n\t\t\t\tif (a > pa - qualityEpsilon && a < pa + qualityEpsilon)\n\t\t\t\t\tquality /= 2;\n\t\t\t} else {\n\t\t\t\tif (winding !== windingPrev) {\n\t\t\t\t\tif (a0 < paL) {\n\t\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t\t} else if (a0 > paR) {\n\t\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t\t}\n\t\t\t\t} else if (a0 != a3Prev) {\n\t\t\t\t\tif (a3Prev < paR && a > paR) {\n\t\t\t\t\t\tpathWindingR += winding;\n\t\t\t\t\t\tonPath = true;\n\t\t\t\t\t} else if (a3Prev > paL && a < paL) {\n\t\t\t\t\t\tpathWindingL += winding;\n\t\t\t\t\t\tonPath = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tquality /= 4;\n\t\t\t}\n\t\t\tvPrev = v;\n\t\t\treturn !dontFlip && a > paL && a < paR\n\t\t\t\t\t&& Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0\n\t\t\t\t\t&& getWinding(point, curves, !dir, closed, true);\n\t\t}\n\n\t\tfunction handleCurve(v) {\n\t\t\tvar o0 = v[io + 0],\n\t\t\t\to1 = v[io + 2],\n\t\t\t\to2 = v[io + 4],\n\t\t\t\to3 = v[io + 6];\n\t\t\tif (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n\t\t\t\tvar a0 = v[ia + 0],\n\t\t\t\t\ta1 = v[ia + 2],\n\t\t\t\t\ta2 = v[ia + 4],\n\t\t\t\t\ta3 = v[ia + 6],\n\t\t\t\t\tmonoCurves = paL > max(a0, a1, a2, a3) ||\n\t\t\t\t\t\t\t\t paR < min(a0, a1, a2, a3)\n\t\t\t\t\t\t\t? [v] : Curve.getMonoCurves(v, dir),\n\t\t\t\t\tres;\n\t\t\t\tfor (var i = 0, l = monoCurves.length; i < l; i++) {\n\t\t\t\t\tif (res = addWinding(monoCurves[i]))\n\t\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, l = curvesList.length; i < l; i++) {\n\t\t\tvar curve = curvesList[i],\n\t\t\t\tpath = curve._path,\n\t\t\t\tv = curve.getValues(),\n\t\t\t\tres;\n\t\t\tif (!i || curvesList[i - 1]._path !== path) {\n\t\t\t\tvPrev = null;\n\t\t\t\tif (!path._closed) {\n\t\t\t\t\tvClose = Curve.getValues(\n\t\t\t\t\t\t\tpath.getLastCurve().getSegment2(),\n\t\t\t\t\t\t\tcurve.getSegment1(),\n\t\t\t\t\t\t\tnull, !closed);\n\t\t\t\t\tif (vClose[io] !== vClose[io + 6]) {\n\t\t\t\t\t\tvPrev = vClose;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!vPrev) {\n\t\t\t\t\tvPrev = v;\n\t\t\t\t\tvar prev = path.getLastCurve();\n\t\t\t\t\twhile (prev && prev !== curve) {\n\t\t\t\t\t\tvar v2 = prev.getValues();\n\t\t\t\t\t\tif (v2[io] !== v2[io + 6]) {\n\t\t\t\t\t\t\tvPrev = v2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprev = prev.getPrevious();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (res = handleCurve(v))\n\t\t\t\treturn res;\n\n\t\t\tif (i + 1 === l || curvesList[i + 1]._path !== path) {\n\t\t\t\tif (vClose && (res = handleCurve(vClose)))\n\t\t\t\t\treturn res;\n\t\t\t\tif (onPath && !pathWindingL && !pathWindingR) {\n\t\t\t\t\tpathWindingL = pathWindingR = path.isClockwise(closed) ^ dir\n\t\t\t\t\t\t\t? 1 : -1;\n\t\t\t\t}\n\t\t\t\twindingL += pathWindingL;\n\t\t\t\twindingR += pathWindingR;\n\t\t\t\tpathWindingL = pathWindingR = 0;\n\t\t\t\tif (onPath) {\n\t\t\t\t\tonAnyPath = true;\n\t\t\t\t\tonPath = false;\n\t\t\t\t}\n\t\t\t\tvClose = null;\n\t\t\t}\n\t\t}\n\t\twindingL = abs(windingL);\n\t\twindingR = abs(windingR);\n\t\treturn {\n\t\t\twinding: max(windingL, windingR),\n\t\t\twindingL: windingL,\n\t\t\twindingR: windingR,\n\t\t\tquality: quality,\n\t\t\tonPath: onAnyPath\n\t\t};\n\t}\n\n\tfunction propagateWinding(segment, path1, path2, curveCollisionsMap,\n\t\t\toperator) {\n\t\tvar chain = [],\n\t\t\tstart = segment,\n\t\t\ttotalLength = 0,\n\t\t\twinding;\n\t\tdo {\n\t\t\tvar curve = segment.getCurve();\n\t\t\tif (curve) {\n\t\t\t\tvar length = curve.getLength();\n\t\t\t\tchain.push({ segment: segment, curve: curve, length: length });\n\t\t\t\ttotalLength += length;\n\t\t\t}\n\t\t\tsegment = segment.getNext();\n\t\t} while (segment && !segment._intersection && segment !== start);\n\t\tvar offsets = [0.5, 0.25, 0.75],\n\t\t\twinding = { winding: 0, quality: -1 },\n\t\t\ttMin = 1e-3,\n\t\t\ttMax = 1 - tMin;\n\t\tfor (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n\t\t\tvar length = totalLength * offsets[i];\n\t\t\tfor (var j = 0, l = chain.length; j < l; j++) {\n\t\t\t\tvar entry = chain[j],\n\t\t\t\t\tcurveLength = entry.length;\n\t\t\t\tif (length <= curveLength) {\n\t\t\t\t\tvar curve = entry.curve,\n\t\t\t\t\t\tpath = curve._path,\n\t\t\t\t\t\tparent = path._parent,\n\t\t\t\t\t\toperand = parent instanceof CompoundPath ? parent : path,\n\t\t\t\t\t\tt = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n\t\t\t\t\t\tpt = curve.getPointAtTime(t),\n\t\t\t\t\t\tdir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n\t\t\t\t\tvar wind = null;\n\t\t\t\t\tif (operator.subtract && path2) {\n\t\t\t\t\t\tvar otherPath = operand === path1 ? path2 : path1,\n\t\t\t\t\t\t\tpathWinding = otherPath._getWinding(pt, dir, true);\n\t\t\t\t\t\tif (operand === path1 && pathWinding.winding ||\n\t\t\t\t\t\t\toperand === path2 && !pathWinding.winding) {\n\t\t\t\t\t\t\tif (pathWinding.quality < 1) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twind = { winding: 0, quality: 1 };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twind =  wind || getWinding(\n\t\t\t\t\t\t\tpt, curveCollisionsMap[path._id][curve.getIndex()],\n\t\t\t\t\t\t\tdir, true);\n\t\t\t\t\tif (wind.quality > winding.quality)\n\t\t\t\t\t\twinding = wind;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlength -= curveLength;\n\t\t\t}\n\t\t}\n\t\tfor (var j = chain.length - 1; j >= 0; j--) {\n\t\t\tchain[j].segment._winding = winding;\n\t\t}\n\t}\n\n\tfunction tracePaths(segments, operator) {\n\t\tvar paths = [],\n\t\t\tstarts;\n\n\t\tfunction isValid(seg) {\n\t\t\tvar winding;\n\t\t\treturn !!(seg && !seg._visited && (!operator\n\t\t\t\t\t|| operator[(winding = seg._winding || {}).winding]\n\t\t\t\t\t\t&& !(operator.unite && winding.winding === 2\n\t\t\t\t\t\t\t&& winding.windingL && winding.windingR)));\n\t\t}\n\n\t\tfunction isStart(seg) {\n\t\t\tif (seg) {\n\t\t\t\tfor (var i = 0, l = starts.length; i < l; i++) {\n\t\t\t\t\tif (seg === starts[i])\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction visitPath(path) {\n\t\t\tvar segments = path._segments;\n\t\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\t\tsegments[i]._visited = true;\n\t\t\t}\n\t\t}\n\n\t\tfunction getCrossingSegments(segment, collectStarts) {\n\t\t\tvar inter = segment._intersection,\n\t\t\t\tstart = inter,\n\t\t\t\tcrossings = [];\n\t\t\tif (collectStarts)\n\t\t\t\tstarts = [segment];\n\n\t\t\tfunction collect(inter, end) {\n\t\t\t\twhile (inter && inter !== end) {\n\t\t\t\t\tvar other = inter._segment,\n\t\t\t\t\t\tpath = other && other._path;\n\t\t\t\t\tif (path) {\n\t\t\t\t\t\tvar next = other.getNext() || path.getFirstSegment(),\n\t\t\t\t\t\t\tnextInter = next._intersection;\n\t\t\t\t\t\tif (other !== segment && (isStart(other)\n\t\t\t\t\t\t\t|| isStart(next)\n\t\t\t\t\t\t\t|| next && (isValid(other) && (isValid(next)\n\t\t\t\t\t\t\t\t|| nextInter && isValid(nextInter._segment))))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tcrossings.push(other);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (collectStarts)\n\t\t\t\t\t\t\tstarts.push(other);\n\t\t\t\t\t}\n\t\t\t\t\tinter = inter._next;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (inter) {\n\t\t\t\tcollect(inter);\n\t\t\t\twhile (inter && inter._previous)\n\t\t\t\t\tinter = inter._previous;\n\t\t\t\tcollect(inter, start);\n\t\t\t}\n\t\t\treturn crossings;\n\t\t}\n\n\t\tsegments.sort(function(seg1, seg2) {\n\t\t\tvar inter1 = seg1._intersection,\n\t\t\t\tinter2 = seg2._intersection,\n\t\t\t\tover1 = !!(inter1 && inter1._overlap),\n\t\t\t\tover2 = !!(inter2 && inter2._overlap),\n\t\t\t\tpath1 = seg1._path,\n\t\t\t\tpath2 = seg2._path;\n\t\t\treturn over1 ^ over2\n\t\t\t\t\t? over1 ? 1 : -1\n\t\t\t\t\t: !inter1 ^ !inter2\n\t\t\t\t\t\t? inter1 ? 1 : -1\n\t\t\t\t\t\t: path1 !== path2\n\t\t\t\t\t\t\t? path1._id - path2._id\n\t\t\t\t\t\t\t: seg1._index - seg2._index;\n\t\t});\n\n\t\tfor (var i = 0, l = segments.length; i < l; i++) {\n\t\t\tvar seg = segments[i],\n\t\t\t\tvalid = isValid(seg),\n\t\t\t\tpath = null,\n\t\t\t\tfinished = false,\n\t\t\t\tclosed = true,\n\t\t\t\tbranches = [],\n\t\t\t\tbranch,\n\t\t\t\tvisited,\n\t\t\t\thandleIn;\n\t\t\tif (valid && seg._path._overlapsOnly) {\n\t\t\t\tvar path1 = seg._path,\n\t\t\t\t\tpath2 = seg._intersection._segment._path;\n\t\t\t\tif (path1.compare(path2)) {\n\t\t\t\t\tif (path1.getArea())\n\t\t\t\t\t\tpaths.push(path1.clone(false));\n\t\t\t\t\tvisitPath(path1);\n\t\t\t\t\tvisitPath(path2);\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (valid) {\n\t\t\t\tvar first = !path,\n\t\t\t\t\tcrossings = getCrossingSegments(seg, first),\n\t\t\t\t\tother = crossings.shift(),\n\t\t\t\t\tfinished = !first && (isStart(seg) || isStart(other)),\n\t\t\t\t\tcross = !finished && other;\n\t\t\t\tif (first) {\n\t\t\t\t\tpath = new Path(Item.NO_INSERT);\n\t\t\t\t\tbranch = null;\n\t\t\t\t}\n\t\t\t\tif (finished) {\n\t\t\t\t\tif (seg.isFirst() || seg.isLast())\n\t\t\t\t\t\tclosed = seg._path._closed;\n\t\t\t\t\tseg._visited = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (cross && branch) {\n\t\t\t\t\tbranches.push(branch);\n\t\t\t\t\tbranch = null;\n\t\t\t\t}\n\t\t\t\tif (!branch) {\n\t\t\t\t\tif (cross)\n\t\t\t\t\t\tcrossings.push(seg);\n\t\t\t\t\tbranch = {\n\t\t\t\t\t\tstart: path._segments.length,\n\t\t\t\t\t\tcrossings: crossings,\n\t\t\t\t\t\tvisited: visited = [],\n\t\t\t\t\t\thandleIn: handleIn\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (cross)\n\t\t\t\t\tseg = other;\n\t\t\t\tif (!isValid(seg)) {\n\t\t\t\t\tpath.removeSegments(branch.start);\n\t\t\t\t\tfor (var j = 0, k = visited.length; j < k; j++) {\n\t\t\t\t\t\tvisited[j]._visited = false;\n\t\t\t\t\t}\n\t\t\t\t\tvisited.length = 0;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tseg = branch && branch.crossings.shift();\n\t\t\t\t\t\tif (!seg || !seg._path) {\n\t\t\t\t\t\t\tseg = null;\n\t\t\t\t\t\t\tbranch = branches.pop();\n\t\t\t\t\t\t\tif (branch) {\n\t\t\t\t\t\t\t\tvisited = branch.visited;\n\t\t\t\t\t\t\t\thandleIn = branch.handleIn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} while (branch && !isValid(seg));\n\t\t\t\t\tif (!seg)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar next = seg.getNext();\n\t\t\t\tpath.add(new Segment(seg._point, handleIn,\n\t\t\t\t\t\tnext && seg._handleOut));\n\t\t\t\tseg._visited = true;\n\t\t\t\tvisited.push(seg);\n\t\t\t\tseg = next || seg._path.getFirstSegment();\n\t\t\t\thandleIn = next && next._handleIn;\n\t\t\t}\n\t\t\tif (finished) {\n\t\t\t\tif (closed) {\n\t\t\t\t\tpath.getFirstSegment().setHandleIn(handleIn);\n\t\t\t\t\tpath.setClosed(closed);\n\t\t\t\t}\n\t\t\t\tif (path.getArea() !== 0) {\n\t\t\t\t\tpaths.push(path);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn paths;\n\t}\n\n\treturn {\n\t\t_getWinding: function(point, dir, closed) {\n\t\t\treturn getWinding(point, this.getCurves(), dir, closed);\n\t\t},\n\n\t\tunite: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'unite', options);\n\t\t},\n\n\t\tintersect: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'intersect', options);\n\t\t},\n\n\t\tsubtract: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'subtract', options);\n\t\t},\n\n\t\texclude: function(path, options) {\n\t\t\treturn traceBoolean(this, path, 'exclude', options);\n\t\t},\n\n\t\tdivide: function(path, options) {\n\t\t\treturn options && (options.trace == false || options.stroke)\n\t\t\t\t\t? splitBoolean(this, path, 'divide')\n\t\t\t\t\t: createResult([\n\t\t\t\t\t\tthis.subtract(path, options),\n\t\t\t\t\t\tthis.intersect(path, options)\n\t\t\t\t\t], true, this, path, options);\n\t\t},\n\n\t\tresolveCrossings: function() {\n\t\t\tvar children = this._children,\n\t\t\t\tpaths = children || [this];\n\n\t\t\tfunction hasOverlap(seg, path) {\n\t\t\t\tvar inter = seg && seg._intersection;\n\t\t\t\treturn inter && inter._overlap && inter._path === path;\n\t\t\t}\n\n\t\t\tvar hasOverlaps = false,\n\t\t\t\thasCrossings = false,\n\t\t\t\tintersections = this.getIntersections(null, function(inter) {\n\t\t\t\t\treturn inter.hasOverlap() && (hasOverlaps = true) ||\n\t\t\t\t\t\t\tinter.isCrossing() && (hasCrossings = true);\n\t\t\t\t}),\n\t\t\t\tclearCurves = hasOverlaps && hasCrossings && [];\n\t\t\tintersections = CurveLocation.expand(intersections);\n\t\t\tif (hasOverlaps) {\n\t\t\t\tvar overlaps = divideLocations(intersections, function(inter) {\n\t\t\t\t\treturn inter.hasOverlap();\n\t\t\t\t}, clearCurves);\n\t\t\t\tfor (var i = overlaps.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar overlap = overlaps[i],\n\t\t\t\t\t\tpath = overlap._path,\n\t\t\t\t\t\tseg = overlap._segment,\n\t\t\t\t\t\tprev = seg.getPrevious(),\n\t\t\t\t\t\tnext = seg.getNext();\n\t\t\t\t\tif (hasOverlap(prev, path) && hasOverlap(next, path)) {\n\t\t\t\t\t\tseg.remove();\n\t\t\t\t\t\tprev._handleOut._set(0, 0);\n\t\t\t\t\t\tnext._handleIn._set(0, 0);\n\t\t\t\t\t\tif (prev !== seg && !prev.getCurve().hasLength()) {\n\t\t\t\t\t\t\tnext._handleIn.set(prev._handleIn);\n\t\t\t\t\t\t\tprev.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasCrossings) {\n\t\t\t\tdivideLocations(intersections, hasOverlaps && function(inter) {\n\t\t\t\t\tvar curve1 = inter.getCurve(),\n\t\t\t\t\t\tseg1 = inter.getSegment(),\n\t\t\t\t\t\tother = inter._intersection,\n\t\t\t\t\t\tcurve2 = other._curve,\n\t\t\t\t\t\tseg2 = other._segment;\n\t\t\t\t\tif (curve1 && curve2 && curve1._path && curve2._path)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tif (seg1)\n\t\t\t\t\t\tseg1._intersection = null;\n\t\t\t\t\tif (seg2)\n\t\t\t\t\t\tseg2._intersection = null;\n\t\t\t\t}, clearCurves);\n\t\t\t\tif (clearCurves)\n\t\t\t\t\tclearCurveHandles(clearCurves);\n\t\t\t\tpaths = tracePaths(Base.each(paths, function(path) {\n\t\t\t\t\tBase.push(this, path._segments);\n\t\t\t\t}, []));\n\t\t\t}\n\t\t\tvar length = paths.length,\n\t\t\t\titem;\n\t\t\tif (length > 1 && children) {\n\t\t\t\tif (paths !== children)\n\t\t\t\t\tthis.setChildren(paths);\n\t\t\t\titem = this;\n\t\t\t} else if (length === 1 && !children) {\n\t\t\t\tif (paths[0] !== this)\n\t\t\t\t\tthis.setSegments(paths[0].removeSegments());\n\t\t\t\titem = this;\n\t\t\t}\n\t\t\tif (!item) {\n\t\t\t\titem = new CompoundPath(Item.NO_INSERT);\n\t\t\t\titem.addChildren(paths);\n\t\t\t\titem = item.reduce();\n\t\t\t\titem.copyAttributes(this);\n\t\t\t\tthis.replaceWith(item);\n\t\t\t}\n\t\t\treturn item;\n\t\t},\n\n\t\treorient: function(nonZero, clockwise) {\n\t\t\tvar children = this._children;\n\t\t\tif (children && children.length) {\n\t\t\t\tthis.setChildren(reorientPaths(this.removeChildren(),\n\t\t\t\t\t\tfunction(w) {\n\t\t\t\t\t\t\treturn !!(nonZero ? w : w & 1);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclockwise));\n\t\t\t} else if (clockwise !== undefined) {\n\t\t\t\tthis.setClockwise(clockwise);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tgetInteriorPoint: function() {\n\t\t\tvar bounds = this.getBounds(),\n\t\t\t\tpoint = bounds.getCenter(true);\n\t\t\tif (!this.contains(point)) {\n\t\t\t\tvar curves = this.getCurves(),\n\t\t\t\t\ty = point.y,\n\t\t\t\t\tintercepts = [],\n\t\t\t\t\troots = [];\n\t\t\t\tfor (var i = 0, l = curves.length; i < l; i++) {\n\t\t\t\t\tvar v = curves[i].getValues(),\n\t\t\t\t\t\to0 = v[1],\n\t\t\t\t\t\to1 = v[3],\n\t\t\t\t\t\to2 = v[5],\n\t\t\t\t\t\to3 = v[7];\n\t\t\t\t\tif (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n\t\t\t\t\t\tvar monoCurves = Curve.getMonoCurves(v);\n\t\t\t\t\t\tfor (var j = 0, m = monoCurves.length; j < m; j++) {\n\t\t\t\t\t\t\tvar mv = monoCurves[j],\n\t\t\t\t\t\t\t\tmo0 = mv[1],\n\t\t\t\t\t\t\t\tmo3 = mv[7];\n\t\t\t\t\t\t\tif ((mo0 !== mo3) &&\n\t\t\t\t\t\t\t\t(y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)){\n\t\t\t\t\t\t\t\tvar x = y === mo0 ? mv[0]\n\t\t\t\t\t\t\t\t\t: y === mo3 ? mv[6]\n\t\t\t\t\t\t\t\t\t: Curve.solveCubic(mv, 1, y, roots, 0, 1)\n\t\t\t\t\t\t\t\t\t\t=== 1\n\t\t\t\t\t\t\t\t\t\t? Curve.getPoint(mv, roots[0]).x\n\t\t\t\t\t\t\t\t\t\t: (mv[0] + mv[6]) / 2;\n\t\t\t\t\t\t\t\tintercepts.push(x);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (intercepts.length > 1) {\n\t\t\t\t\tintercepts.sort(function(a, b) { return a - b; });\n\t\t\t\t\tpoint.x = (intercepts[0] + intercepts[1]) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn point;\n\t\t}\n\t};\n});\n\nvar PathFlattener = Base.extend({\n\t_class: 'PathFlattener',\n\n\tinitialize: function(path, flatness, maxRecursion, ignoreStraight, matrix) {\n\t\tvar curves = [],\n\t\t\tparts = [],\n\t\t\tlength = 0,\n\t\t\tminSpan = 1 / (maxRecursion || 32),\n\t\t\tsegments = path._segments,\n\t\t\tsegment1 = segments[0],\n\t\t\tsegment2;\n\n\t\tfunction addCurve(segment1, segment2) {\n\t\t\tvar curve = Curve.getValues(segment1, segment2, matrix);\n\t\t\tcurves.push(curve);\n\t\t\tcomputeParts(curve, segment1._index, 0, 1);\n\t\t}\n\n\t\tfunction computeParts(curve, index, t1, t2) {\n\t\t\tif ((t2 - t1) > minSpan\n\t\t\t\t\t&& !(ignoreStraight && Curve.isStraight(curve))\n\t\t\t\t\t&& !Curve.isFlatEnough(curve, flatness || 0.25)) {\n\t\t\t\tvar halves = Curve.subdivide(curve, 0.5),\n\t\t\t\t\ttMid = (t1 + t2) / 2;\n\t\t\t\tcomputeParts(halves[0], index, t1, tMid);\n\t\t\t\tcomputeParts(halves[1], index, tMid, t2);\n\t\t\t} else {\n\t\t\t\tvar dx = curve[6] - curve[0],\n\t\t\t\t\tdy = curve[7] - curve[1],\n\t\t\t\t\tdist = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tif (dist > 0) {\n\t\t\t\t\tlength += dist;\n\t\t\t\t\tparts.push({\n\t\t\t\t\t\toffset: length,\n\t\t\t\t\t\tcurve: curve,\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\ttime: t2,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 1, l = segments.length; i < l; i++) {\n\t\t\tsegment2 = segments[i];\n\t\t\taddCurve(segment1, segment2);\n\t\t\tsegment1 = segment2;\n\t\t}\n\t\tif (path._closed)\n\t\t\taddCurve(segment2 || segment1, segments[0]);\n\t\tthis.curves = curves;\n\t\tthis.parts = parts;\n\t\tthis.length = length;\n\t\tthis.index = 0;\n\t},\n\n\t_get: function(offset) {\n\t\tvar parts = this.parts,\n\t\t\tlength = parts.length,\n\t\t\tstart,\n\t\t\ti, j = this.index;\n\t\tfor (;;) {\n\t\t\ti = j;\n\t\t\tif (!j || parts[--j].offset < offset)\n\t\t\t\tbreak;\n\t\t}\n\t\tfor (; i < length; i++) {\n\t\t\tvar part = parts[i];\n\t\t\tif (part.offset >= offset) {\n\t\t\t\tthis.index = i;\n\t\t\t\tvar prev = parts[i - 1],\n\t\t\t\t\tprevTime = prev && prev.index === part.index ? prev.time : 0,\n\t\t\t\t\tprevOffset = prev ? prev.offset : 0;\n\t\t\t\treturn {\n\t\t\t\t\tindex: part.index,\n\t\t\t\t\ttime: prevTime + (part.time - prevTime)\n\t\t\t\t\t\t* (offset - prevOffset) / (part.offset - prevOffset)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tindex: parts[length - 1].index,\n\t\t\ttime: 1\n\t\t};\n\t},\n\n\tdrawPart: function(ctx, from, to) {\n\t\tvar start = this._get(from),\n\t\t\tend = this._get(to);\n\t\tfor (var i = start.index, l = end.index; i <= l; i++) {\n\t\t\tvar curve = Curve.getPart(this.curves[i],\n\t\t\t\t\ti === start.index ? start.time : 0,\n\t\t\t\t\ti === end.index ? end.time : 1);\n\t\t\tif (i === start.index)\n\t\t\t\tctx.moveTo(curve[0], curve[1]);\n\t\t\tctx.bezierCurveTo.apply(ctx, curve.slice(2));\n\t\t}\n\t}\n}, Base.each(Curve._evaluateMethods,\n\tfunction(name) {\n\t\tthis[name + 'At'] = function(offset) {\n\t\t\tvar param = this._get(offset);\n\t\t\treturn Curve[name](this.curves[param.index], param.time);\n\t\t};\n\t}, {})\n);\n\nvar PathFitter = Base.extend({\n\tinitialize: function(path) {\n\t\tvar points = this.points = [],\n\t\t\tsegments = path._segments,\n\t\t\tclosed = path._closed;\n\t\tfor (var i = 0, prev, l = segments.length; i < l; i++) {\n\t\t\tvar point = segments[i].point;\n\t\t\tif (!prev || !prev.equals(point)) {\n\t\t\t\tpoints.push(prev = point.clone());\n\t\t\t}\n\t\t}\n\t\tif (closed) {\n\t\t\tpoints.unshift(points[points.length - 1]);\n\t\t\tpoints.push(points[1]);\n\t\t}\n\t\tthis.closed = closed;\n\t},\n\n\tfit: function(error) {\n\t\tvar points = this.points,\n\t\t\tlength = points.length,\n\t\t\tsegments = null;\n\t\tif (length > 0) {\n\t\t\tsegments = [new Segment(points[0])];\n\t\t\tif (length > 1) {\n\t\t\t\tthis.fitCubic(segments, error, 0, length - 1,\n\t\t\t\t\t\tpoints[1].subtract(points[0]),\n\t\t\t\t\t\tpoints[length - 2].subtract(points[length - 1]));\n\t\t\t\tif (this.closed) {\n\t\t\t\t\tsegments.shift();\n\t\t\t\t\tsegments.pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn segments;\n\t},\n\n\tfitCubic: function(segments, error, first, last, tan1, tan2) {\n\t\tvar points = this.points;\n\t\tif (last - first === 1) {\n\t\t\tvar pt1 = points[first],\n\t\t\t\tpt2 = points[last],\n\t\t\t\tdist = pt1.getDistance(pt2) / 3;\n\t\t\tthis.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)),\n\t\t\t\t\tpt2.add(tan2.normalize(dist)), pt2]);\n\t\t\treturn;\n\t\t}\n\t\tvar uPrime = this.chordLengthParameterize(first, last),\n\t\t\tmaxError = Math.max(error, error * error),\n\t\t\tsplit,\n\t\t\tparametersInOrder = true;\n\t\tfor (var i = 0; i <= 4; i++) {\n\t\t\tvar curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n\t\t\tvar max = this.findMaxError(first, last, curve, uPrime);\n\t\t\tif (max.error < error && parametersInOrder) {\n\t\t\t\tthis.addCurve(segments, curve);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsplit = max.index;\n\t\t\tif (max.error >= maxError)\n\t\t\t\tbreak;\n\t\t\tparametersInOrder = this.reparameterize(first, last, uPrime, curve);\n\t\t\tmaxError = max.error;\n\t\t}\n\t\tvar tanCenter = points[split - 1].subtract(points[split + 1]);\n\t\tthis.fitCubic(segments, error, first, split, tan1, tanCenter);\n\t\tthis.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n\t},\n\n\taddCurve: function(segments, curve) {\n\t\tvar prev = segments[segments.length - 1];\n\t\tprev.setHandleOut(curve[1].subtract(curve[0]));\n\t\tsegments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n\t},\n\n\tgenerateBezier: function(first, last, uPrime, tan1, tan2) {\n\t\tvar epsilon = 1e-12,\n\t\t\tabs = Math.abs,\n\t\t\tpoints = this.points,\n\t\t\tpt1 = points[first],\n\t\t\tpt2 = points[last],\n\t\t\tC = [[0, 0], [0, 0]],\n\t\t\tX = [0, 0];\n\n\t\tfor (var i = 0, l = last - first + 1; i < l; i++) {\n\t\t\tvar u = uPrime[i],\n\t\t\t\tt = 1 - u,\n\t\t\t\tb = 3 * u * t,\n\t\t\t\tb0 = t * t * t,\n\t\t\t\tb1 = b * t,\n\t\t\t\tb2 = b * u,\n\t\t\t\tb3 = u * u * u,\n\t\t\t\ta1 = tan1.normalize(b1),\n\t\t\t\ta2 = tan2.normalize(b2),\n\t\t\t\ttmp = points[first + i]\n\t\t\t\t\t.subtract(pt1.multiply(b0 + b1))\n\t\t\t\t\t.subtract(pt2.multiply(b2 + b3));\n\t\t\tC[0][0] += a1.dot(a1);\n\t\t\tC[0][1] += a1.dot(a2);\n\t\t\tC[1][0] = C[0][1];\n\t\t\tC[1][1] += a2.dot(a2);\n\t\t\tX[0] += a1.dot(tmp);\n\t\t\tX[1] += a2.dot(tmp);\n\t\t}\n\n\t\tvar detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n\t\t\talpha1,\n\t\t\talpha2;\n\t\tif (abs(detC0C1) > epsilon) {\n\t\t\tvar detC0X = C[0][0] * X[1]    - C[1][0] * X[0],\n\t\t\t\tdetXC1 = X[0]    * C[1][1] - X[1]    * C[0][1];\n\t\t\talpha1 = detXC1 / detC0C1;\n\t\t\talpha2 = detC0X / detC0C1;\n\t\t} else {\n\t\t\tvar c0 = C[0][0] + C[0][1],\n\t\t\t\tc1 = C[1][0] + C[1][1];\n\t\t\talpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0\n\t\t\t\t\t\t\t: abs(c1) > epsilon ? X[1] / c1\n\t\t\t\t\t\t\t: 0;\n\t\t}\n\n\t\tvar segLength = pt2.getDistance(pt1),\n\t\t\teps = epsilon * segLength,\n\t\t\thandle1,\n\t\t\thandle2;\n\t\tif (alpha1 < eps || alpha2 < eps) {\n\t\t\talpha1 = alpha2 = segLength / 3;\n\t\t} else {\n\t\t\tvar line = pt2.subtract(pt1);\n\t\t\thandle1 = tan1.normalize(alpha1);\n\t\t\thandle2 = tan2.normalize(alpha2);\n\t\t\tif (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n\t\t\t\talpha1 = alpha2 = segLength / 3;\n\t\t\t\thandle1 = handle2 = null;\n\t\t\t}\n\t\t}\n\n\t\treturn [pt1,\n\t\t\t\tpt1.add(handle1 || tan1.normalize(alpha1)),\n\t\t\t\tpt2.add(handle2 || tan2.normalize(alpha2)),\n\t\t\t\tpt2];\n\t},\n\n\treparameterize: function(first, last, u, curve) {\n\t\tfor (var i = first; i <= last; i++) {\n\t\t\tu[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n\t\t}\n\t\tfor (var i = 1, l = u.length; i < l; i++) {\n\t\t\tif (u[i] <= u[i - 1])\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tfindRoot: function(curve, point, u) {\n\t\tvar curve1 = [],\n\t\t\tcurve2 = [];\n\t\tfor (var i = 0; i <= 2; i++) {\n\t\t\tcurve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n\t\t}\n\t\tfor (var i = 0; i <= 1; i++) {\n\t\t\tcurve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n\t\t}\n\t\tvar pt = this.evaluate(3, curve, u),\n\t\t\tpt1 = this.evaluate(2, curve1, u),\n\t\t\tpt2 = this.evaluate(1, curve2, u),\n\t\t\tdiff = pt.subtract(point),\n\t\t\tdf = pt1.dot(pt1) + diff.dot(pt2);\n\t\treturn Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n\t},\n\n\tevaluate: function(degree, curve, t) {\n\t\tvar tmp = curve.slice();\n\t\tfor (var i = 1; i <= degree; i++) {\n\t\t\tfor (var j = 0; j <= degree - i; j++) {\n\t\t\t\ttmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n\t\t\t}\n\t\t}\n\t\treturn tmp[0];\n\t},\n\n\tchordLengthParameterize: function(first, last) {\n\t\tvar u = [0];\n\t\tfor (var i = first + 1; i <= last; i++) {\n\t\t\tu[i - first] = u[i - first - 1]\n\t\t\t\t\t+ this.points[i].getDistance(this.points[i - 1]);\n\t\t}\n\t\tfor (var i = 1, m = last - first; i <= m; i++) {\n\t\t\tu[i] /= u[m];\n\t\t}\n\t\treturn u;\n\t},\n\n\tfindMaxError: function(first, last, curve, u) {\n\t\tvar index = Math.floor((last - first + 1) / 2),\n\t\t\tmaxDist = 0;\n\t\tfor (var i = first + 1; i < last; i++) {\n\t\t\tvar P = this.evaluate(3, curve, u[i - first]);\n\t\t\tvar v = P.subtract(this.points[i]);\n\t\t\tvar dist = v.x * v.x + v.y * v.y;\n\t\t\tif (dist >= maxDist) {\n\t\t\t\tmaxDist = dist;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\terror: maxDist,\n\t\t\tindex: index\n\t\t};\n\t}\n});\n\nvar TextItem = Item.extend({\n\t_class: 'TextItem',\n\t_applyMatrix: false,\n\t_canApplyMatrix: false,\n\t_serializeFields: {\n\t\tcontent: null\n\t},\n\t_boundsOptions: { stroke: false, handle: false },\n\n\tinitialize: function TextItem(arg) {\n\t\tthis._content = '';\n\t\tthis._lines = [];\n\t\tvar hasProps = arg && Base.isPlainObject(arg)\n\t\t\t\t&& arg.x === undefined && arg.y === undefined;\n\t\tthis._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n\t},\n\n\t_equals: function(item) {\n\t\treturn this._content === item._content;\n\t},\n\n\tcopyContent: function(source) {\n\t\tthis.setContent(source._content);\n\t},\n\n\tgetContent: function() {\n\t\treturn this._content;\n\t},\n\n\tsetContent: function(content) {\n\t\tthis._content = '' + content;\n\t\tthis._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n\t\tthis._changed(521);\n\t},\n\n\tisEmpty: function() {\n\t\treturn !this._content;\n\t},\n\n\tgetCharacterStyle: '#getStyle',\n\tsetCharacterStyle: '#setStyle',\n\n\tgetParagraphStyle: '#getStyle',\n\tsetParagraphStyle: '#setStyle'\n});\n\nvar PointText = TextItem.extend({\n\t_class: 'PointText',\n\n\tinitialize: function PointText() {\n\t\tTextItem.apply(this, arguments);\n\t},\n\n\tgetPoint: function() {\n\t\tvar point = this._matrix.getTranslation();\n\t\treturn new LinkedPoint(point.x, point.y, this, 'setPoint');\n\t},\n\n\tsetPoint: function() {\n\t\tvar point = Point.read(arguments);\n\t\tthis.translate(point.subtract(this._matrix.getTranslation()));\n\t},\n\n\t_draw: function(ctx, param, viewMatrix) {\n\t\tif (!this._content)\n\t\t\treturn;\n\t\tthis._setStyles(ctx, param, viewMatrix);\n\t\tvar lines = this._lines,\n\t\t\tstyle = this._style,\n\t\t\thasFill = style.hasFill(),\n\t\t\thasStroke = style.hasStroke(),\n\t\t\tleading = style.getLeading(),\n\t\t\tshadowColor = ctx.shadowColor;\n\t\tctx.font = style.getFontStyle();\n\t\tctx.textAlign = style.getJustification();\n\t\tfor (var i = 0, l = lines.length; i < l; i++) {\n\t\t\tctx.shadowColor = shadowColor;\n\t\t\tvar line = lines[i];\n\t\t\tif (hasFill) {\n\t\t\t\tctx.fillText(line, 0, 0);\n\t\t\t\tctx.shadowColor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tif (hasStroke)\n\t\t\t\tctx.strokeText(line, 0, 0);\n\t\t\tctx.translate(0, leading);\n\t\t}\n\t},\n\n\t_getBounds: function(matrix, options) {\n\t\tvar style = this._style,\n\t\t\tlines = this._lines,\n\t\t\tnumLines = lines.length,\n\t\t\tjustification = style.getJustification(),\n\t\t\tleading = style.getLeading(),\n\t\t\twidth = this.getView().getTextWidth(style.getFontStyle(), lines),\n\t\t\tx = 0;\n\t\tif (justification !== 'left')\n\t\t\tx -= width / (justification === 'center' ? 2: 1);\n\t\tvar rect = new Rectangle(x,\n\t\t\t\t\tnumLines ? - 0.75 * leading : 0,\n\t\t\t\t\twidth, numLines * leading);\n\t\treturn matrix ? matrix._transformBounds(rect, rect) : rect;\n\t}\n});\n\nvar Color = Base.extend(new function() {\n\tvar types = {\n\t\tgray: ['gray'],\n\t\trgb: ['red', 'green', 'blue'],\n\t\thsb: ['hue', 'saturation', 'brightness'],\n\t\thsl: ['hue', 'saturation', 'lightness'],\n\t\tgradient: ['gradient', 'origin', 'destination', 'highlight']\n\t};\n\n\tvar componentParsers = {},\n\t\tnamedColors = {\n\t\t\ttransparent: [0, 0, 0, 0]\n\t\t},\n\t\tcolorCtx;\n\n\tfunction fromCSS(string) {\n\t\tvar match = string.match(\n\t\t\t\t/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i\n\t\t\t) || string.match(\n\t\t\t\t/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i\n\t\t\t),\n\t\t\ttype = 'rgb',\n\t\t\tcomponents;\n\t\tif (match) {\n\t\t\tvar amount = match[4] ? 4 : 3;\n\t\t\tcomponents = new Array(amount);\n\t\t\tfor (var i = 0; i < amount; i++) {\n\t\t\t\tvar value = match[i + 1];\n\t\t\t\tcomponents[i] = parseInt(value.length == 1\n\t\t\t\t\t\t? value + value : value, 16) / 255;\n\t\t\t}\n\t\t} else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n\t\t\ttype = match[1];\n\t\t\tcomponents = match[2].trim().split(/[,\\s]+/g);\n\t\t\tvar isHSL = type === 'hsl';\n\t\t\tfor (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n\t\t\t\tvar component = components[i];\n\t\t\t\tvar value = parseFloat(component);\n\t\t\t\tif (isHSL) {\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\tvar unit = component.match(/([a-z]*)$/)[1];\n\t\t\t\t\t\tvalue *= ({\n\t\t\t\t\t\t\tturn: 360,\n\t\t\t\t\t\t\trad: 180 / Math.PI,\n\t\t\t\t\t\t\tgrad: 0.9\n\t\t\t\t\t\t}[unit] || 1);\n\t\t\t\t\t} else if (i < 3) {\n\t\t\t\t\t\tvalue /= 100;\n\t\t\t\t\t}\n\t\t\t\t} else if (i < 3) {\n\t\t\t\t\tvalue /= /%$/.test(component) ? 100 : 255;\n\t\t\t\t}\n\t\t\t\tcomponents[i] = value;\n\t\t\t}\n\t\t} else {\n\t\t\tvar color = namedColors[string];\n\t\t\tif (!color) {\n\t\t\t\tif (window) {\n\t\t\t\t\tif (!colorCtx) {\n\t\t\t\t\t\tcolorCtx = CanvasProvider.getContext(1, 1);\n\t\t\t\t\t\tcolorCtx.globalCompositeOperation = 'copy';\n\t\t\t\t\t}\n\t\t\t\t\tcolorCtx.fillStyle = 'rgba(0,0,0,0)';\n\t\t\t\t\tcolorCtx.fillStyle = string;\n\t\t\t\t\tcolorCtx.fillRect(0, 0, 1, 1);\n\t\t\t\t\tvar data = colorCtx.getImageData(0, 0, 1, 1).data;\n\t\t\t\t\tcolor = namedColors[string] = [\n\t\t\t\t\t\tdata[0] / 255,\n\t\t\t\t\t\tdata[1] / 255,\n\t\t\t\t\t\tdata[2] / 255\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tcolor = [0, 0, 0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcomponents = color.slice();\n\t\t}\n\t\treturn [type, components];\n\t}\n\n\tvar hsbIndices = [\n\t\t[0, 3, 1],\n\t\t[2, 0, 1],\n\t\t[1, 0, 3],\n\t\t[1, 2, 0],\n\t\t[3, 1, 0],\n\t\t[0, 1, 2]\n\t];\n\n\tvar converters = {\n\t\t'rgb-hsb': function(r, g, b) {\n\t\t\tvar max = Math.max(r, g, b),\n\t\t\t\tmin = Math.min(r, g, b),\n\t\t\t\tdelta = max - min,\n\t\t\t\th = delta === 0 ? 0\n\t\t\t\t\t:   ( max == r ? (g - b) / delta + (g < b ? 6 : 0)\n\t\t\t\t\t\t: max == g ? (b - r) / delta + 2\n\t\t\t\t\t\t:            (r - g) / delta + 4) * 60;\n\t\t\treturn [h, max === 0 ? 0 : delta / max, max];\n\t\t},\n\n\t\t'hsb-rgb': function(h, s, b) {\n\t\t\th = (((h / 60) % 6) + 6) % 6;\n\t\t\tvar i = Math.floor(h),\n\t\t\t\tf = h - i,\n\t\t\t\ti = hsbIndices[i],\n\t\t\t\tv = [\n\t\t\t\t\tb,\n\t\t\t\t\tb * (1 - s),\n\t\t\t\t\tb * (1 - s * f),\n\t\t\t\t\tb * (1 - s * (1 - f))\n\t\t\t\t];\n\t\t\treturn [v[i[0]], v[i[1]], v[i[2]]];\n\t\t},\n\n\t\t'rgb-hsl': function(r, g, b) {\n\t\t\tvar max = Math.max(r, g, b),\n\t\t\t\tmin = Math.min(r, g, b),\n\t\t\t\tdelta = max - min,\n\t\t\t\tachromatic = delta === 0,\n\t\t\t\th = achromatic ? 0\n\t\t\t\t\t:   ( max == r ? (g - b) / delta + (g < b ? 6 : 0)\n\t\t\t\t\t\t: max == g ? (b - r) / delta + 2\n\t\t\t\t\t\t:            (r - g) / delta + 4) * 60,\n\t\t\t\tl = (max + min) / 2,\n\t\t\t\ts = achromatic ? 0 : l < 0.5\n\t\t\t\t\t\t? delta / (max + min)\n\t\t\t\t\t\t: delta / (2 - max - min);\n\t\t\treturn [h, s, l];\n\t\t},\n\n\t\t'hsl-rgb': function(h, s, l) {\n\t\t\th = (((h / 360) % 1) + 1) % 1;\n\t\t\tif (s === 0)\n\t\t\t\treturn [l, l, l];\n\t\t\tvar t3s = [ h + 1 / 3, h, h - 1 / 3 ],\n\t\t\t\tt2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n\t\t\t\tt1 = 2 * l - t2,\n\t\t\t\tc = [];\n\t\t\tfor (var i = 0; i < 3; i++) {\n\t\t\t\tvar t3 = t3s[i];\n\t\t\t\tif (t3 < 0) t3 += 1;\n\t\t\t\tif (t3 > 1) t3 -= 1;\n\t\t\t\tc[i] = 6 * t3 < 1\n\t\t\t\t\t? t1 + (t2 - t1) * 6 * t3\n\t\t\t\t\t: 2 * t3 < 1\n\t\t\t\t\t\t? t2\n\t\t\t\t\t\t: 3 * t3 < 2\n\t\t\t\t\t\t\t? t1 + (t2 - t1) * ((2 / 3) - t3) * 6\n\t\t\t\t\t\t\t: t1;\n\t\t\t}\n\t\t\treturn c;\n\t\t},\n\n\t\t'rgb-gray': function(r, g, b) {\n\t\t\treturn [r * 0.2989 + g * 0.587 + b * 0.114];\n\t\t},\n\n\t\t'gray-rgb': function(g) {\n\t\t\treturn [g, g, g];\n\t\t},\n\n\t\t'gray-hsb': function(g) {\n\t\t\treturn [0, 0, g];\n\t\t},\n\n\t\t'gray-hsl': function(g) {\n\t\t\treturn [0, 0, g];\n\t\t},\n\n\t\t'gradient-rgb': function() {\n\t\t\treturn [];\n\t\t},\n\n\t\t'rgb-gradient': function() {\n\t\t\treturn [];\n\t\t}\n\n\t};\n\n\treturn Base.each(types, function(properties, type) {\n\t\tcomponentParsers[type] = [];\n\t\tBase.each(properties, function(name, index) {\n\t\t\tvar part = Base.capitalize(name),\n\t\t\t\thasOverlap = /^(hue|saturation)$/.test(name),\n\t\t\t\tparser = componentParsers[type][index] = type === 'gradient'\n\t\t\t\t\t? name === 'gradient'\n\t\t\t\t\t\t? function(value) {\n\t\t\t\t\t\t\tvar current = this._components[0];\n\t\t\t\t\t\t\tvalue = Gradient.read(\n\t\t\t\t\t\t\t\tArray.isArray(value)\n\t\t\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t\t\t: arguments, 0, { readNull: true }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (current !== value) {\n\t\t\t\t\t\t\t\tif (current)\n\t\t\t\t\t\t\t\t\tcurrent._removeOwner(this);\n\t\t\t\t\t\t\t\tif (value)\n\t\t\t\t\t\t\t\t\tvalue._addOwner(this);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: function() {\n\t\t\t\t\t\t\treturn Point.read(arguments, 0, {\n\t\t\t\t\t\t\t\t\treadNull: name === 'highlight',\n\t\t\t\t\t\t\t\t\tclone: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t: function(value) {\n\t\t\t\t\t\treturn value == null || isNaN(value) ? 0 : +value;\n\t\t\t\t\t};\n\t\t\tthis['get' + part] = function() {\n\t\t\t\treturn this._type === type\n\t\t\t\t\t|| hasOverlap && /^hs[bl]$/.test(this._type)\n\t\t\t\t\t\t? this._components[index]\n\t\t\t\t\t\t: this._convert(type)[index];\n\t\t\t};\n\n\t\t\tthis['set' + part] = function(value) {\n\t\t\t\tif (this._type !== type\n\t\t\t\t\t\t&& !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n\t\t\t\t\tthis._components = this._convert(type);\n\t\t\t\t\tthis._properties = types[type];\n\t\t\t\t\tthis._type = type;\n\t\t\t\t}\n\t\t\t\tthis._components[index] = parser.call(this, value);\n\t\t\t\tthis._changed();\n\t\t\t};\n\t\t}, this);\n\t}, {\n\t\t_class: 'Color',\n\t\t_readIndex: true,\n\n\t\tinitialize: function Color(arg) {\n\t\t\tvar args = arguments,\n\t\t\t\treading = this.__read,\n\t\t\t\tread = 0,\n\t\t\t\ttype,\n\t\t\t\tcomponents,\n\t\t\t\talpha,\n\t\t\t\tvalues;\n\t\t\tif (Array.isArray(arg)) {\n\t\t\t\targs = arg;\n\t\t\t\targ = args[0];\n\t\t\t}\n\t\t\tvar argType = arg != null && typeof arg;\n\t\t\tif (argType === 'string' && arg in types) {\n\t\t\t\ttype = arg;\n\t\t\t\targ = args[1];\n\t\t\t\tif (Array.isArray(arg)) {\n\t\t\t\t\tcomponents = arg;\n\t\t\t\t\talpha = args[2];\n\t\t\t\t} else {\n\t\t\t\t\tif (reading)\n\t\t\t\t\t\tread = 1;\n\t\t\t\t\targs = Base.slice(args, 1);\n\t\t\t\t\targType = typeof arg;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!components) {\n\t\t\t\tvalues = argType === 'number'\n\t\t\t\t\t\t? args\n\t\t\t\t\t\t: argType === 'object' && arg.length != null\n\t\t\t\t\t\t\t? arg\n\t\t\t\t\t\t\t: null;\n\t\t\t\tif (values) {\n\t\t\t\t\tif (!type)\n\t\t\t\t\t\ttype = values.length >= 3\n\t\t\t\t\t\t\t\t? 'rgb'\n\t\t\t\t\t\t\t\t: 'gray';\n\t\t\t\t\tvar length = types[type].length;\n\t\t\t\t\talpha = values[length];\n\t\t\t\t\tif (reading) {\n\t\t\t\t\t\tread += values === arguments\n\t\t\t\t\t\t\t? length + (alpha != null ? 1 : 0)\n\t\t\t\t\t\t\t: 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (values.length > length)\n\t\t\t\t\t\tvalues = Base.slice(values, 0, length);\n\t\t\t\t} else if (argType === 'string') {\n\t\t\t\t\tvar converted = fromCSS(arg);\n\t\t\t\t\ttype = converted[0];\n\t\t\t\t\tcomponents = converted[1];\n\t\t\t\t\tif (components.length === 4) {\n\t\t\t\t\t\talpha = components[3];\n\t\t\t\t\t\tcomponents.length--;\n\t\t\t\t\t}\n\t\t\t\t} else if (argType === 'object') {\n\t\t\t\t\tif (arg.constructor === Color) {\n\t\t\t\t\t\ttype = arg._type;\n\t\t\t\t\t\tcomponents = arg._components.slice();\n\t\t\t\t\t\talpha = arg._alpha;\n\t\t\t\t\t\tif (type === 'gradient') {\n\t\t\t\t\t\t\tfor (var i = 1, l = components.length; i < l; i++) {\n\t\t\t\t\t\t\t\tvar point = components[i];\n\t\t\t\t\t\t\t\tif (point)\n\t\t\t\t\t\t\t\t\tcomponents[i] = point.clone();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (arg.constructor === Gradient) {\n\t\t\t\t\t\ttype = 'gradient';\n\t\t\t\t\t\tvalues = args;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = 'hue' in arg\n\t\t\t\t\t\t\t? 'lightness' in arg\n\t\t\t\t\t\t\t\t? 'hsl'\n\t\t\t\t\t\t\t\t: 'hsb'\n\t\t\t\t\t\t\t: 'gradient' in arg || 'stops' in arg\n\t\t\t\t\t\t\t\t\t|| 'radial' in arg\n\t\t\t\t\t\t\t\t? 'gradient'\n\t\t\t\t\t\t\t\t: 'gray' in arg\n\t\t\t\t\t\t\t\t\t? 'gray'\n\t\t\t\t\t\t\t\t\t: 'rgb';\n\t\t\t\t\t\tvar properties = types[type],\n\t\t\t\t\t\t\tparsers = componentParsers[type];\n\t\t\t\t\t\tthis._components = components = [];\n\t\t\t\t\t\tfor (var i = 0, l = properties.length; i < l; i++) {\n\t\t\t\t\t\t\tvar value = arg[properties[i]];\n\t\t\t\t\t\t\tif (value == null && !i && type === 'gradient'\n\t\t\t\t\t\t\t\t\t&& 'stops' in arg) {\n\t\t\t\t\t\t\t\tvalue = {\n\t\t\t\t\t\t\t\t\tstops: arg.stops,\n\t\t\t\t\t\t\t\t\tradial: arg.radial\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue = parsers[i].call(this, value);\n\t\t\t\t\t\t\tif (value != null)\n\t\t\t\t\t\t\t\tcomponents[i] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\talpha = arg.alpha;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (reading && type)\n\t\t\t\t\tread = 1;\n\t\t\t}\n\t\t\tthis._type = type || 'rgb';\n\t\t\tif (!components) {\n\t\t\t\tthis._components = components = [];\n\t\t\t\tvar parsers = componentParsers[this._type];\n\t\t\t\tfor (var i = 0, l = parsers.length; i < l; i++) {\n\t\t\t\t\tvar value = parsers[i].call(this, values && values[i]);\n\t\t\t\t\tif (value != null)\n\t\t\t\t\t\tcomponents[i] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._components = components;\n\t\t\tthis._properties = types[this._type];\n\t\t\tthis._alpha = alpha;\n\t\t\tif (reading)\n\t\t\t\tthis.__read = read;\n\t\t\treturn this;\n\t\t},\n\n\t\tset: '#initialize',\n\n\t\t_serialize: function(options, dictionary) {\n\t\t\tvar components = this.getComponents();\n\t\t\treturn Base.serialize(\n\t\t\t\t\t/^(gray|rgb)$/.test(this._type)\n\t\t\t\t\t\t? components\n\t\t\t\t\t\t: [this._type].concat(components),\n\t\t\t\t\toptions, true, dictionary);\n\t\t},\n\n\t\t_changed: function() {\n\t\t\tthis._canvasStyle = null;\n\t\t\tif (this._owner) {\n\t\t\t\tif (this._setter) {\n\t\t\t\t\tthis._owner[this._setter](this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._owner._changed(129);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_convert: function(type) {\n\t\t\tvar converter;\n\t\t\treturn this._type === type\n\t\t\t\t\t? this._components.slice()\n\t\t\t\t\t: (converter = converters[this._type + '-' + type])\n\t\t\t\t\t\t? converter.apply(this, this._components)\n\t\t\t\t\t\t: converters['rgb-' + type].apply(this,\n\t\t\t\t\t\t\tconverters[this._type + '-rgb'].apply(this,\n\t\t\t\t\t\t\t\tthis._components));\n\t\t},\n\n\t\tconvert: function(type) {\n\t\t\treturn new Color(type, this._convert(type), this._alpha);\n\t\t},\n\n\t\tgetType: function() {\n\t\t\treturn this._type;\n\t\t},\n\n\t\tsetType: function(type) {\n\t\t\tthis._components = this._convert(type);\n\t\t\tthis._properties = types[type];\n\t\t\tthis._type = type;\n\t\t},\n\n\t\tgetComponents: function() {\n\t\t\tvar components = this._components.slice();\n\t\t\tif (this._alpha != null)\n\t\t\t\tcomponents.push(this._alpha);\n\t\t\treturn components;\n\t\t},\n\n\t\tgetAlpha: function() {\n\t\t\treturn this._alpha != null ? this._alpha : 1;\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\t\t\tthis._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n\t\t\tthis._changed();\n\t\t},\n\n\t\thasAlpha: function() {\n\t\t\treturn this._alpha != null;\n\t\t},\n\n\t\tequals: function(color) {\n\t\t\tvar col = Base.isPlainValue(color, true)\n\t\t\t\t\t? Color.read(arguments)\n\t\t\t\t\t: color;\n\t\t\treturn col === this || col && this._class === col._class\n\t\t\t\t\t&& this._type === col._type\n\t\t\t\t\t&& this.getAlpha() === col.getAlpha()\n\t\t\t\t\t&& Base.equals(this._components, col._components)\n\t\t\t\t\t|| false;\n\t\t},\n\n\t\ttoString: function() {\n\t\t\tvar properties = this._properties,\n\t\t\t\tparts = [],\n\t\t\t\tisGradient = this._type === 'gradient',\n\t\t\t\tf = Formatter.instance;\n\t\t\tfor (var i = 0, l = properties.length; i < l; i++) {\n\t\t\t\tvar value = this._components[i];\n\t\t\t\tif (value != null)\n\t\t\t\t\tparts.push(properties[i] + ': '\n\t\t\t\t\t\t\t+ (isGradient ? value : f.number(value)));\n\t\t\t}\n\t\t\tif (this._alpha != null)\n\t\t\t\tparts.push('alpha: ' + f.number(this._alpha));\n\t\t\treturn '{ ' + parts.join(', ') + ' }';\n\t\t},\n\n\t\ttoCSS: function(hex) {\n\t\t\tvar components = this._convert('rgb'),\n\t\t\t\talpha = hex || this._alpha == null ? 1 : this._alpha;\n\t\t\tfunction convert(val) {\n\t\t\t\treturn Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n\t\t\t}\n\t\t\tcomponents = [\n\t\t\t\tconvert(components[0]),\n\t\t\t\tconvert(components[1]),\n\t\t\t\tconvert(components[2])\n\t\t\t];\n\t\t\tif (alpha < 1)\n\t\t\t\tcomponents.push(alpha < 0 ? 0 : alpha);\n\t\t\treturn hex\n\t\t\t\t\t? '#' + ((1 << 24) + (components[0] << 16)\n\t\t\t\t\t\t+ (components[1] << 8)\n\t\t\t\t\t\t+ components[2]).toString(16).slice(1)\n\t\t\t\t\t: (components.length == 4 ? 'rgba(' : 'rgb(')\n\t\t\t\t\t\t+ components.join(',') + ')';\n\t\t},\n\n\t\ttoCanvasStyle: function(ctx, matrix) {\n\t\t\tif (this._canvasStyle)\n\t\t\t\treturn this._canvasStyle;\n\t\t\tif (this._type !== 'gradient')\n\t\t\t\treturn this._canvasStyle = this.toCSS();\n\t\t\tvar components = this._components,\n\t\t\t\tgradient = components[0],\n\t\t\t\tstops = gradient._stops,\n\t\t\t\torigin = components[1],\n\t\t\t\tdestination = components[2],\n\t\t\t\thighlight = components[3],\n\t\t\t\tinverse = matrix && matrix.inverted(),\n\t\t\t\tcanvasGradient;\n\t\t\tif (inverse) {\n\t\t\t\torigin = inverse._transformPoint(origin);\n\t\t\t\tdestination = inverse._transformPoint(destination);\n\t\t\t\tif (highlight)\n\t\t\t\t\thighlight = inverse._transformPoint(highlight);\n\t\t\t}\n\t\t\tif (gradient._radial) {\n\t\t\t\tvar radius = destination.getDistance(origin);\n\t\t\t\tif (highlight) {\n\t\t\t\t\tvar vector = highlight.subtract(origin);\n\t\t\t\t\tif (vector.getLength() > radius)\n\t\t\t\t\t\thighlight = origin.add(vector.normalize(radius - 0.1));\n\t\t\t\t}\n\t\t\t\tvar start = highlight || origin;\n\t\t\t\tcanvasGradient = ctx.createRadialGradient(start.x, start.y,\n\t\t\t\t\t\t0, origin.x, origin.y, radius);\n\t\t\t} else {\n\t\t\t\tcanvasGradient = ctx.createLinearGradient(origin.x, origin.y,\n\t\t\t\t\t\tdestination.x, destination.y);\n\t\t\t}\n\t\t\tfor (var i = 0, l = stops.length; i < l; i++) {\n\t\t\t\tvar stop = stops[i],\n\t\t\t\t\toffset = stop._offset;\n\t\t\t\tcanvasGradient.addColorStop(\n\t\t\t\t\t\toffset == null ? i / (l - 1) : offset,\n\t\t\t\t\t\tstop._color.toCanvasStyle());\n\t\t\t}\n\t\t\treturn this._canvasStyle = canvasGradient;\n\t\t},\n\n\t\ttransform: function(matrix) {\n\t\t\tif (this._type === 'gradient') {\n\t\t\t\tvar components = this._components;\n\t\t\t\tfor (var i = 1, l = components.length; i < l; i++) {\n\t\t\t\t\tvar point = components[i];\n\t\t\t\t\tmatrix._transformPoint(point, point, true);\n\t\t\t\t}\n\t\t\t\tthis._changed();\n\t\t\t}\n\t\t},\n\n\t\tstatics: {\n\t\t\t_types: types,\n\n\t\t\trandom: function() {\n\t\t\t\tvar random = Math.random;\n\t\t\t\treturn new Color(random(), random(), random());\n\t\t\t},\n\n\t\t\t_setOwner: function(color, owner, setter) {\n\t\t\t\tif (color) {\n\t\t\t\t\tif (color._owner && owner && color._owner !== owner) {\n\t\t\t\t\t\tcolor = color.clone();\n\t\t\t\t\t}\n\t\t\t\t\tif (!color._owner ^ !owner) {\n\t\t\t\t\t\tcolor._owner = owner || null;\n\t\t\t\t\t\tcolor._setter = setter || null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t});\n},\nnew function() {\n\tvar operators = {\n\t\tadd: function(a, b) {\n\t\t\treturn a + b;\n\t\t},\n\n\t\tsubtract: function(a, b) {\n\t\t\treturn a - b;\n\t\t},\n\n\t\tmultiply: function(a, b) {\n\t\t\treturn a * b;\n\t\t},\n\n\t\tdivide: function(a, b) {\n\t\t\treturn a / b;\n\t\t}\n\t};\n\n\treturn Base.each(operators, function(operator, name) {\n\t\tthis[name] = function(color) {\n\t\t\tcolor = Color.read(arguments);\n\t\t\tvar type = this._type,\n\t\t\t\tcomponents1 = this._components,\n\t\t\t\tcomponents2 = color._convert(type);\n\t\t\tfor (var i = 0, l = components1.length; i < l; i++)\n\t\t\t\tcomponents2[i] = operator(components1[i], components2[i]);\n\t\t\treturn new Color(type, components2,\n\t\t\t\t\tthis._alpha != null\n\t\t\t\t\t\t\t? operator(this._alpha, color.getAlpha())\n\t\t\t\t\t\t\t: null);\n\t\t};\n\t}, {\n\t});\n});\n\nvar Gradient = Base.extend({\n\t_class: 'Gradient',\n\n\tinitialize: function Gradient(stops, radial) {\n\t\tthis._id = UID.get();\n\t\tif (stops && Base.isPlainObject(stops)) {\n\t\t\tthis.set(stops);\n\t\t\tstops = radial = null;\n\t\t}\n\t\tif (this._stops == null) {\n\t\t\tthis.setStops(stops || ['white', 'black']);\n\t\t}\n\t\tif (this._radial == null) {\n\t\t\tthis.setRadial(typeof radial === 'string' && radial === 'radial'\n\t\t\t\t\t|| radial || false);\n\t\t}\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\treturn dictionary.add(this, function() {\n\t\t\treturn Base.serialize([this._stops, this._radial],\n\t\t\t\t\toptions, true, dictionary);\n\t\t});\n\t},\n\n\t_changed: function() {\n\t\tfor (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n\t\t\tthis._owners[i]._changed();\n\t\t}\n\t},\n\n\t_addOwner: function(color) {\n\t\tif (!this._owners)\n\t\t\tthis._owners = [];\n\t\tthis._owners.push(color);\n\t},\n\n\t_removeOwner: function(color) {\n\t\tvar index = this._owners ? this._owners.indexOf(color) : -1;\n\t\tif (index != -1) {\n\t\t\tthis._owners.splice(index, 1);\n\t\t\tif (!this._owners.length)\n\t\t\t\tthis._owners = undefined;\n\t\t}\n\t},\n\n\tclone: function() {\n\t\tvar stops = [];\n\t\tfor (var i = 0, l = this._stops.length; i < l; i++) {\n\t\t\tstops[i] = this._stops[i].clone();\n\t\t}\n\t\treturn new Gradient(stops, this._radial);\n\t},\n\n\tgetStops: function() {\n\t\treturn this._stops;\n\t},\n\n\tsetStops: function(stops) {\n\t\tif (stops.length < 2) {\n\t\t\tthrow new Error(\n\t\t\t\t\t'Gradient stop list needs to contain at least two stops.');\n\t\t}\n\t\tvar _stops = this._stops;\n\t\tif (_stops) {\n\t\t\tfor (var i = 0, l = _stops.length; i < l; i++)\n\t\t\t\t_stops[i]._owner = undefined;\n\t\t}\n\t\t_stops = this._stops = GradientStop.readList(stops, 0, { clone: true });\n\t\tfor (var i = 0, l = _stops.length; i < l; i++)\n\t\t\t_stops[i]._owner = this;\n\t\tthis._changed();\n\t},\n\n\tgetRadial: function() {\n\t\treturn this._radial;\n\t},\n\n\tsetRadial: function(radial) {\n\t\tthis._radial = radial;\n\t\tthis._changed();\n\t},\n\n\tequals: function(gradient) {\n\t\tif (gradient === this)\n\t\t\treturn true;\n\t\tif (gradient && this._class === gradient._class) {\n\t\t\tvar stops1 = this._stops,\n\t\t\t\tstops2 = gradient._stops,\n\t\t\t\tlength = stops1.length;\n\t\t\tif (length === stops2.length) {\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tif (!stops1[i].equals(stops2[i]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\nvar GradientStop = Base.extend({\n\t_class: 'GradientStop',\n\n\tinitialize: function GradientStop(arg0, arg1) {\n\t\tvar color = arg0,\n\t\t\toffset = arg1;\n\t\tif (typeof arg0 === 'object' && arg1 === undefined) {\n\t\t\tif (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n\t\t\t\tcolor = arg0[0];\n\t\t\t\toffset = arg0[1];\n\t\t\t} else if ('color' in arg0 || 'offset' in arg0\n\t\t\t\t\t|| 'rampPoint' in arg0) {\n\t\t\t\tcolor = arg0.color;\n\t\t\t\toffset = arg0.offset || arg0.rampPoint || 0;\n\t\t\t}\n\t\t}\n\t\tthis.setColor(color);\n\t\tthis.setOffset(offset);\n\t},\n\n\tclone: function() {\n\t\treturn new GradientStop(this._color.clone(), this._offset);\n\t},\n\n\t_serialize: function(options, dictionary) {\n\t\tvar color = this._color,\n\t\t\toffset = this._offset;\n\t\treturn Base.serialize(offset == null ? [color] : [color, offset],\n\t\t\t\toptions, true, dictionary);\n\t},\n\n\t_changed: function() {\n\t\tif (this._owner)\n\t\t\tthis._owner._changed(129);\n\t},\n\n\tgetOffset: function() {\n\t\treturn this._offset;\n\t},\n\n\tsetOffset: function(offset) {\n\t\tthis._offset = offset;\n\t\tthis._changed();\n\t},\n\n\tgetRampPoint: '#getOffset',\n\tsetRampPoint: '#setOffset',\n\n\tgetColor: function() {\n\t\treturn this._color;\n\t},\n\n\tsetColor: function() {\n\t\tColor._setOwner(this._color, null);\n\t\tthis._color = Color._setOwner(Color.read(arguments, 0), this,\n\t\t\t\t'setColor');\n\t\tthis._changed();\n\t},\n\n\tequals: function(stop) {\n\t\treturn stop === this || stop && this._class === stop._class\n\t\t\t\t&& this._color.equals(stop._color)\n\t\t\t\t&& this._offset == stop._offset\n\t\t\t\t|| false;\n\t}\n});\n\nvar Style = Base.extend(new function() {\n\tvar itemDefaults = {\n\t\tfillColor: null,\n\t\tfillRule: 'nonzero',\n\t\tstrokeColor: null,\n\t\tstrokeWidth: 1,\n\t\tstrokeCap: 'butt',\n\t\tstrokeJoin: 'miter',\n\t\tstrokeScaling: true,\n\t\tmiterLimit: 10,\n\t\tdashOffset: 0,\n\t\tdashArray: [],\n\t\tshadowColor: null,\n\t\tshadowBlur: 0,\n\t\tshadowOffset: new Point(),\n\t\tselectedColor: null\n\t},\n\tgroupDefaults = Base.set({}, itemDefaults, {\n\t\tfontFamily: 'sans-serif',\n\t\tfontWeight: 'normal',\n\t\tfontSize: 12,\n\t\tleading: null,\n\t\tjustification: 'left'\n\t}),\n\ttextDefaults = Base.set({}, groupDefaults, {\n\t\tfillColor: new Color()\n\t}),\n\tflags = {\n\t\tstrokeWidth: 193,\n\t\tstrokeCap: 193,\n\t\tstrokeJoin: 193,\n\t\tstrokeScaling: 201,\n\t\tmiterLimit: 193,\n\t\tfontFamily: 9,\n\t\tfontWeight: 9,\n\t\tfontSize: 9,\n\t\tfont: 9,\n\t\tleading: 9,\n\t\tjustification: 9\n\t},\n\titem = {\n\t\tbeans: true\n\t},\n\tfields = {\n\t\t_class: 'Style',\n\t\tbeans: true,\n\n\t\tinitialize: function Style(style, _owner, _project) {\n\t\t\tthis._values = {};\n\t\t\tthis._owner = _owner;\n\t\t\tthis._project = _owner && _owner._project || _project\n\t\t\t\t\t|| paper.project;\n\t\t\tthis._defaults = !_owner || _owner instanceof Group ? groupDefaults\n\t\t\t\t\t: _owner instanceof TextItem ? textDefaults\n\t\t\t\t\t: itemDefaults;\n\t\t\tif (style)\n\t\t\t\tthis.set(style);\n\t\t}\n\t};\n\n\tBase.each(groupDefaults, function(value, key) {\n\t\tvar isColor = /Color$/.test(key),\n\t\t\tisPoint = key === 'shadowOffset',\n\t\t\tpart = Base.capitalize(key),\n\t\t\tflag = flags[key],\n\t\t\tset = 'set' + part,\n\t\t\tget = 'get' + part;\n\n\t\tfields[set] = function(value) {\n\t\t\tvar owner = this._owner,\n\t\t\t\tchildren = owner && owner._children,\n\t\t\t\tapplyToChildren = children && children.length > 0\n\t\t\t\t\t&& !(owner instanceof CompoundPath);\n\t\t\tif (applyToChildren) {\n\t\t\t\tfor (var i = 0, l = children.length; i < l; i++)\n\t\t\t\t\tchildren[i]._style[set](value);\n\t\t\t}\n\t\t\tif ((key === 'selectedColor' || !applyToChildren)\n\t\t\t\t\t&& key in this._defaults) {\n\t\t\t\tvar old = this._values[key];\n\t\t\t\tif (old !== value) {\n\t\t\t\t\tif (isColor) {\n\t\t\t\t\t\tif (old) {\n\t\t\t\t\t\t\tColor._setOwner(old, null);\n\t\t\t\t\t\t\told._canvasStyle = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (value && value.constructor === Color) {\n\t\t\t\t\t\t\tvalue = Color._setOwner(value, owner,\n\t\t\t\t\t\t\t\t\tapplyToChildren && set);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis._values[key] = value;\n\t\t\t\t\tif (owner)\n\t\t\t\t\t\towner._changed(flag || 129);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfields[get] = function(_dontMerge) {\n\t\t\tvar owner = this._owner,\n\t\t\t\tchildren = owner && owner._children,\n\t\t\t\tapplyToChildren = children && children.length > 0\n\t\t\t\t\t&& !(owner instanceof CompoundPath),\n\t\t\t\tvalue;\n\t\t\tif (applyToChildren && !_dontMerge) {\n\t\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\t\tvar childValue = children[i]._style[get]();\n\t\t\t\t\tif (!i) {\n\t\t\t\t\t\tvalue = childValue;\n\t\t\t\t\t} else if (!Base.equals(value, childValue)) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (key in this._defaults) {\n\t\t\t\tvar value = this._values[key];\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\tvalue = this._defaults[key];\n\t\t\t\t\tif (value && value.clone) {\n\t\t\t\t\t\tvalue = value.clone();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar ctor = isColor ? Color : isPoint ? Point : null;\n\t\t\t\t\tif (ctor && !(value && value.constructor === ctor)) {\n\t\t\t\t\t\tthis._values[key] = value = ctor.read([value], 0,\n\t\t\t\t\t\t\t\t{ readNull: true, clone: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (value && isColor) {\n\t\t\t\tvalue = Color._setOwner(value, owner, applyToChildren && set);\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\t\titem[get] = function(_dontMerge) {\n\t\t\treturn this._style[get](_dontMerge);\n\t\t};\n\n\t\titem[set] = function(value) {\n\t\t\tthis._style[set](value);\n\t\t};\n\t});\n\n\tBase.each({\n\t\tFont: 'FontFamily',\n\t\tWindingRule: 'FillRule'\n\t}, function(value, key) {\n\t\tvar get = 'get' + key,\n\t\t\tset = 'set' + key;\n\t\tfields[get] = item[get] = '#get' + value;\n\t\tfields[set] = item[set] = '#set' + value;\n\t});\n\n\tItem.inject(item);\n\treturn fields;\n}, {\n\tset: function(style) {\n\t\tvar isStyle = style instanceof Style,\n\t\t\tvalues = isStyle ? style._values : style;\n\t\tif (values) {\n\t\t\tfor (var key in values) {\n\t\t\t\tif (key in this._defaults) {\n\t\t\t\t\tvar value = values[key];\n\t\t\t\t\tthis[key] = value && isStyle && value.clone\n\t\t\t\t\t\t\t? value.clone() : value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tequals: function(style) {\n\t\tfunction compare(style1, style2, secondary) {\n\t\t\tvar values1 = style1._values,\n\t\t\t\tvalues2 = style2._values,\n\t\t\t\tdefaults2 = style2._defaults;\n\t\t\tfor (var key in values1) {\n\t\t\t\tvar value1 = values1[key],\n\t\t\t\t\tvalue2 = values2[key];\n\t\t\t\tif (!(secondary && key in values2) && !Base.equals(value1,\n\t\t\t\t\t\tvalue2 === undefined ? defaults2[key] : value2))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn style === this || style && this._class === style._class\n\t\t\t\t&& compare(this, style)\n\t\t\t\t&& compare(style, this, true)\n\t\t\t\t|| false;\n\t},\n\n\t_dispose: function() {\n\t\tvar color;\n\t\tcolor = this.getFillColor();\n\t\tif (color) color._canvasStyle = null;\n\t\tcolor = this.getStrokeColor();\n\t\tif (color) color._canvasStyle = null;\n\t\tcolor = this.getShadowColor();\n\t\tif (color) color._canvasStyle = null;\n\t},\n\n\thasFill: function() {\n\t\tvar color = this.getFillColor();\n\t\treturn !!color && color.alpha > 0;\n\t},\n\n\thasStroke: function() {\n\t\tvar color = this.getStrokeColor();\n\t\treturn !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n\t},\n\n\thasShadow: function() {\n\t\tvar color = this.getShadowColor();\n\t\treturn !!color && color.alpha > 0 && (this.getShadowBlur() > 0\n\t\t\t\t|| !this.getShadowOffset().isZero());\n\t},\n\n\tgetView: function() {\n\t\treturn this._project._view;\n\t},\n\n\tgetFontStyle: function() {\n\t\tvar fontSize = this.getFontSize();\n\t\treturn this.getFontWeight()\n\t\t\t\t+ ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ')\n\t\t\t\t+ this.getFontFamily();\n\t},\n\n\tgetFont: '#getFontFamily',\n\tsetFont: '#setFontFamily',\n\n\tgetLeading: function getLeading() {\n\t\tvar leading = getLeading.base.call(this),\n\t\t\tfontSize = this.getFontSize();\n\t\tif (/pt|em|%|px/.test(fontSize))\n\t\t\tfontSize = this.getView().getPixelSize(fontSize);\n\t\treturn leading != null ? leading : fontSize * 1.2;\n\t}\n\n});\n\nvar DomElement = new function() {\n\tfunction handlePrefix(el, name, set, value) {\n\t\tvar prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n\t\t\tsuffix = name[0].toUpperCase() + name.substring(1);\n\t\tfor (var i = 0; i < 6; i++) {\n\t\t\tvar prefix = prefixes[i],\n\t\t\t\tkey = prefix ? prefix + suffix : name;\n\t\t\tif (key in el) {\n\t\t\t\tif (set) {\n\t\t\t\t\tel[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\treturn el[key];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\tgetStyles: function(el) {\n\t\t\tvar doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n\t\t\t\tview = doc && doc.defaultView;\n\t\t\treturn view && view.getComputedStyle(el, '');\n\t\t},\n\n\t\tgetBounds: function(el, viewport) {\n\t\t\tvar doc = el.ownerDocument,\n\t\t\t\tbody = doc.body,\n\t\t\t\thtml = doc.documentElement,\n\t\t\t\trect;\n\t\t\ttry {\n\t\t\t\trect = el.getBoundingClientRect();\n\t\t\t} catch (e) {\n\t\t\t\trect = { left: 0, top: 0, width: 0, height: 0 };\n\t\t\t}\n\t\t\tvar x = rect.left - (html.clientLeft || body.clientLeft || 0),\n\t\t\t\ty = rect.top - (html.clientTop || body.clientTop || 0);\n\t\t\tif (!viewport) {\n\t\t\t\tvar view = doc.defaultView;\n\t\t\t\tx += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n\t\t\t\ty += view.pageYOffset || html.scrollTop || body.scrollTop;\n\t\t\t}\n\t\t\treturn new Rectangle(x, y, rect.width, rect.height);\n\t\t},\n\n\t\tgetViewportBounds: function(el) {\n\t\t\tvar doc = el.ownerDocument,\n\t\t\t\tview = doc.defaultView,\n\t\t\t\thtml = doc.documentElement;\n\t\t\treturn new Rectangle(0, 0,\n\t\t\t\tview.innerWidth || html.clientWidth,\n\t\t\t\tview.innerHeight || html.clientHeight\n\t\t\t);\n\t\t},\n\n\t\tgetOffset: function(el, viewport) {\n\t\t\treturn DomElement.getBounds(el, viewport).getPoint();\n\t\t},\n\n\t\tgetSize: function(el) {\n\t\t\treturn DomElement.getBounds(el, true).getSize();\n\t\t},\n\n\t\tisInvisible: function(el) {\n\t\t\treturn DomElement.getSize(el).equals(new Size(0, 0));\n\t\t},\n\n\t\tisInView: function(el) {\n\t\t\treturn !DomElement.isInvisible(el)\n\t\t\t\t\t&& DomElement.getViewportBounds(el).intersects(\n\t\t\t\t\t\tDomElement.getBounds(el, true));\n\t\t},\n\n\t\tisInserted: function(el) {\n\t\t\treturn document.body.contains(el);\n\t\t},\n\n\t\tgetPrefixed: function(el, name) {\n\t\t\treturn el && handlePrefix(el, name);\n\t\t},\n\n\t\tsetPrefixed: function(el, name, value) {\n\t\t\tif (typeof name === 'object') {\n\t\t\t\tfor (var key in name)\n\t\t\t\t\thandlePrefix(el, key, true, name[key]);\n\t\t\t} else {\n\t\t\t\thandlePrefix(el, name, true, value);\n\t\t\t}\n\t\t}\n\t};\n};\n\nvar DomEvent = {\n\tadd: function(el, events) {\n\t\tif (el) {\n\t\t\tfor (var type in events) {\n\t\t\t\tvar func = events[type],\n\t\t\t\t\tparts = type.split(/[\\s,]+/g);\n\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++) {\n\t\t\t\t\tvar name = parts[i];\n\t\t\t\t\tvar options = (\n\t\t\t\t\t\tel === document\n\t\t\t\t\t\t&& (name === 'touchstart' || name === 'touchmove')\n\t\t\t\t\t) ? { passive: false } : false;\n\t\t\t\t\tel.addEventListener(name, func, options);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremove: function(el, events) {\n\t\tif (el) {\n\t\t\tfor (var type in events) {\n\t\t\t\tvar func = events[type],\n\t\t\t\t\tparts = type.split(/[\\s,]+/g);\n\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++)\n\t\t\t\t\tel.removeEventListener(parts[i], func, false);\n\t\t\t}\n\t\t}\n\t},\n\n\tgetPoint: function(event) {\n\t\tvar pos = event.targetTouches\n\t\t\t\t? event.targetTouches.length\n\t\t\t\t\t? event.targetTouches[0]\n\t\t\t\t\t: event.changedTouches[0]\n\t\t\t\t: event;\n\t\treturn new Point(\n\t\t\tpos.pageX || pos.clientX + document.documentElement.scrollLeft,\n\t\t\tpos.pageY || pos.clientY + document.documentElement.scrollTop\n\t\t);\n\t},\n\n\tgetTarget: function(event) {\n\t\treturn event.target || event.srcElement;\n\t},\n\n\tgetRelatedTarget: function(event) {\n\t\treturn event.relatedTarget || event.toElement;\n\t},\n\n\tgetOffset: function(event, target) {\n\t\treturn DomEvent.getPoint(event).subtract(DomElement.getOffset(\n\t\t\t\ttarget || DomEvent.getTarget(event)));\n\t}\n};\n\nDomEvent.requestAnimationFrame = new function() {\n\tvar nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n\t\trequested = false,\n\t\tcallbacks = [],\n\t\ttimer;\n\n\tfunction handleCallbacks() {\n\t\tvar functions = callbacks;\n\t\tcallbacks = [];\n\t\tfor (var i = 0, l = functions.length; i < l; i++)\n\t\t\tfunctions[i]();\n\t\trequested = nativeRequest && callbacks.length;\n\t\tif (requested)\n\t\t\tnativeRequest(handleCallbacks);\n\t}\n\n\treturn function(callback) {\n\t\tcallbacks.push(callback);\n\t\tif (nativeRequest) {\n\t\t\tif (!requested) {\n\t\t\t\tnativeRequest(handleCallbacks);\n\t\t\t\trequested = true;\n\t\t\t}\n\t\t} else if (!timer) {\n\t\t\ttimer = setInterval(handleCallbacks, 1000 / 60);\n\t\t}\n\t};\n};\n\nvar View = Base.extend(Emitter, {\n\t_class: 'View',\n\n\tinitialize: function View(project, element) {\n\n\t\tfunction getSize(name) {\n\t\t\treturn element[name] || parseInt(element.getAttribute(name), 10);\n\t\t}\n\n\t\tfunction getCanvasSize() {\n\t\t\tvar size = DomElement.getSize(element);\n\t\t\treturn size.isNaN() || size.isZero()\n\t\t\t\t\t? new Size(getSize('width'), getSize('height'))\n\t\t\t\t\t: size;\n\t\t}\n\n\t\tvar size;\n\t\tif (window && element) {\n\t\t\tthis._id = element.getAttribute('id');\n\t\t\tif (this._id == null)\n\t\t\t\telement.setAttribute('id', this._id = 'paper-view-' + View._id++);\n\t\t\tDomEvent.add(element, this._viewEvents);\n\t\t\tvar none = 'none';\n\t\t\tDomElement.setPrefixed(element.style, {\n\t\t\t\tuserDrag: none,\n\t\t\t\tuserSelect: none,\n\t\t\t\ttouchCallout: none,\n\t\t\t\tcontentZooming: none,\n\t\t\t\ttapHighlightColor: 'rgba(0,0,0,0)'\n\t\t\t});\n\n\t\t\tif (PaperScope.hasAttribute(element, 'resize')) {\n\t\t\t\tvar that = this;\n\t\t\t\tDomEvent.add(window, this._windowEvents = {\n\t\t\t\t\tresize: function() {\n\t\t\t\t\t\tthat.setViewSize(getCanvasSize());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsize = getCanvasSize();\n\n\t\t\tif (PaperScope.hasAttribute(element, 'stats')\n\t\t\t\t\t&& typeof Stats !== 'undefined') {\n\t\t\t\tthis._stats = new Stats();\n\t\t\t\tvar stats = this._stats.domElement,\n\t\t\t\t\tstyle = stats.style,\n\t\t\t\t\toffset = DomElement.getOffset(element);\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.left = offset.x + 'px';\n\t\t\t\tstyle.top = offset.y + 'px';\n\t\t\t\tdocument.body.appendChild(stats);\n\t\t\t}\n\t\t} else {\n\t\t\tsize = new Size(element);\n\t\t\telement = null;\n\t\t}\n\t\tthis._project = project;\n\t\tthis._scope = project._scope;\n\t\tthis._element = element;\n\t\tif (!this._pixelRatio)\n\t\t\tthis._pixelRatio = window && window.devicePixelRatio || 1;\n\t\tthis._setElementSize(size.width, size.height);\n\t\tthis._viewSize = size;\n\t\tView._views.push(this);\n\t\tView._viewsById[this._id] = this;\n\t\t(this._matrix = new Matrix())._owner = this;\n\t\tif (!View._focused)\n\t\t\tView._focused = this;\n\t\tthis._frameItems = {};\n\t\tthis._frameItemCount = 0;\n\t\tthis._itemEvents = { native: {}, virtual: {} };\n\t\tthis._autoUpdate = !paper.agent.node;\n\t\tthis._needsUpdate = false;\n\t},\n\n\tremove: function() {\n\t\tif (!this._project)\n\t\t\treturn false;\n\t\tif (View._focused === this)\n\t\t\tView._focused = null;\n\t\tView._views.splice(View._views.indexOf(this), 1);\n\t\tdelete View._viewsById[this._id];\n\t\tvar project = this._project;\n\t\tif (project._view === this)\n\t\t\tproject._view = null;\n\t\tDomEvent.remove(this._element, this._viewEvents);\n\t\tDomEvent.remove(window, this._windowEvents);\n\t\tthis._element = this._project = null;\n\t\tthis.off('frame');\n\t\tthis._animate = false;\n\t\tthis._frameItems = {};\n\t\treturn true;\n\t},\n\n\t_events: Base.each(\n\t\tItem._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']),\n\t\tfunction(name) {\n\t\t\tthis[name] = {};\n\t\t}, {\n\t\t\tonFrame: {\n\t\t\t\tinstall: function() {\n\t\t\t\t\tthis.play();\n\t\t\t\t},\n\n\t\t\t\tuninstall: function() {\n\t\t\t\t\tthis.pause();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t),\n\n\t_animate: false,\n\t_time: 0,\n\t_count: 0,\n\n\tgetAutoUpdate: function() {\n\t\treturn this._autoUpdate;\n\t},\n\n\tsetAutoUpdate: function(autoUpdate) {\n\t\tthis._autoUpdate = autoUpdate;\n\t\tif (autoUpdate)\n\t\t\tthis.requestUpdate();\n\t},\n\n\tupdate: function() {\n\t},\n\n\tdraw: function() {\n\t\tthis.update();\n\t},\n\n\trequestUpdate: function() {\n\t\tif (!this._requested) {\n\t\t\tvar that = this;\n\t\t\tDomEvent.requestAnimationFrame(function() {\n\t\t\t\tthat._requested = false;\n\t\t\t\tif (that._animate) {\n\t\t\t\t\tthat.requestUpdate();\n\t\t\t\t\tvar element = that._element;\n\t\t\t\t\tif ((!DomElement.getPrefixed(document, 'hidden')\n\t\t\t\t\t\t\t|| PaperScope.getAttribute(element, 'keepalive')\n\t\t\t\t\t\t\t\t=== 'true') && DomElement.isInView(element)) {\n\t\t\t\t\t\tthat._handleFrame();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (that._autoUpdate)\n\t\t\t\t\tthat.update();\n\t\t\t});\n\t\t\tthis._requested = true;\n\t\t}\n\t},\n\n\tplay: function() {\n\t\tthis._animate = true;\n\t\tthis.requestUpdate();\n\t},\n\n\tpause: function() {\n\t\tthis._animate = false;\n\t},\n\n\t_handleFrame: function() {\n\t\tpaper = this._scope;\n\t\tvar now = Date.now() / 1000,\n\t\t\tdelta = this._last ? now - this._last : 0;\n\t\tthis._last = now;\n\t\tthis.emit('frame', new Base({\n\t\t\tdelta: delta,\n\t\t\ttime: this._time += delta,\n\t\t\tcount: this._count++\n\t\t}));\n\t\tif (this._stats)\n\t\t\tthis._stats.update();\n\t},\n\n\t_animateItem: function(item, animate) {\n\t\tvar items = this._frameItems;\n\t\tif (animate) {\n\t\t\titems[item._id] = {\n\t\t\t\titem: item,\n\t\t\t\ttime: 0,\n\t\t\t\tcount: 0\n\t\t\t};\n\t\t\tif (++this._frameItemCount === 1)\n\t\t\t\tthis.on('frame', this._handleFrameItems);\n\t\t} else {\n\t\t\tdelete items[item._id];\n\t\t\tif (--this._frameItemCount === 0) {\n\t\t\t\tthis.off('frame', this._handleFrameItems);\n\t\t\t}\n\t\t}\n\t},\n\n\t_handleFrameItems: function(event) {\n\t\tfor (var i in this._frameItems) {\n\t\t\tvar entry = this._frameItems[i];\n\t\t\tentry.item.emit('frame', new Base(event, {\n\t\t\t\ttime: entry.time += event.delta,\n\t\t\t\tcount: entry.count++\n\t\t\t}));\n\t\t}\n\t},\n\n\t_changed: function() {\n\t\tthis._project._changed(4097);\n\t\tthis._bounds = this._decomposed = undefined;\n\t},\n\n\tgetElement: function() {\n\t\treturn this._element;\n\t},\n\n\tgetPixelRatio: function() {\n\t\treturn this._pixelRatio;\n\t},\n\n\tgetResolution: function() {\n\t\treturn this._pixelRatio * 72;\n\t},\n\n\tgetViewSize: function() {\n\t\tvar size = this._viewSize;\n\t\treturn new LinkedSize(size.width, size.height, this, 'setViewSize');\n\t},\n\n\tsetViewSize: function() {\n\t\tvar size = Size.read(arguments),\n\t\t\tdelta = size.subtract(this._viewSize);\n\t\tif (delta.isZero())\n\t\t\treturn;\n\t\tthis._setElementSize(size.width, size.height);\n\t\tthis._viewSize.set(size);\n\t\tthis._changed();\n\t\tthis.emit('resize', { size: size, delta: delta });\n\t\tif (this._autoUpdate) {\n\t\t\tthis.update();\n\t\t}\n\t},\n\n\t_setElementSize: function(width, height) {\n\t\tvar element = this._element;\n\t\tif (element) {\n\t\t\tif (element.width !== width)\n\t\t\t\telement.width = width;\n\t\t\tif (element.height !== height)\n\t\t\t\telement.height = height;\n\t\t}\n\t},\n\n\tgetBounds: function() {\n\t\tif (!this._bounds)\n\t\t\tthis._bounds = this._matrix.inverted()._transformBounds(\n\t\t\t\t\tnew Rectangle(new Point(), this._viewSize));\n\t\treturn this._bounds;\n\t},\n\n\tgetSize: function() {\n\t\treturn this.getBounds().getSize();\n\t},\n\n\tisVisible: function() {\n\t\treturn DomElement.isInView(this._element);\n\t},\n\n\tisInserted: function() {\n\t\treturn DomElement.isInserted(this._element);\n\t},\n\n\tgetPixelSize: function(size) {\n\t\tvar element = this._element,\n\t\t\tpixels;\n\t\tif (element) {\n\t\t\tvar parent = element.parentNode,\n\t\t\t\ttemp = document.createElement('div');\n\t\t\ttemp.style.fontSize = size;\n\t\t\tparent.appendChild(temp);\n\t\t\tpixels = parseFloat(DomElement.getStyles(temp).fontSize);\n\t\t\tparent.removeChild(temp);\n\t\t} else {\n\t\t\tpixels = parseFloat(pixels);\n\t\t}\n\t\treturn pixels;\n\t},\n\n\tgetTextWidth: function(font, lines) {\n\t\treturn 0;\n\t}\n}, Base.each(['rotate', 'scale', 'shear', 'skew'], function(key) {\n\tvar rotate = key === 'rotate';\n\tthis[key] = function() {\n\t\tvar args = arguments,\n\t\t\tvalue = (rotate ? Base : Point).read(args),\n\t\t\tcenter = Point.read(args, 0, { readNull: true });\n\t\treturn this.transform(new Matrix()[key](value,\n\t\t\t\tcenter || this.getCenter(true)));\n\t};\n}, {\n\t_decompose: function() {\n\t\treturn this._decomposed || (this._decomposed = this._matrix.decompose());\n\t},\n\n\ttranslate: function() {\n\t\tvar mx = new Matrix();\n\t\treturn this.transform(mx.translate.apply(mx, arguments));\n\t},\n\n\tgetCenter: function() {\n\t\treturn this.getBounds().getCenter();\n\t},\n\n\tsetCenter: function() {\n\t\tvar center = Point.read(arguments);\n\t\tthis.translate(this.getCenter().subtract(center));\n\t},\n\n\tgetZoom: function() {\n\t\tvar scaling = this._decompose().scaling;\n\t\treturn (scaling.x + scaling.y) / 2;\n\t},\n\n\tsetZoom: function(zoom) {\n\t\tthis.transform(new Matrix().scale(zoom / this.getZoom(),\n\t\t\tthis.getCenter()));\n\t},\n\n\tgetRotation: function() {\n\t\treturn this._decompose().rotation;\n\t},\n\n\tsetRotation: function(rotation) {\n\t\tvar current = this.getRotation();\n\t\tif (current != null && rotation != null) {\n\t\t\tthis.rotate(rotation - current);\n\t\t}\n\t},\n\n\tgetScaling: function() {\n\t\tvar scaling = this._decompose().scaling;\n\t\treturn new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n\t},\n\n\tsetScaling: function() {\n\t\tvar current = this.getScaling(),\n\t\t\tscaling = Point.read(arguments, 0, { clone: true, readNull: true });\n\t\tif (current && scaling) {\n\t\t\tthis.scale(scaling.x / current.x, scaling.y / current.y);\n\t\t}\n\t},\n\n\tgetMatrix: function() {\n\t\treturn this._matrix;\n\t},\n\n\tsetMatrix: function() {\n\t\tvar matrix = this._matrix;\n\t\tmatrix.set.apply(matrix, arguments);\n\t},\n\n\ttransform: function(matrix) {\n\t\tthis._matrix.append(matrix);\n\t},\n\n\tscrollBy: function() {\n\t\tthis.translate(Point.read(arguments).negate());\n\t}\n}), {\n\n\tprojectToView: function() {\n\t\treturn this._matrix._transformPoint(Point.read(arguments));\n\t},\n\n\tviewToProject: function() {\n\t\treturn this._matrix._inverseTransform(Point.read(arguments));\n\t},\n\n\tgetEventPoint: function(event) {\n\t\treturn this.viewToProject(DomEvent.getOffset(event, this._element));\n\t},\n\n}, {\n\tstatics: {\n\t\t_views: [],\n\t\t_viewsById: {},\n\t\t_id: 0,\n\n\t\tcreate: function(project, element) {\n\t\t\tif (document && typeof element === 'string')\n\t\t\t\telement = document.getElementById(element);\n\t\t\tvar ctor = window ? CanvasView : View;\n\t\t\treturn new ctor(project, element);\n\t\t}\n\t}\n},\nnew function() {\n\tif (!window)\n\t\treturn;\n\tvar prevFocus,\n\t\ttempFocus,\n\t\tdragging = false,\n\t\tmouseDown = false;\n\n\tfunction getView(event) {\n\t\tvar target = DomEvent.getTarget(event);\n\t\treturn target.getAttribute && View._viewsById[\n\t\t\t\ttarget.getAttribute('id')];\n\t}\n\n\tfunction updateFocus() {\n\t\tvar view = View._focused;\n\t\tif (!view || !view.isVisible()) {\n\t\t\tfor (var i = 0, l = View._views.length; i < l; i++) {\n\t\t\t\tif ((view = View._views[i]).isVisible()) {\n\t\t\t\t\tView._focused = tempFocus = view;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleMouseMove(view, event, point) {\n\t\tview._handleMouseEvent('mousemove', event, point);\n\t}\n\n\tvar navigator = window.navigator,\n\t\tmousedown, mousemove, mouseup;\n\tif (navigator.pointerEnabled || navigator.msPointerEnabled) {\n\t\tmousedown = 'pointerdown MSPointerDown';\n\t\tmousemove = 'pointermove MSPointerMove';\n\t\tmouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n\t} else {\n\t\tmousedown = 'touchstart';\n\t\tmousemove = 'touchmove';\n\t\tmouseup = 'touchend touchcancel';\n\t\tif (!('ontouchstart' in window && navigator.userAgent.match(\n\t\t\t\t/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n\t\t\tmousedown += ' mousedown';\n\t\t\tmousemove += ' mousemove';\n\t\t\tmouseup += ' mouseup';\n\t\t}\n\t}\n\n\tvar viewEvents = {},\n\t\tdocEvents = {\n\t\t\tmouseout: function(event) {\n\t\t\t\tvar view = View._focused,\n\t\t\t\t\ttarget = DomEvent.getRelatedTarget(event);\n\t\t\t\tif (view && (!target || target.nodeName === 'HTML')) {\n\t\t\t\t\tvar offset = DomEvent.getOffset(event, view._element),\n\t\t\t\t\t\tx = offset.x,\n\t\t\t\t\t\tabs = Math.abs,\n\t\t\t\t\t\tax = abs(x),\n\t\t\t\t\t\tmax = 1 << 25,\n\t\t\t\t\t\tdiff = ax - max;\n\t\t\t\t\toffset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n\t\t\t\t\thandleMouseMove(view, event, view.viewToProject(offset));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tscroll: updateFocus\n\t\t};\n\n\tviewEvents[mousedown] = function(event) {\n\t\tvar view = View._focused = getView(event);\n\t\tif (!dragging) {\n\t\t\tdragging = true;\n\t\t\tview._handleMouseEvent('mousedown', event);\n\t\t}\n\t};\n\n\tdocEvents[mousemove] = function(event) {\n\t\tvar view = View._focused;\n\t\tif (!mouseDown) {\n\t\t\tvar target = getView(event);\n\t\t\tif (target) {\n\t\t\t\tif (view !== target) {\n\t\t\t\t\tif (view)\n\t\t\t\t\t\thandleMouseMove(view, event);\n\t\t\t\t\tif (!prevFocus)\n\t\t\t\t\t\tprevFocus = view;\n\t\t\t\t\tview = View._focused = tempFocus = target;\n\t\t\t\t}\n\t\t\t} else if (tempFocus && tempFocus === view) {\n\t\t\t\tif (prevFocus && !prevFocus.isInserted())\n\t\t\t\t\tprevFocus = null;\n\t\t\t\tview = View._focused = prevFocus;\n\t\t\t\tprevFocus = null;\n\t\t\t\tupdateFocus();\n\t\t\t}\n\t\t}\n\t\tif (view)\n\t\t\thandleMouseMove(view, event);\n\t};\n\n\tdocEvents[mousedown] = function() {\n\t\tmouseDown = true;\n\t};\n\n\tdocEvents[mouseup] = function(event) {\n\t\tvar view = View._focused;\n\t\tif (view && dragging)\n\t\t\tview._handleMouseEvent('mouseup', event);\n\t\tmouseDown = dragging = false;\n\t};\n\n\tDomEvent.add(document, docEvents);\n\n\tDomEvent.add(window, {\n\t\tload: updateFocus\n\t});\n\n\tvar called = false,\n\t\tprevented = false,\n\t\tfallbacks = {\n\t\t\tdoubleclick: 'click',\n\t\t\tmousedrag: 'mousemove'\n\t\t},\n\t\twasInView = false,\n\t\toverView,\n\t\tdownPoint,\n\t\tlastPoint,\n\t\tdownItem,\n\t\toverItem,\n\t\tdragItem,\n\t\tclickItem,\n\t\tclickTime,\n\t\tdblClick;\n\n\tfunction emitMouseEvent(obj, target, type, event, point, prevPoint,\n\t\t\tstopItem) {\n\t\tvar stopped = false,\n\t\t\tmouseEvent;\n\n\t\tfunction emit(obj, type) {\n\t\t\tif (obj.responds(type)) {\n\t\t\t\tif (!mouseEvent) {\n\t\t\t\t\tmouseEvent = new MouseEvent(type, event, point,\n\t\t\t\t\t\t\ttarget || obj,\n\t\t\t\t\t\t\tprevPoint ? point.subtract(prevPoint) : null);\n\t\t\t\t}\n\t\t\t\tif (obj.emit(type, mouseEvent)) {\n\t\t\t\t\tcalled = true;\n\t\t\t\t\tif (mouseEvent.prevented)\n\t\t\t\t\t\tprevented = true;\n\t\t\t\t\tif (mouseEvent.stopped)\n\t\t\t\t\t\treturn stopped = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar fallback = fallbacks[type];\n\t\t\t\tif (fallback)\n\t\t\t\t\treturn emit(obj, fallback);\n\t\t\t}\n\t\t}\n\n\t\twhile (obj && obj !== stopItem) {\n\t\t\tif (emit(obj, type))\n\t\t\t\tbreak;\n\t\t\tobj = obj._parent;\n\t\t}\n\t\treturn stopped;\n\t}\n\n\tfunction emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n\t\tview._project.removeOn(type);\n\t\tprevented = called = false;\n\t\treturn (dragItem && emitMouseEvent(dragItem, null, type, event,\n\t\t\t\t\tpoint, prevPoint)\n\t\t\t|| hitItem && hitItem !== dragItem\n\t\t\t\t&& !hitItem.isDescendant(dragItem)\n\t\t\t\t&& emitMouseEvent(hitItem, null, type === 'mousedrag' ?\n\t\t\t\t\t'mousemove' : type, event, point, prevPoint, dragItem)\n\t\t\t|| emitMouseEvent(view, dragItem || hitItem || view, type, event,\n\t\t\t\t\tpoint, prevPoint));\n\t}\n\n\tvar itemEventsMap = {\n\t\tmousedown: {\n\t\t\tmousedown: 1,\n\t\t\tmousedrag: 1,\n\t\t\tclick: 1,\n\t\t\tdoubleclick: 1\n\t\t},\n\t\tmouseup: {\n\t\t\tmouseup: 1,\n\t\t\tmousedrag: 1,\n\t\t\tclick: 1,\n\t\t\tdoubleclick: 1\n\t\t},\n\t\tmousemove: {\n\t\t\tmousedrag: 1,\n\t\t\tmousemove: 1,\n\t\t\tmouseenter: 1,\n\t\t\tmouseleave: 1\n\t\t}\n\t};\n\n\treturn {\n\t\t_viewEvents: viewEvents,\n\n\t\t_handleMouseEvent: function(type, event, point) {\n\t\t\tvar itemEvents = this._itemEvents,\n\t\t\t\thitItems = itemEvents.native[type],\n\t\t\t\tnativeMove = type === 'mousemove',\n\t\t\t\ttool = this._scope.tool,\n\t\t\t\tview = this;\n\n\t\t\tfunction responds(type) {\n\t\t\t\treturn itemEvents.virtual[type] || view.responds(type)\n\t\t\t\t\t\t|| tool && tool.responds(type);\n\t\t\t}\n\n\t\t\tif (nativeMove && dragging && responds('mousedrag'))\n\t\t\t\ttype = 'mousedrag';\n\t\t\tif (!point)\n\t\t\t\tpoint = this.getEventPoint(event);\n\n\t\t\tvar inView = this.getBounds().contains(point),\n\t\t\t\thit = hitItems && inView && view._project.hitTest(point, {\n\t\t\t\t\ttolerance: 0,\n\t\t\t\t\tfill: true,\n\t\t\t\t\tstroke: true\n\t\t\t\t}),\n\t\t\t\thitItem = hit && hit.item || null,\n\t\t\t\thandle = false,\n\t\t\t\tmouse = {};\n\t\t\tmouse[type.substr(5)] = true;\n\n\t\t\tif (hitItems && hitItem !== overItem) {\n\t\t\t\tif (overItem) {\n\t\t\t\t\temitMouseEvent(overItem, null, 'mouseleave', event, point);\n\t\t\t\t}\n\t\t\t\tif (hitItem) {\n\t\t\t\t\temitMouseEvent(hitItem, null, 'mouseenter', event, point);\n\t\t\t\t}\n\t\t\t\toverItem = hitItem;\n\t\t\t}\n\t\t\tif (wasInView ^ inView) {\n\t\t\t\temitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave',\n\t\t\t\t\t\tevent, point);\n\t\t\t\toverView = inView ? this : null;\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\tif ((inView || mouse.drag) && !point.equals(lastPoint)) {\n\t\t\t\temitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove',\n\t\t\t\t\t\tevent, point, lastPoint);\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\twasInView = inView;\n\t\t\tif (mouse.down && inView || mouse.up && downPoint) {\n\t\t\t\temitMouseEvents(this, hitItem, type, event, point, downPoint);\n\t\t\t\tif (mouse.down) {\n\t\t\t\t\tdblClick = hitItem === clickItem\n\t\t\t\t\t\t&& (Date.now() - clickTime < 300);\n\t\t\t\t\tdownItem = clickItem = hitItem;\n\t\t\t\t\tif (!prevented && hitItem) {\n\t\t\t\t\t\tvar item = hitItem;\n\t\t\t\t\t\twhile (item && !item.responds('mousedrag'))\n\t\t\t\t\t\t\titem = item._parent;\n\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t\tdragItem = hitItem;\n\t\t\t\t\t}\n\t\t\t\t\tdownPoint = point;\n\t\t\t\t} else if (mouse.up) {\n\t\t\t\t\tif (!prevented && hitItem === downItem) {\n\t\t\t\t\t\tclickTime = Date.now();\n\t\t\t\t\t\temitMouseEvents(this, hitItem, dblClick ? 'doubleclick'\n\t\t\t\t\t\t\t\t: 'click', event, point, downPoint);\n\t\t\t\t\t\tdblClick = false;\n\t\t\t\t\t}\n\t\t\t\t\tdownItem = dragItem = null;\n\t\t\t\t}\n\t\t\t\twasInView = false;\n\t\t\t\thandle = true;\n\t\t\t}\n\t\t\tlastPoint = point;\n\t\t\tif (handle && tool) {\n\t\t\t\tcalled = tool._handleMouseEvent(type, event, point, mouse)\n\t\t\t\t\t|| called;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tevent.cancelable !== false\n\t\t\t\t&& (called && !mouse.move || mouse.down && responds('mouseup'))\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_handleKeyEvent: function(type, event, key, character) {\n\t\t\tvar scope = this._scope,\n\t\t\t\ttool = scope.tool,\n\t\t\t\tkeyEvent;\n\n\t\t\tfunction emit(obj) {\n\t\t\t\tif (obj.responds(type)) {\n\t\t\t\t\tpaper = scope;\n\t\t\t\t\tobj.emit(type, keyEvent = keyEvent\n\t\t\t\t\t\t\t|| new KeyEvent(type, event, key, character));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.isVisible()) {\n\t\t\t\temit(this);\n\t\t\t\tif (tool && tool.responds(type))\n\t\t\t\t\temit(tool);\n\t\t\t}\n\t\t},\n\n\t\t_countItemEvent: function(type, sign) {\n\t\t\tvar itemEvents = this._itemEvents,\n\t\t\t\tnative = itemEvents.native,\n\t\t\t\tvirtual = itemEvents.virtual;\n\t\t\tfor (var key in itemEventsMap) {\n\t\t\t\tnative[key] = (native[key] || 0)\n\t\t\t\t\t\t+ (itemEventsMap[key][type] || 0) * sign;\n\t\t\t}\n\t\t\tvirtual[type] = (virtual[type] || 0) + sign;\n\t\t},\n\n\t\tstatics: {\n\t\t\tupdateFocus: updateFocus,\n\n\t\t\t_resetState: function() {\n\t\t\t\tdragging = mouseDown = called = wasInView = false;\n\t\t\t\tprevFocus = tempFocus = overView = downPoint = lastPoint =\n\t\t\t\t\tdownItem = overItem = dragItem = clickItem = clickTime =\n\t\t\t\t\tdblClick = null;\n\t\t\t}\n\t\t}\n\t};\n});\n\nvar CanvasView = View.extend({\n\t_class: 'CanvasView',\n\n\tinitialize: function CanvasView(project, canvas) {\n\t\tif (!(canvas instanceof window.HTMLCanvasElement)) {\n\t\t\tvar size = Size.read(arguments, 1);\n\t\t\tif (size.isZero())\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'Cannot create CanvasView with the provided argument: '\n\t\t\t\t\t\t+ Base.slice(arguments, 1));\n\t\t\tcanvas = CanvasProvider.getCanvas(size);\n\t\t}\n\t\tvar ctx = this._context = canvas.getContext('2d');\n\t\tctx.save();\n\t\tthis._pixelRatio = 1;\n\t\tif (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n\t\t\tvar deviceRatio = window.devicePixelRatio || 1,\n\t\t\t\tbackingStoreRatio = DomElement.getPrefixed(ctx,\n\t\t\t\t\t\t'backingStorePixelRatio') || 1;\n\t\t\tthis._pixelRatio = deviceRatio / backingStoreRatio;\n\t\t}\n\t\tView.call(this, project, canvas);\n\t\tthis._needsUpdate = true;\n\t},\n\n\tremove: function remove() {\n\t\tthis._context.restore();\n\t\treturn remove.base.call(this);\n\t},\n\n\t_setElementSize: function _setElementSize(width, height) {\n\t\tvar pixelRatio = this._pixelRatio;\n\t\t_setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n\t\tif (pixelRatio !== 1) {\n\t\t\tvar element = this._element,\n\t\t\t\tctx = this._context;\n\t\t\tif (!PaperScope.hasAttribute(element, 'resize')) {\n\t\t\t\tvar style = element.style;\n\t\t\t\tstyle.width = width + 'px';\n\t\t\t\tstyle.height = height + 'px';\n\t\t\t}\n\t\t\tctx.restore();\n\t\t\tctx.save();\n\t\t\tctx.scale(pixelRatio, pixelRatio);\n\t\t}\n\t},\n\n\tgetContext: function() {\n\t\treturn this._context;\n\t},\n\n\tgetPixelSize: function getPixelSize(size) {\n\t\tvar agent = paper.agent,\n\t\t\tpixels;\n\t\tif (agent && agent.firefox) {\n\t\t\tpixels = getPixelSize.base.call(this, size);\n\t\t} else {\n\t\t\tvar ctx = this._context,\n\t\t\t\tprevFont = ctx.font;\n\t\t\tctx.font = size + ' serif';\n\t\t\tpixels = parseFloat(ctx.font);\n\t\t\tctx.font = prevFont;\n\t\t}\n\t\treturn pixels;\n\t},\n\n\tgetTextWidth: function(font, lines) {\n\t\tvar ctx = this._context,\n\t\t\tprevFont = ctx.font,\n\t\t\twidth = 0;\n\t\tctx.font = font;\n\t\tfor (var i = 0, l = lines.length; i < l; i++)\n\t\t\twidth = Math.max(width, ctx.measureText(lines[i]).width);\n\t\tctx.font = prevFont;\n\t\treturn width;\n\t},\n\n\tupdate: function() {\n\t\tif (!this._needsUpdate)\n\t\t\treturn false;\n\t\tvar project = this._project,\n\t\t\tctx = this._context,\n\t\t\tsize = this._viewSize;\n\t\tctx.clearRect(0, 0, size.width + 1, size.height + 1);\n\t\tif (project)\n\t\t\tproject.draw(ctx, this._matrix, this._pixelRatio);\n\t\tthis._needsUpdate = false;\n\t\treturn true;\n\t}\n});\n\nvar Event = Base.extend({\n\t_class: 'Event',\n\n\tinitialize: function Event(event) {\n\t\tthis.event = event;\n\t\tthis.type = event && event.type;\n\t},\n\n\tprevented: false,\n\tstopped: false,\n\n\tpreventDefault: function() {\n\t\tthis.prevented = true;\n\t\tthis.event.preventDefault();\n\t},\n\n\tstopPropagation: function() {\n\t\tthis.stopped = true;\n\t\tthis.event.stopPropagation();\n\t},\n\n\tstop: function() {\n\t\tthis.stopPropagation();\n\t\tthis.preventDefault();\n\t},\n\n\tgetTimeStamp: function() {\n\t\treturn this.event.timeStamp;\n\t},\n\n\tgetModifiers: function() {\n\t\treturn Key.modifiers;\n\t}\n});\n\nvar KeyEvent = Event.extend({\n\t_class: 'KeyEvent',\n\n\tinitialize: function KeyEvent(type, event, key, character) {\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t\tthis.key = key;\n\t\tthis.character = character;\n\t},\n\n\ttoString: function() {\n\t\treturn \"{ type: '\" + this.type\n\t\t\t\t+ \"', key: '\" + this.key\n\t\t\t\t+ \"', character: '\" + this.character\n\t\t\t\t+ \"', modifiers: \" + this.getModifiers()\n\t\t\t\t+ \" }\";\n\t}\n});\n\nvar Key = new function() {\n\tvar keyLookup = {\n\t\t\t'\\t': 'tab',\n\t\t\t' ': 'space',\n\t\t\t'\\b': 'backspace',\n\t\t\t'\\x7f': 'delete',\n\t\t\t'Spacebar': 'space',\n\t\t\t'Del': 'delete',\n\t\t\t'Win': 'meta',\n\t\t\t'Esc': 'escape'\n\t\t},\n\n\t\tcharLookup = {\n\t\t\t'tab': '\\t',\n\t\t\t'space': ' ',\n\t\t\t'enter': '\\r'\n\t\t},\n\n\t\tkeyMap = {},\n\t\tcharMap = {},\n\t\tmetaFixMap,\n\t\tdownKey,\n\n\t\tmodifiers = new Base({\n\t\t\tshift: false,\n\t\t\tcontrol: false,\n\t\t\talt: false,\n\t\t\tmeta: false,\n\t\t\tcapsLock: false,\n\t\t\tspace: false\n\t\t}).inject({\n\t\t\toption: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this.alt;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcommand: {\n\t\t\t\tget: function() {\n\t\t\t\t\tvar agent = paper && paper.agent;\n\t\t\t\t\treturn agent && agent.mac ? this.meta : this.control;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\tfunction getKey(event) {\n\t\tvar key = event.key || event.keyIdentifier;\n\t\tkey = /^U\\+/.test(key)\n\t\t\t\t? String.fromCharCode(parseInt(key.substr(2), 16))\n\t\t\t\t: /^Arrow[A-Z]/.test(key) ? key.substr(5)\n\t\t\t\t: key === 'Unidentified'  || key === undefined\n\t\t\t\t\t? String.fromCharCode(event.keyCode)\n\t\t\t\t\t: key;\n\t\treturn keyLookup[key] ||\n\t\t\t\t(key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n\t}\n\n\tfunction handleKey(down, key, character, event) {\n\t\tvar type = down ? 'keydown' : 'keyup',\n\t\t\tview = View._focused,\n\t\t\tname;\n\t\tkeyMap[key] = down;\n\t\tif (down) {\n\t\t\tcharMap[key] = character;\n\t\t} else {\n\t\t\tdelete charMap[key];\n\t\t}\n\t\tif (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n\t\t\tmodifiers[name] = down;\n\t\t\tvar agent = paper && paper.agent;\n\t\t\tif (name === 'meta' && agent && agent.mac) {\n\t\t\t\tif (down) {\n\t\t\t\t\tmetaFixMap = {};\n\t\t\t\t} else {\n\t\t\t\t\tfor (var k in metaFixMap) {\n\t\t\t\t\t\tif (k in charMap)\n\t\t\t\t\t\t\thandleKey(false, k, metaFixMap[k], event);\n\t\t\t\t\t}\n\t\t\t\t\tmetaFixMap = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (down && metaFixMap) {\n\t\t\tmetaFixMap[key] = character;\n\t\t}\n\t\tif (view) {\n\t\t\tview._handleKeyEvent(down ? 'keydown' : 'keyup', event, key,\n\t\t\t\t\tcharacter);\n\t\t}\n\t}\n\n\tDomEvent.add(document, {\n\t\tkeydown: function(event) {\n\t\t\tvar key = getKey(event),\n\t\t\t\tagent = paper && paper.agent;\n\t\t\tif (key.length > 1 || agent && (agent.chrome && (event.altKey\n\t\t\t\t\t\t|| agent.mac && event.metaKey\n\t\t\t\t\t\t|| !agent.mac && event.ctrlKey))) {\n\t\t\t\thandleKey(true, key,\n\t\t\t\t\t\tcharLookup[key] || (key.length > 1 ? '' : key), event);\n\t\t\t} else {\n\t\t\t\tdownKey = key;\n\t\t\t}\n\t\t},\n\n\t\tkeypress: function(event) {\n\t\t\tif (downKey) {\n\t\t\t\tvar key = getKey(event),\n\t\t\t\t\tcode = event.charCode,\n\t\t\t\t\tcharacter = code >= 32 ? String.fromCharCode(code)\n\t\t\t\t\t\t: key.length > 1 ? '' : key;\n\t\t\t\tif (key !== downKey) {\n\t\t\t\t\tkey = character.toLowerCase();\n\t\t\t\t}\n\t\t\t\thandleKey(true, key, character, event);\n\t\t\t\tdownKey = null;\n\t\t\t}\n\t\t},\n\n\t\tkeyup: function(event) {\n\t\t\tvar key = getKey(event);\n\t\t\tif (key in charMap)\n\t\t\t\thandleKey(false, key, charMap[key], event);\n\t\t}\n\t});\n\n\tDomEvent.add(window, {\n\t\tblur: function(event) {\n\t\t\tfor (var key in charMap)\n\t\t\t\thandleKey(false, key, charMap[key], event);\n\t\t}\n\t});\n\n\treturn {\n\t\tmodifiers: modifiers,\n\n\t\tisDown: function(key) {\n\t\t\treturn !!keyMap[key];\n\t\t}\n\t};\n};\n\nvar MouseEvent = Event.extend({\n\t_class: 'MouseEvent',\n\n\tinitialize: function MouseEvent(type, event, point, target, delta) {\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t\tthis.point = point;\n\t\tthis.target = target;\n\t\tthis.delta = delta;\n\t},\n\n\ttoString: function() {\n\t\treturn \"{ type: '\" + this.type\n\t\t\t\t+ \"', point: \" + this.point\n\t\t\t\t+ ', target: ' + this.target\n\t\t\t\t+ (this.delta ? ', delta: ' + this.delta : '')\n\t\t\t\t+ ', modifiers: ' + this.getModifiers()\n\t\t\t\t+ ' }';\n\t}\n});\n\nvar ToolEvent = Event.extend({\n\t_class: 'ToolEvent',\n\t_item: null,\n\n\tinitialize: function ToolEvent(tool, type, event) {\n\t\tthis.tool = tool;\n\t\tthis.type = type;\n\t\tthis.event = event;\n\t},\n\n\t_choosePoint: function(point, toolPoint) {\n\t\treturn point ? point : toolPoint ? toolPoint.clone() : null;\n\t},\n\n\tgetPoint: function() {\n\t\treturn this._choosePoint(this._point, this.tool._point);\n\t},\n\n\tsetPoint: function(point) {\n\t\tthis._point = point;\n\t},\n\n\tgetLastPoint: function() {\n\t\treturn this._choosePoint(this._lastPoint, this.tool._lastPoint);\n\t},\n\n\tsetLastPoint: function(lastPoint) {\n\t\tthis._lastPoint = lastPoint;\n\t},\n\n\tgetDownPoint: function() {\n\t\treturn this._choosePoint(this._downPoint, this.tool._downPoint);\n\t},\n\n\tsetDownPoint: function(downPoint) {\n\t\tthis._downPoint = downPoint;\n\t},\n\n\tgetMiddlePoint: function() {\n\t\tif (!this._middlePoint && this.tool._lastPoint) {\n\t\t\treturn this.tool._point.add(this.tool._lastPoint).divide(2);\n\t\t}\n\t\treturn this._middlePoint;\n\t},\n\n\tsetMiddlePoint: function(middlePoint) {\n\t\tthis._middlePoint = middlePoint;\n\t},\n\n\tgetDelta: function() {\n\t\treturn !this._delta && this.tool._lastPoint\n\t\t\t\t? this.tool._point.subtract(this.tool._lastPoint)\n\t\t\t\t: this._delta;\n\t},\n\n\tsetDelta: function(delta) {\n\t\tthis._delta = delta;\n\t},\n\n\tgetCount: function() {\n\t\treturn this.tool[/^mouse(down|up)$/.test(this.type)\n\t\t\t\t? '_downCount' : '_moveCount'];\n\t},\n\n\tsetCount: function(count) {\n\t\tthis.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count']\n\t\t\t= count;\n\t},\n\n\tgetItem: function() {\n\t\tif (!this._item) {\n\t\t\tvar result = this.tool._scope.project.hitTest(this.getPoint());\n\t\t\tif (result) {\n\t\t\t\tvar item = result.item,\n\t\t\t\t\tparent = item._parent;\n\t\t\t\twhile (/^(Group|CompoundPath)$/.test(parent._class)) {\n\t\t\t\t\titem = parent;\n\t\t\t\t\tparent = parent._parent;\n\t\t\t\t}\n\t\t\t\tthis._item = item;\n\t\t\t}\n\t\t}\n\t\treturn this._item;\n\t},\n\n\tsetItem: function(item) {\n\t\tthis._item = item;\n\t},\n\n\ttoString: function() {\n\t\treturn '{ type: ' + this.type\n\t\t\t\t+ ', point: ' + this.getPoint()\n\t\t\t\t+ ', count: ' + this.getCount()\n\t\t\t\t+ ', modifiers: ' + this.getModifiers()\n\t\t\t\t+ ' }';\n\t}\n});\n\nvar Tool = PaperScopeItem.extend({\n\t_class: 'Tool',\n\t_list: 'tools',\n\t_reference: 'tool',\n\t_events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove',\n\t\t\t'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown',\n\t\t\t'onKeyUp'],\n\n\tinitialize: function Tool(props) {\n\t\tPaperScopeItem.call(this);\n\t\tthis._moveCount = -1;\n\t\tthis._downCount = -1;\n\t\tthis.set(props);\n\t},\n\n\tgetMinDistance: function() {\n\t\treturn this._minDistance;\n\t},\n\n\tsetMinDistance: function(minDistance) {\n\t\tthis._minDistance = minDistance;\n\t\tif (minDistance != null && this._maxDistance != null\n\t\t\t\t&& minDistance > this._maxDistance) {\n\t\t\tthis._maxDistance = minDistance;\n\t\t}\n\t},\n\n\tgetMaxDistance: function() {\n\t\treturn this._maxDistance;\n\t},\n\n\tsetMaxDistance: function(maxDistance) {\n\t\tthis._maxDistance = maxDistance;\n\t\tif (this._minDistance != null && maxDistance != null\n\t\t\t\t&& maxDistance < this._minDistance) {\n\t\t\tthis._minDistance = maxDistance;\n\t\t}\n\t},\n\n\tgetFixedDistance: function() {\n\t\treturn this._minDistance == this._maxDistance\n\t\t\t? this._minDistance : null;\n\t},\n\n\tsetFixedDistance: function(distance) {\n\t\tthis._minDistance = this._maxDistance = distance;\n\t},\n\n\t_handleMouseEvent: function(type, event, point, mouse) {\n\t\tpaper = this._scope;\n\t\tif (mouse.drag && !this.responds(type))\n\t\t\ttype = 'mousemove';\n\t\tvar move = mouse.move || mouse.drag,\n\t\t\tresponds = this.responds(type),\n\t\t\tminDistance = this.minDistance,\n\t\t\tmaxDistance = this.maxDistance,\n\t\t\tcalled = false,\n\t\t\ttool = this;\n\t\tfunction update(minDistance, maxDistance) {\n\t\t\tvar pt = point,\n\t\t\t\ttoolPoint = move ? tool._point : (tool._downPoint || pt);\n\t\t\tif (move) {\n\t\t\t\tif (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (toolPoint && (minDistance != null || maxDistance != null)) {\n\t\t\t\t\tvar vector = pt.subtract(toolPoint),\n\t\t\t\t\t\tdistance = vector.getLength();\n\t\t\t\t\tif (distance < (minDistance || 0))\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tif (maxDistance) {\n\t\t\t\t\t\tpt = toolPoint.add(vector.normalize(\n\t\t\t\t\t\t\t\tMath.min(distance, maxDistance)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttool._moveCount++;\n\t\t\t}\n\t\t\ttool._point = pt;\n\t\t\ttool._lastPoint = toolPoint || pt;\n\t\t\tif (mouse.down) {\n\t\t\t\ttool._moveCount = -1;\n\t\t\t\ttool._downPoint = pt;\n\t\t\t\ttool._downCount++;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction emit() {\n\t\t\tif (responds) {\n\t\t\t\tcalled = tool.emit(type, new ToolEvent(tool, type, event))\n\t\t\t\t\t\t|| called;\n\t\t\t}\n\t\t}\n\n\t\tif (mouse.down) {\n\t\t\tupdate();\n\t\t\temit();\n\t\t} else if (mouse.up) {\n\t\t\tupdate(null, maxDistance);\n\t\t\temit();\n\t\t} else if (responds) {\n\t\t\twhile (update(minDistance, maxDistance))\n\t\t\t\temit();\n\t\t}\n\t\treturn called;\n\t}\n\n});\n\nvar Tween = Base.extend(Emitter, {\n\t_class: 'Tween',\n\n\tstatics: {\n\t\teasings: new Base({\n\t\t\tlinear: function(t) {\n\t\t\t\treturn t;\n\t\t\t},\n\n\t\t\teaseInQuad: function(t) {\n\t\t\t\treturn t * t;\n\t\t\t},\n\n\t\t\teaseOutQuad: function(t) {\n\t\t\t\treturn t * (2 - t);\n\t\t\t},\n\n\t\t\teaseInOutQuad: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 2 * t * t\n\t\t\t\t\t: -1 + 2 * (2 - t) * t;\n\t\t\t},\n\n\t\t\teaseInCubic: function(t) {\n\t\t\t\treturn t * t * t;\n\t\t\t},\n\n\t\t\teaseOutCubic: function(t) {\n\t\t\t\treturn --t * t * t + 1;\n\t\t\t},\n\n\t\t\teaseInOutCubic: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 4 * t * t * t\n\t\t\t\t\t: (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n\t\t\t},\n\n\t\t\teaseInQuart: function(t) {\n\t\t\t\treturn t * t * t * t;\n\t\t\t},\n\n\t\t\teaseOutQuart: function(t) {\n\t\t\t\treturn 1 - (--t) * t * t * t;\n\t\t\t},\n\n\t\t\teaseInOutQuart: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 8 * t * t * t * t\n\t\t\t\t\t: 1 - 8 * (--t) * t * t * t;\n\t\t\t},\n\n\t\t\teaseInQuint: function(t) {\n\t\t\t\treturn t * t * t * t * t;\n\t\t\t},\n\n\t\t\teaseOutQuint: function(t) {\n\t\t\t\treturn 1 + --t * t * t * t * t;\n\t\t\t},\n\n\t\t\teaseInOutQuint: function(t) {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 16 * t * t * t * t * t\n\t\t\t\t\t: 1 + 16 * (--t) * t * t * t * t;\n\t\t\t}\n\t\t})\n\t},\n\n\tinitialize: function Tween(object, from, to, duration, easing, start) {\n\t\tthis.object = object;\n\t\tvar type = typeof easing;\n\t\tvar isFunction = type === 'function';\n\t\tthis.type = isFunction\n\t\t\t? type\n\t\t\t: type === 'string'\n\t\t\t\t? easing\n\t\t\t\t: 'linear';\n\t\tthis.easing = isFunction ? easing : Tween.easings[this.type];\n\t\tthis.duration = duration;\n\t\tthis.running = false;\n\n\t\tthis._then = null;\n\t\tthis._startTime = null;\n\t\tvar state = from || to;\n\t\tthis._keys = state ? Object.keys(state) : [];\n\t\tthis._parsedKeys = this._parseKeys(this._keys);\n\t\tthis._from = state && this._getState(from);\n\t\tthis._to = state && this._getState(to);\n\t\tif (start !== false) {\n\t\t\tthis.start();\n\t\t}\n\t},\n\n\tthen: function(then) {\n\t\tthis._then = then;\n\t\treturn this;\n\t},\n\n\tstart: function() {\n\t\tthis._startTime = null;\n\t\tthis.running = true;\n\t\treturn this;\n\t},\n\n\tstop: function() {\n\t\tthis.running = false;\n\t\treturn this;\n\t},\n\n\tupdate: function(progress) {\n\t\tif (this.running) {\n\t\t\tif (progress >= 1) {\n\t\t\t\tprogress = 1;\n\t\t\t\tthis.running = false;\n\t\t\t}\n\n\t\t\tvar factor = this.easing(progress),\n\t\t\t\tkeys = this._keys,\n\t\t\t\tgetValue = function(value) {\n\t\t\t\t\treturn typeof value === 'function'\n\t\t\t\t\t\t? value(factor, progress)\n\t\t\t\t\t\t: value;\n\t\t\t\t};\n\t\t\tfor (var i = 0, l = keys && keys.length; i < l; i++) {\n\t\t\t\tvar key = keys[i],\n\t\t\t\t\tfrom = getValue(this._from[key]),\n\t\t\t\t\tto = getValue(this._to[key]),\n\t\t\t\t\tvalue = (from && to && from.__add && to.__add)\n\t\t\t\t\t\t? to.__subtract(from).__multiply(factor).__add(from)\n\t\t\t\t\t\t: ((to - from) * factor) + from;\n\t\t\t\tthis._setProperty(this._parsedKeys[key], value);\n\t\t\t}\n\n\t\t\tif (this.responds('update')) {\n\t\t\t\tthis.emit('update', new Base({\n\t\t\t\t\tprogress: progress,\n\t\t\t\t\tfactor: factor\n\t\t\t\t}));\n\t\t\t}\n\t\t\tif (!this.running && this._then) {\n\t\t\t\tthis._then(this.object);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\t_events: {\n\t\tonUpdate: {}\n\t},\n\n\t_handleFrame: function(time) {\n\t\tvar startTime = this._startTime,\n\t\t\tprogress = startTime\n\t\t\t\t? (time - startTime) / this.duration\n\t\t\t\t: 0;\n\t\tif (!startTime) {\n\t\t\tthis._startTime = time;\n\t\t}\n\t\tthis.update(progress);\n\t},\n\n\t_getState: function(state) {\n\t\tvar keys = this._keys,\n\t\t\tresult = {};\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i],\n\t\t\t\tpath = this._parsedKeys[key],\n\t\t\t\tcurrent = this._getProperty(path),\n\t\t\t\tvalue;\n\t\t\tif (state) {\n\t\t\t\tvar resolved = this._resolveValue(current, state[key]);\n\t\t\t\tthis._setProperty(path, resolved);\n\t\t\t\tvalue = this._getProperty(path);\n\t\t\t\tvalue = value && value.clone ? value.clone() : value;\n\t\t\t\tthis._setProperty(path, current);\n\t\t\t} else {\n\t\t\t\tvalue = current && current.clone ? current.clone() : current;\n\t\t\t}\n\t\t\tresult[key] = value;\n\t\t}\n\t\treturn result;\n\t},\n\n\t_resolveValue: function(current, value) {\n\t\tif (value) {\n\t\t\tif (Array.isArray(value) && value.length === 2) {\n\t\t\t\tvar operator = value[0];\n\t\t\t\treturn (\n\t\t\t\t\toperator &&\n\t\t\t\t\toperator.match &&\n\t\t\t\t\toperator.match(/^[+\\-\\*\\/]=/)\n\t\t\t\t)\n\t\t\t\t\t? this._calculate(current, operator[0], value[1])\n\t\t\t\t\t: value;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\tvar match = value.match(/^[+\\-*/]=(.*)/);\n\t\t\t\tif (match) {\n\t\t\t\t\tvar parsed = JSON.parse(match[1].replace(\n\t\t\t\t\t\t/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g,\n\t\t\t\t\t\t'\"$2\": '\n\t\t\t\t\t));\n\t\t\t\t\treturn this._calculate(current, value[0], parsed);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t},\n\n\t_calculate: function(left, operator, right) {\n\t\treturn paper.PaperScript.calculateBinary(left, operator, right);\n\t},\n\n\t_parseKeys: function(keys) {\n\t\tvar parsed = {};\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i],\n\t\t\t\tpath = key\n\t\t\t\t\t.replace(/\\.([^.]*)/g, '/$1')\n\t\t\t\t\t.replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n\t\t\tparsed[key] = path.split('/');\n\t\t}\n\t\treturn parsed;\n\t},\n\n\t_getProperty: function(path, offset) {\n\t\tvar obj = this.object;\n\t\tfor (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n\t\t\tobj = obj[path[i]];\n\t\t}\n\t\treturn obj;\n\t},\n\n\t_setProperty: function(path, value) {\n\t\tvar dest = this._getProperty(path, 1);\n\t\tif (dest) {\n\t\t\tdest[path[path.length - 1]] = value;\n\t\t}\n\t}\n});\n\nvar Http = {\n\trequest: function(options) {\n\t\tvar xhr = new self.XMLHttpRequest();\n\t\txhr.open((options.method || 'get').toUpperCase(), options.url,\n\t\t\t\tBase.pick(options.async, true));\n\t\tif (options.mimeType)\n\t\t\txhr.overrideMimeType(options.mimeType);\n\t\txhr.onload = function() {\n\t\t\tvar status = xhr.status;\n\t\t\tif (status === 0 || status === 200) {\n\t\t\t\tif (options.onLoad) {\n\t\t\t\t\toptions.onLoad.call(xhr, xhr.responseText);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\txhr.onerror();\n\t\t\t}\n\t\t};\n\t\txhr.onerror = function() {\n\t\t\tvar status = xhr.status,\n\t\t\t\tmessage = 'Could not load \"' + options.url + '\" (Status: '\n\t\t\t\t\t\t+ status + ')';\n\t\t\tif (options.onError) {\n\t\t\t\toptions.onError(message, status);\n\t\t\t} else {\n\t\t\t\tthrow new Error(message);\n\t\t\t}\n\t\t};\n\t\treturn xhr.send(null);\n\t}\n};\n\nvar CanvasProvider = Base.exports.CanvasProvider = {\n\tcanvases: [],\n\n\tgetCanvas: function(width, height) {\n\t\tif (!window)\n\t\t\treturn null;\n\t\tvar canvas,\n\t\t\tclear = true;\n\t\tif (typeof width === 'object') {\n\t\t\theight = width.height;\n\t\t\twidth = width.width;\n\t\t}\n\t\tif (this.canvases.length) {\n\t\t\tcanvas = this.canvases.pop();\n\t\t} else {\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tclear = false;\n\t\t}\n\t\tvar ctx = canvas.getContext('2d');\n\t\tif (!ctx) {\n\t\t\tthrow new Error('Canvas ' + canvas +\n\t\t\t\t\t' is unable to provide a 2D context.');\n\t\t}\n\t\tif (canvas.width === width && canvas.height === height) {\n\t\t\tif (clear)\n\t\t\t\tctx.clearRect(0, 0, width + 1, height + 1);\n\t\t} else {\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\t\t}\n\t\tctx.save();\n\t\treturn canvas;\n\t},\n\n\tgetContext: function(width, height) {\n\t\tvar canvas = this.getCanvas(width, height);\n\t\treturn canvas ? canvas.getContext('2d') : null;\n\t},\n\n\trelease: function(obj) {\n\t\tvar canvas = obj && obj.canvas ? obj.canvas : obj;\n\t\tif (canvas && canvas.getContext) {\n\t\t\tcanvas.getContext('2d').restore();\n\t\t\tthis.canvases.push(canvas);\n\t\t}\n\t}\n};\n\nvar BlendMode = new function() {\n\tvar min = Math.min,\n\t\tmax = Math.max,\n\t\tabs = Math.abs,\n\t\tsr, sg, sb, sa,\n\t\tbr, bg, bb, ba,\n\t\tdr, dg, db;\n\n\tfunction getLum(r, g, b) {\n\t\treturn 0.2989 * r + 0.587 * g + 0.114 * b;\n\t}\n\n\tfunction setLum(r, g, b, l) {\n\t\tvar d = l - getLum(r, g, b);\n\t\tdr = r + d;\n\t\tdg = g + d;\n\t\tdb = b + d;\n\t\tvar l = getLum(dr, dg, db),\n\t\t\tmn = min(dr, dg, db),\n\t\t\tmx = max(dr, dg, db);\n\t\tif (mn < 0) {\n\t\t\tvar lmn = l - mn;\n\t\t\tdr = l + (dr - l) * l / lmn;\n\t\t\tdg = l + (dg - l) * l / lmn;\n\t\t\tdb = l + (db - l) * l / lmn;\n\t\t}\n\t\tif (mx > 255) {\n\t\t\tvar ln = 255 - l,\n\t\t\t\tmxl = mx - l;\n\t\t\tdr = l + (dr - l) * ln / mxl;\n\t\t\tdg = l + (dg - l) * ln / mxl;\n\t\t\tdb = l + (db - l) * ln / mxl;\n\t\t}\n\t}\n\n\tfunction getSat(r, g, b) {\n\t\treturn max(r, g, b) - min(r, g, b);\n\t}\n\n\tfunction setSat(r, g, b, s) {\n\t\tvar col = [r, g, b],\n\t\t\tmx = max(r, g, b),\n\t\t\tmn = min(r, g, b),\n\t\t\tmd;\n\t\tmn = mn === r ? 0 : mn === g ? 1 : 2;\n\t\tmx = mx === r ? 0 : mx === g ? 1 : 2;\n\t\tmd = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n\t\tif (col[mx] > col[mn]) {\n\t\t\tcol[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n\t\t\tcol[mx] = s;\n\t\t} else {\n\t\t\tcol[md] = col[mx] = 0;\n\t\t}\n\t\tcol[mn] = 0;\n\t\tdr = col[0];\n\t\tdg = col[1];\n\t\tdb = col[2];\n\t}\n\n\tvar modes = {\n\t\tmultiply: function() {\n\t\t\tdr = br * sr / 255;\n\t\t\tdg = bg * sg / 255;\n\t\t\tdb = bb * sb / 255;\n\t\t},\n\n\t\tscreen: function() {\n\t\t\tdr = br + sr - (br * sr / 255);\n\t\t\tdg = bg + sg - (bg * sg / 255);\n\t\t\tdb = bb + sb - (bb * sb / 255);\n\t\t},\n\n\t\toverlay: function() {\n\t\t\tdr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n\t\t\tdg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n\t\t\tdb = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n\t\t},\n\n\t\t'soft-light': function() {\n\t\t\tvar t = sr * br / 255;\n\t\t\tdr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n\t\t\tt = sg * bg / 255;\n\t\t\tdg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n\t\t\tt = sb * bb / 255;\n\t\t\tdb = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n\t\t},\n\n\t\t'hard-light': function() {\n\t\t\tdr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n\t\t\tdg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n\t\t\tdb = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n\t\t},\n\n\t\t'color-dodge': function() {\n\t\t\tdr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n\t\t\tdg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n\t\t\tdb = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n\t\t},\n\n\t\t'color-burn': function() {\n\t\t\tdr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n\t\t\tdg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n\t\t\tdb = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n\t\t},\n\n\t\tdarken: function() {\n\t\t\tdr = br < sr ? br : sr;\n\t\t\tdg = bg < sg ? bg : sg;\n\t\t\tdb = bb < sb ? bb : sb;\n\t\t},\n\n\t\tlighten: function() {\n\t\t\tdr = br > sr ? br : sr;\n\t\t\tdg = bg > sg ? bg : sg;\n\t\t\tdb = bb > sb ? bb : sb;\n\t\t},\n\n\t\tdifference: function() {\n\t\t\tdr = br - sr;\n\t\t\tif (dr < 0)\n\t\t\t\tdr = -dr;\n\t\t\tdg = bg - sg;\n\t\t\tif (dg < 0)\n\t\t\t\tdg = -dg;\n\t\t\tdb = bb - sb;\n\t\t\tif (db < 0)\n\t\t\t\tdb = -db;\n\t\t},\n\n\t\texclusion: function() {\n\t\t\tdr = br + sr * (255 - br - br) / 255;\n\t\t\tdg = bg + sg * (255 - bg - bg) / 255;\n\t\t\tdb = bb + sb * (255 - bb - bb) / 255;\n\t\t},\n\n\t\thue: function() {\n\t\t\tsetSat(sr, sg, sb, getSat(br, bg, bb));\n\t\t\tsetLum(dr, dg, db, getLum(br, bg, bb));\n\t\t},\n\n\t\tsaturation: function() {\n\t\t\tsetSat(br, bg, bb, getSat(sr, sg, sb));\n\t\t\tsetLum(dr, dg, db, getLum(br, bg, bb));\n\t\t},\n\n\t\tluminosity: function() {\n\t\t\tsetLum(br, bg, bb, getLum(sr, sg, sb));\n\t\t},\n\n\t\tcolor: function() {\n\t\t\tsetLum(sr, sg, sb, getLum(br, bg, bb));\n\t\t},\n\n\t\tadd: function() {\n\t\t\tdr = min(br + sr, 255);\n\t\t\tdg = min(bg + sg, 255);\n\t\t\tdb = min(bb + sb, 255);\n\t\t},\n\n\t\tsubtract: function() {\n\t\t\tdr = max(br - sr, 0);\n\t\t\tdg = max(bg - sg, 0);\n\t\t\tdb = max(bb - sb, 0);\n\t\t},\n\n\t\taverage: function() {\n\t\t\tdr = (br + sr) / 2;\n\t\t\tdg = (bg + sg) / 2;\n\t\t\tdb = (bb + sb) / 2;\n\t\t},\n\n\t\tnegation: function() {\n\t\t\tdr = 255 - abs(255 - sr - br);\n\t\t\tdg = 255 - abs(255 - sg - bg);\n\t\t\tdb = 255 - abs(255 - sb - bb);\n\t\t}\n\t};\n\n\tvar nativeModes = this.nativeModes = Base.each([\n\t\t'source-over', 'source-in', 'source-out', 'source-atop',\n\t\t'destination-over', 'destination-in', 'destination-out',\n\t\t'destination-atop', 'lighter', 'darker', 'copy', 'xor'\n\t], function(mode) {\n\t\tthis[mode] = true;\n\t}, {});\n\n\tvar ctx = CanvasProvider.getContext(1, 1);\n\tif (ctx) {\n\t\tBase.each(modes, function(func, mode) {\n\t\t\tvar darken = mode === 'darken',\n\t\t\t\tok = false;\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.fillStyle = darken ? '#300' : '#a00';\n\t\t\t\tctx.fillRect(0, 0, 1, 1);\n\t\t\t\tctx.globalCompositeOperation = mode;\n\t\t\t\tif (ctx.globalCompositeOperation === mode) {\n\t\t\t\t\tctx.fillStyle = darken ? '#a00' : '#300';\n\t\t\t\t\tctx.fillRect(0, 0, 1, 1);\n\t\t\t\t\tok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken\n\t\t\t\t\t\t\t? 170 : 51;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t\tctx.restore();\n\t\t\tnativeModes[mode] = ok;\n\t\t});\n\t\tCanvasProvider.release(ctx);\n\t}\n\n\tthis.process = function(mode, srcContext, dstContext, alpha, offset) {\n\t\tvar srcCanvas = srcContext.canvas,\n\t\t\tnormal = mode === 'normal';\n\t\tif (normal || nativeModes[mode]) {\n\t\t\tdstContext.save();\n\t\t\tdstContext.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tdstContext.globalAlpha = alpha;\n\t\t\tif (!normal)\n\t\t\t\tdstContext.globalCompositeOperation = mode;\n\t\t\tdstContext.drawImage(srcCanvas, offset.x, offset.y);\n\t\t\tdstContext.restore();\n\t\t} else {\n\t\t\tvar process = modes[mode];\n\t\t\tif (!process)\n\t\t\t\treturn;\n\t\t\tvar dstData = dstContext.getImageData(offset.x, offset.y,\n\t\t\t\t\tsrcCanvas.width, srcCanvas.height),\n\t\t\t\tdst = dstData.data,\n\t\t\t\tsrc = srcContext.getImageData(0, 0,\n\t\t\t\t\tsrcCanvas.width, srcCanvas.height).data;\n\t\t\tfor (var i = 0, l = dst.length; i < l; i += 4) {\n\t\t\t\tsr = src[i];\n\t\t\t\tbr = dst[i];\n\t\t\t\tsg = src[i + 1];\n\t\t\t\tbg = dst[i + 1];\n\t\t\t\tsb = src[i + 2];\n\t\t\t\tbb = dst[i + 2];\n\t\t\t\tsa = src[i + 3];\n\t\t\t\tba = dst[i + 3];\n\t\t\t\tprocess();\n\t\t\t\tvar a1 = sa * alpha / 255,\n\t\t\t\t\ta2 = 1 - a1;\n\t\t\t\tdst[i] = a1 * dr + a2 * br;\n\t\t\t\tdst[i + 1] = a1 * dg + a2 * bg;\n\t\t\t\tdst[i + 2] = a1 * db + a2 * bb;\n\t\t\t\tdst[i + 3] = sa * alpha + a2 * ba;\n\t\t\t}\n\t\t\tdstContext.putImageData(dstData, offset.x, offset.y);\n\t\t}\n\t};\n};\n\nvar SvgElement = new function() {\n\tvar svg = 'http://www.w3.org/2000/svg',\n\t\txmlns = 'http://www.w3.org/2000/xmlns',\n\t\txlink = 'http://www.w3.org/1999/xlink',\n\t\tattributeNamespace = {\n\t\t\thref: xlink,\n\t\t\txlink: xmlns,\n\t\t\txmlns: xmlns + '/',\n\t\t\t'xmlns:xlink': xmlns + '/'\n\t\t};\n\n\tfunction create(tag, attributes, formatter) {\n\t\treturn set(document.createElementNS(svg, tag), attributes, formatter);\n\t}\n\n\tfunction get(node, name) {\n\t\tvar namespace = attributeNamespace[name],\n\t\t\tvalue = namespace\n\t\t\t\t? node.getAttributeNS(namespace, name)\n\t\t\t\t: node.getAttribute(name);\n\t\treturn value === 'null' ? null : value;\n\t}\n\n\tfunction set(node, attributes, formatter) {\n\t\tfor (var name in attributes) {\n\t\t\tvar value = attributes[name],\n\t\t\t\tnamespace = attributeNamespace[name];\n\t\t\tif (typeof value === 'number' && formatter)\n\t\t\t\tvalue = formatter.number(value);\n\t\t\tif (namespace) {\n\t\t\t\tnode.setAttributeNS(namespace, name, value);\n\t\t\t} else {\n\t\t\t\tnode.setAttribute(name, value);\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\treturn {\n\t\tsvg: svg,\n\t\txmlns: xmlns,\n\t\txlink: xlink,\n\n\t\tcreate: create,\n\t\tget: get,\n\t\tset: set\n\t};\n};\n\nvar SvgStyles = Base.each({\n\tfillColor: ['fill', 'color'],\n\tfillRule: ['fill-rule', 'string'],\n\tstrokeColor: ['stroke', 'color'],\n\tstrokeWidth: ['stroke-width', 'number'],\n\tstrokeCap: ['stroke-linecap', 'string'],\n\tstrokeJoin: ['stroke-linejoin', 'string'],\n\tstrokeScaling: ['vector-effect', 'lookup', {\n\t\ttrue: 'none',\n\t\tfalse: 'non-scaling-stroke'\n\t}, function(item, value) {\n\t\treturn !value\n\t\t\t\t&& (item instanceof PathItem\n\t\t\t\t\t|| item instanceof Shape\n\t\t\t\t\t|| item instanceof TextItem);\n\t}],\n\tmiterLimit: ['stroke-miterlimit', 'number'],\n\tdashArray: ['stroke-dasharray', 'array'],\n\tdashOffset: ['stroke-dashoffset', 'number'],\n\tfontFamily: ['font-family', 'string'],\n\tfontWeight: ['font-weight', 'string'],\n\tfontSize: ['font-size', 'number'],\n\tjustification: ['text-anchor', 'lookup', {\n\t\tleft: 'start',\n\t\tcenter: 'middle',\n\t\tright: 'end'\n\t}],\n\topacity: ['opacity', 'number'],\n\tblendMode: ['mix-blend-mode', 'style']\n}, function(entry, key) {\n\tvar part = Base.capitalize(key),\n\t\tlookup = entry[2];\n\tthis[key] = {\n\t\ttype: entry[1],\n\t\tproperty: key,\n\t\tattribute: entry[0],\n\t\ttoSVG: lookup,\n\t\tfromSVG: lookup && Base.each(lookup, function(value, name) {\n\t\t\tthis[value] = name;\n\t\t}, {}),\n\t\texportFilter: entry[3],\n\t\tget: 'get' + part,\n\t\tset: 'set' + part\n\t};\n}, {});\n\nnew function() {\n\tvar formatter;\n\n\tfunction getTransform(matrix, coordinates, center) {\n\t\tvar attrs = new Base(),\n\t\t\ttrans = matrix.getTranslation();\n\t\tif (coordinates) {\n\t\t\tvar point;\n\t\t\tif (matrix.isInvertible()) {\n\t\t\t\tmatrix = matrix._shiftless();\n\t\t\t\tpoint = matrix._inverseTransform(trans);\n\t\t\t\ttrans = null;\n\t\t\t} else {\n\t\t\t\tpoint = new Point();\n\t\t\t}\n\t\t\tattrs[center ? 'cx' : 'x'] = point.x;\n\t\t\tattrs[center ? 'cy' : 'y'] = point.y;\n\t\t}\n\t\tif (!matrix.isIdentity()) {\n\t\t\tvar decomposed = matrix.decompose();\n\t\t\tif (decomposed) {\n\t\t\t\tvar parts = [],\n\t\t\t\t\tangle = decomposed.rotation,\n\t\t\t\t\tscale = decomposed.scaling,\n\t\t\t\t\tskew = decomposed.skewing;\n\t\t\t\tif (trans && !trans.isZero())\n\t\t\t\t\tparts.push('translate(' + formatter.point(trans) + ')');\n\t\t\t\tif (angle)\n\t\t\t\t\tparts.push('rotate(' + formatter.number(angle) + ')');\n\t\t\t\tif (!Numerical.isZero(scale.x - 1)\n\t\t\t\t\t\t|| !Numerical.isZero(scale.y - 1))\n\t\t\t\t\tparts.push('scale(' + formatter.point(scale) +')');\n\t\t\t\tif (skew.x)\n\t\t\t\t\tparts.push('skewX(' + formatter.number(skew.x) + ')');\n\t\t\t\tif (skew.y)\n\t\t\t\t\tparts.push('skewY(' + formatter.number(skew.y) + ')');\n\t\t\t\tattrs.transform = parts.join(' ');\n\t\t\t} else {\n\t\t\t\tattrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n\t\t\t}\n\t\t}\n\t\treturn attrs;\n\t}\n\n\tfunction exportGroup(item, options) {\n\t\tvar attrs = getTransform(item._matrix),\n\t\t\tchildren = item._children;\n\t\tvar node = SvgElement.create('g', attrs, formatter);\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tvar child = children[i];\n\t\t\tvar childNode = exportSVG(child, options);\n\t\t\tif (childNode) {\n\t\t\t\tif (child.isClipMask()) {\n\t\t\t\t\tvar clip = SvgElement.create('clipPath');\n\t\t\t\t\tclip.appendChild(childNode);\n\t\t\t\t\tsetDefinition(child, clip, 'clip');\n\t\t\t\t\tSvgElement.set(node, {\n\t\t\t\t\t\t'clip-path': 'url(#' + clip.id + ')'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnode.appendChild(childNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\tfunction exportRaster(item, options) {\n\t\tvar attrs = getTransform(item._matrix, true),\n\t\t\tsize = item.getSize(),\n\t\t\timage = item.getImage();\n\t\tattrs.x -= size.width / 2;\n\t\tattrs.y -= size.height / 2;\n\t\tattrs.width = size.width;\n\t\tattrs.height = size.height;\n\t\tattrs.href = options.embedImages == false && image && image.src\n\t\t\t\t|| item.toDataURL();\n\t\treturn SvgElement.create('image', attrs, formatter);\n\t}\n\n\tfunction exportPath(item, options) {\n\t\tvar matchShapes = options.matchShapes;\n\t\tif (matchShapes) {\n\t\t\tvar shape = item.toShape(false);\n\t\t\tif (shape)\n\t\t\t\treturn exportShape(shape, options);\n\t\t}\n\t\tvar segments = item._segments,\n\t\t\tlength = segments.length,\n\t\t\ttype,\n\t\t\tattrs = getTransform(item._matrix);\n\t\tif (matchShapes && length >= 2 && !item.hasHandles()) {\n\t\t\tif (length > 2) {\n\t\t\t\ttype = item._closed ? 'polygon' : 'polyline';\n\t\t\t\tvar parts = [];\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tparts.push(formatter.point(segments[i]._point));\n\t\t\t\t}\n\t\t\t\tattrs.points = parts.join(' ');\n\t\t\t} else {\n\t\t\t\ttype = 'line';\n\t\t\t\tvar start = segments[0]._point,\n\t\t\t\t\tend = segments[1]._point;\n\t\t\t\tattrs.set({\n\t\t\t\t\tx1: start.x,\n\t\t\t\t\ty1: start.y,\n\t\t\t\t\tx2: end.x,\n\t\t\t\t\ty2: end.y\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\ttype = 'path';\n\t\t\tattrs.d = item.getPathData(null, options.precision);\n\t\t}\n\t\treturn SvgElement.create(type, attrs, formatter);\n\t}\n\n\tfunction exportShape(item) {\n\t\tvar type = item._type,\n\t\t\tradius = item._radius,\n\t\t\tattrs = getTransform(item._matrix, true, type !== 'rectangle');\n\t\tif (type === 'rectangle') {\n\t\t\ttype = 'rect';\n\t\t\tvar size = item._size,\n\t\t\t\twidth = size.width,\n\t\t\t\theight = size.height;\n\t\t\tattrs.x -= width / 2;\n\t\t\tattrs.y -= height / 2;\n\t\t\tattrs.width = width;\n\t\t\tattrs.height = height;\n\t\t\tif (radius.isZero())\n\t\t\t\tradius = null;\n\t\t}\n\t\tif (radius) {\n\t\t\tif (type === 'circle') {\n\t\t\t\tattrs.r = radius;\n\t\t\t} else {\n\t\t\t\tattrs.rx = radius.width;\n\t\t\t\tattrs.ry = radius.height;\n\t\t\t}\n\t\t}\n\t\treturn SvgElement.create(type, attrs, formatter);\n\t}\n\n\tfunction exportCompoundPath(item, options) {\n\t\tvar attrs = getTransform(item._matrix);\n\t\tvar data = item.getPathData(null, options.precision);\n\t\tif (data)\n\t\t\tattrs.d = data;\n\t\treturn SvgElement.create('path', attrs, formatter);\n\t}\n\n\tfunction exportSymbolItem(item, options) {\n\t\tvar attrs = getTransform(item._matrix, true),\n\t\t\tdefinition = item._definition,\n\t\t\tnode = getDefinition(definition, 'symbol'),\n\t\t\tdefinitionItem = definition._item,\n\t\t\tbounds = definitionItem.getStrokeBounds();\n\t\tif (!node) {\n\t\t\tnode = SvgElement.create('symbol', {\n\t\t\t\tviewBox: formatter.rectangle(bounds)\n\t\t\t});\n\t\t\tnode.appendChild(exportSVG(definitionItem, options));\n\t\t\tsetDefinition(definition, node, 'symbol');\n\t\t}\n\t\tattrs.href = '#' + node.id;\n\t\tattrs.x += bounds.x;\n\t\tattrs.y += bounds.y;\n\t\tattrs.width = bounds.width;\n\t\tattrs.height = bounds.height;\n\t\tattrs.overflow = 'visible';\n\t\treturn SvgElement.create('use', attrs, formatter);\n\t}\n\n\tfunction exportGradient(color) {\n\t\tvar gradientNode = getDefinition(color, 'color');\n\t\tif (!gradientNode) {\n\t\t\tvar gradient = color.getGradient(),\n\t\t\t\tradial = gradient._radial,\n\t\t\t\torigin = color.getOrigin(),\n\t\t\t\tdestination = color.getDestination(),\n\t\t\t\tattrs;\n\t\t\tif (radial) {\n\t\t\t\tattrs = {\n\t\t\t\t\tcx: origin.x,\n\t\t\t\t\tcy: origin.y,\n\t\t\t\t\tr: origin.getDistance(destination)\n\t\t\t\t};\n\t\t\t\tvar highlight = color.getHighlight();\n\t\t\t\tif (highlight) {\n\t\t\t\t\tattrs.fx = highlight.x;\n\t\t\t\t\tattrs.fy = highlight.y;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tattrs = {\n\t\t\t\t\tx1: origin.x,\n\t\t\t\t\ty1: origin.y,\n\t\t\t\t\tx2: destination.x,\n\t\t\t\t\ty2: destination.y\n\t\t\t\t};\n\t\t\t}\n\t\t\tattrs.gradientUnits = 'userSpaceOnUse';\n\t\t\tgradientNode = SvgElement.create((radial ? 'radial' : 'linear')\n\t\t\t\t\t+ 'Gradient', attrs, formatter);\n\t\t\tvar stops = gradient._stops;\n\t\t\tfor (var i = 0, l = stops.length; i < l; i++) {\n\t\t\t\tvar stop = stops[i],\n\t\t\t\t\tstopColor = stop._color,\n\t\t\t\t\talpha = stopColor.getAlpha(),\n\t\t\t\t\toffset = stop._offset;\n\t\t\t\tattrs = {\n\t\t\t\t\toffset: offset == null ? i / (l - 1) : offset\n\t\t\t\t};\n\t\t\t\tif (stopColor)\n\t\t\t\t\tattrs['stop-color'] = stopColor.toCSS(true);\n\t\t\t\tif (alpha < 1)\n\t\t\t\t\tattrs['stop-opacity'] = alpha;\n\t\t\t\tgradientNode.appendChild(\n\t\t\t\t\t\tSvgElement.create('stop', attrs, formatter));\n\t\t\t}\n\t\t\tsetDefinition(color, gradientNode, 'color');\n\t\t}\n\t\treturn 'url(#' + gradientNode.id + ')';\n\t}\n\n\tfunction exportText(item) {\n\t\tvar node = SvgElement.create('text', getTransform(item._matrix, true),\n\t\t\t\tformatter);\n\t\tnode.textContent = item._content;\n\t\treturn node;\n\t}\n\n\tvar exporters = {\n\t\tGroup: exportGroup,\n\t\tLayer: exportGroup,\n\t\tRaster: exportRaster,\n\t\tPath: exportPath,\n\t\tShape: exportShape,\n\t\tCompoundPath: exportCompoundPath,\n\t\tSymbolItem: exportSymbolItem,\n\t\tPointText: exportText\n\t};\n\n\tfunction applyStyle(item, node, isRoot) {\n\t\tvar attrs = {},\n\t\t\tparent = !isRoot && item.getParent(),\n\t\t\tstyle = [];\n\n\t\tif (item._name != null)\n\t\t\tattrs.id = item._name;\n\n\t\tBase.each(SvgStyles, function(entry) {\n\t\t\tvar get = entry.get,\n\t\t\t\ttype = entry.type,\n\t\t\t\tvalue = item[get]();\n\t\t\tif (entry.exportFilter\n\t\t\t\t\t? entry.exportFilter(item, value)\n\t\t\t\t\t: !parent || !Base.equals(parent[get](), value)) {\n\t\t\t\tif (type === 'color' && value != null) {\n\t\t\t\t\tvar alpha = value.getAlpha();\n\t\t\t\t\tif (alpha < 1)\n\t\t\t\t\t\tattrs[entry.attribute + '-opacity'] = alpha;\n\t\t\t\t}\n\t\t\t\tif (type === 'style') {\n\t\t\t\t\tstyle.push(entry.attribute + ': ' + value);\n\t\t\t\t} else {\n\t\t\t\t\tattrs[entry.attribute] = value == null ? 'none'\n\t\t\t\t\t\t\t: type === 'color' ? value.gradient\n\t\t\t\t\t\t\t\t? exportGradient(value, item)\n\t\t\t\t\t\t\t\t: value.toCSS(true)\n\t\t\t\t\t\t\t: type === 'array' ? value.join(',')\n\t\t\t\t\t\t\t: type === 'lookup' ? entry.toSVG[value]\n\t\t\t\t\t\t\t: value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (style.length)\n\t\t\tattrs.style = style.join(';');\n\n\t\tif (attrs.opacity === 1)\n\t\t\tdelete attrs.opacity;\n\n\t\tif (!item._visible)\n\t\t\tattrs.visibility = 'hidden';\n\n\t\treturn SvgElement.set(node, attrs, formatter);\n\t}\n\n\tvar definitions;\n\tfunction getDefinition(item, type) {\n\t\tif (!definitions)\n\t\t\tdefinitions = { ids: {}, svgs: {} };\n\t\treturn item && definitions.svgs[type + '-'\n\t\t\t\t+ (item._id || item.__id || (item.__id = UID.get('svg')))];\n\t}\n\n\tfunction setDefinition(item, node, type) {\n\t\tif (!definitions)\n\t\t\tgetDefinition();\n\t\tvar typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n\t\tnode.id = type + '-' + typeId;\n\t\tdefinitions.svgs[type + '-' + (item._id || item.__id)] = node;\n\t}\n\n\tfunction exportDefinitions(node, options) {\n\t\tvar svg = node,\n\t\t\tdefs = null;\n\t\tif (definitions) {\n\t\t\tsvg = node.nodeName.toLowerCase() === 'svg' && node;\n\t\t\tfor (var i in definitions.svgs) {\n\t\t\t\tif (!defs) {\n\t\t\t\t\tif (!svg) {\n\t\t\t\t\t\tsvg = SvgElement.create('svg');\n\t\t\t\t\t\tsvg.appendChild(node);\n\t\t\t\t\t}\n\t\t\t\t\tdefs = svg.insertBefore(SvgElement.create('defs'),\n\t\t\t\t\t\t\tsvg.firstChild);\n\t\t\t\t}\n\t\t\t\tdefs.appendChild(definitions.svgs[i]);\n\t\t\t}\n\t\t\tdefinitions = null;\n\t\t}\n\t\treturn options.asString\n\t\t\t\t? new self.XMLSerializer().serializeToString(svg)\n\t\t\t\t: svg;\n\t}\n\n\tfunction exportSVG(item, options, isRoot) {\n\t\tvar exporter = exporters[item._class],\n\t\t\tnode = exporter && exporter(item, options);\n\t\tif (node) {\n\t\t\tvar onExport = options.onExport;\n\t\t\tif (onExport)\n\t\t\t\tnode = onExport(item, node, options) || node;\n\t\t\tvar data = JSON.stringify(item._data);\n\t\t\tif (data && data !== '{}' && data !== 'null')\n\t\t\t\tnode.setAttribute('data-paper-data', data);\n\t\t}\n\t\treturn node && applyStyle(item, node, isRoot);\n\t}\n\n\tfunction setOptions(options) {\n\t\tif (!options)\n\t\t\toptions = {};\n\t\tformatter = new Formatter(options.precision);\n\t\treturn options;\n\t}\n\n\tItem.inject({\n\t\texportSVG: function(options) {\n\t\t\toptions = setOptions(options);\n\t\t\treturn exportDefinitions(exportSVG(this, options, true), options);\n\t\t}\n\t});\n\n\tProject.inject({\n\t\texportSVG: function(options) {\n\t\t\toptions = setOptions(options);\n\t\t\tvar children = this._children,\n\t\t\t\tview = this.getView(),\n\t\t\t\tbounds = Base.pick(options.bounds, 'view'),\n\t\t\t\tmx = options.matrix || bounds === 'view' && view._matrix,\n\t\t\t\tmatrix = mx && Matrix.read([mx]),\n\t\t\t\trect = bounds === 'view'\n\t\t\t\t\t? new Rectangle([0, 0], view.getViewSize())\n\t\t\t\t\t: bounds === 'content'\n\t\t\t\t\t\t? Item._getBounds(children, matrix, { stroke: true })\n\t\t\t\t\t\t\t.rect\n\t\t\t\t\t\t: Rectangle.read([bounds], 0, { readNull: true }),\n\t\t\t\tattrs = {\n\t\t\t\t\tversion: '1.1',\n\t\t\t\t\txmlns: SvgElement.svg,\n\t\t\t\t\t'xmlns:xlink': SvgElement.xlink,\n\t\t\t\t};\n\t\t\tif (rect) {\n\t\t\t\tattrs.width = rect.width;\n\t\t\t\tattrs.height = rect.height;\n\t\t\t\tif (rect.x || rect.x === 0 || rect.y || rect.y === 0)\n\t\t\t\t\tattrs.viewBox = formatter.rectangle(rect);\n\t\t\t}\n\t\t\tvar node = SvgElement.create('svg', attrs, formatter),\n\t\t\t\tparent = node;\n\t\t\tif (matrix && !matrix.isIdentity()) {\n\t\t\t\tparent = node.appendChild(SvgElement.create('g',\n\t\t\t\t\t\tgetTransform(matrix), formatter));\n\t\t\t}\n\t\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\t\tparent.appendChild(exportSVG(children[i], options, true));\n\t\t\t}\n\t\t\treturn exportDefinitions(node, options);\n\t\t}\n\t});\n};\n\nnew function() {\n\n\tvar definitions = {},\n\t\trootSize;\n\n\tfunction getValue(node, name, isString, allowNull, allowPercent,\n\t\t\tdefaultValue) {\n\t\tvar value = SvgElement.get(node, name) || defaultValue,\n\t\t\tres = value == null\n\t\t\t\t? allowNull\n\t\t\t\t\t? null\n\t\t\t\t\t: isString ? '' : 0\n\t\t\t\t: isString\n\t\t\t\t\t? value\n\t\t\t\t\t: parseFloat(value);\n\t\treturn /%\\s*$/.test(value)\n\t\t\t? (res / 100) * (allowPercent ? 1\n\t\t\t\t: rootSize[/x|^width/.test(name) ? 'width' : 'height'])\n\t\t\t: res;\n\t}\n\n\tfunction getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n\t\tx = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n\t\ty = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n\t\treturn allowNull && (x == null || y == null) ? null\n\t\t\t\t: new Point(x, y);\n\t}\n\n\tfunction getSize(node, w, h, allowNull, allowPercent) {\n\t\tw = getValue(node, w || 'width', false, allowNull, allowPercent);\n\t\th = getValue(node, h || 'height', false, allowNull, allowPercent);\n\t\treturn allowNull && (w == null || h == null) ? null\n\t\t\t\t: new Size(w, h);\n\t}\n\n\tfunction convertValue(value, type, lookup) {\n\t\treturn value === 'none' ? null\n\t\t\t\t: type === 'number' ? parseFloat(value)\n\t\t\t\t: type === 'array' ?\n\t\t\t\t\tvalue ? value.split(/[\\s,]+/g).map(parseFloat) : []\n\t\t\t\t: type === 'color' ? getDefinition(value) || value\n\t\t\t\t: type === 'lookup' ? lookup[value]\n\t\t\t\t: value;\n\t}\n\n\tfunction importGroup(node, type, options, isRoot) {\n\t\tvar nodes = node.childNodes,\n\t\t\tisClip = type === 'clippath',\n\t\t\tisDefs = type === 'defs',\n\t\t\titem = new Group(),\n\t\t\tproject = item._project,\n\t\t\tcurrentStyle = project._currentStyle,\n\t\t\tchildren = [];\n\t\tif (!isClip && !isDefs) {\n\t\t\titem = applyAttributes(item, node, isRoot);\n\t\t\tproject._currentStyle = item._style.clone();\n\t\t}\n\t\tif (isRoot) {\n\t\t\tvar defs = node.querySelectorAll('defs');\n\t\t\tfor (var i = 0, l = defs.length; i < l; i++) {\n\t\t\t\timportNode(defs[i], options, false);\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\tvar childNode = nodes[i],\n\t\t\t\tchild;\n\t\t\tif (childNode.nodeType === 1\n\t\t\t\t\t&& !/^defs$/i.test(childNode.nodeName)\n\t\t\t\t\t&& (child = importNode(childNode, options, false))\n\t\t\t\t\t&& !(child instanceof SymbolDefinition))\n\t\t\t\tchildren.push(child);\n\t\t}\n\t\titem.addChildren(children);\n\t\tif (isClip)\n\t\t\titem = applyAttributes(item.reduce(), node, isRoot);\n\t\tproject._currentStyle = currentStyle;\n\t\tif (isClip || isDefs) {\n\t\t\titem.remove();\n\t\t\titem = null;\n\t\t}\n\t\treturn item;\n\t}\n\n\tfunction importPoly(node, type) {\n\t\tvar coords = node.getAttribute('points').match(\n\t\t\t\t\t/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n\t\t\tpoints = [];\n\t\tfor (var i = 0, l = coords.length; i < l; i += 2)\n\t\t\tpoints.push(new Point(\n\t\t\t\t\tparseFloat(coords[i]),\n\t\t\t\t\tparseFloat(coords[i + 1])));\n\t\tvar path = new Path(points);\n\t\tif (type === 'polygon')\n\t\t\tpath.closePath();\n\t\treturn path;\n\t}\n\n\tfunction importPath(node) {\n\t\treturn PathItem.create(node.getAttribute('d'));\n\t}\n\n\tfunction importGradient(node, type) {\n\t\tvar id = (getValue(node, 'href', true) || '').substring(1),\n\t\t\tradial = type === 'radialgradient',\n\t\t\tgradient;\n\t\tif (id) {\n\t\t\tgradient = definitions[id].getGradient();\n\t\t\tif (gradient._radial ^ radial) {\n\t\t\t\tgradient = gradient.clone();\n\t\t\t\tgradient._radial = radial;\n\t\t\t}\n\t\t} else {\n\t\t\tvar nodes = node.childNodes,\n\t\t\t\tstops = [];\n\t\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\t\tvar child = nodes[i];\n\t\t\t\tif (child.nodeType === 1)\n\t\t\t\t\tstops.push(applyAttributes(new GradientStop(), child));\n\t\t\t}\n\t\t\tgradient = new Gradient(stops, radial);\n\t\t}\n\t\tvar origin, destination, highlight,\n\t\t\tscaleToBounds = getValue(node, 'gradientUnits', true) !==\n\t\t\t\t'userSpaceOnUse';\n\t\tif (radial) {\n\t\t\torigin = getPoint(node, 'cx', 'cy', false, scaleToBounds,\n\t\t\t\t'50%', '50%');\n\t\t\tdestination = origin.add(\n\t\t\t\tgetValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n\t\t\thighlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n\t\t} else {\n\t\t\torigin = getPoint(node, 'x1', 'y1', false, scaleToBounds,\n\t\t\t\t'0%', '0%');\n\t\t\tdestination = getPoint(node, 'x2', 'y2', false, scaleToBounds,\n\t\t\t\t'100%', '0%');\n\t\t}\n\t\tvar color = applyAttributes(\n\t\t\t\tnew Color(gradient, origin, destination, highlight), node);\n\t\tcolor._scaleToBounds = scaleToBounds;\n\t\treturn null;\n\t}\n\n\tvar importers = {\n\t\t'#document': function (node, type, options, isRoot) {\n\t\t\tvar nodes = node.childNodes;\n\t\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\t\t\t\tvar child = nodes[i];\n\t\t\t\tif (child.nodeType === 1)\n\t\t\t\t\treturn importNode(child, options, isRoot);\n\t\t\t}\n\t\t},\n\t\tg: importGroup,\n\t\tsvg: importGroup,\n\t\tclippath: importGroup,\n\t\tpolygon: importPoly,\n\t\tpolyline: importPoly,\n\t\tpath: importPath,\n\t\tlineargradient: importGradient,\n\t\tradialgradient: importGradient,\n\n\t\timage: function (node) {\n\t\t\tvar raster = new Raster(getValue(node, 'href', true));\n\t\t\traster.on('load', function() {\n\t\t\t\tvar size = getSize(node);\n\t\t\t\tthis.setSize(size);\n\t\t\t\tvar center = getPoint(node).add(size.divide(2));\n\t\t\t\tthis._matrix.append(new Matrix().translate(center));\n\t\t\t});\n\t\t\treturn raster;\n\t\t},\n\n\t\tsymbol: function(node, type, options, isRoot) {\n\t\t\treturn new SymbolDefinition(\n\t\t\t\t\timportGroup(node, type, options, isRoot), true);\n\t\t},\n\n\t\tdefs: importGroup,\n\n\t\tuse: function(node) {\n\t\t\tvar id = (getValue(node, 'href', true) || '').substring(1),\n\t\t\t\tdefinition = definitions[id],\n\t\t\t\tpoint = getPoint(node);\n\t\t\treturn definition\n\t\t\t\t\t? definition instanceof SymbolDefinition\n\t\t\t\t\t\t? definition.place(point)\n\t\t\t\t\t\t: definition.clone().translate(point)\n\t\t\t\t\t: null;\n\t\t},\n\n\t\tcircle: function(node) {\n\t\t\treturn new Shape.Circle(\n\t\t\t\t\tgetPoint(node, 'cx', 'cy'),\n\t\t\t\t\tgetValue(node, 'r'));\n\t\t},\n\n\t\tellipse: function(node) {\n\t\t\treturn new Shape.Ellipse({\n\t\t\t\tcenter: getPoint(node, 'cx', 'cy'),\n\t\t\t\tradius: getSize(node, 'rx', 'ry')\n\t\t\t});\n\t\t},\n\n\t\trect: function(node) {\n\t\t\treturn new Shape.Rectangle(new Rectangle(\n\t\t\t\t\t\tgetPoint(node),\n\t\t\t\t\t\tgetSize(node)\n\t\t\t\t\t), getSize(node, 'rx', 'ry'));\n\t\t\t},\n\n\t\tline: function(node) {\n\t\t\treturn new Path.Line(\n\t\t\t\t\tgetPoint(node, 'x1', 'y1'),\n\t\t\t\t\tgetPoint(node, 'x2', 'y2'));\n\t\t},\n\n\t\ttext: function(node) {\n\t\t\tvar text = new PointText(getPoint(node).add(\n\t\t\t\t\tgetPoint(node, 'dx', 'dy')));\n\t\t\ttext.setContent(node.textContent.trim() || '');\n\t\t\treturn text;\n\t\t},\n\n\t\tswitch: importGroup\n\t};\n\n\tfunction applyTransform(item, value, name, node) {\n\t\tif (item.transform) {\n\t\t\tvar transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n\t\t\t\tmatrix = new Matrix();\n\t\t\tfor (var i = 0, l = transforms.length; i < l; i++) {\n\t\t\t\tvar transform = transforms[i];\n\t\t\t\tif (!transform)\n\t\t\t\t\tbreak;\n\t\t\t\tvar parts = transform.split(/\\(\\s*/),\n\t\t\t\t\tcommand = parts[0],\n\t\t\t\t\tv = parts[1].split(/[\\s,]+/g);\n\t\t\t\tfor (var j = 0, m = v.length; j < m; j++)\n\t\t\t\t\tv[j] = parseFloat(v[j]);\n\t\t\t\tswitch (command) {\n\t\t\t\tcase 'matrix':\n\t\t\t\t\tmatrix.append(\n\t\t\t\t\t\t\tnew Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'rotate':\n\t\t\t\t\tmatrix.rotate(v[0], v[1] || 0, v[2] || 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'translate':\n\t\t\t\t\tmatrix.translate(v[0], v[1] || 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scale':\n\t\t\t\t\tmatrix.scale(v);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'skewX':\n\t\t\t\t\tmatrix.skew(v[0], 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'skewY':\n\t\t\t\t\tmatrix.skew(0, v[0]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.transform(matrix);\n\t\t}\n\t}\n\n\tfunction applyOpacity(item, value, name) {\n\t\tvar key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n\t\t\tcolor = item[key] && item[key]();\n\t\tif (color)\n\t\t\tcolor.setAlpha(parseFloat(value));\n\t}\n\n\tvar attributes = Base.set(Base.each(SvgStyles, function(entry) {\n\t\tthis[entry.attribute] = function(item, value) {\n\t\t\tif (item[entry.set]) {\n\t\t\t\titem[entry.set](convertValue(value, entry.type, entry.fromSVG));\n\t\t\t\tif (entry.type === 'color') {\n\t\t\t\t\tvar color = item[entry.get]();\n\t\t\t\t\tif (color) {\n\t\t\t\t\t\tif (color._scaleToBounds) {\n\t\t\t\t\t\t\tvar bounds = item.getBounds();\n\t\t\t\t\t\t\tcolor.transform(new Matrix()\n\t\t\t\t\t\t\t\t.translate(bounds.getPoint())\n\t\t\t\t\t\t\t\t.scale(bounds.getSize()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}, {}), {\n\t\tid: function(item, value) {\n\t\t\tdefinitions[value] = item;\n\t\t\tif (item.setName)\n\t\t\t\titem.setName(value);\n\t\t},\n\n\t\t'clip-path': function(item, value) {\n\t\t\tvar clip = getDefinition(value);\n\t\t\tif (clip) {\n\t\t\t\tclip = clip.clone();\n\t\t\t\tclip.setClipMask(true);\n\t\t\t\tif (item instanceof Group) {\n\t\t\t\t\titem.insertChild(0, clip);\n\t\t\t\t} else {\n\t\t\t\t\treturn new Group(clip, item);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgradientTransform: applyTransform,\n\t\ttransform: applyTransform,\n\n\t\t'fill-opacity': applyOpacity,\n\t\t'stroke-opacity': applyOpacity,\n\n\t\tvisibility: function(item, value) {\n\t\t\tif (item.setVisible)\n\t\t\t\titem.setVisible(value === 'visible');\n\t\t},\n\n\t\tdisplay: function(item, value) {\n\t\t\tif (item.setVisible)\n\t\t\t\titem.setVisible(value !== null);\n\t\t},\n\n\t\t'stop-color': function(item, value) {\n\t\t\tif (item.setColor)\n\t\t\t\titem.setColor(value);\n\t\t},\n\n\t\t'stop-opacity': function(item, value) {\n\t\t\tif (item._color)\n\t\t\t\titem._color.setAlpha(parseFloat(value));\n\t\t},\n\n\t\toffset: function(item, value) {\n\t\t\tif (item.setOffset) {\n\t\t\t\tvar percent = value.match(/(.*)%$/);\n\t\t\t\titem.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n\t\t\t}\n\t\t},\n\n\t\tviewBox: function(item, value, name, node, styles) {\n\t\t\tvar rect = new Rectangle(convertValue(value, 'array')),\n\t\t\t\tsize = getSize(node, null, null, true),\n\t\t\t\tgroup,\n\t\t\t\tmatrix;\n\t\t\tif (item instanceof Group) {\n\t\t\t\tvar scale = size ? size.divide(rect.getSize()) : 1,\n\t\t\t\tmatrix = new Matrix().scale(scale)\n\t\t\t\t\t\t.translate(rect.getPoint().negate());\n\t\t\t\tgroup = item;\n\t\t\t} else if (item instanceof SymbolDefinition) {\n\t\t\t\tif (size)\n\t\t\t\t\trect.setSize(size);\n\t\t\t\tgroup = item._item;\n\t\t\t}\n\t\t\tif (group)  {\n\t\t\t\tif (getAttribute(node, 'overflow', styles) !== 'visible') {\n\t\t\t\t\tvar clip = new Shape.Rectangle(rect);\n\t\t\t\t\tclip.setClipMask(true);\n\t\t\t\t\tgroup.addChild(clip);\n\t\t\t\t}\n\t\t\t\tif (matrix)\n\t\t\t\t\tgroup.transform(matrix);\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getAttribute(node, name, styles) {\n\t\tvar attr = node.attributes[name],\n\t\t\tvalue = attr && attr.value;\n\t\tif (!value && node.style) {\n\t\t\tvar style = Base.camelize(name);\n\t\t\tvalue = node.style[style];\n\t\t\tif (!value && styles.node[style] !== styles.parent[style])\n\t\t\t\tvalue = styles.node[style];\n\t\t}\n\t\treturn !value ? undefined\n\t\t\t\t: value === 'none' ? null\n\t\t\t\t: value;\n\t}\n\n\tfunction applyAttributes(item, node, isRoot) {\n\t\tvar parent = node.parentNode,\n\t\t\tstyles = {\n\t\t\t\tnode: DomElement.getStyles(node) || {},\n\t\t\t\tparent: !isRoot && !/^defs$/i.test(parent.tagName)\n\t\t\t\t\t\t&& DomElement.getStyles(parent) || {}\n\t\t\t};\n\t\tBase.each(attributes, function(apply, name) {\n\t\t\tvar value = getAttribute(node, name, styles);\n\t\t\titem = value !== undefined\n\t\t\t\t\t&& apply(item, value, name, node, styles) || item;\n\t\t});\n\t\treturn item;\n\t}\n\n\tfunction getDefinition(value) {\n\t\tvar match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n\t\t\tname = match && match[1],\n\t\t\tres = name && definitions[window\n\t\t\t\t\t? name.replace(window.location.href.split('#')[0] + '#', '')\n\t\t\t\t\t: name];\n\t\tif (res && res._scaleToBounds) {\n\t\t\tres = res.clone();\n\t\t\tres._scaleToBounds = true;\n\t\t}\n\t\treturn res;\n\t}\n\n\tfunction importNode(node, options, isRoot) {\n\t\tvar type = node.nodeName.toLowerCase(),\n\t\t\tisElement = type !== '#document',\n\t\t\tbody = document.body,\n\t\t\tcontainer,\n\t\t\tparent,\n\t\t\tnext;\n\t\tif (isRoot && isElement) {\n\t\t\trootSize = paper.getView().getSize();\n\t\t\trootSize = getSize(node, null, null, true) || rootSize;\n\t\t\tcontainer = SvgElement.create('svg', {\n\t\t\t\tstyle: 'stroke-width: 1px; stroke-miterlimit: 10'\n\t\t\t});\n\t\t\tparent = node.parentNode;\n\t\t\tnext = node.nextSibling;\n\t\t\tcontainer.appendChild(node);\n\t\t\tbody.appendChild(container);\n\t\t}\n\t\tvar settings = paper.settings,\n\t\t\tapplyMatrix = settings.applyMatrix,\n\t\t\tinsertItems = settings.insertItems;\n\t\tsettings.applyMatrix = false;\n\t\tsettings.insertItems = false;\n\t\tvar importer = importers[type],\n\t\t\titem = importer && importer(node, type, options, isRoot) || null;\n\t\tsettings.insertItems = insertItems;\n\t\tsettings.applyMatrix = applyMatrix;\n\t\tif (item) {\n\t\t\tif (isElement && !(item instanceof Group))\n\t\t\t\titem = applyAttributes(item, node, isRoot);\n\t\t\tvar onImport = options.onImport,\n\t\t\t\tdata = isElement && node.getAttribute('data-paper-data');\n\t\t\tif (onImport)\n\t\t\t\titem = onImport(node, item, options) || item;\n\t\t\tif (options.expandShapes && item instanceof Shape) {\n\t\t\t\titem.remove();\n\t\t\t\titem = item.toPath();\n\t\t\t}\n\t\t\tif (data)\n\t\t\t\titem._data = JSON.parse(data);\n\t\t}\n\t\tif (container) {\n\t\t\tbody.removeChild(container);\n\t\t\tif (parent) {\n\t\t\t\tif (next) {\n\t\t\t\t\tparent.insertBefore(node, next);\n\t\t\t\t} else {\n\t\t\t\t\tparent.appendChild(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (isRoot) {\n\t\t\tdefinitions = {};\n\t\t\tif (item && Base.pick(options.applyMatrix, applyMatrix))\n\t\t\t\titem.matrix.apply(true, true);\n\t\t}\n\t\treturn item;\n\t}\n\n\tfunction importSVG(source, options, owner) {\n\t\tif (!source)\n\t\t\treturn null;\n\t\toptions = typeof options === 'function' ? { onLoad: options }\n\t\t\t\t: options || {};\n\t\tvar scope = paper,\n\t\t\titem = null;\n\n\t\tfunction onLoad(svg) {\n\t\t\ttry {\n\t\t\t\tvar node = typeof svg === 'object'\n\t\t\t\t\t? svg\n\t\t\t\t\t: new self.DOMParser().parseFromString(\n\t\t\t\t\t\tsvg.trim(),\n\t\t\t\t\t\t'image/svg+xml'\n\t\t\t\t\t);\n\t\t\t\tif (!node.nodeName) {\n\t\t\t\t\tnode = null;\n\t\t\t\t\tthrow new Error('Unsupported SVG source: ' + source);\n\t\t\t\t}\n\t\t\t\tpaper = scope;\n\t\t\t\titem = importNode(node, options, true);\n\t\t\t\tif (!options || options.insert !== false) {\n\t\t\t\t\towner._insertItem(undefined, item);\n\t\t\t\t}\n\t\t\t\tvar onLoad = options.onLoad;\n\t\t\t\tif (onLoad)\n\t\t\t\t\tonLoad(item, svg);\n\t\t\t} catch (e) {\n\t\t\t\tonError(e);\n\t\t\t}\n\t\t}\n\n\t\tfunction onError(message, status) {\n\t\t\tvar onError = options.onError;\n\t\t\tif (onError) {\n\t\t\t\tonError(message, status);\n\t\t\t} else {\n\t\t\t\tthrow new Error(message);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof source === 'string' && !/^[\\s\\S]*</.test(source)) {\n\t\t\tvar node = document.getElementById(source);\n\t\t\tif (node) {\n\t\t\t\tonLoad(node);\n\t\t\t} else {\n\t\t\t\tHttp.request({\n\t\t\t\t\turl: source,\n\t\t\t\t\tasync: true,\n\t\t\t\t\tonLoad: onLoad,\n\t\t\t\t\tonError: onError\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (typeof File !== 'undefined' && source instanceof File) {\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = function() {\n\t\t\t\tonLoad(reader.result);\n\t\t\t};\n\t\t\treader.onerror = function() {\n\t\t\t\tonError(reader.error);\n\t\t\t};\n\t\t\treturn reader.readAsText(source);\n\t\t} else {\n\t\t\tonLoad(source);\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tItem.inject({\n\t\timportSVG: function(node, options) {\n\t\t\treturn importSVG(node, options, this);\n\t\t}\n\t});\n\n\tProject.inject({\n\t\timportSVG: function(node, options) {\n\t\t\tthis.activate();\n\t\t\treturn importSVG(node, options, this);\n\t\t}\n\t});\n};\n\nBase.exports.PaperScript = function() {\n\tvar global = this,\n\t\tacorn = global.acorn;\n\tif (!acorn && typeof require !== 'undefined') {\n\t\ttry { acorn = require('acorn'); } catch(e) {}\n\t}\n\tif (!acorn) {\n\t\tvar exports, module;\n\t\tacorn = exports = module = {};\n\n(function(root, mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") return mod(exports);\n  if (typeof define == \"function\" && define.amd) return define([\"exports\"], mod);\n  mod(root.acorn || (root.acorn = {}));\n})(this, function(exports) {\n  \"use strict\";\n\n  exports.version = \"0.5.0\";\n\n  var options, input, inputLen, sourceFile;\n\n  exports.parse = function(inpt, opts) {\n\tinput = String(inpt); inputLen = input.length;\n\tsetOptions(opts);\n\tinitTokenState();\n\treturn parseTopLevel(options.program);\n  };\n\n  var defaultOptions = exports.defaultOptions = {\n\tecmaVersion: 5,\n\tstrictSemicolons: false,\n\tallowTrailingCommas: true,\n\tforbidReserved: false,\n\tallowReturnOutsideFunction: false,\n\tlocations: false,\n\tonComment: null,\n\tranges: false,\n\tprogram: null,\n\tsourceFile: null,\n\tdirectSourceFile: null\n  };\n\n  function setOptions(opts) {\n\toptions = opts || {};\n\tfor (var opt in defaultOptions) if (!Object.prototype.hasOwnProperty.call(options, opt))\n\t  options[opt] = defaultOptions[opt];\n\tsourceFile = options.sourceFile || null;\n  }\n\n  var getLineInfo = exports.getLineInfo = function(input, offset) {\n\tfor (var line = 1, cur = 0;;) {\n\t  lineBreak.lastIndex = cur;\n\t  var match = lineBreak.exec(input);\n\t  if (match && match.index < offset) {\n\t\t++line;\n\t\tcur = match.index + match[0].length;\n\t  } else break;\n\t}\n\treturn {line: line, column: offset - cur};\n  };\n\n  exports.tokenize = function(inpt, opts) {\n\tinput = String(inpt); inputLen = input.length;\n\tsetOptions(opts);\n\tinitTokenState();\n\n\tvar t = {};\n\tfunction getToken(forceRegexp) {\n\t  lastEnd = tokEnd;\n\t  readToken(forceRegexp);\n\t  t.start = tokStart; t.end = tokEnd;\n\t  t.startLoc = tokStartLoc; t.endLoc = tokEndLoc;\n\t  t.type = tokType; t.value = tokVal;\n\t  return t;\n\t}\n\tgetToken.jumpTo = function(pos, reAllowed) {\n\t  tokPos = pos;\n\t  if (options.locations) {\n\t\ttokCurLine = 1;\n\t\ttokLineStart = lineBreak.lastIndex = 0;\n\t\tvar match;\n\t\twhile ((match = lineBreak.exec(input)) && match.index < pos) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = match.index + match[0].length;\n\t\t}\n\t  }\n\t  tokRegexpAllowed = reAllowed;\n\t  skipSpace();\n\t};\n\treturn getToken;\n  };\n\n  var tokPos;\n\n  var tokStart, tokEnd;\n\n  var tokStartLoc, tokEndLoc;\n\n  var tokType, tokVal;\n\n  var tokRegexpAllowed;\n\n  var tokCurLine, tokLineStart;\n\n  var lastStart, lastEnd, lastEndLoc;\n\n  var inFunction, labels, strict;\n\n  function raise(pos, message) {\n\tvar loc = getLineInfo(input, pos);\n\tmessage += \" (\" + loc.line + \":\" + loc.column + \")\";\n\tvar err = new SyntaxError(message);\n\terr.pos = pos; err.loc = loc; err.raisedAt = tokPos;\n\tthrow err;\n  }\n\n  var empty = [];\n\n  var _num = {type: \"num\"}, _regexp = {type: \"regexp\"}, _string = {type: \"string\"};\n  var _name = {type: \"name\"}, _eof = {type: \"eof\"};\n\n  var _break = {keyword: \"break\"}, _case = {keyword: \"case\", beforeExpr: true}, _catch = {keyword: \"catch\"};\n  var _continue = {keyword: \"continue\"}, _debugger = {keyword: \"debugger\"}, _default = {keyword: \"default\"};\n  var _do = {keyword: \"do\", isLoop: true}, _else = {keyword: \"else\", beforeExpr: true};\n  var _finally = {keyword: \"finally\"}, _for = {keyword: \"for\", isLoop: true}, _function = {keyword: \"function\"};\n  var _if = {keyword: \"if\"}, _return = {keyword: \"return\", beforeExpr: true}, _switch = {keyword: \"switch\"};\n  var _throw = {keyword: \"throw\", beforeExpr: true}, _try = {keyword: \"try\"}, _var = {keyword: \"var\"};\n  var _while = {keyword: \"while\", isLoop: true}, _with = {keyword: \"with\"}, _new = {keyword: \"new\", beforeExpr: true};\n  var _this = {keyword: \"this\"};\n\n  var _null = {keyword: \"null\", atomValue: null}, _true = {keyword: \"true\", atomValue: true};\n  var _false = {keyword: \"false\", atomValue: false};\n\n  var _in = {keyword: \"in\", binop: 7, beforeExpr: true};\n\n  var keywordTypes = {\"break\": _break, \"case\": _case, \"catch\": _catch,\n\t\t\t\t\t  \"continue\": _continue, \"debugger\": _debugger, \"default\": _default,\n\t\t\t\t\t  \"do\": _do, \"else\": _else, \"finally\": _finally, \"for\": _for,\n\t\t\t\t\t  \"function\": _function, \"if\": _if, \"return\": _return, \"switch\": _switch,\n\t\t\t\t\t  \"throw\": _throw, \"try\": _try, \"var\": _var, \"while\": _while, \"with\": _with,\n\t\t\t\t\t  \"null\": _null, \"true\": _true, \"false\": _false, \"new\": _new, \"in\": _in,\n\t\t\t\t\t  \"instanceof\": {keyword: \"instanceof\", binop: 7, beforeExpr: true}, \"this\": _this,\n\t\t\t\t\t  \"typeof\": {keyword: \"typeof\", prefix: true, beforeExpr: true},\n\t\t\t\t\t  \"void\": {keyword: \"void\", prefix: true, beforeExpr: true},\n\t\t\t\t\t  \"delete\": {keyword: \"delete\", prefix: true, beforeExpr: true}};\n\n  var _bracketL = {type: \"[\", beforeExpr: true}, _bracketR = {type: \"]\"}, _braceL = {type: \"{\", beforeExpr: true};\n  var _braceR = {type: \"}\"}, _parenL = {type: \"(\", beforeExpr: true}, _parenR = {type: \")\"};\n  var _comma = {type: \",\", beforeExpr: true}, _semi = {type: \";\", beforeExpr: true};\n  var _colon = {type: \":\", beforeExpr: true}, _dot = {type: \".\"}, _question = {type: \"?\", beforeExpr: true};\n\n  var _slash = {binop: 10, beforeExpr: true}, _eq = {isAssign: true, beforeExpr: true};\n  var _assign = {isAssign: true, beforeExpr: true};\n  var _incDec = {postfix: true, prefix: true, isUpdate: true}, _prefix = {prefix: true, beforeExpr: true};\n  var _logicalOR = {binop: 1, beforeExpr: true};\n  var _logicalAND = {binop: 2, beforeExpr: true};\n  var _bitwiseOR = {binop: 3, beforeExpr: true};\n  var _bitwiseXOR = {binop: 4, beforeExpr: true};\n  var _bitwiseAND = {binop: 5, beforeExpr: true};\n  var _equality = {binop: 6, beforeExpr: true};\n  var _relational = {binop: 7, beforeExpr: true};\n  var _bitShift = {binop: 8, beforeExpr: true};\n  var _plusMin = {binop: 9, prefix: true, beforeExpr: true};\n  var _multiplyModulo = {binop: 10, beforeExpr: true};\n\n  exports.tokTypes = {bracketL: _bracketL, bracketR: _bracketR, braceL: _braceL, braceR: _braceR,\n\t\t\t\t\t  parenL: _parenL, parenR: _parenR, comma: _comma, semi: _semi, colon: _colon,\n\t\t\t\t\t  dot: _dot, question: _question, slash: _slash, eq: _eq, name: _name, eof: _eof,\n\t\t\t\t\t  num: _num, regexp: _regexp, string: _string};\n  for (var kw in keywordTypes) exports.tokTypes[\"_\" + kw] = keywordTypes[kw];\n\n  function makePredicate(words) {\n\twords = words.split(\" \");\n\tvar f = \"\", cats = [];\n\tout: for (var i = 0; i < words.length; ++i) {\n\t  for (var j = 0; j < cats.length; ++j)\n\t\tif (cats[j][0].length == words[i].length) {\n\t\t  cats[j].push(words[i]);\n\t\t  continue out;\n\t\t}\n\t  cats.push([words[i]]);\n\t}\n\tfunction compareTo(arr) {\n\t  if (arr.length == 1) return f += \"return str === \" + JSON.stringify(arr[0]) + \";\";\n\t  f += \"switch(str){\";\n\t  for (var i = 0; i < arr.length; ++i) f += \"case \" + JSON.stringify(arr[i]) + \":\";\n\t  f += \"return true}return false;\";\n\t}\n\n\tif (cats.length > 3) {\n\t  cats.sort(function(a, b) {return b.length - a.length;});\n\t  f += \"switch(str.length){\";\n\t  for (var i = 0; i < cats.length; ++i) {\n\t\tvar cat = cats[i];\n\t\tf += \"case \" + cat[0].length + \":\";\n\t\tcompareTo(cat);\n\t  }\n\t  f += \"}\";\n\n\t} else {\n\t  compareTo(words);\n\t}\n\treturn new Function(\"str\", f);\n  }\n\n  var isReservedWord3 = makePredicate(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\");\n\n  var isReservedWord5 = makePredicate(\"class enum extends super const export import\");\n\n  var isStrictReservedWord = makePredicate(\"implements interface let package private protected public static yield\");\n\n  var isStrictBadIdWord = makePredicate(\"eval arguments\");\n\n  var isKeyword = makePredicate(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\");\n\n  var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n  var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n  var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n  var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n  var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\n  var newline = /[\\n\\r\\u2028\\u2029]/;\n\n  var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n\n  var isIdentifierStart = exports.isIdentifierStart = function(code) {\n\tif (code < 65) return code === 36;\n\tif (code < 91) return true;\n\tif (code < 97) return code === 95;\n\tif (code < 123)return true;\n\treturn code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n  };\n\n  var isIdentifierChar = exports.isIdentifierChar = function(code) {\n\tif (code < 48) return code === 36;\n\tif (code < 58) return true;\n\tif (code < 65) return false;\n\tif (code < 91) return true;\n\tif (code < 97) return code === 95;\n\tif (code < 123)return true;\n\treturn code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n  };\n\n  function line_loc_t() {\n\tthis.line = tokCurLine;\n\tthis.column = tokPos - tokLineStart;\n  }\n\n  function initTokenState() {\n\ttokCurLine = 1;\n\ttokPos = tokLineStart = 0;\n\ttokRegexpAllowed = true;\n\tskipSpace();\n  }\n\n  function finishToken(type, val) {\n\ttokEnd = tokPos;\n\tif (options.locations) tokEndLoc = new line_loc_t;\n\ttokType = type;\n\tskipSpace();\n\ttokVal = val;\n\ttokRegexpAllowed = type.beforeExpr;\n  }\n\n  function skipBlockComment() {\n\tvar startLoc = options.onComment && options.locations && new line_loc_t;\n\tvar start = tokPos, end = input.indexOf(\"*/\", tokPos += 2);\n\tif (end === -1) raise(tokPos - 2, \"Unterminated comment\");\n\ttokPos = end + 2;\n\tif (options.locations) {\n\t  lineBreak.lastIndex = start;\n\t  var match;\n\t  while ((match = lineBreak.exec(input)) && match.index < tokPos) {\n\t\t++tokCurLine;\n\t\ttokLineStart = match.index + match[0].length;\n\t  }\n\t}\n\tif (options.onComment)\n\t  options.onComment(true, input.slice(start + 2, end), start, tokPos,\n\t\t\t\t\t\tstartLoc, options.locations && new line_loc_t);\n  }\n\n  function skipLineComment() {\n\tvar start = tokPos;\n\tvar startLoc = options.onComment && options.locations && new line_loc_t;\n\tvar ch = input.charCodeAt(tokPos+=2);\n\twhile (tokPos < inputLen && ch !== 10 && ch !== 13 && ch !== 8232 && ch !== 8233) {\n\t  ++tokPos;\n\t  ch = input.charCodeAt(tokPos);\n\t}\n\tif (options.onComment)\n\t  options.onComment(false, input.slice(start + 2, tokPos), start, tokPos,\n\t\t\t\t\t\tstartLoc, options.locations && new line_loc_t);\n  }\n\n  function skipSpace() {\n\twhile (tokPos < inputLen) {\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (ch === 32) {\n\t\t++tokPos;\n\t  } else if (ch === 13) {\n\t\t++tokPos;\n\t\tvar next = input.charCodeAt(tokPos);\n\t\tif (next === 10) {\n\t\t  ++tokPos;\n\t\t}\n\t\tif (options.locations) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = tokPos;\n\t\t}\n\t  } else if (ch === 10 || ch === 8232 || ch === 8233) {\n\t\t++tokPos;\n\t\tif (options.locations) {\n\t\t  ++tokCurLine;\n\t\t  tokLineStart = tokPos;\n\t\t}\n\t  } else if (ch > 8 && ch < 14) {\n\t\t++tokPos;\n\t  } else if (ch === 47) {\n\t\tvar next = input.charCodeAt(tokPos + 1);\n\t\tif (next === 42) {\n\t\t  skipBlockComment();\n\t\t} else if (next === 47) {\n\t\t  skipLineComment();\n\t\t} else break;\n\t  } else if (ch === 160) {\n\t\t++tokPos;\n\t  } else if (ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n\t\t++tokPos;\n\t  } else {\n\t\tbreak;\n\t  }\n\t}\n  }\n\n  function readToken_dot() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next >= 48 && next <= 57) return readNumber(true);\n\t++tokPos;\n\treturn finishToken(_dot);\n  }\n\n  function readToken_slash() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (tokRegexpAllowed) {++tokPos; return readRegexp();}\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_slash, 1);\n  }\n\n  function readToken_mult_modulo() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_multiplyModulo, 1);\n  }\n\n  function readToken_pipe_amp(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === code) return finishOp(code === 124 ? _logicalOR : _logicalAND, 2);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(code === 124 ? _bitwiseOR : _bitwiseAND, 1);\n  }\n\n  function readToken_caret() {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_bitwiseXOR, 1);\n  }\n\n  function readToken_plus_min(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === code) {\n\t  if (next == 45 && input.charCodeAt(tokPos + 2) == 62 &&\n\t\t  newline.test(input.slice(lastEnd, tokPos))) {\n\t\ttokPos += 3;\n\t\tskipLineComment();\n\t\tskipSpace();\n\t\treturn readToken();\n\t  }\n\t  return finishOp(_incDec, 2);\n\t}\n\tif (next === 61) return finishOp(_assign, 2);\n\treturn finishOp(_plusMin, 1);\n  }\n\n  function readToken_lt_gt(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tvar size = 1;\n\tif (next === code) {\n\t  size = code === 62 && input.charCodeAt(tokPos + 2) === 62 ? 3 : 2;\n\t  if (input.charCodeAt(tokPos + size) === 61) return finishOp(_assign, size + 1);\n\t  return finishOp(_bitShift, size);\n\t}\n\tif (next == 33 && code == 60 && input.charCodeAt(tokPos + 2) == 45 &&\n\t\tinput.charCodeAt(tokPos + 3) == 45) {\n\t  tokPos += 4;\n\t  skipLineComment();\n\t  skipSpace();\n\t  return readToken();\n\t}\n\tif (next === 61)\n\t  size = input.charCodeAt(tokPos + 2) === 61 ? 3 : 2;\n\treturn finishOp(_relational, size);\n  }\n\n  function readToken_eq_excl(code) {\n\tvar next = input.charCodeAt(tokPos + 1);\n\tif (next === 61) return finishOp(_equality, input.charCodeAt(tokPos + 2) === 61 ? 3 : 2);\n\treturn finishOp(code === 61 ? _eq : _prefix, 1);\n  }\n\n  function getTokenFromCode(code) {\n\tswitch(code) {\n\tcase 46:\n\t  return readToken_dot();\n\n\tcase 40: ++tokPos; return finishToken(_parenL);\n\tcase 41: ++tokPos; return finishToken(_parenR);\n\tcase 59: ++tokPos; return finishToken(_semi);\n\tcase 44: ++tokPos; return finishToken(_comma);\n\tcase 91: ++tokPos; return finishToken(_bracketL);\n\tcase 93: ++tokPos; return finishToken(_bracketR);\n\tcase 123: ++tokPos; return finishToken(_braceL);\n\tcase 125: ++tokPos; return finishToken(_braceR);\n\tcase 58: ++tokPos; return finishToken(_colon);\n\tcase 63: ++tokPos; return finishToken(_question);\n\n\tcase 48:\n\t  var next = input.charCodeAt(tokPos + 1);\n\t  if (next === 120 || next === 88) return readHexNumber();\n\tcase 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57:\n\t  return readNumber(false);\n\n\tcase 34: case 39:\n\t  return readString(code);\n\n\tcase 47:\n\t  return readToken_slash(code);\n\n\tcase 37: case 42:\n\t  return readToken_mult_modulo();\n\n\tcase 124: case 38:\n\t  return readToken_pipe_amp(code);\n\n\tcase 94:\n\t  return readToken_caret();\n\n\tcase 43: case 45:\n\t  return readToken_plus_min(code);\n\n\tcase 60: case 62:\n\t  return readToken_lt_gt(code);\n\n\tcase 61: case 33:\n\t  return readToken_eq_excl(code);\n\n\tcase 126:\n\t  return finishOp(_prefix, 1);\n\t}\n\n\treturn false;\n  }\n\n  function readToken(forceRegexp) {\n\tif (!forceRegexp) tokStart = tokPos;\n\telse tokPos = tokStart + 1;\n\tif (options.locations) tokStartLoc = new line_loc_t;\n\tif (forceRegexp) return readRegexp();\n\tif (tokPos >= inputLen) return finishToken(_eof);\n\n\tvar code = input.charCodeAt(tokPos);\n\tif (isIdentifierStart(code) || code === 92 ) return readWord();\n\n\tvar tok = getTokenFromCode(code);\n\n\tif (tok === false) {\n\t  var ch = String.fromCharCode(code);\n\t  if (ch === \"\\\\\" || nonASCIIidentifierStart.test(ch)) return readWord();\n\t  raise(tokPos, \"Unexpected character '\" + ch + \"'\");\n\t}\n\treturn tok;\n  }\n\n  function finishOp(type, size) {\n\tvar str = input.slice(tokPos, tokPos + size);\n\ttokPos += size;\n\tfinishToken(type, str);\n  }\n\n  function readRegexp() {\n\tvar content = \"\", escaped, inClass, start = tokPos;\n\tfor (;;) {\n\t  if (tokPos >= inputLen) raise(start, \"Unterminated regular expression\");\n\t  var ch = input.charAt(tokPos);\n\t  if (newline.test(ch)) raise(start, \"Unterminated regular expression\");\n\t  if (!escaped) {\n\t\tif (ch === \"[\") inClass = true;\n\t\telse if (ch === \"]\" && inClass) inClass = false;\n\t\telse if (ch === \"/\" && !inClass) break;\n\t\tescaped = ch === \"\\\\\";\n\t  } else escaped = false;\n\t  ++tokPos;\n\t}\n\tvar content = input.slice(start, tokPos);\n\t++tokPos;\n\tvar mods = readWord1();\n\tif (mods && !/^[gmsiy]*$/.test(mods)) raise(start, \"Invalid regexp flag\");\n\ttry {\n\t  var value = new RegExp(content, mods);\n\t} catch (e) {\n\t  if (e instanceof SyntaxError) raise(start, e.message);\n\t  raise(e);\n\t}\n\treturn finishToken(_regexp, value);\n  }\n\n  function readInt(radix, len) {\n\tvar start = tokPos, total = 0;\n\tfor (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n\t  var code = input.charCodeAt(tokPos), val;\n\t  if (code >= 97) val = code - 97 + 10;\n\t  else if (code >= 65) val = code - 65 + 10;\n\t  else if (code >= 48 && code <= 57) val = code - 48;\n\t  else val = Infinity;\n\t  if (val >= radix) break;\n\t  ++tokPos;\n\t  total = total * radix + val;\n\t}\n\tif (tokPos === start || len != null && tokPos - start !== len) return null;\n\n\treturn total;\n  }\n\n  function readHexNumber() {\n\ttokPos += 2;\n\tvar val = readInt(16);\n\tif (val == null) raise(tokStart + 2, \"Expected hexadecimal number\");\n\tif (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n\treturn finishToken(_num, val);\n  }\n\n  function readNumber(startsWithDot) {\n\tvar start = tokPos, isFloat = false, octal = input.charCodeAt(tokPos) === 48;\n\tif (!startsWithDot && readInt(10) === null) raise(start, \"Invalid number\");\n\tif (input.charCodeAt(tokPos) === 46) {\n\t  ++tokPos;\n\t  readInt(10);\n\t  isFloat = true;\n\t}\n\tvar next = input.charCodeAt(tokPos);\n\tif (next === 69 || next === 101) {\n\t  next = input.charCodeAt(++tokPos);\n\t  if (next === 43 || next === 45) ++tokPos;\n\t  if (readInt(10) === null) raise(start, \"Invalid number\");\n\t  isFloat = true;\n\t}\n\tif (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n\n\tvar str = input.slice(start, tokPos), val;\n\tif (isFloat) val = parseFloat(str);\n\telse if (!octal || str.length === 1) val = parseInt(str, 10);\n\telse if (/[89]/.test(str) || strict) raise(start, \"Invalid number\");\n\telse val = parseInt(str, 8);\n\treturn finishToken(_num, val);\n  }\n\n  function readString(quote) {\n\ttokPos++;\n\tvar out = \"\";\n\tfor (;;) {\n\t  if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (ch === quote) {\n\t\t++tokPos;\n\t\treturn finishToken(_string, out);\n\t  }\n\t  if (ch === 92) {\n\t\tch = input.charCodeAt(++tokPos);\n\t\tvar octal = /^[0-7]+/.exec(input.slice(tokPos, tokPos + 3));\n\t\tif (octal) octal = octal[0];\n\t\twhile (octal && parseInt(octal, 8) > 255) octal = octal.slice(0, -1);\n\t\tif (octal === \"0\") octal = null;\n\t\t++tokPos;\n\t\tif (octal) {\n\t\t  if (strict) raise(tokPos - 2, \"Octal literal in strict mode\");\n\t\t  out += String.fromCharCode(parseInt(octal, 8));\n\t\t  tokPos += octal.length - 1;\n\t\t} else {\n\t\t  switch (ch) {\n\t\t  case 110: out += \"\\n\"; break;\n\t\t  case 114: out += \"\\r\"; break;\n\t\t  case 120: out += String.fromCharCode(readHexChar(2)); break;\n\t\t  case 117: out += String.fromCharCode(readHexChar(4)); break;\n\t\t  case 85: out += String.fromCharCode(readHexChar(8)); break;\n\t\t  case 116: out += \"\\t\"; break;\n\t\t  case 98: out += \"\\b\"; break;\n\t\t  case 118: out += \"\\u000b\"; break;\n\t\t  case 102: out += \"\\f\"; break;\n\t\t  case 48: out += \"\\0\"; break;\n\t\t  case 13: if (input.charCodeAt(tokPos) === 10) ++tokPos;\n\t\t  case 10:\n\t\t\tif (options.locations) { tokLineStart = tokPos; ++tokCurLine; }\n\t\t\tbreak;\n\t\t  default: out += String.fromCharCode(ch); break;\n\t\t  }\n\t\t}\n\t  } else {\n\t\tif (ch === 13 || ch === 10 || ch === 8232 || ch === 8233) raise(tokStart, \"Unterminated string constant\");\n\t\tout += String.fromCharCode(ch);\n\t\t++tokPos;\n\t  }\n\t}\n  }\n\n  function readHexChar(len) {\n\tvar n = readInt(16, len);\n\tif (n === null) raise(tokStart, \"Bad character escape sequence\");\n\treturn n;\n  }\n\n  var containsEsc;\n\n  function readWord1() {\n\tcontainsEsc = false;\n\tvar word, first = true, start = tokPos;\n\tfor (;;) {\n\t  var ch = input.charCodeAt(tokPos);\n\t  if (isIdentifierChar(ch)) {\n\t\tif (containsEsc) word += input.charAt(tokPos);\n\t\t++tokPos;\n\t  } else if (ch === 92) {\n\t\tif (!containsEsc) word = input.slice(start, tokPos);\n\t\tcontainsEsc = true;\n\t\tif (input.charCodeAt(++tokPos) != 117)\n\t\t  raise(tokPos, \"Expecting Unicode escape sequence \\\\uXXXX\");\n\t\t++tokPos;\n\t\tvar esc = readHexChar(4);\n\t\tvar escStr = String.fromCharCode(esc);\n\t\tif (!escStr) raise(tokPos - 1, \"Invalid Unicode escape\");\n\t\tif (!(first ? isIdentifierStart(esc) : isIdentifierChar(esc)))\n\t\t  raise(tokPos - 4, \"Invalid Unicode escape\");\n\t\tword += escStr;\n\t  } else {\n\t\tbreak;\n\t  }\n\t  first = false;\n\t}\n\treturn containsEsc ? word : input.slice(start, tokPos);\n  }\n\n  function readWord() {\n\tvar word = readWord1();\n\tvar type = _name;\n\tif (!containsEsc && isKeyword(word))\n\t  type = keywordTypes[word];\n\treturn finishToken(type, word);\n  }\n\n  function next() {\n\tlastStart = tokStart;\n\tlastEnd = tokEnd;\n\tlastEndLoc = tokEndLoc;\n\treadToken();\n  }\n\n  function setStrict(strct) {\n\tstrict = strct;\n\ttokPos = tokStart;\n\tif (options.locations) {\n\t  while (tokPos < tokLineStart) {\n\t\ttokLineStart = input.lastIndexOf(\"\\n\", tokLineStart - 2) + 1;\n\t\t--tokCurLine;\n\t  }\n\t}\n\tskipSpace();\n\treadToken();\n  }\n\n  function node_t() {\n\tthis.type = null;\n\tthis.start = tokStart;\n\tthis.end = null;\n  }\n\n  function node_loc_t() {\n\tthis.start = tokStartLoc;\n\tthis.end = null;\n\tif (sourceFile !== null) this.source = sourceFile;\n  }\n\n  function startNode() {\n\tvar node = new node_t();\n\tif (options.locations)\n\t  node.loc = new node_loc_t();\n\tif (options.directSourceFile)\n\t  node.sourceFile = options.directSourceFile;\n\tif (options.ranges)\n\t  node.range = [tokStart, 0];\n\treturn node;\n  }\n\n  function startNodeFrom(other) {\n\tvar node = new node_t();\n\tnode.start = other.start;\n\tif (options.locations) {\n\t  node.loc = new node_loc_t();\n\t  node.loc.start = other.loc.start;\n\t}\n\tif (options.ranges)\n\t  node.range = [other.range[0], 0];\n\n\treturn node;\n  }\n\n  function finishNode(node, type) {\n\tnode.type = type;\n\tnode.end = lastEnd;\n\tif (options.locations)\n\t  node.loc.end = lastEndLoc;\n\tif (options.ranges)\n\t  node.range[1] = lastEnd;\n\treturn node;\n  }\n\n  function isUseStrict(stmt) {\n\treturn options.ecmaVersion >= 5 && stmt.type === \"ExpressionStatement\" &&\n\t  stmt.expression.type === \"Literal\" && stmt.expression.value === \"use strict\";\n  }\n\n  function eat(type) {\n\tif (tokType === type) {\n\t  next();\n\t  return true;\n\t}\n  }\n\n  function canInsertSemicolon() {\n\treturn !options.strictSemicolons &&\n\t  (tokType === _eof || tokType === _braceR || newline.test(input.slice(lastEnd, tokStart)));\n  }\n\n  function semicolon() {\n\tif (!eat(_semi) && !canInsertSemicolon()) unexpected();\n  }\n\n  function expect(type) {\n\tif (tokType === type) next();\n\telse unexpected();\n  }\n\n  function unexpected() {\n\traise(tokStart, \"Unexpected token\");\n  }\n\n  function checkLVal(expr) {\n\tif (expr.type !== \"Identifier\" && expr.type !== \"MemberExpression\")\n\t  raise(expr.start, \"Assigning to rvalue\");\n\tif (strict && expr.type === \"Identifier\" && isStrictBadIdWord(expr.name))\n\t  raise(expr.start, \"Assigning to \" + expr.name + \" in strict mode\");\n  }\n\n  function parseTopLevel(program) {\n\tlastStart = lastEnd = tokPos;\n\tif (options.locations) lastEndLoc = new line_loc_t;\n\tinFunction = strict = null;\n\tlabels = [];\n\treadToken();\n\n\tvar node = program || startNode(), first = true;\n\tif (!program) node.body = [];\n\twhile (tokType !== _eof) {\n\t  var stmt = parseStatement();\n\t  node.body.push(stmt);\n\t  if (first && isUseStrict(stmt)) setStrict(true);\n\t  first = false;\n\t}\n\treturn finishNode(node, \"Program\");\n  }\n\n  var loopLabel = {kind: \"loop\"}, switchLabel = {kind: \"switch\"};\n\n  function parseStatement() {\n\tif (tokType === _slash || tokType === _assign && tokVal == \"/=\")\n\t  readToken(true);\n\n\tvar starttype = tokType, node = startNode();\n\n\tswitch (starttype) {\n\tcase _break: case _continue:\n\t  next();\n\t  var isBreak = starttype === _break;\n\t  if (eat(_semi) || canInsertSemicolon()) node.label = null;\n\t  else if (tokType !== _name) unexpected();\n\t  else {\n\t\tnode.label = parseIdent();\n\t\tsemicolon();\n\t  }\n\n\t  for (var i = 0; i < labels.length; ++i) {\n\t\tvar lab = labels[i];\n\t\tif (node.label == null || lab.name === node.label.name) {\n\t\t  if (lab.kind != null && (isBreak || lab.kind === \"loop\")) break;\n\t\t  if (node.label && isBreak) break;\n\t\t}\n\t  }\n\t  if (i === labels.length) raise(node.start, \"Unsyntactic \" + starttype.keyword);\n\t  return finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\");\n\n\tcase _debugger:\n\t  next();\n\t  semicolon();\n\t  return finishNode(node, \"DebuggerStatement\");\n\n\tcase _do:\n\t  next();\n\t  labels.push(loopLabel);\n\t  node.body = parseStatement();\n\t  labels.pop();\n\t  expect(_while);\n\t  node.test = parseParenExpression();\n\t  semicolon();\n\t  return finishNode(node, \"DoWhileStatement\");\n\n\tcase _for:\n\t  next();\n\t  labels.push(loopLabel);\n\t  expect(_parenL);\n\t  if (tokType === _semi) return parseFor(node, null);\n\t  if (tokType === _var) {\n\t\tvar init = startNode();\n\t\tnext();\n\t\tparseVar(init, true);\n\t\tfinishNode(init, \"VariableDeclaration\");\n\t\tif (init.declarations.length === 1 && eat(_in))\n\t\t  return parseForIn(node, init);\n\t\treturn parseFor(node, init);\n\t  }\n\t  var init = parseExpression(false, true);\n\t  if (eat(_in)) {checkLVal(init); return parseForIn(node, init);}\n\t  return parseFor(node, init);\n\n\tcase _function:\n\t  next();\n\t  return parseFunction(node, true);\n\n\tcase _if:\n\t  next();\n\t  node.test = parseParenExpression();\n\t  node.consequent = parseStatement();\n\t  node.alternate = eat(_else) ? parseStatement() : null;\n\t  return finishNode(node, \"IfStatement\");\n\n\tcase _return:\n\t  if (!inFunction && !options.allowReturnOutsideFunction)\n\t\traise(tokStart, \"'return' outside of function\");\n\t  next();\n\n\t  if (eat(_semi) || canInsertSemicolon()) node.argument = null;\n\t  else { node.argument = parseExpression(); semicolon(); }\n\t  return finishNode(node, \"ReturnStatement\");\n\n\tcase _switch:\n\t  next();\n\t  node.discriminant = parseParenExpression();\n\t  node.cases = [];\n\t  expect(_braceL);\n\t  labels.push(switchLabel);\n\n\t  for (var cur, sawDefault; tokType != _braceR;) {\n\t\tif (tokType === _case || tokType === _default) {\n\t\t  var isCase = tokType === _case;\n\t\t  if (cur) finishNode(cur, \"SwitchCase\");\n\t\t  node.cases.push(cur = startNode());\n\t\t  cur.consequent = [];\n\t\t  next();\n\t\t  if (isCase) cur.test = parseExpression();\n\t\t  else {\n\t\t\tif (sawDefault) raise(lastStart, \"Multiple default clauses\"); sawDefault = true;\n\t\t\tcur.test = null;\n\t\t  }\n\t\t  expect(_colon);\n\t\t} else {\n\t\t  if (!cur) unexpected();\n\t\t  cur.consequent.push(parseStatement());\n\t\t}\n\t  }\n\t  if (cur) finishNode(cur, \"SwitchCase\");\n\t  next();\n\t  labels.pop();\n\t  return finishNode(node, \"SwitchStatement\");\n\n\tcase _throw:\n\t  next();\n\t  if (newline.test(input.slice(lastEnd, tokStart)))\n\t\traise(lastEnd, \"Illegal newline after throw\");\n\t  node.argument = parseExpression();\n\t  semicolon();\n\t  return finishNode(node, \"ThrowStatement\");\n\n\tcase _try:\n\t  next();\n\t  node.block = parseBlock();\n\t  node.handler = null;\n\t  if (tokType === _catch) {\n\t\tvar clause = startNode();\n\t\tnext();\n\t\texpect(_parenL);\n\t\tclause.param = parseIdent();\n\t\tif (strict && isStrictBadIdWord(clause.param.name))\n\t\t  raise(clause.param.start, \"Binding \" + clause.param.name + \" in strict mode\");\n\t\texpect(_parenR);\n\t\tclause.guard = null;\n\t\tclause.body = parseBlock();\n\t\tnode.handler = finishNode(clause, \"CatchClause\");\n\t  }\n\t  node.guardedHandlers = empty;\n\t  node.finalizer = eat(_finally) ? parseBlock() : null;\n\t  if (!node.handler && !node.finalizer)\n\t\traise(node.start, \"Missing catch or finally clause\");\n\t  return finishNode(node, \"TryStatement\");\n\n\tcase _var:\n\t  next();\n\t  parseVar(node);\n\t  semicolon();\n\t  return finishNode(node, \"VariableDeclaration\");\n\n\tcase _while:\n\t  next();\n\t  node.test = parseParenExpression();\n\t  labels.push(loopLabel);\n\t  node.body = parseStatement();\n\t  labels.pop();\n\t  return finishNode(node, \"WhileStatement\");\n\n\tcase _with:\n\t  if (strict) raise(tokStart, \"'with' in strict mode\");\n\t  next();\n\t  node.object = parseParenExpression();\n\t  node.body = parseStatement();\n\t  return finishNode(node, \"WithStatement\");\n\n\tcase _braceL:\n\t  return parseBlock();\n\n\tcase _semi:\n\t  next();\n\t  return finishNode(node, \"EmptyStatement\");\n\n\tdefault:\n\t  var maybeName = tokVal, expr = parseExpression();\n\t  if (starttype === _name && expr.type === \"Identifier\" && eat(_colon)) {\n\t\tfor (var i = 0; i < labels.length; ++i)\n\t\t  if (labels[i].name === maybeName) raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n\t\tvar kind = tokType.isLoop ? \"loop\" : tokType === _switch ? \"switch\" : null;\n\t\tlabels.push({name: maybeName, kind: kind});\n\t\tnode.body = parseStatement();\n\t\tlabels.pop();\n\t\tnode.label = expr;\n\t\treturn finishNode(node, \"LabeledStatement\");\n\t  } else {\n\t\tnode.expression = expr;\n\t\tsemicolon();\n\t\treturn finishNode(node, \"ExpressionStatement\");\n\t  }\n\t}\n  }\n\n  function parseParenExpression() {\n\texpect(_parenL);\n\tvar val = parseExpression();\n\texpect(_parenR);\n\treturn val;\n  }\n\n  function parseBlock(allowStrict) {\n\tvar node = startNode(), first = true, strict = false, oldStrict;\n\tnode.body = [];\n\texpect(_braceL);\n\twhile (!eat(_braceR)) {\n\t  var stmt = parseStatement();\n\t  node.body.push(stmt);\n\t  if (first && allowStrict && isUseStrict(stmt)) {\n\t\toldStrict = strict;\n\t\tsetStrict(strict = true);\n\t  }\n\t  first = false;\n\t}\n\tif (strict && !oldStrict) setStrict(false);\n\treturn finishNode(node, \"BlockStatement\");\n  }\n\n  function parseFor(node, init) {\n\tnode.init = init;\n\texpect(_semi);\n\tnode.test = tokType === _semi ? null : parseExpression();\n\texpect(_semi);\n\tnode.update = tokType === _parenR ? null : parseExpression();\n\texpect(_parenR);\n\tnode.body = parseStatement();\n\tlabels.pop();\n\treturn finishNode(node, \"ForStatement\");\n  }\n\n  function parseForIn(node, init) {\n\tnode.left = init;\n\tnode.right = parseExpression();\n\texpect(_parenR);\n\tnode.body = parseStatement();\n\tlabels.pop();\n\treturn finishNode(node, \"ForInStatement\");\n  }\n\n  function parseVar(node, noIn) {\n\tnode.declarations = [];\n\tnode.kind = \"var\";\n\tfor (;;) {\n\t  var decl = startNode();\n\t  decl.id = parseIdent();\n\t  if (strict && isStrictBadIdWord(decl.id.name))\n\t\traise(decl.id.start, \"Binding \" + decl.id.name + \" in strict mode\");\n\t  decl.init = eat(_eq) ? parseExpression(true, noIn) : null;\n\t  node.declarations.push(finishNode(decl, \"VariableDeclarator\"));\n\t  if (!eat(_comma)) break;\n\t}\n\treturn node;\n  }\n\n  function parseExpression(noComma, noIn) {\n\tvar expr = parseMaybeAssign(noIn);\n\tif (!noComma && tokType === _comma) {\n\t  var node = startNodeFrom(expr);\n\t  node.expressions = [expr];\n\t  while (eat(_comma)) node.expressions.push(parseMaybeAssign(noIn));\n\t  return finishNode(node, \"SequenceExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseMaybeAssign(noIn) {\n\tvar left = parseMaybeConditional(noIn);\n\tif (tokType.isAssign) {\n\t  var node = startNodeFrom(left);\n\t  node.operator = tokVal;\n\t  node.left = left;\n\t  next();\n\t  node.right = parseMaybeAssign(noIn);\n\t  checkLVal(left);\n\t  return finishNode(node, \"AssignmentExpression\");\n\t}\n\treturn left;\n  }\n\n  function parseMaybeConditional(noIn) {\n\tvar expr = parseExprOps(noIn);\n\tif (eat(_question)) {\n\t  var node = startNodeFrom(expr);\n\t  node.test = expr;\n\t  node.consequent = parseExpression(true);\n\t  expect(_colon);\n\t  node.alternate = parseExpression(true, noIn);\n\t  return finishNode(node, \"ConditionalExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseExprOps(noIn) {\n\treturn parseExprOp(parseMaybeUnary(), -1, noIn);\n  }\n\n  function parseExprOp(left, minPrec, noIn) {\n\tvar prec = tokType.binop;\n\tif (prec != null && (!noIn || tokType !== _in)) {\n\t  if (prec > minPrec) {\n\t\tvar node = startNodeFrom(left);\n\t\tnode.left = left;\n\t\tnode.operator = tokVal;\n\t\tvar op = tokType;\n\t\tnext();\n\t\tnode.right = parseExprOp(parseMaybeUnary(), prec, noIn);\n\t\tvar exprNode = finishNode(node, (op === _logicalOR || op === _logicalAND) ? \"LogicalExpression\" : \"BinaryExpression\");\n\t\treturn parseExprOp(exprNode, minPrec, noIn);\n\t  }\n\t}\n\treturn left;\n  }\n\n  function parseMaybeUnary() {\n\tif (tokType.prefix) {\n\t  var node = startNode(), update = tokType.isUpdate;\n\t  node.operator = tokVal;\n\t  node.prefix = true;\n\t  tokRegexpAllowed = true;\n\t  next();\n\t  node.argument = parseMaybeUnary();\n\t  if (update) checkLVal(node.argument);\n\t  else if (strict && node.operator === \"delete\" &&\n\t\t\t   node.argument.type === \"Identifier\")\n\t\traise(node.start, \"Deleting local variable in strict mode\");\n\t  return finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n\t}\n\tvar expr = parseExprSubscripts();\n\twhile (tokType.postfix && !canInsertSemicolon()) {\n\t  var node = startNodeFrom(expr);\n\t  node.operator = tokVal;\n\t  node.prefix = false;\n\t  node.argument = expr;\n\t  checkLVal(expr);\n\t  next();\n\t  expr = finishNode(node, \"UpdateExpression\");\n\t}\n\treturn expr;\n  }\n\n  function parseExprSubscripts() {\n\treturn parseSubscripts(parseExprAtom());\n  }\n\n  function parseSubscripts(base, noCalls) {\n\tif (eat(_dot)) {\n\t  var node = startNodeFrom(base);\n\t  node.object = base;\n\t  node.property = parseIdent(true);\n\t  node.computed = false;\n\t  return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n\t} else if (eat(_bracketL)) {\n\t  var node = startNodeFrom(base);\n\t  node.object = base;\n\t  node.property = parseExpression();\n\t  node.computed = true;\n\t  expect(_bracketR);\n\t  return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n\t} else if (!noCalls && eat(_parenL)) {\n\t  var node = startNodeFrom(base);\n\t  node.callee = base;\n\t  node.arguments = parseExprList(_parenR, false);\n\t  return parseSubscripts(finishNode(node, \"CallExpression\"), noCalls);\n\t} else return base;\n  }\n\n  function parseExprAtom() {\n\tswitch (tokType) {\n\tcase _this:\n\t  var node = startNode();\n\t  next();\n\t  return finishNode(node, \"ThisExpression\");\n\tcase _name:\n\t  return parseIdent();\n\tcase _num: case _string: case _regexp:\n\t  var node = startNode();\n\t  node.value = tokVal;\n\t  node.raw = input.slice(tokStart, tokEnd);\n\t  next();\n\t  return finishNode(node, \"Literal\");\n\n\tcase _null: case _true: case _false:\n\t  var node = startNode();\n\t  node.value = tokType.atomValue;\n\t  node.raw = tokType.keyword;\n\t  next();\n\t  return finishNode(node, \"Literal\");\n\n\tcase _parenL:\n\t  var tokStartLoc1 = tokStartLoc, tokStart1 = tokStart;\n\t  next();\n\t  var val = parseExpression();\n\t  val.start = tokStart1;\n\t  val.end = tokEnd;\n\t  if (options.locations) {\n\t\tval.loc.start = tokStartLoc1;\n\t\tval.loc.end = tokEndLoc;\n\t  }\n\t  if (options.ranges)\n\t\tval.range = [tokStart1, tokEnd];\n\t  expect(_parenR);\n\t  return val;\n\n\tcase _bracketL:\n\t  var node = startNode();\n\t  next();\n\t  node.elements = parseExprList(_bracketR, true, true);\n\t  return finishNode(node, \"ArrayExpression\");\n\n\tcase _braceL:\n\t  return parseObj();\n\n\tcase _function:\n\t  var node = startNode();\n\t  next();\n\t  return parseFunction(node, false);\n\n\tcase _new:\n\t  return parseNew();\n\n\tdefault:\n\t  unexpected();\n\t}\n  }\n\n  function parseNew() {\n\tvar node = startNode();\n\tnext();\n\tnode.callee = parseSubscripts(parseExprAtom(), true);\n\tif (eat(_parenL)) node.arguments = parseExprList(_parenR, false);\n\telse node.arguments = empty;\n\treturn finishNode(node, \"NewExpression\");\n  }\n\n  function parseObj() {\n\tvar node = startNode(), first = true, sawGetSet = false;\n\tnode.properties = [];\n\tnext();\n\twhile (!eat(_braceR)) {\n\t  if (!first) {\n\t\texpect(_comma);\n\t\tif (options.allowTrailingCommas && eat(_braceR)) break;\n\t  } else first = false;\n\n\t  var prop = {key: parsePropertyName()}, isGetSet = false, kind;\n\t  if (eat(_colon)) {\n\t\tprop.value = parseExpression(true);\n\t\tkind = prop.kind = \"init\";\n\t  } else if (options.ecmaVersion >= 5 && prop.key.type === \"Identifier\" &&\n\t\t\t\t (prop.key.name === \"get\" || prop.key.name === \"set\")) {\n\t\tisGetSet = sawGetSet = true;\n\t\tkind = prop.kind = prop.key.name;\n\t\tprop.key = parsePropertyName();\n\t\tif (tokType !== _parenL) unexpected();\n\t\tprop.value = parseFunction(startNode(), false);\n\t  } else unexpected();\n\n\t  if (prop.key.type === \"Identifier\" && (strict || sawGetSet)) {\n\t\tfor (var i = 0; i < node.properties.length; ++i) {\n\t\t  var other = node.properties[i];\n\t\t  if (other.key.name === prop.key.name) {\n\t\t\tvar conflict = kind == other.kind || isGetSet && other.kind === \"init\" ||\n\t\t\t  kind === \"init\" && (other.kind === \"get\" || other.kind === \"set\");\n\t\t\tif (conflict && !strict && kind === \"init\" && other.kind === \"init\") conflict = false;\n\t\t\tif (conflict) raise(prop.key.start, \"Redefinition of property\");\n\t\t  }\n\t\t}\n\t  }\n\t  node.properties.push(prop);\n\t}\n\treturn finishNode(node, \"ObjectExpression\");\n  }\n\n  function parsePropertyName() {\n\tif (tokType === _num || tokType === _string) return parseExprAtom();\n\treturn parseIdent(true);\n  }\n\n  function parseFunction(node, isStatement) {\n\tif (tokType === _name) node.id = parseIdent();\n\telse if (isStatement) unexpected();\n\telse node.id = null;\n\tnode.params = [];\n\tvar first = true;\n\texpect(_parenL);\n\twhile (!eat(_parenR)) {\n\t  if (!first) expect(_comma); else first = false;\n\t  node.params.push(parseIdent());\n\t}\n\n\tvar oldInFunc = inFunction, oldLabels = labels;\n\tinFunction = true; labels = [];\n\tnode.body = parseBlock(true);\n\tinFunction = oldInFunc; labels = oldLabels;\n\n\tif (strict || node.body.body.length && isUseStrict(node.body.body[0])) {\n\t  for (var i = node.id ? -1 : 0; i < node.params.length; ++i) {\n\t\tvar id = i < 0 ? node.id : node.params[i];\n\t\tif (isStrictReservedWord(id.name) || isStrictBadIdWord(id.name))\n\t\t  raise(id.start, \"Defining '\" + id.name + \"' in strict mode\");\n\t\tif (i >= 0) for (var j = 0; j < i; ++j) if (id.name === node.params[j].name)\n\t\t  raise(id.start, \"Argument name clash in strict mode\");\n\t  }\n\t}\n\n\treturn finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\");\n  }\n\n  function parseExprList(close, allowTrailingComma, allowEmpty) {\n\tvar elts = [], first = true;\n\twhile (!eat(close)) {\n\t  if (!first) {\n\t\texpect(_comma);\n\t\tif (allowTrailingComma && options.allowTrailingCommas && eat(close)) break;\n\t  } else first = false;\n\n\t  if (allowEmpty && tokType === _comma) elts.push(null);\n\t  else elts.push(parseExpression(true));\n\t}\n\treturn elts;\n  }\n\n  function parseIdent(liberal) {\n\tvar node = startNode();\n\tif (liberal && options.forbidReserved == \"everywhere\") liberal = false;\n\tif (tokType === _name) {\n\t  if (!liberal &&\n\t\t  (options.forbidReserved &&\n\t\t   (options.ecmaVersion === 3 ? isReservedWord3 : isReservedWord5)(tokVal) ||\n\t\t   strict && isStrictReservedWord(tokVal)) &&\n\t\t  input.slice(tokStart, tokEnd).indexOf(\"\\\\\") == -1)\n\t\traise(tokStart, \"The keyword '\" + tokVal + \"' is reserved\");\n\t  node.name = tokVal;\n\t} else if (liberal && tokType.keyword) {\n\t  node.name = tokType.keyword;\n\t} else {\n\t  unexpected();\n\t}\n\ttokRegexpAllowed = false;\n\tnext();\n\treturn finishNode(node, \"Identifier\");\n  }\n\n});\n\n\t\tif (!acorn.version)\n\t\t\tacorn = null;\n\t}\n\n\tfunction parse(code, options) {\n\t\treturn (global.acorn || acorn).parse(code, options);\n\t}\n\n\tvar binaryOperators = {\n\t\t'+': '__add',\n\t\t'-': '__subtract',\n\t\t'*': '__multiply',\n\t\t'/': '__divide',\n\t\t'%': '__modulo',\n\t\t'==': '__equals',\n\t\t'!=': '__equals'\n\t};\n\n\tvar unaryOperators = {\n\t\t'-': '__negate',\n\t\t'+': '__self'\n\t};\n\n\tvar fields = Base.each(\n\t\t['add', 'subtract', 'multiply', 'divide', 'modulo', 'equals', 'negate'],\n\t\tfunction(name) {\n\t\t\tthis['__' + name] = '#' + name;\n\t\t},\n\t\t{\n\t\t\t__self: function() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t);\n\tPoint.inject(fields);\n\tSize.inject(fields);\n\tColor.inject(fields);\n\n\tfunction __$__(left, operator, right) {\n\t\tvar handler = binaryOperators[operator];\n\t\tif (left && left[handler]) {\n\t\t\tvar res = left[handler](right);\n\t\t\treturn operator === '!=' ? !res : res;\n\t\t}\n\t\tswitch (operator) {\n\t\tcase '+': return left + right;\n\t\tcase '-': return left - right;\n\t\tcase '*': return left * right;\n\t\tcase '/': return left / right;\n\t\tcase '%': return left % right;\n\t\tcase '==': return left == right;\n\t\tcase '!=': return left != right;\n\t\t}\n\t}\n\n\tfunction $__(operator, value) {\n\t\tvar handler = unaryOperators[operator];\n\t\tif (value && value[handler])\n\t\t\treturn value[handler]();\n\t\tswitch (operator) {\n\t\tcase '+': return +value;\n\t\tcase '-': return -value;\n\t\t}\n\t}\n\n\tfunction compile(code, options) {\n\t\tif (!code)\n\t\t\treturn '';\n\t\toptions = options || {};\n\n\t\tvar insertions = [];\n\n\t\tfunction getOffset(offset) {\n\t\t\tfor (var i = 0, l = insertions.length; i < l; i++) {\n\t\t\t\tvar insertion = insertions[i];\n\t\t\t\tif (insertion[0] >= offset)\n\t\t\t\t\tbreak;\n\t\t\t\toffset += insertion[1];\n\t\t\t}\n\t\t\treturn offset;\n\t\t}\n\n\t\tfunction getCode(node) {\n\t\t\treturn code.substring(getOffset(node.range[0]),\n\t\t\t\t\tgetOffset(node.range[1]));\n\t\t}\n\n\t\tfunction getBetween(left, right) {\n\t\t\treturn code.substring(getOffset(left.range[1]),\n\t\t\t\t\tgetOffset(right.range[0]));\n\t\t}\n\n\t\tfunction replaceCode(node, str) {\n\t\t\tvar start = getOffset(node.range[0]),\n\t\t\t\tend = getOffset(node.range[1]),\n\t\t\t\tinsert = 0;\n\t\t\tfor (var i = insertions.length - 1; i >= 0; i--) {\n\t\t\t\tif (start > insertions[i][0]) {\n\t\t\t\t\tinsert = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tinsertions.splice(insert, 0, [start, str.length - end + start]);\n\t\t\tcode = code.substring(0, start) + str + code.substring(end);\n\t\t}\n\n\t\tfunction handleOverloading(node, parent) {\n\t\t\tswitch (node.type) {\n\t\t\tcase 'UnaryExpression':\n\t\t\t\tif (node.operator in unaryOperators\n\t\t\t\t\t\t&& node.argument.type !== 'Literal') {\n\t\t\t\t\tvar arg = getCode(node.argument);\n\t\t\t\t\treplaceCode(node, '$__(\"' + node.operator + '\", '\n\t\t\t\t\t\t\t+ arg + ')');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'BinaryExpression':\n\t\t\t\tif (node.operator in binaryOperators\n\t\t\t\t\t\t&& node.left.type !== 'Literal') {\n\t\t\t\t\tvar left = getCode(node.left),\n\t\t\t\t\t\tright = getCode(node.right),\n\t\t\t\t\t\tbetween = getBetween(node.left, node.right),\n\t\t\t\t\t\toperator = node.operator;\n\t\t\t\t\treplaceCode(node, '__$__(' + left + ','\n\t\t\t\t\t\t\t+ between.replace(new RegExp('\\\\' + operator),\n\t\t\t\t\t\t\t\t'\"' + operator + '\"')\n\t\t\t\t\t\t\t+ ', ' + right + ')');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'UpdateExpression':\n\t\t\tcase 'AssignmentExpression':\n\t\t\t\tvar parentType = parent && parent.type;\n\t\t\t\tif (!(\n\t\t\t\t\t\tparentType === 'ForStatement'\n\t\t\t\t\t\t|| parentType === 'BinaryExpression'\n\t\t\t\t\t\t\t&& /^[=!<>]/.test(parent.operator)\n\t\t\t\t\t\t|| parentType === 'MemberExpression' && parent.computed\n\t\t\t\t)) {\n\t\t\t\t\tif (node.type === 'UpdateExpression') {\n\t\t\t\t\t\tvar arg = getCode(node.argument),\n\t\t\t\t\t\t\texp = '__$__(' + arg + ', \"' + node.operator[0]\n\t\t\t\t\t\t\t\t\t+ '\", 1)',\n\t\t\t\t\t\t\tstr = arg + ' = ' + exp;\n\t\t\t\t\t\tif (node.prefix) {\n\t\t\t\t\t\t\tstr = '(' + str + ')';\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tparentType === 'AssignmentExpression' ||\n\t\t\t\t\t\t\tparentType === 'VariableDeclarator' ||\n\t\t\t\t\t\t\tparentType === 'BinaryExpression'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (getCode(parent.left || parent.id) === arg)\n\t\t\t\t\t\t\t\tstr = exp;\n\t\t\t\t\t\t\tstr = arg + '; ' + str;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treplaceCode(node, str);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (/^.=$/.test(node.operator)\n\t\t\t\t\t\t\t\t&& node.left.type !== 'Literal') {\n\t\t\t\t\t\t\tvar left = getCode(node.left),\n\t\t\t\t\t\t\t\tright = getCode(node.right),\n\t\t\t\t\t\t\t\texp = left + ' = __$__(' + left + ', \"'\n\t\t\t\t\t\t\t\t\t+ node.operator[0] + '\", ' + right + ')';\n\t\t\t\t\t\t\treplaceCode(node, /^\\(.*\\)$/.test(getCode(node))\n\t\t\t\t\t\t\t\t\t? '(' + exp + ')' : exp);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction handleExports(node) {\n\t\t\tswitch (node.type) {\n\t\t\tcase 'ExportDefaultDeclaration':\n\t\t\t\treplaceCode({\n\t\t\t\t\trange: [node.start, node.declaration.start]\n\t\t\t\t}, 'module.exports = ');\n\t\t\t\tbreak;\n\t\t\tcase 'ExportNamedDeclaration':\n\t\t\t\tvar declaration = node.declaration;\n\t\t\t\tvar specifiers = node.specifiers;\n\t\t\t\tif (declaration) {\n\t\t\t\t\tvar declarations = declaration.declarations;\n\t\t\t\t\tif (declarations) {\n\t\t\t\t\t\tdeclarations.forEach(function(dec) {\n\t\t\t\t\t\t\treplaceCode(dec, 'module.exports.' + getCode(dec));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treplaceCode({\n\t\t\t\t\t\t\trange: [\n\t\t\t\t\t\t\t\tnode.start,\n\t\t\t\t\t\t\t\tdeclaration.start + declaration.kind.length\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}, '');\n\t\t\t\t\t}\n\t\t\t\t} else if (specifiers) {\n\t\t\t\t\tvar exports = specifiers.map(function(specifier) {\n\t\t\t\t\t\tvar name = getCode(specifier);\n\t\t\t\t\t\treturn 'module.exports.' + name + ' = ' + name + '; ';\n\t\t\t\t\t}).join('');\n\t\t\t\t\tif (exports) {\n\t\t\t\t\t\treplaceCode(node, exports);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction walkAST(node, parent, paperFeatures) {\n\t\t\tif (node) {\n\t\t\t\tfor (var key in node) {\n\t\t\t\t\tif (key !== 'range' && key !== 'loc') {\n\t\t\t\t\t\tvar value = node[key];\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tfor (var i = 0, l = value.length; i < l; i++) {\n\t\t\t\t\t\t\t\twalkAST(value[i], node, paperFeatures);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (value && typeof value === 'object') {\n\t\t\t\t\t\t\twalkAST(value, node, paperFeatures);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (paperFeatures.operatorOverloading !== false) {\n\t\t\t\t\thandleOverloading(node, parent);\n\t\t\t\t}\n\t\t\t\tif (paperFeatures.moduleExports !== false) {\n\t\t\t\t\thandleExports(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction encodeVLQ(value) {\n\t\t\tvar res = '',\n\t\t\t\tbase64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t\t\tvalue = (Math.abs(value) << 1) + (value < 0 ? 1 : 0);\n\t\t\twhile (value || !res) {\n\t\t\t\tvar next = value & (32 - 1);\n\t\t\t\tvalue >>= 5;\n\t\t\t\tif (value)\n\t\t\t\t\tnext |= 32;\n\t\t\t\tres += base64[next];\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\n\t\tvar url = options.url || '',\n\t\t\tsourceMaps = options.sourceMaps,\n\t\t\tpaperFeatures = options.paperFeatures || {},\n\t\t\tsource = options.source || code,\n\t\t\toffset = options.offset || 0,\n\t\t\tagent = paper.agent,\n\t\t\tversion = agent.versionNumber,\n\t\t\toffsetCode = false,\n\t\t\tlineBreaks = /\\r\\n|\\n|\\r/mg,\n\t\t\tmap;\n\t\tif (sourceMaps && (agent.chrome && version >= 30\n\t\t\t\t|| agent.webkit && version >= 537.76\n\t\t\t\t|| agent.firefox && version >= 23\n\t\t\t\t|| agent.node)) {\n\t\t\tif (agent.node) {\n\t\t\t\toffset -= 2;\n\t\t\t} else if (window && url && !window.location.href.indexOf(url)) {\n\t\t\t\tvar html = document.getElementsByTagName('html')[0].innerHTML;\n\t\t\t\toffset = html.substr(0, html.indexOf(code) + 1).match(\n\t\t\t\t\t\tlineBreaks).length + 1;\n\t\t\t}\n\t\t\toffsetCode = offset > 0 && !(\n\t\t\t\t\tagent.chrome && version >= 36 ||\n\t\t\t\t\tagent.safari && version >= 600 ||\n\t\t\t\t\tagent.firefox && version >= 40 ||\n\t\t\t\t\tagent.node);\n\t\t\tvar mappings = ['AA' + encodeVLQ(offsetCode ? 0 : offset) + 'A'];\n\t\t\tmappings.length = (code.match(lineBreaks) || []).length + 1\n\t\t\t\t\t+ (offsetCode ? offset : 0);\n\t\t\tmap = {\n\t\t\t\tversion: 3,\n\t\t\t\tfile: url,\n\t\t\t\tnames:[],\n\t\t\t\tmappings: mappings.join(';AACA'),\n\t\t\t\tsourceRoot: '',\n\t\t\t\tsources: [url],\n\t\t\t\tsourcesContent: [source]\n\t\t\t};\n\t\t}\n\t\tif (\n\t\t\tpaperFeatures.operatorOverloading !== false ||\n\t\t\tpaperFeatures.moduleExports !== false\n\t\t) {\n\t\t\twalkAST(parse(code, {\n\t\t\t\tranges: true,\n\t\t\t\tpreserveParens: true,\n\t\t\t\tsourceType: 'module'\n\t\t\t}), null, paperFeatures);\n\t\t}\n\t\tif (map) {\n\t\t\tif (offsetCode) {\n\t\t\t\tcode = new Array(offset + 1).join('\\n') + code;\n\t\t\t}\n\t\t\tif (/^(inline|both)$/.test(sourceMaps)) {\n\t\t\t\tcode += \"\\n//# sourceMappingURL=data:application/json;base64,\"\n\t\t\t\t\t\t+ self.btoa(unescape(encodeURIComponent(\n\t\t\t\t\t\t\tJSON.stringify(map))));\n\t\t\t}\n\t\t\tcode += \"\\n//# sourceURL=\" + (url || 'paperscript');\n\t\t}\n\t\treturn {\n\t\t\turl: url,\n\t\t\tsource: source,\n\t\t\tcode: code,\n\t\t\tmap: map\n\t\t};\n\t}\n\n\tfunction execute(code, scope, options) {\n\t\tpaper = scope;\n\t\tvar view = scope.getView(),\n\t\t\ttool = /\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/\n\t\t\t\t\t.test(code) && !/\\bnew\\s+Tool\\b/.test(code)\n\t\t\t\t\t\t? new Tool() : null,\n\t\t\ttoolHandlers = tool ? tool._events : [],\n\t\t\thandlers = ['onFrame', 'onResize'].concat(toolHandlers),\n\t\t\tparams = [],\n\t\t\targs = [],\n\t\t\tfunc,\n\t\t\tcompiled = typeof code === 'object' ? code : compile(code, options);\n\t\tcode = compiled.code;\n\t\tfunction expose(scope, hidden) {\n\t\t\tfor (var key in scope) {\n\t\t\t\tif ((hidden || !/^_/.test(key)) && new RegExp('([\\\\b\\\\s\\\\W]|^)'\n\t\t\t\t\t\t+ key.replace(/\\$/g, '\\\\$') + '\\\\b').test(code)) {\n\t\t\t\t\tparams.push(key);\n\t\t\t\t\targs.push(scope[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\texpose({ __$__: __$__, $__: $__, paper: scope, tool: tool },\n\t\t\t\ttrue);\n\t\texpose(scope);\n\t\tcode = 'var module = { exports: {} }; ' + code;\n\t\tvar exports = Base.each(handlers, function(key) {\n\t\t\tif (new RegExp('\\\\s+' + key + '\\\\b').test(code)) {\n\t\t\t\tparams.push(key);\n\t\t\t\tthis.push('module.exports.' + key + ' = ' + key + ';');\n\t\t\t}\n\t\t}, []).join('\\n');\n\t\tif (exports) {\n\t\t\tcode += '\\n' + exports;\n\t\t}\n\t\tcode += '\\nreturn module.exports;';\n\t\tvar agent = paper.agent;\n\t\tif (document && (agent.chrome\n\t\t\t\t|| agent.firefox && agent.versionNumber < 40)) {\n\t\t\tvar script = document.createElement('script'),\n\t\t\t\thead = document.head || document.getElementsByTagName('head')[0];\n\t\t\tif (agent.firefox)\n\t\t\t\tcode = '\\n' + code;\n\t\t\tscript.appendChild(document.createTextNode(\n\t\t\t\t'document.__paperscript__ = function(' + params + ') {' +\n\t\t\t\t\tcode +\n\t\t\t\t'\\n}'\n\t\t\t));\n\t\t\thead.appendChild(script);\n\t\t\tfunc = document.__paperscript__;\n\t\t\tdelete document.__paperscript__;\n\t\t\thead.removeChild(script);\n\t\t} else {\n\t\t\tfunc = Function(params, code);\n\t\t}\n\t\tvar exports = func && func.apply(scope, args);\n\t\tvar obj = exports || {};\n\t\tBase.each(toolHandlers, function(key) {\n\t\t\tvar value = obj[key];\n\t\t\tif (value)\n\t\t\t\ttool[key] = value;\n\t\t});\n\t\tif (view) {\n\t\t\tif (obj.onResize)\n\t\t\t\tview.setOnResize(obj.onResize);\n\t\t\tview.emit('resize', {\n\t\t\t\tsize: view.size,\n\t\t\t\tdelta: new Point()\n\t\t\t});\n\t\t\tif (obj.onFrame)\n\t\t\t\tview.setOnFrame(obj.onFrame);\n\t\t\tview.requestUpdate();\n\t\t}\n\t\treturn exports;\n\t}\n\n\tfunction loadScript(script) {\n\t\tif (/^text\\/(?:x-|)paperscript$/.test(script.type)\n\t\t\t\t&& PaperScope.getAttribute(script, 'ignore') !== 'true') {\n\t\t\tvar canvasId = PaperScope.getAttribute(script, 'canvas'),\n\t\t\t\tcanvas = document.getElementById(canvasId),\n\t\t\t\tsrc = script.src || script.getAttribute('data-src'),\n\t\t\t\tasync = PaperScope.hasAttribute(script, 'async'),\n\t\t\t\tscopeAttribute = 'data-paper-scope';\n\t\t\tif (!canvas)\n\t\t\t\tthrow new Error('Unable to find canvas with id \"'\n\t\t\t\t\t\t+ canvasId + '\"');\n\t\t\tvar scope = PaperScope.get(canvas.getAttribute(scopeAttribute))\n\t\t\t\t\t\t|| new PaperScope().setup(canvas);\n\t\t\tcanvas.setAttribute(scopeAttribute, scope._id);\n\t\t\tif (src) {\n\t\t\t\tHttp.request({\n\t\t\t\t\turl: src,\n\t\t\t\t\tasync: async,\n\t\t\t\t\tmimeType: 'text/plain',\n\t\t\t\t\tonLoad: function(code) {\n\t\t\t\t\t\texecute(code, scope, src);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\texecute(script.innerHTML, scope, script.baseURI);\n\t\t\t}\n\t\t\tscript.setAttribute('data-paper-ignore', 'true');\n\t\t\treturn scope;\n\t\t}\n\t}\n\n\tfunction loadAll() {\n\t\tBase.each(document && document.getElementsByTagName('script'),\n\t\t\t\tloadScript);\n\t}\n\n\tfunction load(script) {\n\t\treturn script ? loadScript(script) : loadAll();\n\t}\n\n\tif (window) {\n\t\tif (document.readyState === 'complete') {\n\t\t\tsetTimeout(loadAll);\n\t\t} else {\n\t\t\tDomEvent.add(window, { load: loadAll });\n\t\t}\n\t}\n\n\treturn {\n\t\tcompile: compile,\n\t\texecute: execute,\n\t\tload: load,\n\t\tparse: parse,\n\t\tcalculateBinary: __$__,\n\t\tcalculateUnary: $__\n\t};\n\n}.call(this);\n\nvar paper = new (PaperScope.inject(Base.exports, {\n\tBase: Base,\n\tNumerical: Numerical,\n\tKey: Key,\n\tDomEvent: DomEvent,\n\tDomElement: DomElement,\n\tdocument: document,\n\twindow: window,\n\tSymbol: SymbolDefinition,\n\tPlacedSymbol: SymbolItem\n}))();\n\nif (paper.agent.node) {\n\trequire('./node/extend.js')(paper);\n}\n\nif (typeof define === 'function' && define.amd) {\n\tdefine('paper', paper);\n} else if (typeof module === 'object' && module) {\n\tmodule.exports = paper;\n}\n\nreturn paper;\n}.call(this, typeof self === 'object' ? self : null);\n","import paper from \"paper\";\nexport function interpolate_values(v1, v2, f) {\n    return v1 + (v2 - v1) * f;\n}\nexport function interpolate_points(p1, p2, f) {\n    //\n    return new paper.Point(interpolate_values(p1.x, p2.x, f), interpolate_values(p1.y, p2.y, f));\n}\n","import paper from \"paper\";\nimport { interpolate_points } from \"./interpolation\";\nexport function peak(p, w, h, d = 1, s = 0.56) {\n    if (h < 2 * w) {\n        throw new Error(\"Change width and height!\");\n    }\n    // This is the distance between the first point and the first arc point\n    const dst = h / 2 - w;\n    // This is the middle point\n    const pM = p.add(new paper.Point(0, h / 2));\n    // These are the first two points\n    const p0 = p;\n    const p1 = p0.add(new paper.Point(0, dst));\n    // This is the peak point\n    const p2 = p.add(new paper.Point(d * w, h / 2));\n    // These are the last two points\n    const p3 = pM.add(new paper.Point(0, w));\n    const p4 = p.add(new paper.Point(0, h));\n    // First two anchors\n    const p12 = interpolate_points(p1, pM, s);\n    const p21 = interpolate_points(p2, pM, s);\n    // Other two anchors\n    const p23 = interpolate_points(p2, pM, s);\n    const p32 = interpolate_points(p3, pM, s);\n    //   Drawing\n    const path = new paper.Path();\n    path.moveTo(p0);\n    path.lineTo(p1);\n    path.cubicCurveTo(p12, p21, p2);\n    path.cubicCurveTo(p23, p32, p3);\n    path.lineTo(p4);\n    return path;\n}\nexport function tile_peak(r, d = 1, s = 0.56) {\n    // Calculating origin point\n    const p = new paper.Point(r.x + r.width / 2, r.y);\n    // Getting path\n    const path = peak(p, r.width / 2, r.height, d);\n    return path;\n}\n","import paper from \"paper\";\nimport \"./interpolation\";\nexport function wave(p, w, h, s) {\n    // Wave anchors\n    const p0 = p;\n    const p1 = p0.add(new paper.Point(w, h / 2));\n    const p2 = p0.add(new paper.Point(0, h));\n    // Calculating first anchors\n    const p01 = p0.add(new paper.Point(0, (+h / 2) * s));\n    const p10 = p1.add(new paper.Point(0, (-h / 2) * s));\n    // Calculating second anchors\n    const p12 = p1.add(new paper.Point(0, (+h / 2) * s));\n    const p21 = p2.add(new paper.Point(0, (-h / 2) * s));\n    // Drawing\n    const path = new paper.Path();\n    path.moveTo(p0);\n    path.cubicCurveTo(p01, p10, p1);\n    path.cubicCurveTo(p12, p21, p2);\n    return path;\n}\nexport function tile_wave(r, d = 1, s = 0.5) {\n    // Calculating origin point\n    const p = new paper.Point(r.x + r.width / 2, r.y);\n    // Getting path\n    const path = wave(p, (d * r.width) / 4, r.height, s);\n    return path;\n}\n","\"use strict\";\n\nvar randomWeightedChoice = function randomWeightedChoice(table) // seems fine, hard to tune\n{\n  var temperature = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;\n  var randomFunction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Math.random;\n  var influence = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 2;\n\n  var T = (temperature - 50) / 50;\n  var nb = table.length;\n  if (!nb) {\n    return null;\n  }\n\n  var total = table.reduce(function (previousTotal, element) {\n    return previousTotal + element.weight;\n  }, 0);\n\n  var avg = total / nb;\n\n  // Compute amplified urgencies (depending on temperature)\n  var ur = {};\n  var urgencySum = table.reduce(function (previousSum, element) {\n    var id = element.id,\n        weight = element.weight;\n\n    var urgency = weight + T * influence * (avg - weight);\n    if (urgency < 0) urgency = 0;\n    ur[id] = (ur[id] || 0) + urgency;\n    return previousSum + urgency;\n  }, 0);\n\n  var currentUrgency = 0;\n  var cumulatedUrgencies = {};\n  Object.keys(ur).forEach(function (id) {\n    currentUrgency += ur[id];\n    cumulatedUrgencies[id] = currentUrgency;\n  });\n\n  if (urgencySum <= 0) return null; // No weight given\n  // Choose\n  var choice = randomFunction() * urgencySum;\n  var ids = Object.keys(cumulatedUrgencies);\n  for (var i = 0; i < ids.length; i++) {\n    var id = ids[i];\n    var urgency = cumulatedUrgencies[id];\n    if (choice <= urgency) {\n      return id;\n    }\n  }\n};\n\nmodule.exports = randomWeightedChoice;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yYW5kb20td2VpZ2h0ZWQtY2hvaWNlLmpzIl0sIm5hbWVzIjpbInJhbmRvbVdlaWdodGVkQ2hvaWNlIiwidGFibGUiLCJ0ZW1wZXJhdHVyZSIsInJhbmRvbUZ1bmN0aW9uIiwiTWF0aCIsInJhbmRvbSIsImluZmx1ZW5jZSIsIlQiLCJuYiIsImxlbmd0aCIsInRvdGFsIiwicmVkdWNlIiwicHJldmlvdXNUb3RhbCIsImVsZW1lbnQiLCJ3ZWlnaHQiLCJhdmciLCJ1ciIsInVyZ2VuY3lTdW0iLCJwcmV2aW91c1N1bSIsImlkIiwidXJnZW5jeSIsImN1cnJlbnRVcmdlbmN5IiwiY3VtdWxhdGVkVXJnZW5jaWVzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJjaG9pY2UiLCJpZHMiLCJpIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSx1QkFBdUIsU0FBdkJBLG9CQUF1QixDQUMzQkMsS0FEMkIsRUFJYjtBQUNYO0FBQUEsTUFISEMsV0FHRyx1RUFIVyxFQUdYO0FBQUEsTUFGSEMsY0FFRyx1RUFGY0MsS0FBS0MsTUFFbkI7QUFBQSxNQURIQyxTQUNHLHVFQURTLENBQ1Q7O0FBQ0gsTUFBTUMsSUFBSSxDQUFDTCxjQUFjLEVBQWYsSUFBcUIsRUFBL0I7QUFDQSxNQUFNTSxLQUFLUCxNQUFNUSxNQUFqQjtBQUNBLE1BQUksQ0FBQ0QsRUFBTCxFQUFTO0FBQ1AsV0FBTyxJQUFQO0FBQ0Q7O0FBRUQsTUFBTUUsUUFBUVQsTUFBTVUsTUFBTixDQUNaLFVBQUNDLGFBQUQsRUFBZ0JDLE9BQWhCO0FBQUEsV0FBNEJELGdCQUFnQkMsUUFBUUMsTUFBcEQ7QUFBQSxHQURZLEVBRVosQ0FGWSxDQUFkOztBQUtBLE1BQU1DLE1BQU1MLFFBQVFGLEVBQXBCOztBQUVBO0FBQ0EsTUFBTVEsS0FBSyxFQUFYO0FBQ0EsTUFBTUMsYUFBYWhCLE1BQU1VLE1BQU4sQ0FBYSxVQUFDTyxXQUFELEVBQWNMLE9BQWQsRUFBMEI7QUFBQSxRQUNoRE0sRUFEZ0QsR0FDakNOLE9BRGlDLENBQ2hETSxFQURnRDtBQUFBLFFBQzVDTCxNQUQ0QyxHQUNqQ0QsT0FEaUMsQ0FDNUNDLE1BRDRDOztBQUV4RCxRQUFJTSxVQUFVTixTQUFTUCxJQUFJRCxTQUFKLElBQWlCUyxNQUFNRCxNQUF2QixDQUF2QjtBQUNBLFFBQUlNLFVBQVUsQ0FBZCxFQUFpQkEsVUFBVSxDQUFWO0FBQ2pCSixPQUFHRyxFQUFILElBQVMsQ0FBQ0gsR0FBR0csRUFBSCxLQUFVLENBQVgsSUFBZ0JDLE9BQXpCO0FBQ0EsV0FBT0YsY0FBY0UsT0FBckI7QUFDRCxHQU5rQixFQU1oQixDQU5nQixDQUFuQjs7QUFRQSxNQUFJQyxpQkFBaUIsQ0FBckI7QUFDQSxNQUFNQyxxQkFBcUIsRUFBM0I7QUFDQUMsU0FBT0MsSUFBUCxDQUFZUixFQUFaLEVBQWdCUyxPQUFoQixDQUF3QixVQUFDTixFQUFELEVBQVE7QUFDOUJFLHNCQUFrQkwsR0FBR0csRUFBSCxDQUFsQjtBQUNBRyx1QkFBbUJILEVBQW5CLElBQXlCRSxjQUF6QjtBQUNELEdBSEQ7O0FBS0EsTUFBSUosY0FBYyxDQUFsQixFQUFxQixPQUFPLElBQVAsQ0EvQmxCLENBK0IrQjtBQUNsQztBQUNBLE1BQU1TLFNBQVN2QixtQkFBbUJjLFVBQWxDO0FBQ0EsTUFBTVUsTUFBTUosT0FBT0MsSUFBUCxDQUFZRixrQkFBWixDQUFaO0FBQ0EsT0FBSyxJQUFJTSxJQUFJLENBQWIsRUFBZ0JBLElBQUlELElBQUlsQixNQUF4QixFQUFnQ21CLEdBQWhDLEVBQXFDO0FBQ25DLFFBQU1ULEtBQUtRLElBQUlDLENBQUosQ0FBWDtBQUNBLFFBQU1SLFVBQVVFLG1CQUFtQkgsRUFBbkIsQ0FBaEI7QUFDQSxRQUFJTyxVQUFVTixPQUFkLEVBQXVCO0FBQ3JCLGFBQU9ELEVBQVA7QUFDRDtBQUNGO0FBQ0YsQ0EvQ0Q7O0FBaURBVSxPQUFPQyxPQUFQLEdBQWlCOUIsb0JBQWpCIiwiZmlsZSI6InJhbmRvbS13ZWlnaHRlZC1jaG9pY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByYW5kb21XZWlnaHRlZENob2ljZSA9IChcbiAgdGFibGUsXG4gIHRlbXBlcmF0dXJlID0gNTAsIC8vIGluIFswLDEwMF0sIDUwIGlzIG5ldXRyYWxcbiAgcmFuZG9tRnVuY3Rpb24gPSBNYXRoLnJhbmRvbSxcbiAgaW5mbHVlbmNlID0gMiAvLyBzZWVtcyBmaW5lLCBoYXJkIHRvIHR1bmVcbikgPT4ge1xuICBjb25zdCBUID0gKHRlbXBlcmF0dXJlIC0gNTApIC8gNTA7XG4gIGNvbnN0IG5iID0gdGFibGUubGVuZ3RoO1xuICBpZiAoIW5iKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCB0b3RhbCA9IHRhYmxlLnJlZHVjZShcbiAgICAocHJldmlvdXNUb3RhbCwgZWxlbWVudCkgPT4gcHJldmlvdXNUb3RhbCArIGVsZW1lbnQud2VpZ2h0LFxuICAgIDBcbiAgKTtcblxuICBjb25zdCBhdmcgPSB0b3RhbCAvIG5iO1xuXG4gIC8vIENvbXB1dGUgYW1wbGlmaWVkIHVyZ2VuY2llcyAoZGVwZW5kaW5nIG9uIHRlbXBlcmF0dXJlKVxuICBjb25zdCB1ciA9IHt9O1xuICBjb25zdCB1cmdlbmN5U3VtID0gdGFibGUucmVkdWNlKChwcmV2aW91c1N1bSwgZWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHsgaWQsIHdlaWdodCB9ID0gZWxlbWVudDtcbiAgICBsZXQgdXJnZW5jeSA9IHdlaWdodCArIFQgKiBpbmZsdWVuY2UgKiAoYXZnIC0gd2VpZ2h0KTtcbiAgICBpZiAodXJnZW5jeSA8IDApIHVyZ2VuY3kgPSAwO1xuICAgIHVyW2lkXSA9ICh1cltpZF0gfHwgMCkgKyB1cmdlbmN5O1xuICAgIHJldHVybiBwcmV2aW91c1N1bSArIHVyZ2VuY3k7XG4gIH0sIDApO1xuXG4gIGxldCBjdXJyZW50VXJnZW5jeSA9IDA7XG4gIGNvbnN0IGN1bXVsYXRlZFVyZ2VuY2llcyA9IHt9O1xuICBPYmplY3Qua2V5cyh1cikuZm9yRWFjaCgoaWQpID0+IHtcbiAgICBjdXJyZW50VXJnZW5jeSArPSB1cltpZF07XG4gICAgY3VtdWxhdGVkVXJnZW5jaWVzW2lkXSA9IGN1cnJlbnRVcmdlbmN5O1xuICB9KTtcblxuICBpZiAodXJnZW5jeVN1bSA8PSAwKSByZXR1cm4gbnVsbDsgLy8gTm8gd2VpZ2h0IGdpdmVuXG4gIC8vIENob29zZVxuICBjb25zdCBjaG9pY2UgPSByYW5kb21GdW5jdGlvbigpICogdXJnZW5jeVN1bTtcbiAgY29uc3QgaWRzID0gT2JqZWN0LmtleXMoY3VtdWxhdGVkVXJnZW5jaWVzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpZCA9IGlkc1tpXTtcbiAgICBjb25zdCB1cmdlbmN5ID0gY3VtdWxhdGVkVXJnZW5jaWVzW2lkXTtcbiAgICBpZiAoY2hvaWNlIDw9IHVyZ2VuY3kpIHtcbiAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcmFuZG9tV2VpZ2h0ZWRDaG9pY2U7XG4iXX0=","/**\n * Pandemonium Random\n * ===================\n *\n * Random function.\n */\n\n/**\n * Creating a function returning a random integer such as a <= N <= b.\n *\n * @param  {function} rng - RNG function returning uniform random.\n * @return {function}     - The created function.\n */\nfunction createRandom(rng) {\n\n  /**\n   * Random function.\n   *\n   * @param  {number} a - From.\n   * @param  {number} b - To.\n   * @return {number}\n   */\n  return function(a, b) {\n    return a + Math.floor(rng() * (b - a + 1));\n  };\n}\n\n/**\n * Default random using `Math.random`.\n */\nvar random = createRandom(Math.random);\n\n/**\n * Exporting.\n */\nrandom.createRandom = createRandom;\nmodule.exports = random;\n","/**\n * Pandemonium Random Index\n * =========================\n *\n * Random index function.\n */\nvar createRandom = require('./random.js').createRandom;\n\n/**\n * Creating a function returning a random index from the given array.\n *\n * @param  {function} rng - RNG function returning uniform random.\n * @return {function}     - The created function.\n */\nfunction createRandomIndex(rng) {\n  var customRandom = createRandom(rng);\n\n  /**\n   * Random function.\n   *\n   * @param  {array|number}  array - Target array or length of the array.\n   * @return {number}\n   */\n  return function(length) {\n    if (typeof length !== 'number')\n      length = length.length;\n\n    return customRandom(0, length - 1);\n  };\n}\n\n/**\n * Default random index using `Math.random`.\n */\nvar randomIndex = createRandomIndex(Math.random);\n\n/**\n * Exporting.\n */\nrandomIndex.createRandomIndex = createRandomIndex;\nmodule.exports = randomIndex;\n","/**\n * Pandemonium Choice\n * ===================\n *\n * Choice function.\n */\nvar createRandomIndex = require('./random-index.js').createRandomIndex;\n\n/**\n * Creating a function returning a random item from the given array.\n *\n * @param  {function} rng - RNG function returning uniform random.\n * @return {function}     - The created function.\n */\nfunction createChoice(rng) {\n  var customRandomIndex = createRandomIndex(rng);\n\n  /**\n   * Random function.\n   *\n   * @param  {array}  array - Target array.\n   * @return {any}\n   */\n  return function(array) {\n    return array[customRandomIndex(array)];\n  };\n}\n\n/**\n * Default choice using `Math.random`.\n */\nvar choice = createChoice(Math.random);\n\n/**\n * Exporting.\n */\nchoice.createChoice = createChoice;\nmodule.exports = choice;\n","/**\n * Pandemonium Dangerous But Performant Sample\n * ============================================\n *\n * Performant sampling function running in O(k) memory & time but mutating the\n * given array before reversing the mutations at the end of the process.\n */\nvar createRandom = require('./random.js').createRandom;\n\n/**\n * Creating a function returning a sample of size n using the provided RNG.\n *\n * @param  {function} rng - The RNG to use.\n * @return {function}     - The created function.\n */\nfunction createDangerouslyMutatingSample(rng) {\n  var customRandom = createRandom(rng);\n\n  /**\n   * Function returning sample of size n from array.\n   *\n   * @param  {number} n        - Size of the sample.\n   * @param  {array}  sequence - Target sequence.\n   * @return {array}           - The random sample.\n   */\n  return function(n, sequence) {\n    if (n >= sequence.length)\n      return sequence.slice();\n\n    var result = new Array(n),\n        swaps = new Array(n),\n        lastIndex = sequence.length - 1;\n\n    var index = -1,\n        value,\n        swap,\n        r;\n\n    while (++index < n) {\n      r = customRandom(index, lastIndex);\n      value = sequence[r];\n\n      sequence[r] = sequence[index];\n      sequence[index] = value;\n      result[index] = value;\n\n      // Storing the swap so we can reverse it\n      swaps[index] = r;\n    }\n\n    // Reversing the mutations\n    while (--index >= 0) {\n      swap = swaps[index];\n      value = sequence[index];\n\n      sequence[index] = sequence[swap];\n      sequence[swap] = value;\n    }\n\n    return result;\n  };\n}\n\n/**\n * Default dangerous sample using `Math.random`.\n */\nvar dangerouslyMutatingSample = createDangerouslyMutatingSample(Math.random);\n\n/**\n * Exporting.\n */\ndangerouslyMutatingSample.createDangerouslyMutatingSample = createDangerouslyMutatingSample;\nmodule.exports = dangerouslyMutatingSample;\n","/**\n * Pandemonium Fisher-Yates Sample\n * ================================\n *\n * Sample function using `k` iterations of the Fisher-Yates over a copy of the\n * provided array.\n */\nvar createRandom = require('./random.js').createRandom;\n\n/**\n * Creating a function returning a sample of size n using the provided RNG.\n *\n * @param  {function} rng - The RNG to use.\n * @return {function}     - The created function.\n */\nfunction createFisherYatesSample(rng) {\n  var customRandom = createRandom(rng);\n\n  /**\n   * Function returning sample of size n from array.\n   *\n   * @param  {number} n        - Size of the sample.\n   * @param  {array}  sequence - Target sequence.\n   * @return {array}           - The random sample.\n   */\n  return function(n, sequence) {\n    var result = sequence.slice(),\n        lastIndex = result.length - 1;\n\n    if (n >= sequence.length)\n      return result;\n\n    var index = -1;\n\n    while (++index < n) {\n      var r = customRandom(index, lastIndex),\n          value = result[r];\n\n      result[r] = result[index];\n      result[index] = value;\n    }\n\n    // Clamping the array\n    result.length = n;\n\n    return result;\n  };\n}\n\n/**\n * Default sample using `Math.random`.\n */\nvar fisherYatesSample = createFisherYatesSample(Math.random);\n\n/**\n * Exporting.\n */\nfisherYatesSample.createFisherYatesSample = createFisherYatesSample;\nmodule.exports = fisherYatesSample;\n","/**\n * Pandemonium Geometric Reservoir Sample\n * =======================================\n *\n * Reservoir sampling function using \"Algorithm L\".\n *\n * [Reference]:\n * Li, Kim-Hung. \"Reservoir-sampling algorithms of time complexity\n * O(n (1+ log (N/n))).\" ACM Transactions on Mathematical Software (TOMS) 20.4\n * (1994): 481-493.\n *\n * https://en.wikipedia.org/wiki/Reservoir_sampling#An_optimal_algorithm\n */\nvar createRandomIndex = require('./random-index.js').createRandomIndex;\n\nvar exp = Math.exp;\nvar log = Math.log;\nvar floor = Math.floor;\n\n/**\n * Creating a function returning a sample of size n using the provided RNG.\n *\n * @param  {function} rng - The RNG to use.\n * @return {function}     - The created function.\n */\nfunction createGeometricReservoirSample(rng) {\n  var customRandomIndex = createRandomIndex(rng);\n\n  /**\n   * Function returning sample of size n from array.\n   *\n   * @param  {number} k              - Size of the sample.\n   * @param  {array|number} sequence - Target sequence or its length.\n   * @return {array}                 - The random sample.\n   */\n  return function(k, sequence) {\n    var n = sequence.length;\n\n    // Sample size gte sequence's length\n    if (k >= n)\n      return sequence.slice();\n\n    var sample = new Array(k);\n    var i;\n\n    for (i = 0; i < k; i++)\n      sample[i] = sequence[i];\n\n    // NOTE: from this point, formulae consider i to be 1-based\n    var w = exp(log(rng()) / k);\n\n    while (i <= n) {\n      i += floor(log(rng()) / log(1 - w)) + 1;\n\n      if (i <= n) {\n        sample[customRandomIndex(k)] = sequence[i - 1];\n        w *= exp(log(rng()) / k);\n      }\n    }\n\n    return sample;\n  };\n}\n\n/**\n * Default reservoir sample using `Math.random`.\n */\nvar geometricReservoirSample = createGeometricReservoirSample(Math.random);\n\n/**\n * Exporting.\n */\ngeometricReservoirSample.createGeometricReservoirSample = createGeometricReservoirSample;\nmodule.exports = geometricReservoirSample;\n","/**\n * Pandemonium Naive Sample\n * =========================\n *\n * Naive sampling function storing the already picked values in a Set.\n * Performance of this function will decrease dramatically when `k` is a\n * high proportion of `n`.\n */\nvar createRandomIndex = require('./random-index.js').createRandomIndex;\n\n/**\n * Creating a function returning a sample of size n using the provided RNG.\n *\n * @param  {function} rng - The RNG to use.\n * @return {function}     - The created function.\n */\nfunction createNaiveSample(rng) {\n  var customRandomIndex = createRandomIndex(rng);\n\n  /**\n   * Function returning sample of size n from array.\n   *\n   * @param  {number} n              - Size of the sample.\n   * @param  {array|number} sequence - Target sequence or its length.\n   * @return {array}                 - The random sample.\n   */\n  return function(n, sequence) {\n    if (n >= sequence.length)\n      return sequence.slice();\n\n    var items = new Set(),\n        array = new Array(n),\n        size = 0,\n        index;\n\n    var needItems = typeof sequence !== 'number',\n        i = 0;\n\n    while (items.size < n) {\n      index = customRandomIndex(sequence);\n\n      items.add(index);\n\n      if (items.size > size) {\n        array[i++] = needItems ? sequence[index] : index;\n        size = items.size;\n      }\n    }\n\n    return array;\n  };\n}\n\n/**\n * Default naive sample using `Math.random`.\n */\nvar naiveSample = createNaiveSample(Math.random);\n\n/**\n * Exporting.\n */\nnaiveSample.createNaiveSample = createNaiveSample;\nmodule.exports = naiveSample;\n","/**\n * Pandemonium Random String\n * ==========================\n *\n * Function generating random strings.\n */\nvar createRandom = require('./random.js').createRandom;\n\n/**\n * Constants.\n */\nvar DEFAULT_ALPHABET = (\n  'abcdefghijklmnopqrstuvwxyz' +\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZ' +\n  '0123456789'\n);\n\n/**\n * Creating a function returning a random string composed from characters of\n * the given alphabet.\n *\n * @param  {function}     rng      - RNG function returning uniform random.\n * @param  {string|array} alphabet - Target alphabet.\n * @return {function}              - The created function.\n */\nfunction createRandomString(rng, alphabet) {\n  if (!alphabet)\n    alphabet = DEFAULT_ALPHABET;\n\n  var customRandom = createRandom(rng),\n      randomCharacterIndex = customRandom.bind(null, 0, alphabet.length - 1);\n\n  /**\n   * Random string function.\n   *\n   * @param  {number} length - Desired string length.\n   * @return {number}\n   */\n  return function(length) {\n    if (arguments.length > 1) {\n\n      // We want to generate a string of variable length\n      length = customRandom(arguments[0], arguments[1]);\n    }\n\n    var characters = new Array(length);\n\n    for (var i = 0; i < length; i++)\n      characters[i] = alphabet[randomCharacterIndex()];\n\n    return characters.join('');\n  };\n}\n\n/**\n * Default random string using `Math.random`.\n */\nvar randomString = createRandomString(Math.random);\n\n/**\n * Exporting.\n */\nrandomString.createRandomString = createRandomString;\nmodule.exports = randomString;\n","/**\n * Pandemonium Reservoir Sample\n * =============================\n *\n * Reservoir sampling function.\n *\n * [Reference]:\n * https://en.wikipedia.org/wiki/Reservoir_sampling#Simple_algorithm\n */\nvar createRandomIndex = require('./random-index.js').createRandomIndex;\n\n/**\n * Creating a function returning a sample of size n using the provided RNG.\n *\n * @param  {function} rng - The RNG to use.\n * @return {function}     - The created function.\n */\nfunction createReservoirSample(rng) {\n  var customRandomIndex = createRandomIndex(rng);\n\n  /**\n   * Function returning sample of size n from array.\n   *\n   * @param  {number} k              - Size of the sample.\n   * @param  {array|number} sequence - Target sequence or its length.\n   * @return {array}                 - The random sample.\n   */\n  return function(k, sequence) {\n    var n = sequence.length;\n\n    // Sample size gte sequence's length\n    if (k >= n)\n      return sequence.slice();\n\n    var sample = new Array(k);\n    var i, j;\n\n    for (i = 0; i < k; i++)\n      sample[i] = sequence[i];\n\n    for (; i < n; i++) {\n      j = customRandomIndex(i);\n\n      if (j < k)\n        sample[j] = sequence[i];\n    }\n\n    return sample;\n  };\n}\n\n/**\n * Default reservoir sample using `Math.random`.\n */\nvar reservoirSample = createReservoirSample(Math.random);\n\n/**\n * Exporting.\n */\nreservoirSample.createReservoirSample = createReservoirSample;\nmodule.exports = reservoirSample;\n","/**\n * Pandemonium Sample With Replacements\n * =====================================\n *\n * Straightforward sampling function that allows an item to exist multiple\n * times in the resulting sample.\n */\nvar createRandom = require('./random.js').createRandom;\n\n/**\n * Creating a function returning a sample of size n with replacements\n * using the provided RNG.\n *\n * @param  {function} rng - The RNG to use.\n * @return {function}     - The created function.\n */\nfunction createSampleWithReplacements(rng) {\n  var customRandom = createRandom(rng);\n\n  /**\n   * Function returning sample of size n from array with replacements.\n   *\n   * @param  {number} n        - Size of the sample.\n   * @param  {array}  sequence - Target sequence.\n   * @return {array}           - The random sample.\n   */\n  return function(n, sequence) {\n    var sample = new Array(n),\n        m = sequence.length - 1,\n        i,\n        r;\n\n    for (i = 0; i < n; i++) {\n      r = customRandom(0, m);\n      sample[i] = sequence[r];\n    }\n\n    return sample;\n  };\n}\n\n/**\n * Default sample with replacements using `Math.random`.\n */\nvar sampleWithReplacements = createSampleWithReplacements(Math.random);\n\n/**\n * Exporting.\n */\nsampleWithReplacements.createSampleWithReplacements = createSampleWithReplacements;\nmodule.exports = sampleWithReplacements;\n","/**\n * Pandemonium Shuffle In Place\n * =============================\n *\n * Shuffle function applying the Fisher-Yates algorithm to the provided array.\n */\nvar createRandom = require('./random.js').createRandom;\n\n/**\n * Creating a function returning the given array shuffled.\n *\n * @param  {function} rng - The RNG to use.\n * @return {function}     - The created function.\n */\nfunction createShuffleInPlace(rng) {\n  var customRandom = createRandom(rng);\n\n  /**\n   * Function returning the shuffled array.\n   *\n   * @param  {array}  sequence - Target sequence.\n   * @return {array}           - The shuffled sequence.\n   */\n  return function(sequence) {\n    var length = sequence.length,\n        lastIndex = length - 1;\n\n    var index = -1;\n\n    while (++index < length) {\n      var r = customRandom(index, lastIndex),\n          value = sequence[r];\n\n      sequence[r] = sequence[index];\n      sequence[index] = value;\n    }\n  };\n}\n\n/**\n * Default shuffle in place using `Math.random`.\n */\nvar shuffleInPlace = createShuffleInPlace(Math.random);\n\n/**\n * Exporting.\n */\nshuffleInPlace.createShuffleInPlace = createShuffleInPlace;\nmodule.exports = shuffleInPlace;\n","/**\n * Pandemonium Shuffle\n * ====================\n *\n * Shuffle function which is basically just applying the Fisher-Yates sampling\n * function over the whole array.\n */\nvar createShuffleInPlace = require('./shuffle-in-place.js').createShuffleInPlace;\n\n/**\n * Creating a function returning the given array shuffled.\n *\n * @param  {function} rng - The RNG to use.\n * @return {function}     - The created function.\n */\nfunction createShuffle(rng) {\n  var customShuffleInPlace = createShuffleInPlace(rng);\n\n  /**\n   * Function returning the shuffled array.\n   *\n   * @param  {array}  sequence - Target sequence.\n   * @return {array}           - The shuffled sequence.\n   */\n  return function(sequence) {\n    var copy = sequence.slice();\n    customShuffleInPlace(copy);\n\n    return copy;\n  };\n}\n\n/**\n * Default shuffle using `Math.random`.\n */\nvar shuffle = createShuffle(Math.random);\n\n/**\n * Exporting.\n */\nshuffle.createShuffle = createShuffle;\nmodule.exports = shuffle;\n","/**\n * Pandemonium Weighted Index\n * ===========================\n *\n * Function returning a random index from a weighted list of items.\n *\n * [Reference]:\n * http://eli.thegreenplace.net/2010/01/22/weighted-random-generation-in-python\n */\n\n/**\n * Defaults.\n */\nvar DEFAULTS = {\n  rng: Math.random,\n  getWeight: null\n};\n\n/**\n * Function returning upper bound of value in the given sorted array. This\n * is the equivalent of python's `bisect_right`.\n *\n * @param  {array}  array - Target array.\n * @param  {number} value - Number to position.\n * @return {number}\n */\nfunction upperBound(array, value) {\n  var l = array.length,\n      d,\n      c,\n      i = 0;\n\n  while (l) {\n    d = l >>> 1;\n    c = i + d;\n\n    if (value < array[c]) {\n      l = d;\n    }\n    else {\n      i = c + 1;\n      l -= d + 1;\n    }\n  }\n\n  return i;\n}\n\n/**\n * Creating a function returning a weighted random index from a cached\n * cumulative density function.\n *\n * This algorithm is more costly in space because it needs to store O(n)\n * items to cache the CDF but is way faster if one is going to need a random\n * weighted index several times from the same sequence.\n *\n * @param  {object|function} rngOrOptions - Either RNG function or options:\n * @param  {function}          rng        - Custom RNG.\n * @param  {function}          getWeight  - Weight getter.\n * @return {function}\n */\nfunction createCachedWeightedRandomIndex(rngOrOptions, sequence) {\n  var rng,\n      options;\n\n  if (typeof rngOrOptions === 'function') {\n    rng = rngOrOptions;\n    options = {};\n  }\n  else {\n    rng = rngOrOptions.rng || DEFAULTS.rng;\n    options = rngOrOptions;\n  }\n\n  var getWeight = typeof options.getWeight === 'function' ?\n    options.getWeight :\n    null;\n\n  // Computing the cumulative density function of the sequence (CDF)\n  var l = sequence.length;\n\n  var CDF = new Array(l),\n      total = 0,\n      weight;\n\n  for (var i = 0; i < l; i++) {\n    weight = getWeight ? getWeight(sequence[i], i) : sequence[i];\n    total += weight;\n    CDF[i] = total;\n  }\n\n  /**\n   * Weighted random index from the given sequence.\n   *\n   * @return {number}\n   */\n  return function() {\n    var random = rng() * total;\n\n    return upperBound(CDF, random);\n  };\n}\n\n/**\n * Creating a function returning a weighted random index.\n *\n * Note that this function uses the \"King of the hill\" algorithm which runs in\n * linear time O(n) and has some advantages, one being that one does not need\n * to know the weight's sum in advance. However, it may be slower that some\n * other methods because we have to run the RNG function n times.\n *\n * @param  {object|function} rngOrOptions - Either RNG function or options:\n * @param  {function}          rng        - Custom RNG.\n * @param  {function}          getWeight  - Weight getter.\n * @return {function}\n */\nfunction createWeightedRandomIndex(rngOrOptions) {\n  var rng,\n      options;\n\n  if (typeof rngOrOptions === 'function') {\n    rng = rngOrOptions;\n    options = {};\n  }\n  else {\n    rng = rngOrOptions.rng || DEFAULTS.rng;\n    options = rngOrOptions;\n  }\n\n  var getWeight = typeof options.getWeight === 'function' ?\n    options.getWeight :\n    null;\n\n  /**\n   * Weighted random index from the given sequence.\n   *\n   * @param  {array} sequence - Target sequence.\n   * @return {number}\n   */\n  return function(sequence) {\n    var total = 0,\n        winner = 0,\n        weight;\n\n    for (var i = 0, l = sequence.length; i < l; i++) {\n      weight = getWeight ? getWeight(sequence[i], i) : sequence[i];\n\n      total += weight;\n\n      if (rng() * total < weight)\n        winner = i;\n    }\n\n    return winner;\n  };\n}\n\n/**\n * Default weighted index using `Math.random`.\n */\nvar weightedRandomIndex = createWeightedRandomIndex(Math.random);\n\n/**\n * Exporting.\n */\nweightedRandomIndex.createCachedWeightedRandomIndex = createCachedWeightedRandomIndex;\nweightedRandomIndex.createWeightedRandomIndex = createWeightedRandomIndex;\nmodule.exports = weightedRandomIndex;\n","/**\n * Pandemonium Weighted Choice\n * ============================\n *\n * Function returning a random item from a weighted list.\n */\nvar lib = require('./weighted-random-index.js');\n\n/**\n * Creating a function returning a weighted random item from a cached\n * cumulative density function.\n *\n * @param  {object|function} rngOrOptions - Either RNG function or options:\n * @param  {function}          rng        - Custom RNG.\n * @param  {function}          getWeight  - Weight getter.\n * @return {function}\n */\nfunction createCachedWeightedChoice(rngOrOptions, sequence) {\n  var randomIndex = lib.createCachedWeightedRandomIndex(rngOrOptions, sequence);\n\n  /**\n   * Weighted random item from the given sequence.\n   *\n   * @return {number}\n   */\n  return function() {\n    var index = randomIndex();\n\n    return sequence[index];\n  };\n}\n\n/**\n * Creating a function returning a weighted random item.\n *\n * @param  {object|function} rngOrOptions - Either RNG function or options:\n * @param  {function}          rng        - Custom RNG.\n * @param  {function}          getWeight  - Weight getter.\n * @return {function}\n */\nfunction createWeightedChoice(rngOrOptions) {\n  var randomIndex = lib.createWeightedRandomIndex(rngOrOptions);\n\n  /**\n   * Weighted random item from the given sequence.\n   *\n   * @param  {array} sequence - Target sequence.\n   * @return {number}\n   */\n  return function(sequence) {\n    var index = randomIndex(sequence);\n\n    return sequence[index];\n  };\n}\n\n/**\n * Default weighted choice using `Math.random`.\n */\nvar weightedChoice = createWeightedChoice(Math.random);\n\n/**\n * Exporting.\n */\nweightedChoice.createCachedWeightedChoice = createCachedWeightedChoice;\nweightedChoice.createWeightedChoice = createWeightedChoice;\nmodule.exports = weightedChoice;\n","/**\n * Pandemonium Library Endpoint\n * =============================\n *\n * Exporting the library's functions.\n */\nexports.choice = require('./choice.js');\nexports.dangerouslyMutatingSample = require('./dangerously-mutating-sample.js');\nexports.fisherYatesSample = require('./fisher-yates-sample.js');\nexports.geometricReservoirSample = require('./geometric-reservoir-sample.js');\nexports.naiveSample = require('./naive-sample.js');\nexports.random = require('./random.js');\nexports.randomFloat = require('./random-float.js');\nexports.randomIndex = require('./random-index.js');\nexports.randomString = require('./random-string.js');\nexports.reservoirSample = require('./reservoir-sample.js');\nexports.sampleWithReplacements = require('./sample-with-replacements.js');\nexports.shuffle = require('./shuffle.js');\nexports.shuffleInPlace = require('./shuffle-in-place.js');\nexports.weightedChoice = require('./weighted-choice.js');\nexports.weightedRandomIndex = require('./weighted-random-index.js');\n","class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(point) {\n    return new Point(this.x + point.x, this.y + point.y);\n  }\n\n  sub(point) {\n    return new Point(this.x - point.x, this.y - point.y);\n  }\n\n  smult(value) {\n    return new Point(this.x * value, this.y * value);\n  }\n\n  vmult(point) {\n    return new Point(this.x * point.x, this.y * point.y);\n  }\n\n  vscale(scale, origin = new Point(0, 0)) {\n    return origin.add(this.sub(origin).vmult(scale));\n  }\n\n  sscale(scale, origin = new Point(0, 0)) {\n    return this.vscale(new Point(scale, scale), origin);\n  }\n\n}\n\nclass Size {\n  constructor(width, height) {\n    this.width = width;\n    this.height = height;\n  }\n  /**\r\n   * Getters\r\n   */\n\n\n  get ratio() {\n    return this.width / this.height;\n  }\n  /**\r\n   * Methods\r\n   */\n\n\n  sscale(value) {\n    return new Size(this.width * value, this.height * value);\n  }\n\n  fitSize(ratio) {\n    let width;\n    let height; //\n\n    if (this.ratio > ratio) {\n      height = this.height;\n      width = height * ratio;\n    } //\n    else {\n        width = this.width;\n        height = width / ratio;\n      }\n\n    return new Size(width, height);\n  }\n\n  fillSize(ratio) {\n    let width;\n    let height; //\n\n    if (this.ratio > ratio) {\n      width = this.width;\n      height = width / ratio;\n    } //\n    else {\n        height = this.height;\n        width = height * ratio;\n      }\n\n    return new Size(width, height);\n  }\n\n}\n\nclass Rectangle {\n  constructor(origin, size) {\n    this.origin = origin;\n    this.size = size;\n  }\n  /**\r\n   * Getters\r\n   */\n\n\n  get x() {\n    return this.origin.x;\n  }\n\n  get y() {\n    return this.origin.y;\n  }\n\n  get width() {\n    return this.size.width;\n  }\n\n  get height() {\n    return this.size.height;\n  }\n\n  get ratio() {\n    return this.size.ratio;\n  }\n\n  get center() {\n    return this.origin.add(new Point(this.width / 2, this.height / 2));\n  }\n  /**\r\n   * Methods\r\n   */\n\n\n  translate(vector) {\n    return new Rectangle(this.origin.add(vector), this.size);\n  }\n\n  centerSize(size) {\n    const x = this.origin.x + (this.width - size.width) / 2;\n    const y = this.origin.y + (this.height - size.height) / 2;\n    return new Point(x, y);\n  }\n\n  fitRectangleCenter(ratio) {\n    // Getting the base size\n    const size = this.size.fitSize(ratio); //\n\n    return new Rectangle(this.centerSize(size), size);\n  }\n\n  fillRectangleCenter(ratio) {\n    // Getting base size\n    const size = this.size.fillSize(ratio); //\n\n    return new Rectangle(this.centerSize(size), size);\n  }\n\n}\n\nclass Cell extends Rectangle {\n  constructor(origin, size, index) {\n    super(origin, size);\n    this.index = index;\n  }\n  /**\r\n   * Getters\r\n   */\n\n\n  get i() {\n    return this.index.i;\n  }\n\n  get j() {\n    return this.index.j;\n  }\n\n}\n\nclass Grid {\n  constructor(rows, columns, cell, spacing = {\n    column: 0,\n    row: 0\n  }, origin = new Point(0, 0)) {\n    this.rows = rows;\n    this.columns = columns;\n    this.cell = cell;\n    this.spacing = spacing;\n    this.origin = origin;\n  }\n  /**\r\n   * Getters\r\n   */\n\n\n  get height() {\n    return this.rows * this.cell.height + (this.rows - 1) * this.spacing.row;\n  }\n\n  get width() {\n    return this.columns * this.cell.width + (this.columns - 1) * this.spacing.column;\n  }\n\n  get size() {\n    return new Size(this.width, this.height);\n  }\n\n  get ratio() {\n    return this.size.ratio;\n  }\n\n  get rectangle() {\n    return new Rectangle(this.origin, this.size);\n  }\n\n  setOrigin(point) {\n    this.origin = point;\n    return this;\n  }\n  /**\r\n   * Methods\r\n   */\n\n\n  getCells(origin = this.origin) {\n    // Array contaning all cells\n    const cells = []; // Iterating over rows\n\n    for (let r = 0; r < this.rows; r++) {\n      const y = origin.y + r * (this.cell.height + this.spacing.row); // Iterating over columns\n\n      for (let c = 0; c < this.columns; c++) {\n        const x = origin.x + c * (this.cell.width + this.spacing.column); // Adding new cell\n\n        cells.push(new Cell(new Point(x, y), this.cell, {\n          i: r,\n          j: c\n        }));\n      }\n    }\n\n    return cells;\n  }\n\n  fillHeight(height) {\n    const f = height / this.height;\n    return new Grid(this.rows, this.columns, this.cell.sscale(f), {\n      column: this.spacing.column * f,\n      row: this.spacing.row * f\n    });\n  }\n\n  fillWidth(width) {\n    const f = width / this.width;\n    return new Grid(this.rows, this.columns, this.cell.sscale(f), {\n      column: this.spacing.column * f,\n      row: this.spacing.row * f\n    });\n  }\n\n}\n\nfunction getCanvasGrid(mode, canvas, grid) {\n  // Creating canvas rectangle\n  const canvasRect = new Rectangle(new Point(canvas.x, canvas.y), new Size(canvas.width, canvas.height)); // Creating unit grid\n\n  const unitGrid = new Grid(grid.rows, grid.columns, new Size(grid.cell_ratio, 1), grid.spacing); // Creating grid rectangle\n\n  let gridRect;\n\n  if (mode == \"fill\") {\n    gridRect = canvasRect.fillRectangleCenter(unitGrid.ratio);\n  } else {\n    gridRect = canvasRect.fitRectangleCenter(unitGrid.ratio);\n  } // Setting origin\n\n\n  const origin = canvasRect.origin.add(gridRect.origin); // Scaling grid\n\n  return unitGrid.fillHeight(gridRect.height).setOrigin(origin);\n}\n\nexport { Cell, Grid, Point, Rectangle, Size, getCanvasGrid };\n//# sourceMappingURL=index.modern.js.map\n","/**\n * Imports\n */\n// All the definitions\nimport { Tiles, } from \"./defs\";\n// Tiles\nimport { tile_wave, tile_peak, tile_line } from \"./tiles\";\n// Randomness functions\nimport rwc from \"random-weighted-choice\";\nimport { choice } from \"pandemonium\";\n// Geometry\nimport { Point, Size, Rectangle, Grid } from \"@bbtgnn/canvasgrid\";\n// Paper\nimport paper from \"paper\";\n// Canvas ops\nimport { deleteCanvas, createCanvas } from \"./crudCanvas\";\n// Util\nimport { nanoid } from \"nanoid\";\n/**\n * Canvas\n */\nexport function makeCanvas(config) {\n    // Canvas ID\n    const canvas_id = \"hackanvas\";\n    const canvas_parent_id = \"output\";\n    // Deleting canvas if there's one\n    deleteCanvas(canvas_id);\n    // Creating a new one\n    return createCanvas(canvas_id, document.getElementById(canvas_parent_id), config.canvas.width, config.canvas.height);\n}\n/**\n * Grid\n */\nexport function getCanvasRect(config) {\n    return new Rectangle(new Point(0, 0), new Size(config.canvas.width, config.canvas.height));\n}\nexport function getUnitGrid(config) {\n    return new Grid(config.grid.rows, config.grid.columns, new Size(config.grid.cell_ratio, 1), {\n        column: config.grid.spacing.column * config.grid.cell_ratio,\n        row: config.grid.spacing.row,\n    });\n}\nexport function getGridRect(canvasRect, unitGrid, fill) {\n    //\n    if (fill) {\n        return canvasRect.fillRectangleCenter(unitGrid.ratio);\n    }\n    //\n    else {\n        return canvasRect.fitRectangleCenter(unitGrid.ratio);\n    }\n}\nexport function getGrid(config) {\n    const canvasRect = getCanvasRect(config);\n    const unitGrid = getUnitGrid(config);\n    const gridRect = getGridRect(canvasRect, unitGrid, config.grid.fill);\n    const grid = unitGrid.fillHeight(gridRect.height);\n    grid.setOrigin(gridRect.origin);\n    return grid;\n}\n/**\n * Tiles\n */\nexport function getTiles(config) {\n    // Empty array will store tiles\n    const tiles = [];\n    // Building table of choices\n    const tiles_table = [\n        { weight: config.tiles.line.density, id: Tiles[0] },\n        { weight: config.tiles.wave.density, id: Tiles[1] },\n        { weight: config.tiles.peak.density, id: Tiles[2] },\n    ];\n    // Appending tiles\n    const count = config.grid.rows * config.grid.columns;\n    for (let i = 0; i < count; i++) {\n        tiles.push(rwc(tiles_table));\n    }\n    return tiles;\n}\nexport function drawTile(tile, rect, config) {\n    //\n    if (tile == \"line\") {\n        return tile_line(rect);\n    }\n    //\n    else if (tile == \"wave\") {\n        return tile_wave(rect, choice([-1, 1]), config.tiles.wave.squaring);\n    }\n    //\n    else if (tile == \"peak\") {\n        return tile_peak(rect, choice([-1, 1]), config.tiles.peak.squaring);\n    }\n}\n/**\n * Colors\n */\n/**\n * Returns an array of colors based on \"tile\" ColorMode\n */\nexport function getColorsTileMode(colorConfig, tiles) {\n    // Empty array will store colors\n    const colors = [];\n    // Iterating over each tile\n    for (let tile of tiles) {\n        colors.push(colorConfig.tile[tile]);\n    }\n    return colors;\n}\n/**\n * Returns an array of colors based on \"distribution\" ColorMode\n */\nexport function getColorsDistributionMode(colorConfig, count) {\n    // Empty array will store colors\n    const colors = [];\n    // Building table of choices\n    const table = [];\n    for (let color of Object.keys(colorConfig.distribution)) {\n        table.push({\n            weight: colorConfig.distribution[color],\n            id: color,\n        });\n    }\n    // Iterating over each tile\n    for (let i = 0; i < count; i++) {\n        colors.push(rwc(table));\n    }\n    return colors;\n}\n/**\n * Returns an array of colors based on colorconfig and tiles\n */\nexport function getColors(colorConfig, tiles) {\n    //\n    if (colorConfig.mode == \"distribution\") {\n        return getColorsDistributionMode(colorConfig, tiles.length);\n    }\n    //\n    else if (colorConfig.mode == \"tile\") {\n        return getColorsTileMode(colorConfig, tiles);\n    }\n    //\n    else if (colorConfig.mode == \"gradient\") {\n        return undefined;\n    }\n}\n/**\n * Thickness\n */\nexport function getThicknessValuesMode(thicknessConfig, count) {\n    const thicknesses = [];\n    for (let i = 0; i < count; i++) {\n        thicknesses.push(choice(thicknessConfig.values));\n    }\n    return thicknesses;\n}\nexport async function getThicknessImageMode(config, grid) {\n    // Creating image\n    const img = makeImage(config.thickness.image.url);\n    // Adding it to document\n    document.body.appendChild(img);\n    // Placing it in paperjs\n    const img_raster = await placeImagePromise(img, grid.rectangle);\n    // Rasterizing it\n    const colors = rasterizeByGrid(img_raster, grid);\n    // Converting to 0-1\n    const values = colorsToValues(colors);\n    // Mapping them to min-max\n    const values_map = mapValues(values, 0, 1, config.thickness.image.min, config.thickness.image.max);\n    // Quantizing them\n    const values_quant = quantizeValues(values_map, config.thickness.image.steps, config.thickness.image.min, config.thickness.image.max);\n    // Cleaning up\n    img.remove();\n    img_raster.remove();\n    //\n    return values_quant;\n}\nexport async function getThickness(config, grid) {\n    //\n    if (config.thickness.mode == \"image\" &&\n        config.thickness.image.url != undefined) {\n        return getThicknessImageMode(config, grid);\n    }\n    //\n    else {\n        return getThicknessValuesMode(config.thickness, grid.rows * grid.columns);\n    }\n}\n/**\n * Image ops\n */\nexport function makeImage(data) {\n    const img = document.createElement(\"img\");\n    img.src = data;\n    img.id = nanoid(5);\n    img.style.display = \"none\";\n    return img;\n}\nexport function placeImage(img, rect) {\n    // Creating image\n    const image = new paper.Raster(img);\n    // Fitting image to rectangle\n    const image_ratio = image.width / image.height;\n    const image_rect = rect.fillRectangleCenter(image_ratio);\n    // Setting boundaries and origin\n    image.size = new paper.Size(image_rect);\n    image.position = new paper.Point(rect.center);\n    return image;\n}\nexport function placeImagePromise(img, rect) {\n    return new Promise((resolve, reject) => {\n        // Creating image\n        const image = new paper.Raster(img);\n        // Fitting image to rectangle\n        const image_ratio = image.width / image.height;\n        const image_rect = rect.fillRectangleCenter(image_ratio);\n        // Setting boundaries and origin\n        image.size = new paper.Size(image_rect);\n        image.position = new paper.Point(rect.center);\n        image.onLoad = () => resolve(image);\n    });\n}\nexport function rasterizeByGrid(image, grid) {\n    // Empty array will store colors\n    const colors = [];\n    // Iterating over grid cells\n    for (let cell of grid.getCells()) {\n        const rect = new paper.Rectangle(cell);\n        const color = image.getAverageColor(rect);\n        colors.push(color);\n    }\n    return colors;\n}\nexport function colorsToValues(colors) {\n    const values = [];\n    for (const color of colors) {\n        values.push(1 - color.gray);\n    }\n    return values;\n}\nexport function quantizeValues(values, bins, min, max) {\n    const step = (max - min) / bins;\n    //\n    const bounds = [];\n    for (let i = 0; i < bins; i++) {\n        bounds.push(min + step * i);\n    }\n    bounds.push(max);\n    //\n    return values.map((value) => {\n        for (let i = 0; i < bounds.length - 1; i++) {\n            const lower_bound = bounds[i];\n            const upper_bound = bounds[i + 1];\n            if (value >= lower_bound && value <= upper_bound) {\n                return upper_bound == max ? upper_bound : lower_bound;\n            }\n        }\n    });\n}\nexport function mapValue(v, old_min, old_max, new_min, new_max) {\n    return ((v - old_min) / (old_max - old_min)) * (new_max - new_min) + new_min;\n}\nexport function mapValues(list, old_min, old_max, new_min, new_max) {\n    return list.map((value) => mapValue(value, old_min, old_max, new_min, new_max));\n}\n/**\n * Gradient\n */\nexport function getGradient(gradientConfig, rect) {\n    return {\n        gradient: {\n            stops: [\n                new paper.GradientStop(new paper.Color(gradientConfig.first.color), 0),\n                new paper.GradientStop(new paper.Color(gradientConfig.second.color), 1),\n            ],\n            radial: true,\n        },\n        origin: rect.bounds[gradientConfig.first.position],\n        destination: rect.bounds[gradientConfig.second.position],\n    };\n}\nexport function drawGradient(gradientConfig, grid) {\n    // Creating rectangle\n    const bg = new paper.Rectangle(new paper.Point(grid.origin), new paper.Size(grid.size));\n    // Coloring it\n    const bg_path = new paper.Path.Rectangle(bg);\n    bg_path.fillColor = getGradient(gradientConfig, bg_path);\n}\n","export function deleteCanvas(id) {\n    const canvas_old = document.getElementById(id);\n    if (canvas_old) {\n        canvas_old.remove();\n    }\n}\nexport function createCanvas(id, parent, width, height) {\n    // Creating canvas\n    const canvas = document.createElement(\"CANVAS\");\n    canvas.id = id;\n    canvas.width = width;\n    canvas.height = height;\n    // Appending canvas\n    parent.appendChild(canvas);\n    return canvas;\n}\n","import paper from \"paper\";\nexport function tile_line(r) {\n    // Calculating origin point\n    const p = new paper.Point(r.x + r.width / 2, r.y);\n    // Getting path\n    const path = new paper.Path.Line(p, p.add(new paper.Point(0, r.height)));\n    return path;\n}\n","import { get } from \"svelte/store\";\nimport { PatternStore } from \"../stores\";\nimport paper from \"paper\";\nimport { makeCanvas, getGrid, getTiles, getColors, drawTile, getThickness, drawGradient, } from \"./drawOps\";\nexport async function draw() {\n    // Getting store with data\n    const config = get(PatternStore);\n    // Creating canvas\n    const canvas = makeCanvas(config);\n    // Setup paperjs\n    paper.setup(canvas);\n    /**\n     * Drawing cells\n     */\n    // Getting pattern data\n    const grid = getGrid(config);\n    const cells = grid.getCells();\n    const tiles = getTiles(config);\n    const colors_background = getColors(config.color.background, tiles);\n    const colors_tile = getColors(config.color.tiles, tiles);\n    const thicknesses = await getThickness(config, grid);\n    // Doing gradient if asked\n    if (colors_background == undefined) {\n        drawGradient(config.color.background.gradient, grid);\n    }\n    // Drawing pattern\n    for (let i = 0; i < tiles.length; i++) {\n        const tile = tiles[i];\n        const cell = cells[i];\n        const cell_rect = new paper.Rectangle(cell);\n        const color_tile = colors_tile[i];\n        // Background\n        if (colors_background != undefined) {\n            const color_background = colors_background[i];\n            let bg_path = new paper.Path.Rectangle(cell_rect);\n            bg_path.fillColor = color_background;\n        }\n        // Drawing tile accordingly\n        let tile_path = drawTile(tile, cell_rect, config);\n        tile_path.strokeColor = color_tile;\n        tile_path.strokeWidth = thicknesses[i] * cell.width;\n    }\n    /**\n     * Running paper\n     */\n    paper.view.draw();\n}\n// It's super important to have some delay!\n// Some changes might not be captured because of the update speed of Svelte\nexport function handleDraw() {\n    setTimeout(function () {\n        draw();\n    }, 10);\n}\n","<script lang=\"ts\">\n  // Svelte imports\n  import InputItem from \"./InputItem.svelte\";\n  import InputInteger from \"./InputInteger.svelte\";\n  import InputFloat from \"./InputFloat.svelte\";\n  import InputCRUD from \"./InputCRUD.svelte\";\n  import InputRadio from \"./InputRadio.svelte\";\n  import InputFile from \"./InputFile.svelte\";\n  import InputSeparator from \"./InputSeparator.svelte\";\n\n  // Stores with data\n  import { PatternStore, TextStore } from \"../stores\";\n\n  // Functions & defs\n  import { handleDraw } from \"../ts/draw\";\n  import { ThicknessModes } from \"../ts/defs\";\n</script>\n\n<!-- Radio buttons to select the thickness mode -->\n<InputItem>\n  <InputRadio\n    on:update={handleDraw}\n    bind:value={$PatternStore.thickness.mode}\n    items={[...ThicknessModes].reverse()}\n    labels={$TextStore.thickness_modes}\n  />\n</InputItem>\n<!--  -->\n<InputSeparator />\n<!--  -->\n{#if $PatternStore.thickness.mode == \"image\"}\n  <InputItem>\n    <InputFile\n      on:upload={(e) => {\n        $PatternStore.thickness.image.url = e.detail.file;\n      }}\n    />\n  </InputItem>\n  <!--  -->\n  <InputItem>\n    <InputInteger\n      label=\"Numero di step\"\n      bind:value={$PatternStore.thickness.image.steps}\n    />\n  </InputItem>\n  <!--  -->\n  <InputItem>\n    <InputFloat\n      label=\"Spessore minimo\"\n      bind:value={$PatternStore.thickness.image.min}\n    />\n  </InputItem>\n  <!--  -->\n  <InputItem>\n    <InputFloat\n      label=\"Spessore massimo\"\n      bind:value={$PatternStore.thickness.image.max}\n    />\n  </InputItem>\n{:else}\n  <InputItem>\n    <InputCRUD\n      on:update={handleDraw}\n      bind:array={$PatternStore.thickness.values}\n    />\n  </InputItem>\n{/if}\n","/*Copyrights for code authored by Yahoo Inc. is licensed under the following terms:\nMIT License\nCopyright  2017 Yahoo Inc.\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n;(function(window, document, navigator, undefined) {\n\"use strict\";\n\n/*\n  utils.js\n  ========\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\nvar utils = {\n    URL: window.URL || window.webkitURL || window.mozURL || window.msURL,\n    getUserMedia: function () {\n        var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n        return getUserMedia ? getUserMedia.bind(navigator) : getUserMedia;\n    }(),\n    requestAnimFrame: window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame,\n    requestTimeout: function requestTimeout(callback, delay) {\n        callback = callback || utils.noop;\n        delay = delay || 0;\n\n        if (!utils.requestAnimFrame) {\n            return setTimeout(callback, delay);\n        }\n\n        var start = new Date().getTime();\n        var handle = new Object();\n        var requestAnimFrame = utils.requestAnimFrame;\n\n        var loop = function loop() {\n            var current = new Date().getTime();\n            var delta = current - start;\n\n            delta >= delay ? callback.call() : handle.value = requestAnimFrame(loop);\n        };\n\n        handle.value = requestAnimFrame(loop);\n\n        return handle;\n    },\n    Blob: window.Blob || window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\n    btoa: function () {\n        var btoa = window.btoa || function (input) {\n            var output = '';\n            var i = 0;\n            var l = input.length;\n            var key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n            var chr1 = void 0;\n            var chr2 = void 0;\n            var chr3 = void 0;\n            var enc1 = void 0;\n            var enc2 = void 0;\n            var enc3 = void 0;\n            var enc4 = void 0;\n\n            while (i < l) {\n                chr1 = input.charCodeAt(i++);\n                chr2 = input.charCodeAt(i++);\n                chr3 = input.charCodeAt(i++);\n                enc1 = chr1 >> 2;\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n                enc4 = chr3 & 63;\n\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n\n                output = output + key.charAt(enc1) + key.charAt(enc2) + key.charAt(enc3) + key.charAt(enc4);\n            }\n\n            return output;\n        };\n\n        return btoa ? btoa.bind(window) : utils.noop;\n    }(),\n    isObject: function isObject(obj) {\n        return obj && Object.prototype.toString.call(obj) === '[object Object]';\n    },\n    isEmptyObject: function isEmptyObject(obj) {\n        return utils.isObject(obj) && !Object.keys(obj).length;\n    },\n    isArray: function isArray(arr) {\n        return arr && Array.isArray(arr);\n    },\n    isFunction: function isFunction(func) {\n        return func && typeof func === 'function';\n    },\n    isElement: function isElement(elem) {\n        return elem && elem.nodeType === 1;\n    },\n    isString: function isString(value) {\n        return typeof value === 'string' || Object.prototype.toString.call(value) === '[object String]';\n    },\n    isSupported: {\n        canvas: function canvas() {\n            var el = document.createElement('canvas');\n\n            return el && el.getContext && el.getContext('2d');\n        },\n        webworkers: function webworkers() {\n            return window.Worker;\n        },\n        blob: function blob() {\n            return utils.Blob;\n        },\n        Uint8Array: function Uint8Array() {\n            return window.Uint8Array;\n        },\n        Uint32Array: function Uint32Array() {\n            return window.Uint32Array;\n        },\n        videoCodecs: function () {\n            var testEl = document.createElement('video');\n            var supportObj = {\n                'mp4': false,\n                'h264': false,\n                'ogv': false,\n                'ogg': false,\n                'webm': false\n            };\n\n            try {\n                if (testEl && testEl.canPlayType) {\n                    // Check for MPEG-4 support\n                    supportObj.mp4 = testEl.canPlayType('video/mp4; codecs=\"mp4v.20.8\"') !== '';\n\n                    // Check for h264 support\n                    supportObj.h264 = (testEl.canPlayType('video/mp4; codecs=\"avc1.42E01E\"') || testEl.canPlayType('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"')) !== '';\n\n                    // Check for Ogv support\n                    supportObj.ogv = testEl.canPlayType('video/ogg; codecs=\"theora\"') !== '';\n\n                    // Check for Ogg support\n                    supportObj.ogg = testEl.canPlayType('video/ogg; codecs=\"theora\"') !== '';\n\n                    // Check for Webm support\n                    supportObj.webm = testEl.canPlayType('video/webm; codecs=\"vp8, vorbis\"') !== -1;\n                }\n            } catch (e) {}\n\n            return supportObj;\n        }()\n    },\n    noop: function noop() {},\n    each: function each(collection, callback) {\n        var x = void 0;\n        var len = void 0;\n\n        if (utils.isArray(collection)) {\n            x = -1;\n            len = collection.length;\n\n            while (++x < len) {\n                if (callback(x, collection[x]) === false) {\n                    break;\n                }\n            }\n        } else if (utils.isObject(collection)) {\n            for (x in collection) {\n                if (collection.hasOwnProperty(x)) {\n                    if (callback(x, collection[x]) === false) {\n                        break;\n                    }\n                }\n            }\n        }\n    },\n    mergeOptions: function mergeOptions(defaultOptions, userOptions) {\n        if (!utils.isObject(defaultOptions) || !utils.isObject(userOptions) || !Object.keys) {\n            return;\n        }\n\n        var newObj = {};\n\n        utils.each(defaultOptions, function (key, val) {\n            newObj[key] = defaultOptions[key];\n        });\n\n        utils.each(userOptions, function (key, val) {\n            var currentUserOption = userOptions[key];\n\n            if (!utils.isObject(currentUserOption)) {\n                newObj[key] = currentUserOption;\n            } else {\n                if (!defaultOptions[key]) {\n                    newObj[key] = currentUserOption;\n                } else {\n                    newObj[key] = utils.mergeOptions(defaultOptions[key], currentUserOption);\n                }\n            }\n        });\n\n        return newObj;\n    },\n    setCSSAttr: function setCSSAttr(elem, attr, val) {\n        if (!utils.isElement(elem)) {\n            return;\n        }\n\n        if (utils.isString(attr) && utils.isString(val)) {\n            elem.style[attr] = val;\n        } else if (utils.isObject(attr)) {\n            utils.each(attr, function (key, val) {\n                elem.style[key] = val;\n            });\n        }\n    },\n    removeElement: function removeElement(node) {\n        if (!utils.isElement(node)) {\n            return;\n        }\n        if (node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n    createWebWorker: function createWebWorker(content) {\n        if (!utils.isString(content)) {\n            return {};\n        }\n\n        try {\n            var blob = new utils.Blob([content], {\n                'type': 'text/javascript'\n            });\n            var objectUrl = utils.URL.createObjectURL(blob);\n            var worker = new Worker(objectUrl);\n\n            return {\n                'objectUrl': objectUrl,\n                'worker': worker\n            };\n        } catch (e) {\n            return '' + e;\n        }\n    },\n    getExtension: function getExtension(src) {\n        return src.substr(src.lastIndexOf('.') + 1, src.length);\n    },\n    getFontSize: function getFontSize() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        if (!document.body || options.resizeFont === false) {\n            return options.fontSize;\n        }\n\n        var text = options.text;\n        var containerWidth = options.gifWidth;\n        var fontSize = parseInt(options.fontSize, 10);\n        var minFontSize = parseInt(options.minFontSize, 10);\n        var div = document.createElement('div');\n        var span = document.createElement('span');\n\n        div.setAttribute('width', containerWidth);\n        div.appendChild(span);\n\n        span.innerHTML = text;\n        span.style.fontSize = fontSize + 'px';\n        span.style.textIndent = '-9999px';\n        span.style.visibility = 'hidden';\n\n        document.body.appendChild(span);\n\n        while (span.offsetWidth > containerWidth && fontSize >= minFontSize) {\n            span.style.fontSize = --fontSize + 'px';\n        }\n\n        document.body.removeChild(span);\n\n        return fontSize + 'px';\n    },\n    webWorkerError: false\n};\n\n\n\nvar utils$2 = Object.freeze({\n\tdefault: utils\n});\n\n/*\n  error.js\n  ========\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nvar error = {\n    validate: function validate(skipObj) {\n        skipObj = utils.isObject(skipObj) ? skipObj : {};\n\n        var errorObj = {};\n\n        utils.each(error.validators, function (indece, currentValidator) {\n            var errorCode = currentValidator.errorCode;\n\n            if (!skipObj[errorCode] && !currentValidator.condition) {\n                errorObj = currentValidator;\n                errorObj.error = true;\n\n                return false;\n            }\n        });\n\n        delete errorObj.condition;\n\n        return errorObj;\n    },\n    isValid: function isValid(skipObj) {\n        var errorObj = error.validate(skipObj);\n        var isValid = errorObj.error !== true ? true : false;\n\n        return isValid;\n    },\n    validators: [{\n        condition: utils.isFunction(utils.getUserMedia),\n        errorCode: 'getUserMedia',\n        errorMsg: 'The getUserMedia API is not supported in your browser'\n    }, {\n        condition: utils.isSupported.canvas(),\n        errorCode: 'canvas',\n        errorMsg: 'Canvas elements are not supported in your browser'\n    }, {\n        condition: utils.isSupported.webworkers(),\n        errorCode: 'webworkers',\n        errorMsg: 'The Web Workers API is not supported in your browser'\n    }, {\n        condition: utils.isFunction(utils.URL),\n        errorCode: 'window.URL',\n        errorMsg: 'The window.URL API is not supported in your browser'\n    }, {\n        condition: utils.isSupported.blob(),\n        errorCode: 'window.Blob',\n        errorMsg: 'The window.Blob File API is not supported in your browser'\n    }, {\n        condition: utils.isSupported.Uint8Array(),\n        errorCode: 'window.Uint8Array',\n        errorMsg: 'The window.Uint8Array function constructor is not supported in your browser'\n    }, {\n        condition: utils.isSupported.Uint32Array(),\n        errorCode: 'window.Uint32Array',\n        errorMsg: 'The window.Uint32Array function constructor is not supported in your browser'\n    }],\n    messages: {\n        videoCodecs: {\n            errorCode: 'videocodec',\n            errorMsg: 'The video codec you are trying to use is not supported in your browser'\n        }\n    }\n};\n\n\n\nvar error$2 = Object.freeze({\n\tdefault: error\n});\n\n/*\n  defaultOptions.js\n  =================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Helpers\nvar noop = function noop() {};\n\nvar defaultOptions = {\n    sampleInterval: 10,\n    numWorkers: 2,\n    filter: '',\n    gifWidth: 200,\n    gifHeight: 200,\n    interval: 0.1,\n    numFrames: 10,\n    frameDuration: 1,\n    keepCameraOn: false,\n    images: [],\n    video: null,\n    webcamVideoElement: null,\n    cameraStream: null,\n    text: '',\n    fontWeight: 'normal',\n    fontSize: '16px',\n    minFontSize: '10px',\n    resizeFont: false,\n    fontFamily: 'sans-serif',\n    fontColor: '#ffffff',\n    textAlign: 'center',\n    textBaseline: 'bottom',\n    textXCoordinate: null,\n    textYCoordinate: null,\n    progressCallback: noop,\n    completeCallback: noop,\n    saveRenderingContexts: false,\n    savedRenderingContexts: [],\n    crossOrigin: 'Anonymous'\n};\n\n\n\nvar defaultOptions$2 = Object.freeze({\n\tdefault: defaultOptions\n});\n\n/*\n  isSupported.js\n  ==============\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nfunction isSupported() {\n  return error.isValid();\n}\n\n/*\n  isWebCamGIFSupported.js\n  =======================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\nfunction isWebCamGIFSupported() {\n  return error.isValid();\n}\n\n/*\n  isSupported.js\n  ==============\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nfunction isSupported$1() {\n    var options = {\n        getUserMedia: true\n    };\n\n    return error.isValid(options);\n}\n\n/*\n  isExistingVideoGIFSupported.js\n  ==============================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nfunction isExistingVideoGIFSupported(codecs) {\n    var hasValidCodec = false;\n\n    if (utils.isArray(codecs) && codecs.length) {\n        utils.each(codecs, function (indece, currentCodec) {\n            if (utils.isSupported.videoCodecs[currentCodec]) {\n                hasValidCodec = true;\n            }\n        });\n\n        if (!hasValidCodec) {\n            return false;\n        }\n    } else if (utils.isString(codecs) && codecs.length) {\n        if (!utils.isSupported.videoCodecs[codecs]) {\n            return false;\n        }\n    }\n\n    return error.isValid({\n        'getUserMedia': true\n    });\n}\n\n/*\n  NeuQuant.js\n  ===========\n*/\n\n/*\n * NeuQuant Neural-Net Quantization Algorithm\n * ------------------------------------------\n *\n * Copyright (c) 1994 Anthony Dekker\n *\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\n * the algorithm.\n *\n * Any party obtaining a copy of these files from the author, directly or\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\n * this software and documentation files (the \"Software\"), including without\n * limitation the rights to use, copy, modify, merge, publish, distribute,\n * sublicense, and/or sell copies of the Software, and to permit persons who\n * receive copies from any such party to do so, with the only requirement being\n * that this copyright notice remain intact.\n */\n\n/*\n * This class handles Neural-Net quantization algorithm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @version 0.1 AS3 implementation\n * @version 0.2 JS->AS3 \"translation\" by antimatter15\n * @version 0.3 JS clean up + using modern JS idioms by sole - http://soledadpenades.com\n * Also implement fix in color conversion described at http://stackoverflow.com/questions/16371712/neuquant-js-javascript-color-quantization-hidden-bug-in-js-conversion\n */\n\nfunction NeuQuant() {\n  var netsize = 256; // number of colours used\n\n  // four primes near 500 - assume no image has a length so large\n  // that it is divisible by all four primes\n  var prime1 = 499;\n  var prime2 = 491;\n  var prime3 = 487;\n  var prime4 = 503;\n\n  // minimum size for input image\n  var minpicturebytes = 3 * prime4;\n\n  // Network Definitions\n\n  var maxnetpos = netsize - 1;\n  var netbiasshift = 4; // bias for colour values\n  var ncycles = 100; // no. of learning cycles\n\n  // defs for freq and bias\n  var intbiasshift = 16; // bias for fractions\n  var intbias = 1 << intbiasshift;\n  var gammashift = 10; // gamma = 1024\n  var gamma = 1 << gammashift;\n  var betashift = 10;\n  var beta = intbias >> betashift; // beta = 1/1024\n  var betagamma = intbias << gammashift - betashift;\n\n  // defs for decreasing radius factor\n  // For 256 colors, radius starts at 32.0 biased by 6 bits\n  // and decreases by a factor of 1/30 each cycle\n  var initrad = netsize >> 3;\n  var radiusbiasshift = 6;\n  var radiusbias = 1 << radiusbiasshift;\n  var initradius = initrad * radiusbias;\n  var radiusdec = 30;\n\n  // defs for decreasing alpha factor\n  // Alpha starts at 1.0 biased by 10 bits\n  var alphabiasshift = 10;\n  var initalpha = 1 << alphabiasshift;\n  var alphadec;\n\n  // radbias and alpharadbias used for radpower calculation\n  var radbiasshift = 8;\n  var radbias = 1 << radbiasshift;\n  var alpharadbshift = alphabiasshift + radbiasshift;\n  var alpharadbias = 1 << alpharadbshift;\n\n  // Input image\n  var thepicture;\n  // Height * Width * 3\n  var lengthcount;\n  // Sampling factor 1..30\n  var samplefac;\n\n  // The network itself\n  var network;\n  var netindex = [];\n\n  // for network lookup - really 256\n  var bias = [];\n\n  // bias and freq arrays for learning\n  var freq = [];\n  var radpower = [];\n\n  function NeuQuantConstructor(thepic, len, sample) {\n\n    var i;\n    var p;\n\n    thepicture = thepic;\n    lengthcount = len;\n    samplefac = sample;\n\n    network = new Array(netsize);\n\n    for (i = 0; i < netsize; i++) {\n      network[i] = new Array(4);\n      p = network[i];\n      p[0] = p[1] = p[2] = (i << netbiasshift + 8) / netsize | 0;\n      freq[i] = intbias / netsize | 0; // 1 / netsize\n      bias[i] = 0;\n    }\n  }\n\n  function colorMap() {\n    var map = [];\n    var index = new Array(netsize);\n    for (var i = 0; i < netsize; i++) {\n      index[network[i][3]] = i;\n    }var k = 0;\n    for (var l = 0; l < netsize; l++) {\n      var j = index[l];\n      map[k++] = network[j][0];\n      map[k++] = network[j][1];\n      map[k++] = network[j][2];\n    }\n    return map;\n  }\n\n  // Insertion sort of network and building of netindex[0..255]\n  // (to do after unbias)\n  function inxbuild() {\n    var i;\n    var j;\n    var smallpos;\n    var smallval;\n    var p;\n    var q;\n    var previouscol;\n    var startpos;\n\n    previouscol = 0;\n    startpos = 0;\n\n    for (i = 0; i < netsize; i++) {\n\n      p = network[i];\n      smallpos = i;\n      smallval = p[1]; // index on g\n      // find smallest in i..netsize-1\n      for (j = i + 1; j < netsize; j++) {\n\n        q = network[j];\n\n        if (q[1] < smallval) {\n          // index on g\n          smallpos = j;\n          smallval = q[1]; // index on g\n        }\n      }\n\n      q = network[smallpos];\n\n      // swap p (i) and q (smallpos) entries\n      if (i != smallpos) {\n        j = q[0];\n        q[0] = p[0];\n        p[0] = j;\n        j = q[1];\n        q[1] = p[1];\n        p[1] = j;\n        j = q[2];\n        q[2] = p[2];\n        p[2] = j;\n        j = q[3];\n        q[3] = p[3];\n        p[3] = j;\n      }\n\n      // smallval entry is now in position i\n      if (smallval != previouscol) {\n\n        netindex[previouscol] = startpos + i >> 1;\n\n        for (j = previouscol + 1; j < smallval; j++) {\n          netindex[j] = i;\n        }\n\n        previouscol = smallval;\n        startpos = i;\n      }\n    }\n\n    netindex[previouscol] = startpos + maxnetpos >> 1;\n    for (j = previouscol + 1; j < 256; j++) {\n      netindex[j] = maxnetpos; // really 256\n    }\n  }\n\n  // Main Learning Loop\n\n  function learn() {\n    var i;\n    var j;\n    var b;\n    var g;\n    var r;\n    var radius;\n    var rad;\n    var alpha;\n    var step;\n    var delta;\n    var samplepixels;\n    var p;\n    var pix;\n    var lim;\n\n    if (lengthcount < minpicturebytes) {\n      samplefac = 1;\n    }\n\n    alphadec = 30 + (samplefac - 1) / 3;\n    p = thepicture;\n    pix = 0;\n    lim = lengthcount;\n    samplepixels = lengthcount / (3 * samplefac);\n    delta = samplepixels / ncycles | 0;\n    alpha = initalpha;\n    radius = initradius;\n\n    rad = radius >> radiusbiasshift;\n    if (rad <= 1) {\n      rad = 0;\n    }\n\n    for (i = 0; i < rad; i++) {\n      radpower[i] = alpha * ((rad * rad - i * i) * radbias / (rad * rad));\n    }\n\n    if (lengthcount < minpicturebytes) {\n      step = 3;\n    } else if (lengthcount % prime1 !== 0) {\n      step = 3 * prime1;\n    } else {\n\n      if (lengthcount % prime2 !== 0) {\n        step = 3 * prime2;\n      } else {\n        if (lengthcount % prime3 !== 0) {\n          step = 3 * prime3;\n        } else {\n          step = 3 * prime4;\n        }\n      }\n    }\n\n    i = 0;\n\n    while (i < samplepixels) {\n\n      b = (p[pix + 0] & 0xff) << netbiasshift;\n      g = (p[pix + 1] & 0xff) << netbiasshift;\n      r = (p[pix + 2] & 0xff) << netbiasshift;\n      j = contest(b, g, r);\n\n      altersingle(alpha, j, b, g, r);\n\n      if (rad !== 0) {\n        // Alter neighbours\n        alterneigh(rad, j, b, g, r);\n      }\n\n      pix += step;\n\n      if (pix >= lim) {\n        pix -= lengthcount;\n      }\n\n      i++;\n\n      if (delta === 0) {\n        delta = 1;\n      }\n\n      if (i % delta === 0) {\n        alpha -= alpha / alphadec;\n        radius -= radius / radiusdec;\n        rad = radius >> radiusbiasshift;\n\n        if (rad <= 1) {\n          rad = 0;\n        }\n\n        for (j = 0; j < rad; j++) {\n          radpower[j] = alpha * ((rad * rad - j * j) * radbias / (rad * rad));\n        }\n      }\n    }\n  }\n\n  // Search for BGR values 0..255 (after net is unbiased) and return colour index\n  function map(b, g, r) {\n    var i;\n    var j;\n    var dist;\n    var a;\n    var bestd;\n    var p;\n    var best;\n\n    // Biggest possible distance is 256 * 3\n    bestd = 1000;\n    best = -1;\n    i = netindex[g]; // index on g\n    j = i - 1; // start at netindex[g] and work outwards\n\n    while (i < netsize || j >= 0) {\n\n      if (i < netsize) {\n\n        p = network[i];\n\n        dist = p[1] - g; // inx key\n\n        if (dist >= bestd) {\n          i = netsize; // stop iter\n        } else {\n\n          i++;\n\n          if (dist < 0) {\n            dist = -dist;\n          }\n\n          a = p[0] - b;\n\n          if (a < 0) {\n            a = -a;\n          }\n\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n\n            if (a < 0) {\n              a = -a;\n            }\n\n            dist += a;\n\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n\n      if (j >= 0) {\n\n        p = network[j];\n\n        dist = g - p[1]; // inx key - reverse dif\n\n        if (dist >= bestd) {\n          j = -1; // stop iter\n        } else {\n\n          j--;\n          if (dist < 0) {\n            dist = -dist;\n          }\n          a = p[0] - b;\n          if (a < 0) {\n            a = -a;\n          }\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) {\n              a = -a;\n            }\n            dist += a;\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n    }\n\n    return best;\n  }\n\n  function process() {\n    learn();\n    unbiasnet();\n    inxbuild();\n    return colorMap();\n  }\n\n  // Unbias network to give byte values 0..255 and record position i\n  // to prepare for sort\n  function unbiasnet() {\n    var i;\n    var j;\n\n    for (i = 0; i < netsize; i++) {\n      network[i][0] >>= netbiasshift;\n      network[i][1] >>= netbiasshift;\n      network[i][2] >>= netbiasshift;\n      network[i][3] = i; // record colour no\n    }\n  }\n\n  // Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2))\n  // in radpower[|i-j|]\n  function alterneigh(rad, i, b, g, r) {\n\n    var j;\n    var k;\n    var lo;\n    var hi;\n    var a;\n    var m;\n\n    var p;\n\n    lo = i - rad;\n    if (lo < -1) {\n      lo = -1;\n    }\n\n    hi = i + rad;\n\n    if (hi > netsize) {\n      hi = netsize;\n    }\n\n    j = i + 1;\n    k = i - 1;\n    m = 1;\n\n    while (j < hi || k > lo) {\n\n      a = radpower[m++];\n\n      if (j < hi) {\n\n        p = network[j++];\n\n        try {\n\n          p[0] -= a * (p[0] - b) / alpharadbias | 0;\n          p[1] -= a * (p[1] - g) / alpharadbias | 0;\n          p[2] -= a * (p[2] - r) / alpharadbias | 0;\n        } catch (e) {}\n      }\n\n      if (k > lo) {\n\n        p = network[k--];\n\n        try {\n\n          p[0] -= a * (p[0] - b) / alpharadbias | 0;\n          p[1] -= a * (p[1] - g) / alpharadbias | 0;\n          p[2] -= a * (p[2] - r) / alpharadbias | 0;\n        } catch (e) {}\n      }\n    }\n  }\n\n  // Move neuron i towards biased (b,g,r) by factor alpha\n  function altersingle(alpha, i, b, g, r) {\n\n    // alter hit neuron\n    var n = network[i];\n    var alphaMult = alpha / initalpha;\n    n[0] -= alphaMult * (n[0] - b) | 0;\n    n[1] -= alphaMult * (n[1] - g) | 0;\n    n[2] -= alphaMult * (n[2] - r) | 0;\n  }\n\n  // Search for biased BGR values\n  function contest(b, g, r) {\n\n    // finds closest neuron (min dist) and updates freq\n    // finds best neuron (min dist-bias) and returns position\n    // for frequently chosen neurons, freq[i] is high and bias[i] is negative\n    // bias[i] = gamma*((1/netsize)-freq[i])\n\n    var i;\n    var dist;\n    var a;\n    var biasdist;\n    var betafreq;\n    var bestpos;\n    var bestbiaspos;\n    var bestd;\n    var bestbiasd;\n    var n;\n\n    bestd = ~(1 << 31);\n    bestbiasd = bestd;\n    bestpos = -1;\n    bestbiaspos = bestpos;\n\n    for (i = 0; i < netsize; i++) {\n\n      n = network[i];\n      dist = n[0] - b;\n\n      if (dist < 0) {\n        dist = -dist;\n      }\n\n      a = n[1] - g;\n\n      if (a < 0) {\n        a = -a;\n      }\n\n      dist += a;\n\n      a = n[2] - r;\n\n      if (a < 0) {\n        a = -a;\n      }\n\n      dist += a;\n\n      if (dist < bestd) {\n        bestd = dist;\n        bestpos = i;\n      }\n\n      biasdist = dist - (bias[i] >> intbiasshift - netbiasshift);\n\n      if (biasdist < bestbiasd) {\n        bestbiasd = biasdist;\n        bestbiaspos = i;\n      }\n\n      betafreq = freq[i] >> betashift;\n      freq[i] -= betafreq;\n      bias[i] += betafreq << gammashift;\n    }\n\n    freq[bestpos] += beta;\n    bias[bestpos] -= betagamma;\n    return bestbiaspos;\n  }\n\n  NeuQuantConstructor.apply(this, arguments);\n\n  var exports = {};\n  exports.map = map;\n  exports.process = process;\n\n  return exports;\n}\n\n/*\n  processFrameWorker.js\n  =====================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\nfunction workerCode() {\n    var self = this;\n\n    try {\n        self.onmessage = function (ev) {\n            var data = ev.data || {};\n            var response;\n\n            if (data.gifshot) {\n                response = workerMethods.run(data);\n                postMessage(response);\n            }\n        };\n    } catch (e) {}\n\n    var workerMethods = {\n        dataToRGB: function dataToRGB(data, width, height) {\n            var length = width * height * 4;\n            var i = 0;\n            var rgb = [];\n\n            while (i < length) {\n                rgb.push(data[i++]);\n                rgb.push(data[i++]);\n                rgb.push(data[i++]);\n                i++; // for the alpha channel which we don't care about\n            }\n\n            return rgb;\n        },\n        componentizedPaletteToArray: function componentizedPaletteToArray(paletteRGB) {\n            paletteRGB = paletteRGB || [];\n\n            var paletteArray = [];\n\n            for (var i = 0; i < paletteRGB.length; i += 3) {\n                var r = paletteRGB[i];\n                var g = paletteRGB[i + 1];\n                var b = paletteRGB[i + 2];\n\n                paletteArray.push(r << 16 | g << 8 | b);\n            }\n\n            return paletteArray;\n        },\n        // This is the \"traditional\" Animated_GIF style of going from RGBA to indexed color frames\n        'processFrameWithQuantizer': function processFrameWithQuantizer(imageData, width, height, sampleInterval) {\n            var rgbComponents = this.dataToRGB(imageData, width, height);\n            var nq = new NeuQuant(rgbComponents, rgbComponents.length, sampleInterval);\n            var paletteRGB = nq.process();\n            var paletteArray = new Uint32Array(this.componentizedPaletteToArray(paletteRGB));\n            var numberPixels = width * height;\n            var indexedPixels = new Uint8Array(numberPixels);\n            var k = 0;\n\n            for (var i = 0; i < numberPixels; i++) {\n                var r = rgbComponents[k++];\n                var g = rgbComponents[k++];\n                var b = rgbComponents[k++];\n\n                indexedPixels[i] = nq.map(r, g, b);\n            }\n\n            return {\n                pixels: indexedPixels,\n                palette: paletteArray\n            };\n        },\n        'run': function run(frame) {\n            frame = frame || {};\n\n            var _frame = frame,\n                height = _frame.height,\n                palette = _frame.palette,\n                sampleInterval = _frame.sampleInterval,\n                width = _frame.width;\n\n            var imageData = frame.data;\n\n            return this.processFrameWithQuantizer(imageData, width, height, sampleInterval);\n        }\n    };\n\n    return workerMethods;\n}\n\n/*\n  gifWriter.js\n  ============\n*/\n\n// (c) Dean McNamee <dean@gmail.com>, 2013.\n//\n// https://github.com/deanm/omggif\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n//\n// omggif is a JavaScript implementation of a GIF 89a encoder and decoder,\n// including animation and compression.  It does not rely on any specific\n// underlying system, so should run in the browser, Node, or Plask.\n\nfunction gifWriter(buf, width, height, gopts) {\n  var p = 0;\n\n  gopts = gopts === undefined ? {} : gopts;\n  var loop_count = gopts.loop === undefined ? null : gopts.loop;\n  var global_palette = gopts.palette === undefined ? null : gopts.palette;\n\n  if (width <= 0 || height <= 0 || width > 65535 || height > 65535) throw \"Width/Height invalid.\";\n\n  function check_palette_and_num_colors(palette) {\n    var num_colors = palette.length;\n\n    if (num_colors < 2 || num_colors > 256 || num_colors & num_colors - 1) throw \"Invalid code/color length, must be power of 2 and 2 .. 256.\";\n    return num_colors;\n  }\n\n  // - Header.\n  buf[p++] = 0x47;\n  buf[p++] = 0x49;\n  buf[p++] = 0x46; // GIF\n  buf[p++] = 0x38;\n  buf[p++] = 0x39;\n  buf[p++] = 0x61; // 89a\n\n  // Handling of Global Color Table (palette) and background index.\n  var gp_num_colors_pow2 = 0;\n  var background = 0;\n\n  // - Logical Screen Descriptor.\n  // NOTE(deanm): w/h apparently ignored by implementations, but set anyway.\n  buf[p++] = width & 0xff;\n  buf[p++] = width >> 8 & 0xff;\n  buf[p++] = height & 0xff;\n  buf[p++] = height >> 8 & 0xff;\n  // NOTE: Indicates 0-bpp original color resolution (unused?).\n  buf[p++] = (global_palette !== null ? 0x80 : 0) | // Global Color Table Flag.\n  gp_num_colors_pow2; // NOTE: No sort flag (unused?).\n  buf[p++] = background; // Background Color Index.\n  buf[p++] = 0; // Pixel aspect ratio (unused?).\n\n  if (loop_count !== null) {\n    // Netscape block for looping.\n    if (loop_count < 0 || loop_count > 65535) throw \"Loop count invalid.\";\n\n    // Extension code, label, and length.\n    buf[p++] = 0x21;\n    buf[p++] = 0xff;\n    buf[p++] = 0x0b;\n    // NETSCAPE2.0\n    buf[p++] = 0x4e;\n    buf[p++] = 0x45;\n    buf[p++] = 0x54;\n    buf[p++] = 0x53;\n    buf[p++] = 0x43;\n    buf[p++] = 0x41;\n    buf[p++] = 0x50;\n    buf[p++] = 0x45;\n    buf[p++] = 0x32;\n    buf[p++] = 0x2e;\n    buf[p++] = 0x30;\n    // Sub-block\n    buf[p++] = 0x03;\n    buf[p++] = 0x01;\n    buf[p++] = loop_count & 0xff;\n    buf[p++] = loop_count >> 8 & 0xff;\n    buf[p++] = 0x00; // Terminator.\n  }\n\n  var ended = false;\n\n  this.addFrame = function (x, y, w, h, indexed_pixels, opts) {\n    if (ended === true) {\n      --p;\n      ended = false;\n    } // Un-end.\n\n    opts = opts === undefined ? {} : opts;\n\n    // TODO(deanm): Bounds check x, y.  Do they need to be within the virtual\n    // canvas width/height, I imagine?\n    if (x < 0 || y < 0 || x > 65535 || y > 65535) throw \"x/y invalid.\";\n\n    if (w <= 0 || h <= 0 || w > 65535 || h > 65535) throw \"Width/Height invalid.\";\n\n    if (indexed_pixels.length < w * h) throw \"Not enough pixels for the frame size.\";\n\n    var using_local_palette = true;\n    var palette = opts.palette;\n    if (palette === undefined || palette === null) {\n      using_local_palette = false;\n      palette = global_palette;\n    }\n\n    if (palette === undefined || palette === null) throw \"Must supply either a local or global palette.\";\n\n    var num_colors = check_palette_and_num_colors(palette);\n\n    // Compute the min_code_size (power of 2), destroying num_colors.\n    var min_code_size = 0;\n    while (num_colors >>= 1) {\n      ++min_code_size;\n    }num_colors = 1 << min_code_size; // Now we can easily get it back.\n\n    var delay = opts.delay === undefined ? 0 : opts.delay;\n\n    // From the spec:\n    //     0 -   No disposal specified. The decoder is\n    //           not required to take any action.\n    //     1 -   Do not dispose. The graphic is to be left\n    //           in place.\n    //     2 -   Restore to background color. The area used by the\n    //           graphic must be restored to the background color.\n    //     3 -   Restore to previous. The decoder is required to\n    //           restore the area overwritten by the graphic with\n    //           what was there prior to rendering the graphic.\n    //  4-7 -    To be defined.\n    // NOTE(deanm): Dispose background doesn't really work, apparently most\n    // browsers ignore the background palette index and clear to transparency.\n    var disposal = opts.disposal === undefined ? 0 : opts.disposal;\n    if (disposal < 0 || disposal > 3) // 4-7 is reserved.\n      throw \"Disposal out of range.\";\n\n    var use_transparency = false;\n    var transparent_index = 0;\n    if (opts.transparent !== undefined && opts.transparent !== null) {\n      use_transparency = true;\n      transparent_index = opts.transparent;\n      if (transparent_index < 0 || transparent_index >= num_colors) throw \"Transparent color index.\";\n    }\n\n    if (disposal !== 0 || use_transparency || delay !== 0) {\n      // - Graphics Control Extension\n      buf[p++] = 0x21;\n      buf[p++] = 0xf9; // Extension / Label.\n      buf[p++] = 4; // Byte size.\n\n      buf[p++] = disposal << 2 | (use_transparency === true ? 1 : 0);\n      buf[p++] = delay & 0xff;\n      buf[p++] = delay >> 8 & 0xff;\n      buf[p++] = transparent_index; // Transparent color index.\n      buf[p++] = 0; // Block Terminator.\n    }\n\n    // - Image Descriptor\n    buf[p++] = 0x2c; // Image Seperator.\n    buf[p++] = x & 0xff;\n    buf[p++] = x >> 8 & 0xff; // Left.\n    buf[p++] = y & 0xff;\n    buf[p++] = y >> 8 & 0xff; // Top.\n    buf[p++] = w & 0xff;\n    buf[p++] = w >> 8 & 0xff;\n    buf[p++] = h & 0xff;\n    buf[p++] = h >> 8 & 0xff;\n    // NOTE: No sort flag (unused?).\n    // TODO(deanm): Support interlace.\n    buf[p++] = using_local_palette === true ? 0x80 | min_code_size - 1 : 0;\n\n    // - Local Color Table\n    if (using_local_palette === true) {\n      for (var i = 0, il = palette.length; i < il; ++i) {\n        var rgb = palette[i];\n        buf[p++] = rgb >> 16 & 0xff;\n        buf[p++] = rgb >> 8 & 0xff;\n        buf[p++] = rgb & 0xff;\n      }\n    }\n\n    p = GifWriterOutputLZWCodeStream(buf, p, min_code_size < 2 ? 2 : min_code_size, indexed_pixels);\n  };\n\n  this.end = function () {\n    if (ended === false) {\n      buf[p++] = 0x3b; // Trailer.\n      ended = true;\n    }\n    return p;\n  };\n\n  // Main compression routine, palette indexes -> LZW code stream.\n  // |index_stream| must have at least one entry.\n  function GifWriterOutputLZWCodeStream(buf, p, min_code_size, index_stream) {\n    buf[p++] = min_code_size;\n    var cur_subblock = p++; // Pointing at the length field.\n\n    var clear_code = 1 << min_code_size;\n    var code_mask = clear_code - 1;\n    var eoi_code = clear_code + 1;\n    var next_code = eoi_code + 1;\n\n    var cur_code_size = min_code_size + 1; // Number of bits per code.\n    var cur_shift = 0;\n    // We have at most 12-bit codes, so we should have to hold a max of 19\n    // bits here (and then we would write out).\n    var cur = 0;\n\n    function emit_bytes_to_buffer(bit_block_size) {\n      while (cur_shift >= bit_block_size) {\n        buf[p++] = cur & 0xff;\n        cur >>= 8;\n        cur_shift -= 8;\n        if (p === cur_subblock + 256) {\n          // Finished a subblock.\n          buf[cur_subblock] = 255;\n          cur_subblock = p++;\n        }\n      }\n    }\n\n    function emit_code(c) {\n      cur |= c << cur_shift;\n      cur_shift += cur_code_size;\n      emit_bytes_to_buffer(8);\n    }\n\n    // I am not an expert on the topic, and I don't want to write a thesis.\n    // However, it is good to outline here the basic algorithm and the few data\n    // structures and optimizations here that make this implementation fast.\n    // The basic idea behind LZW is to build a table of previously seen runs\n    // addressed by a short id (herein called output code).  All data is\n    // referenced by a code, which represents one or more values from the\n    // original input stream.  All input bytes can be referenced as the same\n    // value as an output code.  So if you didn't want any compression, you\n    // could more or less just output the original bytes as codes (there are\n    // some details to this, but it is the idea).  In order to achieve\n    // compression, values greater then the input range (codes can be up to\n    // 12-bit while input only 8-bit) represent a sequence of previously seen\n    // inputs.  The decompressor is able to build the same mapping while\n    // decoding, so there is always a shared common knowledge between the\n    // encoding and decoder, which is also important for \"timing\" aspects like\n    // how to handle variable bit width code encoding.\n    //\n    // One obvious but very important consequence of the table system is there\n    // is always a unique id (at most 12-bits) to map the runs.  'A' might be\n    // 4, then 'AA' might be 10, 'AAA' 11, 'AAAA' 12, etc.  This relationship\n    // can be used for an effecient lookup strategy for the code mapping.  We\n    // need to know if a run has been seen before, and be able to map that run\n    // to the output code.  Since we start with known unique ids (input bytes),\n    // and then from those build more unique ids (table entries), we can\n    // continue this chain (almost like a linked list) to always have small\n    // integer values that represent the current byte chains in the encoder.\n    // This means instead of tracking the input bytes (AAAABCD) to know our\n    // current state, we can track the table entry for AAAABC (it is guaranteed\n    // to exist by the nature of the algorithm) and the next character D.\n    // Therefor the tuple of (table_entry, byte) is guaranteed to also be\n    // unique.  This allows us to create a simple lookup key for mapping input\n    // sequences to codes (table indices) without having to store or search\n    // any of the code sequences.  So if 'AAAA' has a table entry of 12, the\n    // tuple of ('AAAA', K) for any input byte K will be unique, and can be our\n    // key.  This leads to a integer value at most 20-bits, which can always\n    // fit in an SMI value and be used as a fast sparse array / object key.\n\n    // Output code for the current contents of the index buffer.\n    var ib_code = index_stream[0] & code_mask; // Load first input index.\n    var code_table = {}; // Key'd on our 20-bit \"tuple\".\n\n    emit_code(clear_code); // Spec says first code should be a clear code.\n\n    // First index already loaded, process the rest of the stream.\n    for (var i = 1, il = index_stream.length; i < il; ++i) {\n      var k = index_stream[i] & code_mask;\n      var cur_key = ib_code << 8 | k; // (prev, k) unique tuple.\n      var cur_code = code_table[cur_key]; // buffer + k.\n\n      // Check if we have to create a new code table entry.\n      if (cur_code === undefined) {\n        // We don't have buffer + k.\n        // Emit index buffer (without k).\n        // This is an inline version of emit_code, because this is the core\n        // writing routine of the compressor (and V8 cannot inline emit_code\n        // because it is a closure here in a different context).  Additionally\n        // we can call emit_byte_to_buffer less often, because we can have\n        // 30-bits (from our 31-bit signed SMI), and we know our codes will only\n        // be 12-bits, so can safely have 18-bits there without overflow.\n        // emit_code(ib_code);\n        cur |= ib_code << cur_shift;\n        cur_shift += cur_code_size;\n        while (cur_shift >= 8) {\n          buf[p++] = cur & 0xff;\n          cur >>= 8;\n          cur_shift -= 8;\n          if (p === cur_subblock + 256) {\n            // Finished a subblock.\n            buf[cur_subblock] = 255;\n            cur_subblock = p++;\n          }\n        }\n\n        if (next_code === 4096) {\n          // Table full, need a clear.\n          emit_code(clear_code);\n          next_code = eoi_code + 1;\n          cur_code_size = min_code_size + 1;\n          code_table = {};\n        } else {\n          // Table not full, insert a new entry.\n          // Increase our variable bit code sizes if necessary.  This is a bit\n          // tricky as it is based on \"timing\" between the encoding and\n          // decoder.  From the encoders perspective this should happen after\n          // we've already emitted the index buffer and are about to create the\n          // first table entry that would overflow our current code bit size.\n          if (next_code >= 1 << cur_code_size) ++cur_code_size;\n          code_table[cur_key] = next_code++; // Insert into code table.\n        }\n\n        ib_code = k; // Index buffer to single input k.\n      } else {\n        ib_code = cur_code; // Index buffer to sequence in code table.\n      }\n    }\n\n    emit_code(ib_code); // There will still be something in the index buffer.\n    emit_code(eoi_code); // End Of Information.\n\n    // Flush / finalize the sub-blocks stream to the buffer.\n    emit_bytes_to_buffer(1);\n\n    // Finish the sub-blocks, writing out any unfinished lengths and\n    // terminating with a sub-block of length 0.  If we have already started\n    // but not yet used a sub-block it can just become the terminator.\n    if (cur_subblock + 1 === p) {\n      // Started but unused.\n      buf[cur_subblock] = 0;\n    } else {\n      // Started and used, write length and additional terminator block.\n      buf[cur_subblock] = p - cur_subblock - 1;\n      buf[p++] = 0;\n    }\n    return p;\n  }\n}\n\n/*\n  animatedGIF.js\n  ==============\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\n// Helpers\nvar noop$2 = function noop() {};\n\nvar AnimatedGIF = function AnimatedGIF(options) {\n    this.canvas = null;\n    this.ctx = null;\n    this.repeat = 0;\n    this.frames = [];\n    this.numRenderedFrames = 0;\n    this.onRenderCompleteCallback = noop$2;\n    this.onRenderProgressCallback = noop$2;\n    this.workers = [];\n    this.availableWorkers = [];\n    this.generatingGIF = false;\n    this.options = options;\n\n    // Constructs and initializes the the web workers appropriately\n    this.initializeWebWorkers(options);\n};\n\nAnimatedGIF.prototype = {\n    'workerMethods': workerCode(),\n    'initializeWebWorkers': function initializeWebWorkers(options) {\n        var self = this;\n        var processFrameWorkerCode = NeuQuant.toString() + '(' + workerCode.toString() + '());';\n        var webWorkerObj = void 0;\n        var objectUrl = void 0;\n        var webWorker = void 0;\n        var numWorkers = void 0;\n        var x = -1;\n        var workerError = '';\n\n        numWorkers = options.numWorkers;\n\n        while (++x < numWorkers) {\n            webWorkerObj = utils.createWebWorker(processFrameWorkerCode);\n\n            if (utils.isObject(webWorkerObj)) {\n                objectUrl = webWorkerObj.objectUrl;\n                webWorker = webWorkerObj.worker;\n\n                self.workers.push({\n                    worker: webWorker,\n                    objectUrl: objectUrl\n                });\n\n                self.availableWorkers.push(webWorker);\n            } else {\n                workerError = webWorkerObj;\n                utils.webWorkerError = !!webWorkerObj;\n            }\n        }\n\n        this.workerError = workerError;\n        this.canvas = document.createElement('canvas');\n        this.canvas.width = options.gifWidth;\n        this.canvas.height = options.gifHeight;\n        this.ctx = this.canvas.getContext('2d');\n        this.frames = [];\n    },\n    // Return a worker for processing a frame\n    getWorker: function getWorker() {\n        return this.availableWorkers.pop();\n    },\n    // Restores a worker to the pool\n    freeWorker: function freeWorker(worker) {\n        this.availableWorkers.push(worker);\n    },\n    byteMap: function () {\n        var byteMap = [];\n\n        for (var i = 0; i < 256; i++) {\n            byteMap[i] = String.fromCharCode(i);\n        }\n\n        return byteMap;\n    }(),\n    bufferToString: function bufferToString(buffer) {\n        var numberValues = buffer.length;\n        var str = '';\n        var x = -1;\n\n        while (++x < numberValues) {\n            str += this.byteMap[buffer[x]];\n        }\n\n        return str;\n    },\n    onFrameFinished: function onFrameFinished(progressCallback) {\n        // The GIF is not written until we're done with all the frames\n        // because they might not be processed in the same order\n        var self = this;\n        var frames = self.frames;\n        var options = self.options;\n        var hasExistingImages = !!(options.images || []).length;\n        var allDone = frames.every(function (frame) {\n            return !frame.beingProcessed && frame.done;\n        });\n\n        self.numRenderedFrames++;\n\n        if (hasExistingImages) {\n            progressCallback(self.numRenderedFrames / frames.length);\n        }\n\n        self.onRenderProgressCallback(self.numRenderedFrames * 0.75 / frames.length);\n\n        if (allDone) {\n            if (!self.generatingGIF) {\n                self.generateGIF(frames, self.onRenderCompleteCallback);\n            }\n        } else {\n            utils.requestTimeout(function () {\n                self.processNextFrame();\n            }, 1);\n        }\n    },\n    processFrame: function processFrame(position) {\n        var AnimatedGifContext = this;\n        var options = this.options;\n        var _options = this.options,\n            progressCallback = _options.progressCallback,\n            sampleInterval = _options.sampleInterval;\n\n        var frames = this.frames;\n        var frame = void 0;\n        var worker = void 0;\n        var done = function done() {\n            var ev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            var data = ev.data;\n\n            // Delete original data, and free memory\n            delete frame.data;\n\n            frame.pixels = Array.prototype.slice.call(data.pixels);\n            frame.palette = Array.prototype.slice.call(data.palette);\n            frame.done = true;\n            frame.beingProcessed = false;\n\n            AnimatedGifContext.freeWorker(worker);\n\n            AnimatedGifContext.onFrameFinished(progressCallback);\n        };\n\n        frame = frames[position];\n\n        if (frame.beingProcessed || frame.done) {\n            this.onFrameFinished();\n\n            return;\n        }\n\n        frame.sampleInterval = sampleInterval;\n        frame.beingProcessed = true;\n        frame.gifshot = true;\n\n        worker = this.getWorker();\n\n        if (worker) {\n            // Process the frame in a web worker\n            worker.onmessage = done;\n            worker.postMessage(frame);\n        } else {\n            // Process the frame in the current thread\n            done({\n                'data': AnimatedGifContext.workerMethods.run(frame)\n            });\n        }\n    },\n    startRendering: function startRendering(completeCallback) {\n        this.onRenderCompleteCallback = completeCallback;\n\n        for (var i = 0; i < this.options.numWorkers && i < this.frames.length; i++) {\n            this.processFrame(i);\n        }\n    },\n    processNextFrame: function processNextFrame() {\n        var position = -1;\n\n        for (var i = 0; i < this.frames.length; i++) {\n            var frame = this.frames[i];\n\n            if (!frame.done && !frame.beingProcessed) {\n                position = i;\n                break;\n            }\n        }\n\n        if (position >= 0) {\n            this.processFrame(position);\n        }\n    },\n    // Takes the already processed data in frames and feeds it to a new\n    // GifWriter instance in order to get the binary GIF file\n    generateGIF: function generateGIF(frames, callback) {\n        // TODO: Weird: using a simple JS array instead of a typed array,\n        // the files are WAY smaller o_o. Patches/explanations welcome!\n        var buffer = []; // new Uint8Array(width * height * frames.length * 5);\n        var gifOptions = {\n            loop: this.repeat\n        };\n        var options = this.options;\n        var interval = options.interval;\n\n        var frameDuration = options.frameDuration;\n        var existingImages = options.images;\n        var hasExistingImages = !!existingImages.length;\n        var height = options.gifHeight;\n        var width = options.gifWidth;\n        var gifWriter$$1 = new gifWriter(buffer, width, height, gifOptions);\n        var onRenderProgressCallback = this.onRenderProgressCallback;\n        var delay = hasExistingImages ? interval * 100 : 0;\n        var bufferToString = void 0;\n        var gif = void 0;\n\n        this.generatingGIF = true;\n\n        utils.each(frames, function (iterator, frame) {\n            var framePalette = frame.palette;\n\n            onRenderProgressCallback(0.75 + 0.25 * frame.position * 1.0 / frames.length);\n\n            for (var i = 0; i < frameDuration; i++) {\n                gifWriter$$1.addFrame(0, 0, width, height, frame.pixels, {\n                    palette: framePalette,\n                    delay: delay\n                });\n            }\n        });\n\n        gifWriter$$1.end();\n\n        onRenderProgressCallback(1.0);\n\n        this.frames = [];\n\n        this.generatingGIF = false;\n\n        if (utils.isFunction(callback)) {\n            bufferToString = this.bufferToString(buffer);\n            gif = 'data:image/gif;base64,' + utils.btoa(bufferToString);\n\n            callback(gif);\n        }\n    },\n    // From GIF: 0 = loop forever, null = not looping, n > 0 = loop n times and stop\n    setRepeat: function setRepeat(r) {\n        this.repeat = r;\n    },\n    addFrame: function addFrame(element, gifshotOptions) {\n        gifshotOptions = utils.isObject(gifshotOptions) ? gifshotOptions : {};\n\n        var self = this;\n        var ctx = self.ctx;\n        var options = self.options;\n        var width = options.gifWidth;\n        var height = options.gifHeight;\n        var fontSize = utils.getFontSize(gifshotOptions);\n        var _gifshotOptions = gifshotOptions,\n            filter = _gifshotOptions.filter,\n            fontColor = _gifshotOptions.fontColor,\n            fontFamily = _gifshotOptions.fontFamily,\n            fontWeight = _gifshotOptions.fontWeight,\n            gifHeight = _gifshotOptions.gifHeight,\n            gifWidth = _gifshotOptions.gifWidth,\n            text = _gifshotOptions.text,\n            textAlign = _gifshotOptions.textAlign,\n            textBaseline = _gifshotOptions.textBaseline;\n\n        var textXCoordinate = gifshotOptions.textXCoordinate ? gifshotOptions.textXCoordinate : textAlign === 'left' ? 1 : textAlign === 'right' ? width : width / 2;\n        var textYCoordinate = gifshotOptions.textYCoordinate ? gifshotOptions.textYCoordinate : textBaseline === 'top' ? 1 : textBaseline === 'center' ? height / 2 : height;\n        var font = fontWeight + ' ' + fontSize + ' ' + fontFamily;\n        var imageData = void 0;\n\n        try {\n            ctx.filter = filter;\n\n            ctx.drawImage(element, 0, 0, width, height);\n\n            if (text) {\n                ctx.font = font;\n                ctx.fillStyle = fontColor;\n                ctx.textAlign = textAlign;\n                ctx.textBaseline = textBaseline;\n                ctx.fillText(text, textXCoordinate, textYCoordinate);\n            }\n\n            imageData = ctx.getImageData(0, 0, width, height);\n\n            self.addFrameImageData(imageData);\n        } catch (e) {\n            return '' + e;\n        }\n    },\n    addFrameImageData: function addFrameImageData() {\n        var imageData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        var frames = this.frames;\n        var imageDataArray = imageData.data;\n\n        this.frames.push({\n            'data': imageDataArray,\n            'width': imageData.width,\n            'height': imageData.height,\n            'palette': null,\n            'dithering': null,\n            'done': false,\n            'beingProcessed': false,\n            'position': frames.length\n        });\n    },\n    onRenderProgress: function onRenderProgress(callback) {\n        this.onRenderProgressCallback = callback;\n    },\n    isRendering: function isRendering() {\n        return this.generatingGIF;\n    },\n    getBase64GIF: function getBase64GIF(completeCallback) {\n        var self = this;\n        var onRenderComplete = function onRenderComplete(gif) {\n            self.destroyWorkers();\n\n            utils.requestTimeout(function () {\n                completeCallback(gif);\n            }, 0);\n        };\n\n        self.startRendering(onRenderComplete);\n    },\n    destroyWorkers: function destroyWorkers() {\n        if (this.workerError) {\n            return;\n        }\n\n        var workers = this.workers;\n\n        // Explicitly ask web workers to die so they are explicitly GC'ed\n        utils.each(workers, function (iterator, workerObj) {\n            var worker = workerObj.worker;\n            var objectUrl = workerObj.objectUrl;\n\n            worker.terminate();\n            utils.URL.revokeObjectURL(objectUrl);\n        });\n    }\n};\n\n/*\n  getBase64GIF.js\n  ===============\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\nfunction getBase64GIF(animatedGifInstance, callback) {\n    // This is asynchronous, rendered with WebWorkers\n    animatedGifInstance.getBase64GIF(function (image) {\n        callback({\n            error: false,\n            errorCode: '',\n            errorMsg: '',\n            image: image\n        });\n    });\n}\n\n/*\n  existingImages.js\n  =================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\nfunction existingImages() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var self = this;\n    var callback = obj.callback,\n        images = obj.images,\n        options = obj.options;\n\n    var imagesLength = obj.imagesLength;\n    var skipObj = {\n        'getUserMedia': true,\n        'window.URL': true\n    };\n    var errorObj = error.validate(skipObj);\n    var loadedImages = [];\n    var loadedImagesLength = 0;\n    var tempImage = void 0;\n    var ag = void 0;\n\n    if (errorObj.error) {\n        return callback(errorObj);\n    }\n\n    // change workerPath to point to where Animated_GIF.worker.js is\n    ag = new AnimatedGIF(options);\n\n    utils.each(images, function (index, image) {\n        var currentImage = image;\n\n        if (image.src) {\n            currentImage = currentImage.src;\n        }\n        if (utils.isElement(currentImage)) {\n            if (options.crossOrigin) {\n                currentImage.crossOrigin = options.crossOrigin;\n            }\n\n            loadedImages[index] = currentImage;\n            loadedImagesLength += 1;\n\n            if (loadedImagesLength === imagesLength) {\n                addLoadedImagesToGif();\n            }\n        } else if (utils.isString(currentImage)) {\n            tempImage = new Image();\n\n            if (options.crossOrigin) {\n                tempImage.crossOrigin = options.crossOrigin;\n            }\n\n            (function (tempImage) {\n                if (image.text) {\n                    tempImage.text = image.text;\n                }\n\n                tempImage.onerror = function (e) {\n                    var obj = void 0;\n\n                    --imagesLength; // skips over images that error out\n\n                    if (imagesLength === 0) {\n                        obj = {};\n                        obj.error = 'None of the requested images was capable of being retrieved';\n\n                        return callback(obj);\n                    }\n                };\n\n                tempImage.onload = function (e) {\n                    if (image.text) {\n                        loadedImages[index] = {\n                            img: tempImage,\n                            text: tempImage.text\n                        };\n                    } else {\n                        loadedImages[index] = tempImage;\n                    }\n\n                    loadedImagesLength += 1;\n\n                    if (loadedImagesLength === imagesLength) {\n                        addLoadedImagesToGif();\n                    }\n\n                    utils.removeElement(tempImage);\n                };\n\n                tempImage.src = currentImage;\n            })(tempImage);\n\n            utils.setCSSAttr(tempImage, {\n                position: 'fixed',\n                opacity: '0'\n            });\n\n            document.body.appendChild(tempImage);\n        }\n    });\n\n    function addLoadedImagesToGif() {\n        utils.each(loadedImages, function (index, loadedImage) {\n            if (loadedImage) {\n                if (loadedImage.text) {\n                    ag.addFrame(loadedImage.img, options, loadedImage.text);\n                } else {\n                    ag.addFrame(loadedImage, options);\n                }\n            }\n        });\n\n        getBase64GIF(ag, callback);\n    }\n}\n\n/*\n  screenShot.js\n  =============\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\n// Helpers\nvar noop$3 = function noop() {};\n\nvar screenShot = {\n    getGIF: function getGIF() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var callback = arguments[1];\n\n        callback = utils.isFunction(callback) ? callback : noop$3;\n\n        var canvas = document.createElement('canvas');\n        var context = void 0;\n        var existingImages = options.images;\n        var hasExistingImages = !!existingImages.length;\n        var cameraStream = options.cameraStream,\n            crop = options.crop,\n            filter = options.filter,\n            fontColor = options.fontColor,\n            fontFamily = options.fontFamily,\n            fontWeight = options.fontWeight,\n            keepCameraOn = options.keepCameraOn,\n            numWorkers = options.numWorkers,\n            progressCallback = options.progressCallback,\n            saveRenderingContexts = options.saveRenderingContexts,\n            savedRenderingContexts = options.savedRenderingContexts,\n            text = options.text,\n            textAlign = options.textAlign,\n            textBaseline = options.textBaseline,\n            videoElement = options.videoElement,\n            videoHeight = options.videoHeight,\n            videoWidth = options.videoWidth,\n            webcamVideoElement = options.webcamVideoElement;\n\n        var gifWidth = Number(options.gifWidth);\n        var gifHeight = Number(options.gifHeight);\n        var interval = Number(options.interval);\n        var sampleInterval = Number(options.sampleInterval);\n        var waitBetweenFrames = hasExistingImages ? 0 : interval * 1000;\n        var renderingContextsToSave = [];\n        var numFrames = savedRenderingContexts.length ? savedRenderingContexts.length : options.numFrames;\n        var pendingFrames = numFrames;\n        var ag = new AnimatedGIF(options);\n        var fontSize = utils.getFontSize(options);\n        var textXCoordinate = options.textXCoordinate ? options.textXCoordinate : textAlign === 'left' ? 1 : textAlign === 'right' ? gifWidth : gifWidth / 2;\n        var textYCoordinate = options.textYCoordinate ? options.textYCoordinate : textBaseline === 'top' ? 1 : textBaseline === 'center' ? gifHeight / 2 : gifHeight;\n        var font = fontWeight + ' ' + fontSize + ' ' + fontFamily;\n        var sourceX = crop ? Math.floor(crop.scaledWidth / 2) : 0;\n        var sourceWidth = crop ? videoWidth - crop.scaledWidth : 0;\n        var sourceY = crop ? Math.floor(crop.scaledHeight / 2) : 0;\n        var sourceHeight = crop ? videoHeight - crop.scaledHeight : 0;\n        var captureFrames = function captureSingleFrame() {\n            var framesLeft = pendingFrames - 1;\n\n            if (savedRenderingContexts.length) {\n                context.putImageData(savedRenderingContexts[numFrames - pendingFrames], 0, 0);\n\n                finishCapture();\n            } else {\n                drawVideo();\n            }\n\n            function drawVideo() {\n                try {\n                    // Makes sure the canvas video heights/widths are in bounds\n                    if (sourceWidth > videoWidth) {\n                        sourceWidth = videoWidth;\n                    }\n\n                    if (sourceHeight > videoHeight) {\n                        sourceHeight = videoHeight;\n                    }\n\n                    if (sourceX < 0) {\n                        sourceX = 0;\n                    }\n\n                    if (sourceY < 0) {\n                        sourceY = 0;\n                    }\n\n                    context.filter = filter;\n\n                    context.drawImage(videoElement, sourceX, sourceY, sourceWidth, sourceHeight, 0, 0, gifWidth, gifHeight);\n\n                    finishCapture();\n                } catch (e) {\n                    // There is a Firefox bug that sometimes throws NS_ERROR_NOT_AVAILABLE and\n                    // and IndexSizeError errors when drawing a video element to the canvas\n                    if (e.name === 'NS_ERROR_NOT_AVAILABLE') {\n                        // Wait 100ms before trying again\n                        utils.requestTimeout(drawVideo, 100);\n                    } else {\n                        throw e;\n                    }\n                }\n            }\n\n            function finishCapture() {\n                var imageData = void 0;\n\n                if (saveRenderingContexts) {\n                    renderingContextsToSave.push(context.getImageData(0, 0, gifWidth, gifHeight));\n                }\n\n                // If there is text to display, make sure to display it on the canvas after the image is drawn\n                if (text) {\n                    context.font = font;\n                    context.fillStyle = fontColor;\n                    context.textAlign = textAlign;\n                    context.textBaseline = textBaseline;\n                    context.fillText(text, textXCoordinate, textYCoordinate);\n                }\n\n                imageData = context.getImageData(0, 0, gifWidth, gifHeight);\n\n                ag.addFrameImageData(imageData);\n\n                pendingFrames = framesLeft;\n\n                // Call back with an r value indicating how far along we are in capture\n                progressCallback((numFrames - pendingFrames) / numFrames);\n\n                if (framesLeft > 0) {\n                    // test\n                    utils.requestTimeout(captureSingleFrame, waitBetweenFrames);\n                }\n\n                if (!pendingFrames) {\n                    ag.getBase64GIF(function (image) {\n                        callback({\n                            'error': false,\n                            'errorCode': '',\n                            'errorMsg': '',\n                            'image': image,\n                            'cameraStream': cameraStream,\n                            'videoElement': videoElement,\n                            'webcamVideoElement': webcamVideoElement,\n                            'savedRenderingContexts': renderingContextsToSave,\n                            'keepCameraOn': keepCameraOn\n                        });\n                    });\n                }\n            }\n        };\n\n        numFrames = numFrames !== undefined ? numFrames : 10;\n        interval = interval !== undefined ? interval : 0.1; // In seconds\n\n        canvas.width = gifWidth;\n        canvas.height = gifHeight;\n        context = canvas.getContext('2d');\n\n        (function capture() {\n            if (!savedRenderingContexts.length && videoElement.currentTime === 0) {\n                utils.requestTimeout(capture, 100);\n\n                return;\n            }\n\n            captureFrames();\n        })();\n    },\n    getCropDimensions: function getCropDimensions() {\n        var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        var width = obj.videoWidth;\n        var height = obj.videoHeight;\n        var gifWidth = obj.gifWidth;\n        var gifHeight = obj.gifHeight;\n        var result = {\n            width: 0,\n            height: 0,\n            scaledWidth: 0,\n            scaledHeight: 0\n        };\n\n        if (width > height) {\n            result.width = Math.round(width * (gifHeight / height)) - gifWidth;\n            result.scaledWidth = Math.round(result.width * (height / gifHeight));\n        } else {\n            result.height = Math.round(height * (gifWidth / width)) - gifHeight;\n            result.scaledHeight = Math.round(result.height * (width / gifWidth));\n        }\n\n        return result;\n    }\n};\n\n/*\n  videoStream.js\n  ==============\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nvar videoStream = {\n    loadedData: false,\n    defaultVideoDimensions: {\n        width: 640,\n        height: 480\n    },\n    findVideoSize: function findVideoSizeMethod(obj) {\n        findVideoSizeMethod.attempts = findVideoSizeMethod.attempts || 0;\n\n        var cameraStream = obj.cameraStream,\n            completedCallback = obj.completedCallback,\n            videoElement = obj.videoElement;\n\n\n        if (!videoElement) {\n            return;\n        }\n\n        if (videoElement.videoWidth > 0 && videoElement.videoHeight > 0) {\n            videoElement.removeEventListener('loadeddata', videoStream.findVideoSize);\n\n            completedCallback({\n                videoElement: videoElement,\n                cameraStream: cameraStream,\n                videoWidth: videoElement.videoWidth,\n                videoHeight: videoElement.videoHeight\n            });\n        } else {\n            if (findVideoSizeMethod.attempts < 10) {\n                findVideoSizeMethod.attempts += 1;\n\n                utils.requestTimeout(function () {\n                    videoStream.findVideoSize(obj);\n                }, 400);\n            } else {\n                completedCallback({\n                    videoElement: videoElement,\n                    cameraStream: cameraStream,\n                    videoWidth: videoStream.defaultVideoDimensions.width,\n                    videoHeight: videoStream.defaultVideoDimensions.height\n                });\n            }\n        }\n    },\n    onStreamingTimeout: function onStreamingTimeout(callback) {\n        if (utils.isFunction(callback)) {\n            callback({\n                error: true,\n                errorCode: 'getUserMedia',\n                errorMsg: 'There was an issue with the getUserMedia API - Timed out while trying to start streaming',\n                image: null,\n                cameraStream: {}\n            });\n        }\n    },\n    stream: function stream(obj) {\n        var existingVideo = utils.isArray(obj.existingVideo) ? obj.existingVideo[0] : obj.existingVideo;\n        var cameraStream = obj.cameraStream,\n            completedCallback = obj.completedCallback,\n            streamedCallback = obj.streamedCallback,\n            videoElement = obj.videoElement;\n\n\n        if (utils.isFunction(streamedCallback)) {\n            streamedCallback();\n        }\n\n        if (existingVideo) {\n            if (utils.isString(existingVideo)) {\n                videoElement.src = existingVideo;\n                videoElement.innerHTML = '<source src=\"' + existingVideo + '\" type=\"video/' + utils.getExtension(existingVideo) + '\" />';\n            } else if (existingVideo instanceof Blob) {\n                try {\n                    videoElement.src = utils.URL.createObjectURL(existingVideo);\n                } catch (e) {}\n\n                videoElement.innerHTML = '<source src=\"' + existingVideo + '\" type=\"' + existingVideo.type + '\" />';\n            }\n        } else if (videoElement.mozSrcObject) {\n            videoElement.mozSrcObject = cameraStream;\n        } else if (utils.URL) {\n            try {\n                videoElement.srcObject = cameraStream;\n                videoElement.src = utils.URL.createObjectURL(cameraStream);\n            } catch (e) {\n                videoElement.srcObject = cameraStream;\n            }\n        }\n\n        videoElement.play();\n\n        utils.requestTimeout(function checkLoadedData() {\n            checkLoadedData.count = checkLoadedData.count || 0;\n\n            if (videoStream.loadedData === true) {\n                videoStream.findVideoSize({\n                    videoElement: videoElement,\n                    cameraStream: cameraStream,\n                    completedCallback: completedCallback\n                });\n\n                videoStream.loadedData = false;\n            } else {\n                checkLoadedData.count += 1;\n\n                if (checkLoadedData.count > 10) {\n                    videoStream.findVideoSize({\n                        videoElement: videoElement,\n                        cameraStream: cameraStream,\n                        completedCallback: completedCallback\n                    });\n                } else {\n                    checkLoadedData();\n                }\n            }\n        }, 0);\n    },\n    startStreaming: function startStreaming(obj) {\n        var errorCallback = utils.isFunction(obj.error) ? obj.error : utils.noop;\n        var streamedCallback = utils.isFunction(obj.streamed) ? obj.streamed : utils.noop;\n        var completedCallback = utils.isFunction(obj.completed) ? obj.completed : utils.noop;\n        var crossOrigin = obj.crossOrigin,\n            existingVideo = obj.existingVideo,\n            lastCameraStream = obj.lastCameraStream,\n            options = obj.options,\n            webcamVideoElement = obj.webcamVideoElement;\n\n        var videoElement = utils.isElement(existingVideo) ? existingVideo : webcamVideoElement ? webcamVideoElement : document.createElement('video');\n        var cameraStream = void 0;\n\n        if (crossOrigin) {\n            videoElement.crossOrigin = options.crossOrigin;\n        }\n\n        videoElement.autoplay = true;\n        videoElement.loop = true;\n        videoElement.muted = true;\n        videoElement.addEventListener('loadeddata', function (event) {\n            videoStream.loadedData = true;\n            if (options.offset) {\n                videoElement.currentTime = options.offset;\n            }\n        });\n\n        if (existingVideo) {\n            videoStream.stream({\n                videoElement: videoElement,\n                existingVideo: existingVideo,\n                completedCallback: completedCallback\n            });\n        } else if (lastCameraStream) {\n            videoStream.stream({\n                videoElement: videoElement,\n                cameraStream: lastCameraStream,\n                streamedCallback: streamedCallback,\n                completedCallback: completedCallback\n            });\n        } else {\n            utils.getUserMedia({\n                video: true\n            }, function (stream) {\n                videoStream.stream({\n                    videoElement: videoElement,\n                    cameraStream: stream,\n                    streamedCallback: streamedCallback,\n                    completedCallback: completedCallback\n                });\n            }, errorCallback);\n        }\n    },\n    startVideoStreaming: function startVideoStreaming(callback) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        var timeoutLength = options.timeout !== undefined ? options.timeout : 0;\n        var originalCallback = options.callback;\n        var webcamVideoElement = options.webcamVideoElement;\n        var noGetUserMediaSupportTimeout = void 0;\n\n        // Some browsers apparently have support for video streaming because of the\n        // presence of the getUserMedia function, but then do not answer our\n        // calls for streaming.\n        // So we'll set up this timeout and if nothing happens after a while, we'll\n        // conclude that there's no actual getUserMedia support.\n        if (timeoutLength > 0) {\n            noGetUserMediaSupportTimeout = utils.requestTimeout(function () {\n                videoStream.onStreamingTimeout(originalCallback);\n            }, 10000);\n        }\n\n        videoStream.startStreaming({\n            error: function error() {\n                originalCallback({\n                    error: true,\n                    errorCode: 'getUserMedia',\n                    errorMsg: 'There was an issue with the getUserMedia API - the user probably denied permission',\n                    image: null,\n                    cameraStream: {}\n                });\n            },\n            streamed: function streamed() {\n                // The streaming started somehow, so we can assume there is getUserMedia support\n                clearTimeout(noGetUserMediaSupportTimeout);\n            },\n            completed: function completed() {\n                var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                var cameraStream = obj.cameraStream,\n                    videoElement = obj.videoElement,\n                    videoHeight = obj.videoHeight,\n                    videoWidth = obj.videoWidth;\n\n\n                callback({\n                    cameraStream: cameraStream,\n                    videoElement: videoElement,\n                    videoHeight: videoHeight,\n                    videoWidth: videoWidth\n                });\n            },\n            lastCameraStream: options.lastCameraStream,\n            webcamVideoElement: webcamVideoElement,\n            crossOrigin: options.crossOrigin,\n            options: options\n        });\n    },\n    stopVideoStreaming: function stopVideoStreaming(obj) {\n        obj = utils.isObject(obj) ? obj : {};\n\n        var _obj = obj,\n            keepCameraOn = _obj.keepCameraOn,\n            videoElement = _obj.videoElement,\n            webcamVideoElement = _obj.webcamVideoElement;\n\n        var cameraStream = obj.cameraStream || {};\n        var cameraStreamTracks = cameraStream.getTracks ? cameraStream.getTracks() || [] : [];\n        var hasCameraStreamTracks = !!cameraStreamTracks.length;\n        var firstCameraStreamTrack = cameraStreamTracks[0];\n\n        if (!keepCameraOn && hasCameraStreamTracks) {\n            if (utils.isFunction(firstCameraStreamTrack.stop)) {\n                // Stops the camera stream\n                firstCameraStreamTrack.stop();\n            }\n        }\n\n        if (utils.isElement(videoElement) && !webcamVideoElement) {\n            // Pauses the video, revokes the object URL (freeing up memory), and remove the video element\n            videoElement.pause();\n\n            // Destroys the object url\n            if (utils.isFunction(utils.URL.revokeObjectURL) && !utils.webWorkerError) {\n                if (videoElement.src) {\n                    utils.URL.revokeObjectURL(videoElement.src);\n                }\n            }\n\n            // Removes the video element from the DOM\n            utils.removeElement(videoElement);\n        }\n    }\n};\n\n/*\n  stopVideoStreaming.js\n  =====================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\nfunction stopVideoStreaming(options) {\n  options = utils.isObject(options) ? options : {};\n\n  videoStream.stopVideoStreaming(options);\n}\n\n/*\n  createAndGetGIF.js\n  ==================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nfunction createAndGetGIF(obj, callback) {\n    var options = obj.options || {};\n\n    var images = options.images,\n        video = options.video;\n\n    var gifWidth = Number(options.gifWidth);\n    var gifHeight = Number(options.gifHeight);\n    var numFrames = Number(options.numFrames);\n    var cameraStream = obj.cameraStream,\n        videoElement = obj.videoElement,\n        videoWidth = obj.videoWidth,\n        videoHeight = obj.videoHeight;\n\n    var cropDimensions = screenShot.getCropDimensions({\n        videoWidth: videoWidth,\n        videoHeight: videoHeight,\n        gifHeight: gifHeight,\n        gifWidth: gifWidth\n    });\n    var completeCallback = callback;\n\n    options.crop = cropDimensions;\n    options.videoElement = videoElement;\n    options.videoWidth = videoWidth;\n    options.videoHeight = videoHeight;\n    options.cameraStream = cameraStream;\n\n    if (!utils.isElement(videoElement)) {\n        return;\n    }\n\n    videoElement.width = gifWidth + cropDimensions.width;\n    videoElement.height = gifHeight + cropDimensions.height;\n\n    if (!options.webcamVideoElement) {\n        utils.setCSSAttr(videoElement, {\n            position: 'fixed',\n            opacity: '0'\n        });\n\n        document.body.appendChild(videoElement);\n    }\n\n    // Firefox doesn't seem to obey autoplay if the element is not in the DOM when the content\n    // is loaded, so we must manually trigger play after adding it, or the video will be frozen\n    videoElement.play();\n\n    screenShot.getGIF(options, function (obj) {\n        if ((!images || !images.length) && (!video || !video.length)) {\n            stopVideoStreaming(obj);\n        }\n\n        completeCallback(obj);\n    });\n}\n\n/*\n  existingVideo.js\n  ================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nfunction existingVideo() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = obj.callback,\n        existingVideo = obj.existingVideo,\n        options = obj.options;\n\n    var skipObj = {\n        getUserMedia: true,\n        'window.URL': true\n    };\n    var errorObj = error.validate(skipObj);\n    var loadedImages = 0;\n    var videoType = void 0;\n    var videoSrc = void 0;\n    var tempImage = void 0;\n    var ag = void 0;\n\n    if (errorObj.error) {\n        return callback(errorObj);\n    }\n\n    if (utils.isElement(existingVideo) && existingVideo.src) {\n        videoSrc = existingVideo.src;\n        videoType = utils.getExtension(videoSrc);\n\n        if (!utils.isSupported.videoCodecs[videoType]) {\n            return callback(error.messages.videoCodecs);\n        }\n    } else if (utils.isArray(existingVideo)) {\n        utils.each(existingVideo, function (iterator, videoSrc) {\n            if (videoSrc instanceof Blob) {\n                videoType = videoSrc.type.substr(videoSrc.type.lastIndexOf('/') + 1, videoSrc.length);\n            } else {\n                videoType = videoSrc.substr(videoSrc.lastIndexOf('.') + 1, videoSrc.length);\n            }\n\n            if (utils.isSupported.videoCodecs[videoType]) {\n                existingVideo = videoSrc;\n\n                return false;\n            }\n        });\n    }\n\n    videoStream.startStreaming({\n        completed: function completed(obj) {\n            obj.options = options || {};\n\n            createAndGetGIF(obj, callback);\n        },\n        existingVideo: existingVideo,\n        crossOrigin: options.crossOrigin,\n        options: options\n    });\n}\n\n/*\n  existingWebcam.js\n  =================\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nfunction existingWebcam() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = obj.callback,\n        lastCameraStream = obj.lastCameraStream,\n        options = obj.options,\n        webcamVideoElement = obj.webcamVideoElement;\n\n\n    if (!isWebCamGIFSupported()) {\n        return callback(error.validate());\n    }\n\n    if (options.savedRenderingContexts.length) {\n        screenShot.getGIF(options, function (obj) {\n            callback(obj);\n        });\n\n        return;\n    }\n\n    videoStream.startVideoStreaming(function () {\n        var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        obj.options = options || {};\n\n        createAndGetGIF(obj, callback);\n    }, {\n        lastCameraStream: lastCameraStream,\n        callback: callback,\n        webcamVideoElement: webcamVideoElement,\n        crossOrigin: options.crossOrigin\n    });\n}\n\n/*\n  createGIF.js\n  ============\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nfunction createGIF(userOptions, callback) {\n  callback = utils.isFunction(userOptions) ? userOptions : callback;\n  userOptions = utils.isObject(userOptions) ? userOptions : {};\n\n  if (!utils.isFunction(callback)) {\n    return;\n  }\n\n  var options = utils.mergeOptions(defaultOptions, userOptions) || {};\n  var lastCameraStream = userOptions.cameraStream;\n  var images = options.images;\n  var imagesLength = images ? images.length : 0;\n  var video = options.video;\n  var webcamVideoElement = options.webcamVideoElement;\n\n  options = utils.mergeOptions(options, {\n    'gifWidth': Math.floor(options.gifWidth),\n    'gifHeight': Math.floor(options.gifHeight)\n  });\n\n  // If the user would like to create a GIF from an existing image(s)\n  if (imagesLength) {\n    existingImages({\n      'images': images,\n      'imagesLength': imagesLength,\n      'callback': callback,\n      'options': options\n    });\n  } else if (video) {\n    // If the user would like to create a GIF from an existing HTML5 video\n    existingVideo({\n      'existingVideo': video,\n      callback: callback,\n      options: options\n    });\n  } else {\n    // If the user would like to create a GIF from a webcam stream\n    existingWebcam({\n      lastCameraStream: lastCameraStream,\n      callback: callback,\n      webcamVideoElement: webcamVideoElement,\n      options: options\n    });\n  }\n}\n\n/*\n  takeSnapShot.js\n  ===============\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\nfunction takeSnapShot(userOptions, callback) {\n    callback = utils.isFunction(userOptions) ? userOptions : callback;\n    userOptions = utils.isObject(userOptions) ? userOptions : {};\n\n    if (!utils.isFunction(callback)) {\n        return;\n    }\n\n    var mergedOptions = utils.mergeOptions(defaultOptions, userOptions);\n    var options = utils.mergeOptions(mergedOptions, {\n        'interval': .1,\n        'numFrames': 1,\n        'gifWidth': Math.floor(mergedOptions.gifWidth),\n        'gifHeight': Math.floor(mergedOptions.gifHeight)\n    });\n\n    createGIF(options, callback);\n}\n\n/*\n  API.js\n  ======\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n*/\n\n// Dependencies\nvar API = {\n  'utils': utils$2,\n  'error': error$2,\n  'defaultOptions': defaultOptions$2,\n  'createGIF': createGIF,\n  'takeSnapShot': takeSnapShot,\n  'stopVideoStreaming': stopVideoStreaming,\n  'isSupported': isSupported,\n  'isWebCamGIFSupported': isWebCamGIFSupported,\n  'isExistingVideoGIFSupported': isExistingVideoGIFSupported,\n  'isExistingImagesGIFSupported': isSupported$1,\n  'VERSION': '0.4.5'\n};\n\n/*\n  index.js\n  ========\n*/\n\n/* Copyright  2017 Yahoo Inc.\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\n */\n\n// Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, and plain browser loading\nif (typeof define === 'function' && define.amd) {\n    define([], function () {\n        return API;\n    });\n} else if (typeof exports !== 'undefined') {\n    module.exports = API;\n} else {\n    window.gifshot = API;\n}\n}(typeof window !== \"undefined\" ? window : {}, typeof document !== \"undefined\" ? document : { createElement: function() {} }, typeof window !== \"undefined\" ? window.navigator : {}));\n","import paper from \"paper\";\nimport gifshot from \"gifshot\";\nimport { draw } from \"./draw\";\n//\nimport { get } from \"svelte/store\";\nimport { PatternStore } from \"../stores\";\n// This function creates a download link and clicks it\nexport function download(url, name) {\n    const downloadLink = document.createElement(\"a\");\n    downloadLink.href = url;\n    downloadLink.download = name;\n    downloadLink.click();\n}\n// SVG Download\nexport function downloadSVG() {\n    let svgData = paper.project.exportSVG(); // Use any when stuff is not recognized\n    svgData.outerHTML; // So now we can use outerHTML even if not recognized by typescript\n    const preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n    const svgBlob = new Blob([preface, svgData.outerHTML], {\n        type: \"image/svg+xml;charset=utf-8\",\n    });\n    const svgUrl = URL.createObjectURL(svgBlob);\n    const name = \"hackustica.svg\";\n    //\n    download(svgUrl, name);\n}\nexport function downloadPNG() {\n    const canvas = document.querySelector(\"canvas\");\n    const imgData = canvas.toDataURL();\n    const name = \"hackustica.png\";\n    download(imgData, name);\n}\nexport function downloadGIF() {\n    // Getting store for gif data\n    const config = get(PatternStore);\n    // This array will store the created images\n    const imgs = [];\n    // Here we create the images\n    for (let i = 0; i < config.gif.duration * config.gif.frameRate; i++) {\n        // Drawing a frame\n        draw();\n        // Getting reference to canvas\n        const canvas = document.querySelector(\"canvas\");\n        // Saving image\n        const imgData = canvas.toDataURL();\n        imgs.push(imgData);\n    }\n    // And here we create the gif\n    gifshot.createGIF({\n        images: imgs,\n        frameDuration: 1 / config.gif.frameRate,\n        gifWidth: document.querySelector(\"canvas\").width,\n        gifHeight: document.querySelector(\"canvas\").height,\n    }, function (obj) {\n        if (!obj.error) {\n            var image = obj.image;\n            download(image, \"hackustica.gif\");\n        }\n    });\n}\n","<script lang=\"ts\">\n  /* --- Imports --- */\n\n  // Stores with data\n  import { PatternStore, TextStore } from \"./stores\";\n\n  // Svelte imports\n  import InputGroup from \"./components/InputGroup.svelte\";\n  import InputItem from \"./components/InputItem.svelte\";\n  import InputInteger from \"./components/InputInteger.svelte\";\n  import InputBool from \"./components/InputBool.svelte\";\n  import InputFloat from \"./components/InputFloat.svelte\";\n  import InputColor from \"./components/InputColor.svelte\";\n  import InputThickness from \"./components/InputThickness.svelte\";\n\n  // TS / Logic imports\n  import { Tiles } from \"./ts/defs\";\n\n  import { draw, handleDraw } from \"./ts/draw\";\n  import { downloadSVG, downloadPNG, downloadGIF } from \"./ts/download\";\n\n  window.onload = function () {\n    draw();\n  };\n</script>\n\n<main>\n  <!--  -->\n\n  <!-- Input -->\n  <div class=\"input\">\n    <div>\n      <!-- Canvas -->\n      <div class=\"btns\">\n        <button class=\"button-main w-100\" on:click={handleDraw}>Disegna!</button\n        >\n        <div class=\"buttons-download\">\n          <button class=\"button-main btn-flex\" on:click={downloadSVG}\n            >↓ SVG</button\n          >\n          <button class=\"button-main btn-flex\" on:click={downloadPNG}\n            >↓ PNG</button\n          >\n          <button class=\"button-main btn-flex\" on:click={downloadGIF}\n            >↓ GIF</button\n          >\n        </div>\n      </div>\n\n      <!-- Canvas -->\n      <InputGroup label={\"Tavola disegno\"}>\n        <!--  -->\n        <InputItem>\n          <InputInteger\n            label=\"Larghezza\"\n            on:update={handleDraw}\n            bind:value={$PatternStore.canvas.width}\n          />\n        </InputItem>\n        <!--  -->\n        <InputItem>\n          <InputInteger\n            label=\"Altezza\"\n            on:update={handleDraw}\n            bind:value={$PatternStore.canvas.height}\n          />\n        </InputItem>\n        <!--  -->\n      </InputGroup>\n\n      <!-- Grid -->\n      <InputGroup label={\"Griglia\"}>\n        <!--  -->\n        <InputItem>\n          <InputInteger\n            label=\"Righe\"\n            on:update={handleDraw}\n            bind:value={$PatternStore.grid.rows}\n          />\n        </InputItem>\n        <!--  -->\n        <InputItem>\n          <InputInteger\n            label=\"Colonne\"\n            on:update={handleDraw}\n            bind:value={$PatternStore.grid.columns}\n          />\n        </InputItem>\n        <!--  -->\n        <InputItem>\n          <InputFloat\n            label=\"Distanza tra le colonne\"\n            on:update={handleDraw}\n            bind:value={$PatternStore.grid.spacing.column}\n          />\n        </InputItem>\n        <!--  -->\n        <InputItem>\n          <InputBool\n            label=\"Riempimento\"\n            on:update={handleDraw}\n            bind:value={$PatternStore.grid.fill}\n          />\n        </InputItem>\n        <!--  -->\n      </InputGroup>\n\n      <!-- Densità -->\n      <InputGroup label={\"Densità forme\"}>\n        {#each Tiles as t}\n          <InputItem>\n            <InputInteger\n              label={$TextStore.tiles[t]}\n              on:update={handleDraw}\n              bind:value={$PatternStore.tiles[t].density}\n            />\n          </InputItem>\n        {/each}\n      </InputGroup>\n\n      <!-- Colore tiles -->\n      <InputGroup label={\"Colore forme\"}>\n        <InputColor on:update={handleDraw} scope=\"tiles\" />\n      </InputGroup>\n\n      <!-- Colore sfondo -->\n      <InputGroup label={\"Colore sfondo\"}>\n        <InputColor on:update={handleDraw} gradient={true} scope=\"background\" />\n      </InputGroup>\n\n      <!-- Thicknesses -->\n      <InputGroup label={\"Spessori\"}>\n        <InputThickness />\n      </InputGroup>\n\n      <!-- Impostazioni GIF -->\n      <InputGroup label={\"Impostazioni GIF\"}>\n        <!--  -->\n        <InputItem>\n          <InputInteger\n            label=\"Durata (s)\"\n            bind:value={$PatternStore.gif.duration}\n          />\n        </InputItem>\n        <!--  -->\n        <InputItem>\n          <InputInteger label=\"FPS\" bind:value={$PatternStore.gif.frameRate} />\n        </InputItem>\n      </InputGroup>\n    </div>\n  </div>\n\n  <!-- Debug -->\n  <!-- <pre\n    style=\"overflow:auto\">\n      {JSON.stringify($PatternStore, null, 4)}\n    </pre> -->\n\n  <!-- Output -->\n  <div id=\"output\" />\n\n  <!--  -->\n</main>\n\n<style>\n  main {\n    display: flex;\n    flex-flow: row nowrap;\n    height: 100vh;\n  }\n\n  .input {\n    flex-shrink: 0;\n    width: 350px;\n    background-color: var(--cds-ui-background);\n    overflow: auto;\n    padding: 0 var(--aria);\n    padding-bottom: var(--aria);\n  }\n\n  #output {\n    flex-grow: 1;\n    background-color: var(--cds-text-01);\n    overflow: auto;\n    /* overflow: auto;\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: center;\n    align-items: center; */\n  }\n\n  button {\n    display: block;\n    width: 100%;\n  }\n\n  .btns {\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    background-color: var(--cds-ui-background);\n    padding: var(--aria) 0;\n    z-index: 1000;\n  }\n\n  .button-main {\n    margin-bottom: calc(var(--aria) / 2);\n  }\n\n  .button-main:last-child {\n    margin-bottom: 0;\n  }\n\n  .buttons-download {\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n  }\n\n  .btn-flex {\n    flex-basis: 32%;\n  }\n</style>\n","import App from './App.svelte';\nconst app = new App({\n    target: document.body,\n    props: {\n        name: 'world'\n    }\n});\nexport default app;\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","get_store_value","value","_","component_subscribe","component","callback","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","tar","src","k","assign","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","to_number","set_data","wholeText","set_input_value","input","set_style","key","important","style","setProperty","select_option","select","option","__value","selected","current_component","set_current_component","createEventDispatcher","Error","get_current_component","type","detail","e","createEvent","initCustomEvent","custom_event","call","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","flushing","seen_callbacks","Set","flush","update","pop","has","add","clear","fragment","before_update","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","bind","index","props","bound","create_component","mount_component","customElement","on_mount","m","new_on_destroy","map","filter","destroy_component","make_dirty","then","fill","init","instance","create_fragment","not_equal","parent_component","on_disconnect","context","Map","skip_bound","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","[object Object]","this","$destroy","indexOf","splice","$$props","obj","$$set","keys","subscriber_queue","writable","start","stop","subscribers","set","new_value","run_queue","s","invalidate","subscriber","PatternStore","canvas","width","height","grid","rows","columns","cell_ratio","spacing","row","column","tiles","line","density","wave","squaring","peak","color","mode","tile","distribution","#3366ff","#66ff99","#ff6666","#ffffff","#000000","background","gradient","first","position","second","thickness","values","image","url","steps","min","gif","duration","frameRate","DefaultColorsStore","TextStore","color_modes","thickness_modes","gradient_positions","topLeft","topRight","bottomLeft","bottomRight","leftCenter","topCenter","rightCenter","bottomCenter","center","label","performance","global","self","window","now","mozNow","msNow","oNow","webkitNow","navigator","product","crypto","msCrypto","nanoid","size","id","bytes","getRandomValues","Uint8Array","byte","toString","toUpperCase","dispatch","items","labels","isOpen","colors","$DefaultColorsStore","dispatchUpdate","selected_option","querySelector","Tiles","ColorModes","ThicknessModes","GradientPositions","scope","modes","gradientpos","gp","$TextStore","$PatternStore","t","array","item","fileinput","onFileSelected","file","files","reader","FileReader","readAsDataURL","onload","result","reservedWords","3","5","6","strict","strictBind","ecma5AndLessKeywords","keywords","keywordRelationalOperator","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","astralIdentifierStartCodes","astralIdentifierCodes","isInAstralSet","code","pos","isIdentifierStart","astral","test","String","fromCharCode","isIdentifierChar","TokenType","conf","keyword","beforeExpr","startsExpr","isLoop","isAssign","prefix","postfix","binop","updateContext","prec","keywords$1","kw","types","num","regexp","string","eof","bracketL","bracketR","braceL","braceR","parenL","parenR","comma","semi","colon","dot","question","arrow","template","invalidTemplate","ellipsis","backQuote","dollarBraceL","eq","incDec","logicalOR","logicalAND","bitwiseOR","bitwiseXOR","bitwiseAND","equality","relational","bitShift","plusMin","modulo","star","slash","starstar","_break","_case","_catch","_continue","_debugger","_default","_do","_else","_finally","_for","_function","_if","_return","_switch","_throw","_try","_var","_const","_while","_with","_new","_this","_super","_class","_extends","_export","_import","_null","_true","_false","_in","_instanceof","_typeof","_void","_delete","lineBreak","lineBreakG","source","isNewLine","ecma2019String","nonASCIIwhitespace","skipWhiteSpace","ref","prototype","hasOwnProperty","propName","isArray","Position","col","offset","n","SourceLocation","end","sourceFile","getLineInfo","cur","lastIndex","match","exec","defaultOptions","ecmaVersion","sourceType","onInsertedSemicolon","onTrailingComma","allowReserved","allowReturnOutsideFunction","allowImportExportEverywhere","allowAwaitOutsideFunction","allowHashBang","locations","onToken","onComment","ranges","program","directSourceFile","preserveParens","plugins","getOptions","opts","opt","tokens","token","startLoc","endLoc","comment","loc","range","pushComment","keywordRegexp","words","replace","Parser","startPos","reserved","v","reservedStrict","reservedWordsStrict","reservedWordsStrictBind","containsEsc","loadPlugins","lineStart","lastIndexOf","curLine","split","curPosition","lastTokEndLoc","lastTokStartLoc","lastTokStart","lastTokEnd","initialContext","exprAllowed","inModule","strictDirective","potentialArrowAt","inFunction","inGenerator","inAsync","yieldPos","awaitPos","skipLineComment","scopeStack","enterFunctionScope","regexpState","isKeyword","word","isReservedWord","extend","f","pluginConfigs","plugin","parse","startNode","nextToken","parseTopLevel","pp","literal","DestructuringErrors","shorthandAssign","trailingComma","parenthesizedAssign","parenthesizedBind","doubleProto","eat","next","isContextual","eatContextual","expectContextual","unexpected","canInsertSemicolon","insertSemicolon","semicolon","afterTrailingComma","tokType","notNext","expect","raise","checkPatternErrors","refDestructuringErrors","raiseRecoverable","parens","checkExpressionErrors","andThrow","checkYieldAwaitInDefaultParams","isSimpleAssignTarget","expr","expression","pp$1","exports","body","stmt","parseStatement","adaptDirectivePrologue","finishNode","loopLabel","kind","switchLabel","isLet","skip","nextCh","charCodeAt","ident","isAsyncFunction","charAt","declaration","topLevel","starttype","parseBreakContinueStatement","parseDebuggerStatement","parseDoStatement","parseForStatement","parseFunctionStatement","parseClass","parseIfStatement","parseReturnStatement","parseSwitchStatement","parseThrowStatement","parseTryStatement","parseVarStatement","parseWhileStatement","parseWithStatement","parseBlock","parseEmptyStatement","parseImport","parseExport","maybeName","parseExpression","parseLabeledStatement","parseExpressionStatement","isBreak","parseIdent","lab","parseParenExpression","awaitAt","enterLexicalScope","parseFor","init$1","parseVar","declarations","await","parseForIn","toAssignable","checkLVal","isAsync","parseFunction","consequent","alternate","argument","this$1","discriminant","cases","sawDefault","isCase","exitLexicalScope","clause","param","parseBindingAtom","finalizer","object","i$1","list","label$1","statementStart","generator","async","createNewLexicalScope","left","right","parseMaybeAssign","isFor","decl","parseVarId","isStatement","allowExpressionBody","initFunction","oldInGen","oldInAsync","oldYieldPos","oldAwaitPos","oldInFunc","parseFunctionParams","parseFunctionBody","params","parseBindingList","parseClassId","parseClassSuper","classBody","hadConstructor","member","parseClassMember","method","tryContextual","noLineBreak","computed","startNodeAt","static","isGenerator","parsePropertyName","parseClassMethod","parseMethod","superClass","parseExprSubscripts","parseExprAtom","checkExport","fNode","cNode","shouldParseExportStatement","checkVariableExport","specifiers","parseExportSpecifiers","spec","checkUnreserved","checkPatternExport","pat","properties","prop","list$1","elements","elt","decls","exported","parseImportSpecifiers","node$1","node$2","imported","statements","isDirectiveCandidate","directive","raw","statement","pp$2","isBinding","toAssignableList","operator","exprList","last","parseSpread","parseRestBinding","parseObj","close","allowEmpty","allowTrailingComma","elts","parseBindingListItem","elem","parseMaybeDefault","bindingType","checkClashes","canDeclareVarName","canDeclareLexicalName","declareVarName","declareLexicalName","pp$3","checkPropClash","propHash","shorthand","proto","other","get","noIn","expressions","afterLeftParse","parseYield","ownDestructuringErrors","oldParenAssign","oldTrailingComma","parseMaybeConditional","parseExprOps","parseMaybeUnary","parseExprOp","leftStartPos","leftStartLoc","minPrec","logical","op","buildBinary","sawUnary","parseAwait","skipArrowSubscripts","parseSubscripts","base","noCalls","maybeAsyncArrow","property","parseExprList","parseArrowExpression","callee","arguments","tag","quasi","parseTemplate","isTagged","canBeArrow","parseLiteral","regex","pattern","flags","parseParenAndDistinguishExpression","parseNew","val","spreadStart","innerStartPos","innerStartLoc","lastIsComma","parseParenItem","innerEndPos","innerEndLoc","parseParenArrowList","finishNodeAt","par","empty$1","meta","parseTemplateElement","cooked","tail","curElt","quasis","isAsyncProp","isPattern","parseProperty","parsePropertyValue","paramCount","isArrowFunction","isExpression","oldStrict","useStrict","checkParams","nonSimple","isSimpleParamList","oldLabels","exitFunctionScope","allowDuplicates","nameHash","liberal","delegate","pp$4","message","err","SyntaxError","raisedAt","pp$5","sources","var","lexical","childVar","parentLexical","parentScope","childScope","currentScope","Node","parser","pp$6","TokContext","isExpr","preserveSpace","override","types$1","b_stat","b_expr","b_tmpl","p_stat","p_expr","q_tmpl","tryReadTemplateToken","f_stat","f_expr","f_expr_gen","f_gen","pp$7","braceIsBlock","prevType","parent","curContext","inGeneratorContext","out","statementParens","allowed","$LONE","General_Category","Script","apply","gc","sc","Script_Extensions","scx","pp$9","RegExpValidationState","validFlags","switchU","switchN","lastIntValue","lastStringValue","lastAssertionIsQuantifiable","numCapturingParens","maxBackReference","groupNames","backReferenceNames","codePointToString$1","ch","isSyntaxCharacter","isControlLetter","isUnicodePropertyNameCharacter","isUnicodePropertyValueCharacter","isDecimalDigit","isHexDigit","hexToInt","isOctalDigit","reset","unicode","at","nextIndex","current","lookahead","advance","validateRegExpFlags","state","flag","validateRegExpPattern","regexp_pattern","regexp_disjunction","regexp_alternative","regexp_eatQuantifier","regexp_eatTerm","regexp_eatAssertion","regexp_eatAtom","regexp_eatExtendedAtom","lookbehind","noError","regexp_eatQuantifierPrefix","regexp_eatBracedQuantifier","regexp_eatDecimalDigits","regexp_eatPatternCharacters","regexp_eatReverseSolidusAtomEscape","regexp_eatCharacterClass","regexp_eatUncapturingGroup","regexp_eatCapturingGroup","regexp_eatAtomEscape","regexp_groupSpecifier","regexp_eatInvalidBracedQuantifier","regexp_eatExtendedPatternCharacter","regexp_eatSyntaxCharacter","regexp_eatGroupName","regexp_eatRegExpIdentifierName","regexp_eatRegExpIdentifierStart","regexp_eatRegExpIdentifierPart","regexp_eatRegExpUnicodeEscapeSequence","isRegExpIdentifierStart","isRegExpIdentifierPart","regexp_eatBackReference","regexp_eatCharacterClassEscape","regexp_eatCharacterEscape","regexp_eatKGroupName","regexp_eatDecimalEscape","regexp_eatControlEscape","regexp_eatCControlLetter","regexp_eatZero","regexp_eatHexEscapeSequence","regexp_eatLegacyOctalEscapeSequence","regexp_eatIdentityEscape","regexp_eatControlLetter","regexp_eatFixedHexDigits","lead","leadSurrogateEnd","trail","regexp_eatHexDigits","isCharacterClassEscape","regexp_eatUnicodePropertyValueExpression","regexp_eatUnicodePropertyName","regexp_eatUnicodePropertyValue","regexp_validateUnicodePropertyNameAndValue","regexp_eatLoneUnicodePropertyNameOrValue","nameOrValue","regexp_validateUnicodePropertyNameOrValue","regexp_classRanges","regexp_eatClassAtom","regexp_eatClassEscape","ch$1","regexp_eatClassControlLetter","regexp_eatOctalDigit","n1","n2","Token","pp$8","codePointToString","getToken","Symbol","iterator","done","skipSpace","finishToken","readToken","fullCharCodeAtPos","readWord","getTokenFromCode","skipBlockComment","startSkip","loop","readToken_dot","readNumber","next2","readToken_slash","readRegexp","finishOp","readToken_mult_modulo_exp","tokentype","readToken_pipe_amp","readToken_caret","readToken_plus_min","readToken_lt_gt","readToken_eq_excl","readRadixNumber","readString","str","escaped","inClass","flagsStart","readWord1","readInt","radix","total","Infinity","startsWithDot","octal","parseInt","parseFloat","readCodePoint","codePos","readHexChar","invalidStringToken","quote","chunkStart","readEscapedChar","INVALID_TEMPLATE_ESCAPE_ERROR","inTemplateElement","readTmplToken","readInvalidTemplateToken","inTemplate","octalStr","substr","escStart","esc","parse_dammit","LooseParser","pluginsLoose","Parser$$1","plugins$$1","require$$0","Base","hidden","describe","getOwnPropertyDescriptor","define","defineProperty","iter","forIn","dst","each","desc","inject","dest","enumerable","beans","preserve","beansNames","field","substring","bean","isFunc","res","prev","toLowerCase","isPlainObject","configurable","part","statics","ctor","initialize","clone","constructor","pick","begin","module","_id","_name","Formatter","number","join","getClassName","importJSON","json","exportJSON","toJSON","serialize","exclude","_prioritize","equals","obj1","obj2","read","amount","peek","__index","readIndex","_readIndex","readNull","__read","filtered","__filtered","remain","readList","entry","readNamed","getNamed","hasValue","getSource","__unfiltered","readSupported","that","__source","arg","hasNamed","prioritize","processed","handleKey","isPlainValue","asString","compact","dictionary","isRoot","formatter","precision","definitions","references","unshift","_serialize","_compactSerialize","deserialize","_data","_setDictionary","_isRoot","isFirst","hasDictionary","isDictionary","args","JSON","stringify","useTarget","Item","Layer","concat","itemsLength","startLength","remove","_index","removed","capitalize","camelize","chr","hyphenate","Emitter","on","func","_eventTypes","handlers","_callbacks","install","off","uninstall","once","emit","setTarget","currentTarget","responds","attach","fire","_installEvents","events","_events","isString","PaperScope","paper","settings","applyMatrix","insertItems","handleSize","hitTolerance","project","projects","tools","_scopes","support","CanvasProvider","getContext","nativeDash","nativeBlendModes","BlendMode","nativeModes","release","agent","user","userAgent","os","platform","browser","v1","v2","rv","chrome","version","versionNumber","trident","jsdom","webkit","atom","getView","_view","getPaper","execute","PaperScript","View","updateFocus","setup","Project","createCanvas","getCanvas","activate","handleAttribute","el","hasAttribute","PaperScopeItem","_scope","_list","_reference","isActive","CollisionDetection","findItemBoundsCollisions","items1","items2","tolerance","getBounds","bounds","rect","top","bottom","bounds1","bounds2","findBoundsCollisions","findCurveBoundsCollisions","curves1","curves2","bothAxis","curves","hor","ver","boundsA","boundsB","sweepVertical","onlySweepAxisCollisions","allBounds","lengthA","lengthAll","binarySearch","indices","coord","lo","hi","mid","pri0","pri1","sec0","sec1","allIndicesByPri0","sort","i1","i2","activeIndicesByPri1","allCollisions","curIndex","curBounds","origIndex","isCurrentA","isCurrentB","curCollisions","pruneCount","j","activeIndex","curSec1","curSec0","activeBounds","isActiveA","isActiveB","collisions","multiplier","pow","round","pair","val1","val2","separator","point","x","y","rectangle","Numerical","abscissas","weights","abs","sqrt","log2","log","LOG2E","EPSILON","MACHINE_EPSILON","clamp","getDiscriminant","D","E","ad","bd","cd","q","getNormalizationFactor","norm","CURVETIME_EPSILON","GEOMETRIC_EPSILON","TRIGONOMETRIC_EPSILON","KAPPA","isZero","isMachineZero","integrate","w","A","B","sum","Ax","findRoot","df","fx","dx","nx","solveQuadratic","roots","x1","x2","Q","R","count","boundless","minB","maxB","isFinite","solveCubic","b1","c2","qd","evaluate","x0","tmp","td","rd","UID","_pools","pool","Point","arg0","arg1","reading","hasY","_set","setAngle","angle","getLength","setLength","_angle","cos","sin","scale","getAngle","getAngleInRadians","PI","setAngleInRadians","getAngleInDegrees","setAngleInDegrees","div","NaN","acos","atan2","getQuadrant","getDirectedAngle","cross","getDistance","squared","normalize","rotate","subtract","transform","matrix","_transformPoint","multiply","divide","negate","isInside","Rectangle","contains","isClose","isCollinear","isColinear","isOrthogonal","isNaN","isInQuadrant","point1","point2","random","y1","y2","LinkedPoint","owner","setter","_x","_y","_owner","_setter","_dontNotify","getX","setX","getY","setY","isSelected","_selection","_getSelection","setSelected","_changeSelection","Size","hasHeight","size1","size2","LinkedSize","_width","_height","getWidth","setWidth","getHeight","setHeight","arg2","arg3","to","frm","rt","getPoint","_dontLink","setPoint","getSize","_fw","_fh","setSize","sx","_sx","sy","_sy","h","getLeft","setLeft","getTop","setTop","getRight","setRight","getBottom","setBottom","getCenterX","setCenterX","getCenterY","setCenterY","getCenter","setCenter","getArea","isEmpty","_containsRectangle","_containsPoint","intersects","epsilon","intersect","unite","include","expand","parts","xFirst","LinkedRectangle","internal","Matrix","ok","_a","_b","_c","_d","_tx","_ty","tx","ty","_changed","getValues","_applyMatrix","mx","recursively","_setApplyMatrix","isIdentity","translate","shear","skew","toRadians","tan","a1","c1","d1","a2","b2","d2","tx2","ty2","prepend","tx1","ty1","appended","prepended","invert","det","inverted","concatenate","preConcatenate","chain","_shiftless","_orNullIfIdentity","isInvertible","isSingular","_transformCoordinates","_transformCorners","coords","_transformBounds","inverseTransform","_inverseTransform","decompose","degrees","asin","translation","getTranslation","rotation","scaling","skewing","getScaling","getRotation","applyToContext","Line","arg4","asVector","_px","_py","_vx","_vy","getVector","isInfinite","getSide","getSignedDistance","p1x","p1y","v1x","v1y","p2x","p2y","v2x","v2y","dy","u1","u2","uMin","uMax","px","py","vx","vy","ccw","_children","_namedChildren","_activeLayer","_currentStyle","Style","_selectionItems","_selectionCount","_updateVersion","view","_needsUpdate","_requested","_autoUpdate","requestUpdate","changes","_changes","changesById","_changesById","getCurrentStyle","setCurrentStyle","getIndex","getLayers","getActiveLayer","getSymbolDefinitions","ids","getItems","class","SymbolItem","_definition","getSymbols","getSelectedItems","selectionItems","selection","isInserted","_updateSelection","selectAll","setFullySelected","deselectAll","addLayer","layer","insertLayer","_remove","_setProject","setName","_insertItem","_created","NO_INSERT","insertChild","_getItems","getItem","removeOn","sets","_removeSets","mousedrag","draw","pixelRatio","save","viewMatrix","matrices","updateMatrix","restore","strokeWidth","_drawSelection","_serializeFields","_canApplyMatrix","_canScaleStroke","_pivot","_visible","_blendMode","_opacity","_locked","_guide","_clipMask","_selectBounds","_selectChildren","pivot","visible","blendMode","opacity","locked","guide","clipMask","_countItemEvent","onFrame","_animateItem","onLoad","onError","_itemHandlers","_initialize","hasProps","_matrix","_parent","_style","fields","fontSize","Group","_defaults","symbol","_symbol","cacheParent","_project","_bounds","_position","_decomposed","_globalMatrix","_clearBoundsCache","getId","getName","_removeNamed","_getOwner","namedChildren","getStyle","setStyle","getSelection","setSelection","isFullySelected","isClipMask","setClipMask","setFillColor","setStrokeColor","getData","setData","getPosition","_getPositionFromBounds","setPosition","getPivot","setPivot","getStrokeBounds","stroke","getHandleBounds","handle","getInternalBounds","hasMatrix","_boundsOptions","getStrokeScaling","cacheItem","_getCachedBounds","setBounds","_backup","_getBounds","_updateBoundsCache","_getBoundsCacheKey","noInternal","cacheKey","cached","nonscaling","hasStroke","_getStrokeMatrix","_item","getViewMatrix","_boundsCache","cache","_decompose","decomposed","setRotation","setScaling","getMatrix","setMatrix","getGlobalMatrix","_dontClone","parents","getApplyMatrix","setApplyMatrix","getTransformContent","setTransformContent","getProject","installEvents","getLayer","getParent","setParent","addChild","getChildren","setChildren","removeChildren","addChildren","getFirstChild","getLastChild","getNextSibling","getPreviousSibling","_equals","copy","deep","copyAttributes","copyContent","insertAbove","orig","excludeMatrix","rasterize","resolution","raster","Raster","getResolution","getTopLeft","floor","getBottomRight","ceil","boundsSize","rasterSize","_contains","_asPathItem","Path","getIntersections","hitTest","_hitTest","HitResult","hitTestAll","all","hitTestChildren","_exclude","child","_hitTestChildren","parentViewMatrix","guides","tolerancePadding","_tolerancePadding","_getStrokePadding","checkSelf","hit","checkPoint","pt","checkPosition","checkCenter","checkBounds","points","_hitTestSelf","hasFill","matches","compare","matchObject","firstOnly","overlapping","inside","recursive","path","childMatrix","insertChildren","inserted","notifySelf","_insertAt","insertBelow","sendToBack","bringToFront","appendTop","appendBottom","moveAbove","moveBelow","addTo","copyTo","reduce","namedArray","notifyParent","_dispose","replaceWith","reverseChildren","reverse","numChildren","isEditable","hasShadow","_getOrder","getList","list1","list2","hasChildren","isAbove","isBelow","isParent","isChild","isDescendant","isAncestor","isSibling","isGroupedWith","_applyRecursively","transformMatrix","fillColor","getFillColor","strokeColor","getStrokeColor","_transformContent","decomp","applyRecursively","globalToLocal","localToGlobal","parentToLocal","localToParent","fitBounds","itemRatio","rectRatio","newBounds","_setStyles","fillStyle","toCanvasStyle","strokeStyle","lineWidth","getStrokeWidth","strokeJoin","getStrokeJoin","strokeCap","getStrokeCap","miterLimit","getMiterLimit","lineJoin","lineCap","dashArray","getDashArray","dashOffset","getDashOffset","setLineDash","lineDashOffset","mozDash","mozDashOffset","blur","getShadowBlur","getShadowOffset","shadowColor","getShadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","parentStrokeMatrix","globalMatrix","mainCtx","itemOffset","prevOffset","normalBlend","nativeBlend","direct","dontStart","clip","_canComposite","strokeMatrix","clipItem","globalAlpha","globalCompositeOperation","setTransform","_draw","dontFinish","getFillRule","process","_isUpdated","updateVersion","CompoundPath","updated","itemSelected","boundsSelected","positionSelected","_drawSelected","getSelectedColor","half","beginPath","arc","deltas","delta","moveTo","lineTo","closePath","fillRect","hash","tween","easing","Tween","_handleFrame","time","running","tweenTo","tweenFrom","_clipItem","_getClipItem","isClipped","setClipped","clipped","Shape","radius","_type","_size","_radius","setType","setRadius","getType","getShape","setShape","getRadius","rad","toPath","toShape","dontPaint","untransformed","isCircle","rx","ry","kappa","cx","cy","bezierCurveTo","getCornerCenter","halfSize","dir","corner","quadrant","isOnEllipseStroke","padding","vector","hitStroke","hitFill","strokeRadius","strokePadding","outer","inner","createShape","Circle","Ellipse","ellipse","_readEllipse","crossOrigin","_smoothing","getElementById","naturalHeight","setImage","setSource","_loaded","_image","_canvas","_setImage","copyCanvas","drawImage","_crossOrigin","_clear","getElement","getLoaded","u","getPpi","getImage","Event","setTimeout","DomEvent","load","error","complete","naturalWidth","_context","setCanvas","_change","setContext","toDataURL","Image","getCrossOrigin","setCrossOrigin","getSmoothing","setSmoothing","smoothing","getSubCanvas","getSubRaster","getAverageColor","PathItem","_sampleContext","clearRect","sampleSize","pixels","getImageData","channels","alpha","Color","getPixel","setPixel","components","_convert","_alpha","imageData","createImageData","putImageData","setImageData","disabled","DomElement","setPrefixed","setDefinition","SymbolDefinition","getDefinition","getSymbol","setSymbol","dontCenter","setItem","_dontCenter","place","segments","handles","ends","Segment","arg5","handleIn","handleOut","SegmentPoint","_point","hasHandles","_handleIn","_handleOut","_path","curve","_curves","_closed","getHandleIn","setHandleIn","getHandleOut","setHandleOut","isSmooth","clearHandles","oldSelection","getPath","getCurve","_segments","getCurves","getLocation","CurveLocation","_segment1","getNext","smooth","_first","_last","factor","getPrevious","p0","p1","p2","d1_a","d1_2a","d2_a","d2_2a","N","isLast","reversed","removeSegment","segment","interpolate","handleIn1","handleIn2","handleOut2","handleOut1","change","Curve","arg6","arg7","seg1","seg2","handle1","handle2","segment1","segment2","_segment2","getPoint1","getHandle1","getHandle2","getPoint2","_length","classify","setPoint1","setPoint2","setHandle1","setHandle2","getSegment1","getSegment2","getPoints","getLine","getPart","getPartLength","divideAt","location","divideAtTime","getTimeAt","_setHandles","subdivide","setHandles","splitAt","splitAtTime","getLocationAtTime","isTime","straight","h1","h2","y0","x3","y3","x4","y4","x5","y5","x6","y6","x7","y7","x8","y8","x9","y9","getMonoCurves","io","o0","o1","o2","o3","isStraight","v0","v3","getTimeOf","p3","geomEpsilon","getNearestTime","minDist","minT","refine","dist","step","flip","isFlatEnough","flatness","ux","uy","_addBounds","minPad","maxPad","s1","s2","isLinear","third","hasLength","isHorizontal","getTangentAtTime","isVertical","getLocationAt","_isTime","getParameterAt","getTimesWithTangent","tangent","getOffsetAtTime","getLocationOf","getOffsetOf","getOffset","getParameterOf","getNearestLocation","getNearestPoint","methods","_evaluateMethods","getLengthIntegrand","ax","bx","ay","by","getIterations","normalized","tMin","tMax","d3","serpentine","t1","t2","hasRoots","t1Ok","t2Ok","f1","f2","ds","forward","rangeLength","diff","guess","getTangent","getWeightedTangent","getNormal","getWeightedNormal","getCurvature","getPeaks","addLocation","overlap","excludeStart","excludeEnd","loc1","loc2","_intersection","addCurveIntersections","recursion","calls","tMinClip","tMaxClip","q0x","q0y","q3x","q3y","dMin","dMax","dp0","dp1","dp2","dp3","hull","dq0","dq1","dq2","dq3","dist1","dist2","distRatio","getConvexHull","clipConvexHull","tMinNew","tMaxNew","uDiff","hullTop","hullBottom","clipConvexHullPart","threshold","qx","qy","getCurveLineIntersections","addCurveLineIntersections","addLineIntersection","getCurveIntersections","overlaps","getOverlaps","straight1","straight2","before","getSelfIntersection","info","getSquaredLineLength","straightBoth","l1","l2","pairs","matrix1","matrix2","_returnFirst","length1","length2","values1","values2","boundsCollisions","index1","curve1","collisions1","index2","curve2","den","times","t0","_overlap","_distance","_setCurve","_time","getPointAtTime","_next","_previous","_setPath","_version","_curve","_segment","_setSegment","getSegment","getTime","trySegment","_offset","_curveOffset","getParameter","getCurveOffset","getIntersection","getLastSegment","_ignoreOther","isTouching","inter","isCrossing","t1Inside","t2Inside","c4","c3","offsets","addOffsets","isInRange","getPointAt","v4","a3","a4","hasOverlap","merge","search","found","path1","path2","expanded","compound","pathData","isClockwise","setClockwise","clockwise","setPathData","previous","control","relative","getCoord","command","lower","move","cubicCurveTo","quadraticCurveTo","arcTo","winding","_getWinding","onPath","windingL","windingR","getCrossings","minLoc","isPath","itemsFrom","itemsTo","setClosed","paths1","paths2","matched","boundsOverlaps","pathBoundsOverlaps","closed","setSegments","_segmentSelection","_area","getSegments","fullySelected","_add","getFirstSegment","_countCurves","getFirstCurve","getLastCurve","isClosed","getPathData","_precision","curX","curY","prevX","prevY","inX","inY","outX","outY","addSegment","skipLine","segs","_adjustCurves","insertSegment","addSegments","insertSegments","removeSegments","_includeCurves","area","_selectSegments","newSelection","last1","last2","first2","first1","simplify","flatten","PathFlattener","PathFitter","fit","asymmetric","paddingLeft","paddingRight","knots","n_1","rf","hx","hy","seg3","seg4","isArc","pt1","pt2","shape","pos2","end2","pos1","end1","start2","cap","numSegments","hitCurves","isCloseEnough","checkSegmentPoint","seg","checkSegmentPoints","addToArea","checkSegmentStroke","isJoin","_addBevelJoin","_addSquareCap","getOffsetsWithTangent","curveStart","curveTimes","drawSegments","drawSegment","dashLength","flattener","drawPart","pX","pY","miniSize","miniHalf","drawHandle","hX","hY","drawHandles","getCurrentSegment","moveBy","curveTo","through","extent","middle","large","rxSq","rySq","xSq","ySq","throughSide","centerSide","ext","inc","z","lineBy","curveBy","parameter","cubicCurveBy","quadraticCurveBy","arcBy","prevCoords","processSegment","joinBounds","addPoint","addRound","addJoin","addCap","phi","isArea","normal1","getNormalAtTime","normal2","normal","joinPadding","joinRadius","SQRT2","paddingX","paddingY","xn","xx","yn","yx","ellipseSegments","createPath","createEllipse","bl","getBottomLeft","tl","tr","getTopRight","br","RoundRectangle","Oval","Arc","RegularPolygon","sides","three","Star","radius1","radius2","paths","getCurrentPath","check","operators","1","2","-1","getPaths","preparePath","resolveCrossings","reorient","createResult","filterIntersection","traceBoolean","operation","trace","splitBoolean","_path1","_path2","crossings","divideLocations","collectPaths","_overlapsOnly","curvesValues","curveCollisions","curveCollisionsMap","propagateWinding","_winding","tracePaths","reorientPaths","added","addPath","linkIntersections","clearCurveHandles","lookup","container","sorted","entry1","containerWinding","getInteriorPoint","entry2","clearLater","renormalizeLocs","prevCurve","prevTime","results","clearCurves","clearLookup","origTime","newCurve","getWinding","dontFlip","vPrev","vClose","curvesList","ia","pv","pa","po","qualityEpsilon","paL","paR","pathWindingL","pathWindingR","onAnyPath","quality","addWinding","a0","windingPrev","a3Prev","handleCurve","monoCurves","totalLength","curveLength","operand","SQRT1_2","wind","pathWinding","starts","isValid","_visited","isStart","visitPath","getCrossingSegments","collectStarts","collect","nextInter","inter1","inter2","over1","over2","branch","visited","valid","finished","branches","shift","hasOverlaps","hasCrossings","intersections","nonZero","intercepts","mv","mo0","mo3","maxRecursion","ignoreStraight","minSpan","addCurve","computeParts","halves","tMid","_get","fitCubic","tan1","tan2","uPrime","chordLengthParameterize","maxError","parametersInOrder","generateBezier","findMaxError","reparameterize","tanCenter","C","X","b0","b3","alpha1","alpha2","detC0C1","detC0X","c0","segLength","eps","degree","maxDist","TextItem","content","_content","_lines","setContent","getContent","getCharacterStyle","setCharacterStyle","getParagraphStyle","setParagraphStyle","PointText","lines","leading","getLeading","font","getFontStyle","textAlign","getJustification","fillText","strokeText","numLines","justification","getTextWidth","colorCtx","gray","rgb","hsb","hsl","componentParsers","namedColors","transparent","fromCSS","trim","isHSL","unit","turn","grad","hsbIndices","converters","rgb-hsb","g","hsb-rgb","rgb-hsl","achromatic","hsl-rgb","t3s","t3","rgb-gray","gray-rgb","gray-hsb","gray-hsl","gradient-rgb","rgb-gradient","_components","Gradient","_removeOwner","_addOwner","_properties","argType","converted","parsers","stops","radial","getComponents","_canvasStyle","converter","convert","getAlpha","setAlpha","hasAlpha","isGradient","toCSS","hex","canvasGradient","_stops","origin","destination","highlight","inverse","_radial","createRadialGradient","createLinearGradient","addColorStop","_color","_types","_setOwner","components1","components2","setStops","setRadial","_owners","getStops","GradientStop","getRadial","stops1","stops2","rampPoint","setColor","setOffset","getRampPoint","setRampPoint","getColor","itemDefaults","fillRule","strokeScaling","shadowOffset","selectedColor","groupDefaults","fontFamily","fontWeight","textDefaults","_values","isColor","isPoint","applyToChildren","old","_dontMerge","childValue","Font","WindingRule","isStyle","style1","style2","secondary","defaults2","value1","value2","getFontSize","getFontWeight","getFontFamily","getFont","setFont","getPixelSize","handlePrefix","prefixes","suffix","getStyles","doc","nodeType","ownerDocument","defaultView","getComputedStyle","viewport","html","documentElement","getBoundingClientRect","clientLeft","clientTop","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportBounds","innerWidth","clientWidth","innerHeight","clientHeight","isInvisible","isInView","getPrefixed","passive","targetTouches","changedTouches","pageX","clientX","pageY","clientY","getTarget","srcElement","getRelatedTarget","relatedTarget","toElement","requestAnimationFrame","timer","nativeRequest","requested","handleCallbacks","functions","setInterval","getCanvasSize","_viewEvents","none","userDrag","userSelect","touchCallout","contentZooming","tapHighlightColor","_windowEvents","resize","setViewSize","Stats","_stats","stats","domElement","_element","_pixelRatio","devicePixelRatio","_setElementSize","_viewSize","_views","_viewsById","_focused","_frameItems","_frameItemCount","_itemEvents","native","virtual","_animate","play","pause","_count","getAutoUpdate","setAutoUpdate","autoUpdate","Date","animate","_handleFrameItems","getPixelRatio","getViewSize","isVisible","temp","getZoom","setZoom","zoom","scrollBy","projectToView","viewToProject","getEventPoint","CanvasView","prevFocus","tempFocus","mousedown","mousemove","mouseup","dragging","mouseDown","pointerEnabled","msPointerEnabled","viewEvents","docEvents","mouseout","nodeName","handleMouseMove","scroll","_handleMouseEvent","downPoint","lastPoint","downItem","overItem","dragItem","clickItem","clickTime","dblClick","called","prevented","fallbacks","doubleclick","wasInView","itemEventsMap","click","mouseenter","mouseleave","itemEvents","hitItems","nativeMove","tool","inView","hitItem","mouse","emitMouseEvent","drag","emitMouseEvents","down","up","cancelable","preventDefault","_handleKeyEvent","character","keyEvent","KeyEvent","sign","_resetState","prevPoint","stopItem","mouseEvent","stopped","MouseEvent","fallback","HTMLCanvasElement","deviceRatio","backingStoreRatio","firefox","prevFont","measureText","stopPropagation","getTimeStamp","timeStamp","getModifiers","Key","modifiers","metaFixMap","downKey","keyLookup","\t"," ","\b","","Spacebar","Del","Win","Esc","charLookup","tab","enter","keyMap","charMap","alt","capsLock","mac","getKey","keyIdentifier","keyCode","keydown","altKey","metaKey","ctrlKey","keypress","charCode","keyup","isDown","ToolEvent","_choosePoint","toolPoint","getLastPoint","_lastPoint","setLastPoint","getDownPoint","_downPoint","setDownPoint","getMiddlePoint","_middlePoint","setMiddlePoint","middlePoint","getDelta","_delta","setDelta","getCount","setCount","Tool","_moveCount","_downCount","getMinDistance","_minDistance","setMinDistance","minDistance","_maxDistance","getMaxDistance","setMaxDistance","maxDistance","getFixedDistance","setFixedDistance","distance","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","isFunction","_then","_startTime","_keys","_parsedKeys","_parseKeys","_from","_getState","_to","progress","getValue","__add","__subtract","__multiply","_setProperty","onUpdate","startTime","_getProperty","resolved","_resolveValue","_calculate","parsed","calculateBinary","Http","xhr","XMLHttpRequest","open","mimeType","overrideMimeType","status","responseText","onerror","send","canvases","sr","sg","sb","sa","bg","bb","ba","dr","dg","db","getLum","setLum","mn","lmn","ln","mxl","getSat","setSat","md","screen","overlay","soft-light","hard-light","color-dodge","color-burn","darken","lighten","difference","exclusion","hue","saturation","luminosity","average","negation","srcContext","dstContext","srcCanvas","dstData","SvgElement","svg","xmlns","xlink","attributeNamespace","href","xmlns:xlink","attributes","namespace","setAttributeNS","createElementNS","getAttributeNS","SvgStyles","true","false","toSVG","fromSVG","exportFilter","getTransform","coordinates","attrs","trans","exportGroup","childNode","exportSVG","clip-path","exportShape","exporters","embedImages","matchShapes","definitionItem","viewBox","overflow","textContent","applyStyle","gradientNode","getGradient","getOrigin","getDestination","getHighlight","fy","gradientUnits","stopColor","exportGradient","visibility","svgs","__id","typeId","exportDefinitions","defs","firstChild","XMLSerializer","serializeToString","exporter","onExport","setOptions","rootSize","allowNull","allowPercent","defaultValue","defaultX","defaultY","convertValue","importGroup","isClip","isDefs","currentStyle","applyAttributes","querySelectorAll","importNode","importPoly","importGradient","scaleToBounds","_scaleToBounds","importers","#document","clippath","polygon","polyline","lineargradient","radialgradient","use","circle","switch","applyTransform","transforms","applyOpacity","gradientTransform","fill-opacity","stroke-opacity","setVisible","display","stop-color","stop-opacity","percent","styles","group","tagName","isElement","nextSibling","importer","onImport","expandShapes","importSVG","DOMParser","parseFromString","File","readAsText","root","mod","acorn","require$$1","inputLen","inpt","initTokenState","lastStart","lastEnd","tokPos","lastEndLoc","line_loc_t","_eof","isUseStrict","setStrict","strictSemicolons","allowTrailingCommas","forbidReserved","tokStart","tokEnd","tokStartLoc","tokEndLoc","tokVal","tokRegexpAllowed","tokCurLine","tokLineStart","tokenize","forceRegexp","jumpTo","reAllowed","_num","_regexp","_string","atomValue","keywordTypes","break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","throw","try","while","with","null","new","in","instanceof","typeof","void","_bracketL","_bracketR","_braceL","_braceR","_parenL","_parenR","_comma","_semi","_colon","_dot","_question","_slash","_eq","_assign","_incDec","isUpdate","_prefix","_logicalOR","_logicalAND","_bitwiseOR","_bitwiseXOR","_bitwiseAND","_equality","_relational","_bitShift","_plusMin","_multiplyModulo","tokTypes","makePredicate","cats","compareTo","arr","cat","Function","isReservedWord3","isReservedWord5","isStrictReservedWord","isStrictBadIdWord","newline","readHexNumber","tok","mods","isFloat","escStr","strct","node_t","node_loc_t","startNodeFrom","guard","guardedHandlers","allowStrict","noComma","tokStartLoc1","tokStart1","sawGetSet","isGetSet","conflict","amd","binaryOperators","+","-","*","/","%","==","!=","unaryOperators","__self","__$__","$__","compile","insertions","insertion","getCode","replaceCode","handleOverloading","between","getBetween","parentType","exp","sourceMaps","paperFeatures","offsetCode","lineBreaks","getElementsByTagName","innerHTML","mappings","encodeVLQ","safari","names","sourceRoot","sourcesContent","operatorOverloading","moduleExports","walkAST","dec","specifier","handleExports","btoa","unescape","encodeURIComponent","toolHandlers","compiled","expose","script","head","__paperscript__","onResize","setOnResize","setOnFrame","loadScript","canvasId","scopeAttribute","baseURI","loadAll","readyState","calculateUnary","PlacedSymbol","require$$2","interpolate_values","interpolate_points","tile_peak","pM","p4","p12","p21","p23","p32","tile_wave","p01","p10","table","temperature","randomFunction","influence","T","nb","previousTotal","weight","avg","ur","urgencySum","previousSum","urgency","currentUrgency","cumulatedUrgencies","choice","createRandom","rng","createRandomIndex","customRandom","randomIndex","createChoice","customRandomIndex","createFisherYatesSample","createGeometricReservoirSample","createNaiveSample","alphabet","randomCharacterIndex","createRandomString","createReservoirSample","createSampleWithReplacements","createShuffleInPlace","sequence","shuffleInPlace","customShuffleInPlace","createShuffle","DEFAULTS","getWeight","createWeightedRandomIndex","rngOrOptions","winner","weightedRandomIndex","createCachedWeightedRandomIndex","CDF","upperBound","lib","createWeightedChoice","sub","vmult","vscale","ratio","fitSize","centerSize","fillSize","Cell","super","Grid","cell","cells","sscale","makeCanvas","config","canvas_id","canvas_old","deleteCanvas","getGrid","canvasRect","getCanvasRect","unitGrid","getUnitGrid","gridRect","fillRectangleCenter","fitRectangleCenter","getGridRect","fillHeight","setOrigin","drawTile","tile_line","getColors","colorConfig","rwc","getColorsDistributionMode","getColorsTileMode","getThicknessImageMode","img","makeImage","img_raster","reject","image_ratio","image_rect","placeImagePromise","colorsToValues","getCells","rasterizeByGrid","old_min","old_max","new_min","new_max","values_quant","bins","lower_bound","upper_bound","quantizeValues","mapValue","getThickness","thicknessConfig","thicknesses","getThicknessValuesMode","drawGradient","gradientConfig","bg_path","tiles_table","getTiles","colors_background","colors_tile","cell_rect","color_tile","color_background","tile_path","handleDraw","getUserMedia","utils","URL","webkitURL","mozURL","msURL","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","requestAnimFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","requestTimeout","delay","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isObject","isEmptyObject","isSupported","webworkers","Worker","blob","Uint32Array","videoCodecs","testEl","supportObj","mp4","h264","ogv","ogg","webm","canPlayType","collection","mergeOptions","userOptions","newObj","currentUserOption","setCSSAttr","removeElement","createWebWorker","objectUrl","createObjectURL","worker","getExtension","resizeFont","containerWidth","gifWidth","minFontSize","span","textIndent","offsetWidth","webWorkerError","utils$2","freeze","validate","skipObj","errorObj","validators","indece","currentValidator","errorCode","condition","errorMsg","messages","error$2","sampleInterval","numWorkers","gifHeight","interval","numFrames","frameDuration","keepCameraOn","images","video","webcamVideoElement","cameraStream","fontColor","textBaseline","textXCoordinate","textYCoordinate","progressCallback","completeCallback","saveRenderingContexts","savedRenderingContexts","defaultOptions$2","isWebCamGIFSupported","NeuQuant","alphadec","thepicture","lengthcount","samplefac","network","netsize","prime1","prime2","prime3","prime4","minpicturebytes","maxnetpos","netbiasshift","ncycles","intbiasshift","intbias","gammashift","betashift","beta","betagamma","initrad","radiusbiasshift","radiusbias","initradius","radiusdec","alphabiasshift","initalpha","radbiasshift","radbias","alpharadbshift","alpharadbias","netindex","bias","freq","radpower","NeuQuantConstructor","thepic","sample","colorMap","inxbuild","smallpos","smallval","previouscol","startpos","learn","samplepixels","pix","lim","altersingle","contest","alterneigh","bestd","best","unbiasnet","alphaMult","biasdist","betafreq","bestpos","bestbiaspos","bestbiasd","workerCode","onmessage","ev","response","gifshot","workerMethods","postMessage","dataToRGB","componentizedPaletteToArray","paletteRGB","paletteArray","processFrameWithQuantizer","rgbComponents","nq","numberPixels","indexedPixels","palette","frame","_frame","gifWriter","buf","gopts","loop_count","global_palette","ended","addFrame","indexed_pixels","using_local_palette","num_colors","check_palette_and_num_colors","min_code_size","disposal","use_transparency","transparent_index","il","index_stream","cur_subblock","clear_code","code_mask","eoi_code","next_code","cur_code_size","cur_shift","emit_bytes_to_buffer","bit_block_size","emit_code","ib_code","code_table","cur_key","cur_code","GifWriterOutputLZWCodeStream","noop$2","AnimatedGIF","repeat","frames","numRenderedFrames","onRenderCompleteCallback","onRenderProgressCallback","workers","availableWorkers","generatingGIF","initializeWebWorkers","getBase64GIF","animatedGifInstance","processFrameWorkerCode","webWorkerObj","webWorker","workerError","getWorker","freeWorker","byteMap","bufferToString","buffer","numberValues","onFrameFinished","hasExistingImages","allDone","every","beingProcessed","generateGIF","processNextFrame","processFrame","AnimatedGifContext","_options","startRendering","gifOptions","gifWriter$$1","framePalette","setRepeat","gifshotOptions","_gifshotOptions","addFrameImageData","imageDataArray","dithering","onRenderProgress","isRendering","destroyWorkers","workerObj","terminate","revokeObjectURL","noop$3","screenShot","existingImages","crop","videoElement","videoHeight","videoWidth","Number","waitBetweenFrames","renderingContextsToSave","pendingFrames","ag","sourceX","scaledWidth","sourceWidth","sourceY","scaledHeight","sourceHeight","captureFrames","captureSingleFrame","framesLeft","finishCapture","drawVideo","capture","currentTime","videoStream","loadedData","defaultVideoDimensions","findVideoSize","findVideoSizeMethod","attempts","completedCallback","onStreamingTimeout","stream","existingVideo","streamedCallback","mozSrcObject","srcObject","checkLoadedData","startStreaming","errorCallback","streamed","completed","lastCameraStream","autoplay","muted","startVideoStreaming","timeoutLength","timeout","originalCallback","noGetUserMediaSupportTimeout","clearTimeout","stopVideoStreaming","_obj","cameraStreamTracks","getTracks","hasCameraStreamTracks","firstCameraStreamTrack","createAndGetGIF","cropDimensions","createGIF","imagesLength","window.URL","loadedImages","loadedImagesLength","tempImage","addLoadedImagesToGif","loadedImage","currentImage","videoType","videoSrc","existingWebcam","API","takeSnapShot","mergedOptions","isExistingVideoGIFSupported","codecs","hasValidCodec","currentCodec","isExistingImagesGIFSupported","VERSION","download","downloadLink","downloadSVG","svgData","outerHTML","svgBlob","downloadPNG","downloadGIF","imgs","imgData"],"mappings":"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AAE,GAAG,IAAI,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,EAAE,IAAI,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,IAAI,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,EAAE,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,KAAK,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,KAAK,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,KAAK,IAAI,GAAG,GAAG,KAAK,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,KAAK,MAAM,GAAG,KAAK,GAAG,IAAI,EAAE,KAAK,GAAG,KAAK,KAAK,KAG7pCC,GAAwB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,GAAG,IAAI,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GA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CA,QACA,OACA,0BACA,QACA,iBACA,UACA,sBACA,SACA,iBACA,QACA,UACA,qBACA,KACA,oBACA,QACA,cACA,KACA,uBACA,OACA,oBACA,QACA,YACA,QACA,qBACA,KACA,cACA,QACA,eACA,OACA,YACA,QAEFC,iBAAoB,CAClB,eACA,KACA,oBACA,KACA,wBACA,KACA,UACA,KACA,QACA,kBACA,KACA,mBACA,KACA,iBACA,KACA,QACA,iBACA,KACA,oBACA,KACA,SACA,KACA,sBACA,KACA,SACA,IACA,gBACA,KACA,iBACA,KACA,mBACA,KACA,OACA,IACA,iBACA,cACA,KACA,kBACA,KACA,kBACA,KACA,kBACA,KACA,SACA,IACA,mBACA,KACA,QACA,IACA,eACA,KACA,eACA,KACA,oBACA,KACA,eACA,KACA,sBACA,KACA,cACA,KACA,cACA,IACA,QACA,YACA,IACA,kBACA,KACA,eACA,KACA,YACA,KACA,SACA,IACA,mBACA,KACA,aACA,KACA,mBACA,MAEFC,OAAU,CACR,QACA,OACA,OACA,wBACA,OACA,SACA,OACA,WACA,OACA,UACA,OACA,WACA,OACA,QACA,OACA,YACA,OACA,QACA,OACA,UACA,OACA,YACA,OACA,WACA,OACA,SACA,OACA,UACA,OACA,WACA,OACA,QACA,OACA,sBACA,OACA,SACA,OACA,qBACA,OACA,SACA,OACA,OACA,WACA,OACA,SACA,OACA,SACA,OACA,OACA,YACA,OACA,UACA,OACA,WACA,OACA,UACA,OACA,aACA,OACA,WACA,OACA,uBACA,OACA,UACA,OACA,WACA,OACA,WACA,OACA,aACA,OACA,SACA,OACA,UACA,OACA,QACA,OACA,WACA,OACA,WACA,OACA,MACA,OACA,SACA,OACA,UACA,OACA,SACA,OACA,SACA,OACA,WACA,OACA,mBACA,OACA,YACA,OACA,OACA,wBACA,OACA,yBACA,OACA,WACA,OACA,SACA,OACA,UACA,OACA,WACA,OACA,WACA,OACA,aACA,OACA,QACA,OACA,SACA,OACA,YACA,OACA,MACA,OACA,QACA,OACA,SACA,OACA,QACA,OACA,WACA,OACA,WACA,OACA,OACA,SACA,OACA,SACA,OACA,WACA,OACA,YACA,OACA,UACA,OACA,aACA,OACA,UACA,OACA,gBACA,OACA,eACA,OACA,gBACA,OACA,mBACA,OACA,uBACA,OACA,OACA,OACA,OACA,YACA,OACA,MACA,OACA,UACA,OACA,UACA,OACA,YACA,OACA,cACA,OACA,OACA,MACA,OACA,QACA,OACA,QACA,OACA,WACA,OACA,gBACA,OACA,aACA,OACA,oBACA,OACA,aACA,OACA,cACA,OACA,oBACA,OACA,aACA,OACA,QACA,OACA,QACA,OACA,UACA,OACA,eACA,OACA,YACA,OACA,cACA,OACA,WACA,OACA,aACA,OACA,kBACA,OACA,SACA,OACA,QACA,OACA,YACA,OACA,aACA,OACA,UACA,OACA,UACA,OACA,UACA,OACA,cACA,OACA,UACA,OACA,eACA,OACA,UACA,OACA,YACA,OACA,eACA,OACA,SACA,OACA,UACA,OACA,WACA,OACA,SACA,OACA,WACA,OACA,WACA,OACA,QACA,OACA,QACA,OACA,SACA,OACA,SACA,OACA,SACA,OACA,OACA,UACA,OACA,WACA,OACA,UACA,OACA,WACA,OACA,MACA,OACA,cACA,OACA,KACA,OACA,mBACA,SAGJ7pB,MAAM8P,UAAUzZ,KAAKyzB,MAAMxwB,GAAKqwB,MAAOrwB,GAAKswB,kBAC5CtwB,GAAKywB,GAAKzwB,GAAKswB,iBACftwB,GAAK0wB,GAAK1wB,GAAK2wB,kBAAoB3wB,GAAK4wB,IAAM5wB,GAAKuwB,OAEnD,IAAIM,GAAOrX,GAAOhD,UAEdsa,GAAwB,SAA+BpC,GACzDxnB,KAAKwnB,OAASA,EACdxnB,KAAK6pB,WAAa,OAASrC,EAAOnuB,QAAQkX,aAAe,EAAI,KAAO,KAAOiX,EAAOnuB,QAAQkX,aAAe,EAAI,IAAM,IACnHvQ,KAAKgP,OAAS,GACdhP,KAAKkkB,MAAQ,GACblkB,KAAKU,MAAQ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"}